{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "twsmith@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "video/webm", "id": 8748219}], "classification": "Components", "creator": "twsmith@mozilla.com", "mentors_detail": [], "depends_on": [], "cf_has_str": "---", "cf_user_story": "", "cf_backlog": "---", "cf_tracking_firefox_relnote": "---", "platform": "All", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": ["csectype-uninitialized", "testcase"], "cc_detail": [{"email": "abillings@mozilla.com", "id": 280903, "name": "abillings@mozilla.com", "real_name": "Al Billings [:abillings]"}, {"email": "ajones@mozilla.com", "id": 443088, "name": "ajones@mozilla.com", "real_name": "Anthony Jones (:kentuckyfriedtakahe, :k17e)"}, {"email": "gsquelart@mozilla.com", "id": 515575, "name": "gsquelart@mozilla.com", "real_name": "Gerald Squelart [:gerald]"}, {"email": "jyavenard@mozilla.com", "id": 512198, "name": "jyavenard@mozilla.com", "real_name": "Jean-Yves Avenard [:jya]"}, {"email": "kinetik@flim.org", "id": 274575, "name": "kinetik@flim.org", "real_name": "Matthew Gregan [:kinetik]"}], "cf_last_resolved": "2016-05-20T02:54:37Z", "votes": 0, "severity": "critical", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 5, "comments": [{"text": "Created attachment 8748219\ntest_case.webm\n\nI found this while fuzzing nestegg commit 046e10f7607f943e5889c05fd6c7ab8bc2c614a3\n\nRunning the attached test case in a MSan build or under Valgrind will trigger the following error:\n\n==14109==WARNING: MemorySanitizer: use-of-uninitialized-value\n    #0 0x7fedd5e9f235 in ne_find_cue_point_for_tstamp /home/user/code/nestegg/src/nestegg.c:1582:9\n    #1 0x7fedd5e9f235 in nestegg_track_seek /home/user/code/nestegg/src/nestegg.c:2100\n    #2 0x7fedd5e899cf in fuzz /home/user/code/nestegg/test/test.c:155:7\n    #3 0x7fedd5e8af07 in main /home/user/code/nestegg/test/test.c:261:5\n    #4 0x7fedd4cfbec4 in __libc_start_main /build/eglibc-3GlaMS/eglibc-2.19/csu/libc-start.c:287\n    #5 0x7fedd5e2a51e in _start (/home/user/Desktop/nestegg/test_msan+0x2051e)", "author": "twsmith@mozilla.com", "id": 11378073, "time": "2016-05-03T16:16:47Z"}, {"text": "It's a bug in test/test.c, which still exists in the modified version you're using to fuzz with (it'd be useful to add those changes upstream, so please make them public somehow):\n\nThe input file is basically garbage, but the problem is test/test.c calls:\n\n  nestegg_duration(ctx, &duration);\n\n...without checking the return value (-1 in this case), then proceeds to use the value of duration in nestegg_track_seek here:\n\n  r = nestegg_track_seek(ctx, 0, duration / 2);\n\nInitializating duration to 0 is sufficient to run the rest of the tests and silences the warnings Valgrind produces.", "author": "kinetik@flim.org", "id": 11379626, "time": "2016-05-03T23:19:32Z"}, {"text": "Removing s-s on the basis of comment #1.\n\nI'll fix test/test.c upstream.", "author": "kinetik@flim.org", "id": 11379628, "time": "2016-05-03T23:20:16Z"}, {"text": "Sorry I should have run with '--track-origins=yes'.\n\nI have verified that the parameter is also initialized when used in the browser.", "author": "twsmith@mozilla.com", "id": 11382492, "time": "2016-05-04T19:01:34Z"}, {"text": "Fixed upstream: https://github.com/kinetiknz/nestegg/commit/d493c8a7abd05c6911cd546fd6b5c82b366f5203\n\nI'll mark this as closed since there's nothing to do for Gecko.", "author": "kinetik@flim.org", "id": 11424336, "time": "2016-05-20T02:54:37Z"}], "id": 1269776, "priority": "P2", "cc": ["abillings@mozilla.com", "ajones@mozilla.com", "gsquelart@mozilla.com", "jyavenard@mozilla.com", "kinetik@flim.org"], "cf_crash_signature": "", "version": "49 Branch", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_firefox59": "---", "last_change_time": "2016-05-20T02:54:37Z", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [793199], "qa_contact": "", "creation_time": "2016-05-03T16:16:47Z", "cf_status_firefox_esr52": "---", "component": "Audio/Video: Playback", "assigned_to_detail": {"email": "kinetik@flim.org", "id": 274575, "name": "kinetik@flim.org", "real_name": "Matthew Gregan [:kinetik]"}, "cf_status_firefox49": "affected", "groups": [], "cf_status_firefox60": "---", "target_milestone": "---", "is_cc_accessible": true, "cf_rank": null, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "twsmith@mozilla.com", "id": 486634, "name": "twsmith@mozilla.com", "real_name": "Tyson Smith [:tsmith]"}, "whiteboard": "", "mentors": [], "summary": "nestegg: use-of-uninitialized-value in [@ne_find_cue_point_for_tstamp]", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "assigned_to": "kinetik@flim.org", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "abillings@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(kinetik@flim.org)"}], "who": "abillings@mozilla.com", "when": "2016-05-03T17:07:48Z"}, {"changes": [{"removed": "needinfo?(kinetik@flim.org)", "field_name": "flagtypes.name", "added": ""}], "who": "kinetik@flim.org", "when": "2016-05-03T23:19:32Z"}, {"changes": [{"removed": "media-core-security", "field_name": "groups", "added": ""}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "kinetik@flim.org"}], "who": "kinetik@flim.org", "when": "2016-05-03T23:20:16Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}, {"removed": "", "field_name": "cc", "added": "ajones@mozilla.com"}], "who": "ajones@mozilla.com", "when": "2016-05-18T05:17:52Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2016-05-20 02:54:37"}], "who": "kinetik@flim.org", "when": "2016-05-20T02:54:37Z"}], "resolution": "FIXED", "op_sys": "All", "cf_fx_points": "---", "cf_blocking_fennec": "---"}