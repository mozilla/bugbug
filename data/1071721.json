{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "kyle@nonpolynomial.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-09-23T20:06:08Z", "type_id": 4, "creation_date": "2014-09-23T18:01:19Z", "id": 985449, "setter": "bent.mozilla@gmail.com"}, {"status": "+", "name": "approval-mozilla-aurora", "modification_date": "2014-09-23T20:08:57Z", "type_id": 720, "creation_date": "2014-09-23T20:08:16Z", "id": 985589, "setter": "khuey@kylehuey.com"}], "content_type": "text/plain", "id": 8493889}], "classification": "Components", "creator": "kyle@nonpolynomial.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox33": "unaffected", "cf_has_str": "---", "cf_status_firefox35": "fixed", "cf_status_firefox34": "fixed", "mentors": [], "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86_64", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "cf_fx_iteration": "---", "summary": "SettingsLock objects leak by only calling destroyDOMRequestHandler during inner-window-closed", "cf_last_resolved": "2014-09-24T19:54:46Z", "votes": 0, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 7, "comments": [{"text": "[Blocking Requested - why for this release]:\n\nSettingsLock objects never explicitly call destroyDOMRequestHelper when their existence ends (after receiving an Finalize::OK or Finalize::KO message). This means that the message manager will hold settings locks open until inner-window-destroyed. In the case of B2G, this means that locks existing in background apps (like system) will live forever, causing leaks.", "author": "kyle@nonpolynomial.com", "id": 9348841, "time": "2014-09-23T17:52:40Z"}, {"text": "Created attachment 8493889\nPatch 1 (v1) - Call destroyDOMRequestHelper on SettingsLock after transaction ends", "author": "kyle@nonpolynomial.com", "id": 9348910, "time": "2014-09-23T18:01:19Z"}, {"text": "Checked this by flashing flame, going through FTU, then running get_about_memory.py and looking for open settings locks (basically, grepping for \"SettingsLock <no private>\":\n\nBefore patch - 187 occurrences\nAfter patch - 8 occurrences\n\nI'm going to do root traces on the 8 occurrences after the patch to make sure those aren't leaks too, but there's a good chance those are just locks held by various objects as members or something.", "author": "kyle@nonpolynomial.com", "id": 9349422, "time": "2014-09-23T19:24:56Z"}, {"text": "Comment on attachment 8493889\nPatch 1 (v1) - Call destroyDOMRequestHelper on SettingsLock after transaction ends\n\nApproval Request Comment\n[Feature/regressing bug #]: Bug 900551\n[User impact if declined]: Memory leaks\n[Describe test coverage new/current, TBPL]: It's believed that this currently takes down stability testing, so if that works...\n[Risks and why]: None\n[String/UUID change made/needed]: None", "author": "kyle@nonpolynomial.com", "id": 9349623, "time": "2014-09-23T20:08:16Z"}, {"text": "https://hg.mozilla.org/integration/b2g-inbound/rev/3c4b65dc595a", "author": "kyle@nonpolynomial.com", "id": 9349651, "time": "2014-09-23T20:15:22Z"}, {"text": "Kyle landed this on Aurora.\nhttps://hg.mozilla.org/releases/mozilla-aurora/rev/96e15bbed7ab", "author": "ryanvm@gmail.com", "id": 9350558, "time": "2014-09-23T22:37:21Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/3c4b65dc595a", "author": "ryanvm@gmail.com", "id": 9355850, "time": "2014-09-24T19:54:46Z"}], "id": 1071721, "priority": "--", "cc": ["anygregor@gmail.com", "bent.mozilla@gmail.com", "continuation@gmail.com", "khuey@kylehuey.com", "lissyx+mozillians@lissyx.dyndns.org"], "cf_crash_signature": "", "version": "25 Branch", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_firefox59": "---", "cf_status_b2g_2_2": "fixed", "last_change_time": "2014-12-05T18:41:05Z", "cf_platform_rel": "---", "product": "Core", "cf_status_b2g_2_0m": "unaffected", "blocks": [1064800, 1107982], "qa_contact": "", "creation_time": "2014-09-23T17:52:40Z", "cf_status_firefox_esr52": "---", "component": "DOM: Device Interfaces", "assigned_to_detail": {"email": "kyle@nonpolynomial.com", "id": 424719, "name": "kyle@nonpolynomial.com", "real_name": "Kyle Machulis [:qdot] [:kmachulis] (if a patch has no decent commit message, automatic r-)"}, "groups": [], "cf_status_firefox60": "---", "cf_blocking_b2g": "2.1+", "target_milestone": "2.1 S5 (26sep)", "is_cc_accessible": true, "cf_rank": null, "cf_status_thunderbird_esr52": "---", "cf_status_b2g_1_4": "unaffected", "url": "", "creator_detail": {"email": "kyle@nonpolynomial.com", "id": 424719, "name": "kyle@nonpolynomial.com", "real_name": "Kyle Machulis [:qdot] [:kmachulis] (if a patch has no decent commit message, automatic r-)"}, "whiteboard": "[systemsfe][MemShrink]", "cf_status_b2g_2_1": "fixed", "cf_status_b2g_2_0": "unaffected", "cc_detail": [{"email": "anygregor@gmail.com", "id": 314734, "name": "anygregor@gmail.com", "real_name": "Gregor Wagner [:gwagner]"}, {"email": "bent.mozilla@gmail.com", "id": 200444, "name": "bent.mozilla@gmail.com", "real_name": "Ben Turner (not reading bugmail, use the needinfo flag!)"}, {"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, {"email": "khuey@kylehuey.com", "id": 336670, "name": "khuey@kylehuey.com", "real_name": "Kyle Huey [:khuey] (Exited; not receiving bugmail, email if necessary)"}, {"email": "lissyx+mozillians@lissyx.dyndns.org", "id": 41385, "name": "lissyx+mozillians@lissyx.dyndns.org", "real_name": "Alexandre LISSY :gerard-majax"}], "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "assigned_to": "kyle@nonpolynomial.com", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "khuey@kylehuey.com"}, {"removed": "2.1?", "field_name": "cf_blocking_b2g", "added": "2.1+"}], "who": "khuey@kylehuey.com", "when": "2014-09-23T17:56:18Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "continuation@gmail.com"}, {"removed": "[systemsfe]", "field_name": "whiteboard", "added": "[systemsfe][MemShrink]"}], "who": "continuation@gmail.com", "when": "2014-09-23T18:00:27Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8493889, "added": "review?(bent.mozilla@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "bent.mozilla@gmail.com"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "kyle@nonpolynomial.com"}], "who": "kyle@nonpolynomial.com", "when": "2014-09-23T18:01:19Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bent.mozilla@gmail.com)", "attachment_id": 8493889, "added": "review+"}], "who": "bent.mozilla@gmail.com", "when": "2014-09-23T20:06:08Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8493889, "added": "approval-mozilla-aurora?"}], "who": "kyle@nonpolynomial.com", "when": "2014-09-23T20:08:16Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-aurora?", "attachment_id": 8493889, "added": "approval-mozilla-aurora+"}], "who": "khuey@kylehuey.com", "when": "2014-09-23T20:08:57Z"}, {"changes": [{"removed": "---", "field_name": "cf_status_firefox33", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox34", "added": "fixed"}, {"removed": "---", "field_name": "cf_status_firefox35", "added": "fixed"}, {"removed": "affected", "field_name": "cf_status_b2g_2_1", "added": "fixed"}, {"removed": "affected", "field_name": "cf_status_b2g_2_2", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2014-09-23T22:37:21Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2014-09-24 12:54:46"}], "who": "ryanvm@gmail.com", "when": "2014-09-24T19:54:46Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1107982"}], "who": "kyle@nonpolynomial.com", "when": "2014-12-05T18:41:05Z"}], "resolution": "FIXED", "op_sys": "Linux", "cf_fx_points": "---", "cf_blocking_fennec": "---"}