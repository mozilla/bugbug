{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "bas@basschouten.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-11-18T19:55:48Z", "type_id": 4, "creation_date": "2014-11-18T19:47:17Z", "id": 1036655, "setter": "jmuizelaar@mozilla.com"}], "content_type": "text/plain", "id": 8524795}, {"creator": "neil@httl.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-11-23T23:11:35Z", "type_id": 4, "creation_date": "2014-11-22T16:07:16Z", "id": 1040567, "setter": "bas@basschouten.com"}], "content_type": "text/plain", "id": 8527194}], "classification": "Components", "creator": "bas@basschouten.com", "cc": ["bas@basschouten.com", "ewong@pw-wspx.org", "jmuizelaar@mozilla.com"], "depends_on": [], "creation_time": "2014-11-18T19:45:29Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "All", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Direct2D 1.1 doesn't clean up well after itself", "id": 1101130, "assigned_to_detail": {"email": "bas@basschouten.com", "id": 272464, "name": "bas@basschouten.com", "real_name": "Bas Schouten (:bas.schouten)"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "bas@basschouten.com", "comment_count": 7, "comments": [{"text": "In several places Direct2D 1.1 is not cleaning up the resources it uses on shutdown. We should fix this so that the Debug layers for D2D and D3D11 may give us useful leak info when we're looking for it.", "author": "bas@basschouten.com", "id": 9606759, "time": "2014-11-18T19:45:29Z"}, {"text": "Created attachment 8524795\nMake Direct2D 1.1 clean up its resources on shutdown", "author": "bas@basschouten.com", "id": 9606770, "time": "2014-11-18T19:47:17Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/c3fbfee4a06b", "author": "cbook@mozilla.com", "id": 9615747, "time": "2014-11-20T10:45:39Z"}, {"text": "Comment on attachment 8524795\nMake Direct2D 1.1 clean up its resources on shutdown\n\n> void\n> Factory::D2DCleanup()\n> {\n>+  if (mD2D1Device) {\n>+    mD2D1Device->Release();\n>+    mD2D1Device = nullptr;\n>+  }\n>   DrawTargetD2D::CleanupD2D();\n>+  DrawTargetD2D1::CleanupD2D();\n> }\nThis bit seems to be missing a #ifdef USE_D2D1_1\n(I'll post a patch if I can get my build to finish.)", "author": "neil@httl.net", "id": 9625212, "time": "2014-11-22T12:38:02Z"}, {"text": "Created attachment 8527194\nBustage fix", "author": "neil@httl.net", "id": 9625356, "time": "2014-11-22T16:07:16Z"}, {"text": "*** Bug 1103868 has been marked as a duplicate of this bug. ***", "author": "ewong@pw-wspx.org", "id": 9627910, "time": "2014-11-24T08:39:05Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/d2da8df5dd04", "author": "cbook@mozilla.com", "id": 9628692, "time": "2014-11-24T13:17:47Z"}], "cf_last_resolved": "2014-11-20T10:45:39Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2014-11-25T21:53:09Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Graphics", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla36", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "bas@basschouten.com", "id": 272464, "name": "bas@basschouten.com", "real_name": "Bas Schouten (:bas.schouten)"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "bas@basschouten.com", "id": 272464, "name": "bas@basschouten.com", "real_name": "Bas Schouten (:bas.schouten)"}, {"email": "ewong@pw-wspx.org", "id": 95437, "name": "ewong@pw-wspx.org", "real_name": "Edmund Wong (:ewong)"}, {"email": "jmuizelaar@mozilla.com", "id": 309398, "name": "jmuizelaar@mozilla.com", "real_name": "Jeff Muizelaar [:jrmuizel]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "jmuizelaar@mozilla.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8524795, "added": "review?(jmuizelaar@mozilla.com)"}], "who": "bas@basschouten.com", "when": "2014-11-18T19:47:17Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jmuizelaar@mozilla.com)", "attachment_id": 8524795, "added": "review+"}], "who": "jmuizelaar@mozilla.com", "when": "2014-11-18T19:55:48Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla36"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2014-11-20 02:45:39"}], "who": "cbook@mozilla.com", "when": "2014-11-20T10:45:39Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bas@basschouten.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8527194, "added": "review?(jmuizelaar@mozilla.com), review?(bas@basschouten.com)"}], "who": "neil@httl.net", "when": "2014-11-22T16:07:16Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bas@basschouten.com)", "attachment_id": 8527194, "added": "review+"}], "who": "bas@basschouten.com", "when": "2014-11-23T23:11:35Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ewong@pw-wspx.org"}], "who": "ewong@pw-wspx.org", "when": "2014-11-24T08:39:05Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jmuizelaar@mozilla.com)", "attachment_id": 8527194, "added": ""}], "who": "jmuizelaar@mozilla.com", "when": "2014-11-25T21:53:09Z"}], "resolution": "FIXED", "op_sys": "All", "cf_fx_points": "---", "cf_blocking_fennec": "---"}