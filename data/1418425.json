{"cf_tracking_thunderbird_esr52": "---", "status": "VERIFIED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Components", "creator": "sledru@mozilla.com", "cc": ["bhearsum@mozilla.com", "bugspam.Callek@gmail.com", "gps@mozilla.com", "jcristau@mozilla.com", "jmjeffery@embarqmail.com", "mcastelluccio@mozilla.com", "mh+mozilla@glandium.org", "robert.strong.bugs@gmail.com", "ted@mielczarek.org", "VYV03354@nifty.ne.jp"], "depends_on": [], "creation_time": "2017-11-17T18:15:18Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "summary": "Remove bz2 and use the zlib crc32 function instead", "cf_last_resolved": "2018-05-08T12:57:46Z", "attachments": [{"creator": "sledru@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-12-12T14:25:12Z", "type_id": 4, "creation_date": "2017-12-06T01:30:15Z", "id": 1691431, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8929542}, {"creator": "sledru@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-01-12T06:59:23Z", "type_id": 4, "creation_date": "2018-01-09T07:35:58Z", "id": 1700949, "setter": "mh+mozilla@glandium.org"}, {"status": "+", "name": "review", "modification_date": "2018-04-25T20:03:21Z", "type_id": 4, "creation_date": "2018-04-23T13:48:50Z", "id": 1747670, "setter": "robert.strong.bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8931717}, {"creator": "sledru@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-12-06T01:33:14Z", "type_id": 4, "creation_date": "2017-12-05T15:36:54Z", "id": 1691095, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8931718}, {"creator": "sledru@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-12-06T01:28:43Z", "type_id": 4, "creation_date": "2017-12-05T15:36:54Z", "id": 1691094, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8931986}, {"creator": "sledru@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-12-06T01:33:39Z", "type_id": 4, "creation_date": "2017-12-05T15:36:54Z", "id": 1691096, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8934543}, {"creator": "sledru@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-08T06:48:26Z", "type_id": 4, "creation_date": "2018-05-08T06:37:35Z", "id": 1753859, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8970168}], "assigned_to_detail": {"email": "sledru@mozilla.com", "id": 495955, "name": "sledru@mozilla.com", "real_name": "Sylvestre Ledru [:sylvestre]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "comments": [{"text": "https://marco-c.github.io/code-coverage-reports/#modules/libbz2/src shows that most of the files are not used.\nRemoving them and building it seems to be ok!", "author": "sledru@mozilla.com", "id": 12853177, "time": "2017-11-17T18:15:18Z"}, {"text": "I took the option to remove the files.\nI could just remove them from moz.build but this would be misleading.", "author": "sledru@mozilla.com", "id": 12853183, "time": "2017-11-17T18:17:57Z"}, {"text": "Created attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview commit: https://reviewboard.mozilla.org/r/200818/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/200818/", "author": "sledru@mozilla.com", "id": 12853184, "time": "2017-11-17T18:18:05Z"}, {"text": "I suspect they're mostly used in the mar tools and the updater. Are those covered by the coverage reports?", "author": "ted@mielczarek.org", "id": 12853289, "time": "2017-11-17T19:03:20Z"}, {"text": "The try (I guess the js jit error are unrelated):\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=b7cb4a9b5d706d23282ebe57c18de04e8c58897f", "author": "sledru@mozilla.com", "id": 12853343, "time": "2017-11-17T19:22:06Z"}, {"text": "Is all the updater code in toolkit/mozapps/update? We do have coverage for those files.", "author": "mcastelluccio@mozilla.com", "id": 12853664, "time": "2017-11-17T21:13:38Z"}, {"text": "The updater doesn't use bz2 compression as of bug 641212. The remaining uses of the bz2 codebase are for BZ2_crc32Table (in the updater and in bsdiff). I'm pretty sure we could even replace the crc32 implementation in both to not use the symbol, entirely remove bz2 and the --enable-system-bz2 option.", "author": "mh+mozilla@glandium.org", "id": 12853772, "time": "2017-11-17T21:57:26Z"}, {"text": "Heck, there's even a crc32 function in zlib that we could use instead.", "author": "mh+mozilla@glandium.org", "id": 12853774, "time": "2017-11-17T21:58:08Z"}, {"text": "Even better! I will do that!", "author": "sledru@mozilla.com", "id": 12854123, "time": "2017-11-17T23:35:14Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nPer recent comments, it looks like new patches are incoming. So I'm not even going to look at this.", "author": "gps@mozilla.com", "id": 12859982, "time": "2017-11-20T21:07:39Z"}, {"text": "Created attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview commit: https://reviewboard.mozilla.org/r/202854/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/202854/", "author": "sledru@mozilla.com", "id": 12871457, "time": "2017-11-24T16:33:14Z"}, {"text": "Created attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview commit: https://reviewboard.mozilla.org/r/202856/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/202856/", "author": "sledru@mozilla.com", "id": 12871458, "time": "2017-11-24T16:33:14Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/1-2/", "author": "sledru@mozilla.com", "id": 12871459, "time": "2017-11-24T16:33:14Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/1-2/", "author": "sledru@mozilla.com", "id": 12871587, "time": "2017-11-24T17:40:35Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/1-2/", "author": "sledru@mozilla.com", "id": 12871588, "time": "2017-11-24T17:40:35Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/2-3/", "author": "sledru@mozilla.com", "id": 12871637, "time": "2017-11-24T18:03:37Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/2-3/", "author": "sledru@mozilla.com", "id": 12871638, "time": "2017-11-24T18:03:37Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review208246\n\n::: other-licenses/bsdiff/bsdiff.c:40\n(Diff revision 2)\n> +// Do not use the by-four optim\n> +#define TBLS 1\n> +#include \"zutil.h\"\n> +#include \"crc32.h\"\n\nzlib.h exports a crc32 function, just use that (just be aware that it works slightly differently, see the documentation in zlib.h).\n\n::: other-licenses/bsdiff/moz.build:20\n(Diff revision 2)\n>          'ws2_32',\n>      ]\n>      USE_STATIC_LIBS = True\n>  \n>  LOCAL_INCLUDES += [\n> +    '/modules/zlib/src',\n\nUse MOZ_ZLIB_CFLAGS", "author": "mh+mozilla@glandium.org", "id": 12872086, "time": "2017-11-24T21:33:08Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nhttps://reviewboard.mozilla.org/r/202854/#review208248\n\nSame comments as previous patch.", "author": "mh+mozilla@glandium.org", "id": 12872088, "time": "2017-11-24T21:33:38Z"}, {"text": "Created attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview commit: https://reviewboard.mozilla.org/r/203044/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/203044/", "author": "sledru@mozilla.com", "id": 12873629, "time": "2017-11-26T22:49:15Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/2-3/", "author": "sledru@mozilla.com", "id": 12873630, "time": "2017-11-26T22:49:15Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/3-4/", "author": "sledru@mozilla.com", "id": 12873631, "time": "2017-11-26T22:49:15Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/3-4/", "author": "sledru@mozilla.com", "id": 12873632, "time": "2017-11-26T22:49:15Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review208316\n\n::: other-licenses/bsdiff/bsdiff.c:43\n(Diff revision 3)\n>  #define MIN(x,y) (((x)<(y)) ? (x) : (y))\n>  \n> -/*---------------------------------------------------------------------------*/\n> -\n> -/* This variable lives in libbz2.  It's declared in bzlib_private.h, so we just\n> - * declare it here to avoid including that entire header file.\n> +#define TBLS 1\n> +#include \"zutil.h\"\n> +#include \"crc32.h\"\n> +#include \"zlib.h\"\n\nyou shouldn't need more than zlib.h, an you shouldn't need to define TBLS.\n\n::: other-licenses/bsdiff/bsdiff.c:226\n(Diff revision 3)\n>  \t\t0, 0, 0, 0, 0, 0\n>  \t};\n>  \n>  \tuint32_t numtriples;\n>  \n> +        unsigned int crc = crc32(0L, Z_NULL, 0);\n\nyou want to set scrc here, or change the second call to use the result of this.", "author": "mh+mozilla@glandium.org", "id": 12873639, "time": "2017-11-26T23:14:10Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review208316\n\n> you shouldn't need more than zlib.h, an you shouldn't need to define TBLS.\n\nYeah, this commit was for testing the builds on other platforms. Wasn't ready for review :)", "author": "sledru@mozilla.com", "id": 12876084, "time": "2017-11-27T10:25:01Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/1-2/", "author": "sledru@mozilla.com", "id": 12876161, "time": "2017-11-27T11:13:14Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/3-4/", "author": "sledru@mozilla.com", "id": 12876162, "time": "2017-11-27T11:13:14Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/4-5/", "author": "sledru@mozilla.com", "id": 12876163, "time": "2017-11-27T11:13:14Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/4-5/", "author": "sledru@mozilla.com", "id": 12876164, "time": "2017-11-27T11:13:14Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=aeabcbddd5da0dcb7ee11245e7bff90dbdfb642f", "author": "sledru@mozilla.com", "id": 12877228, "time": "2017-11-27T18:02:16Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=aa365c3f9eced9e5566277a3d0b40f51ed88884e", "author": "sledru@mozilla.com", "id": 12877632, "time": "2017-11-27T19:56:59Z"}, {"text": "Created attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview commit: https://reviewboard.mozilla.org/r/205448/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/205448/", "author": "sledru@mozilla.com", "id": 12898547, "time": "2017-12-05T14:52:43Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nhttps://reviewboard.mozilla.org/r/203044/#review211246", "author": "mh+mozilla@glandium.org", "id": 12900611, "time": "2017-12-06T01:28:43Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review211248\n\n::: other-licenses/bsdiff/moz.build:22\n(Diff revision 4)\n>      USE_STATIC_LIBS = True\n>  \n>  LOCAL_INCLUDES += [\n>      '/toolkit/mozapps/update/updater',\n>  ]\n> +if not CONFIG['MOZ_ZLIB_CFLAGS']:\n\nyou might as well skip the not and invert the if/else branches.\n\n::: other-licenses/bsdiff/moz.build:27\n(Diff revision 4)\n> +if not CONFIG['MOZ_ZLIB_CFLAGS']:\n> +    LOCAL_INCLUDES += ['/modules/zlib/src']\n> +else:\n> +    HOST_CFLAGS += CONFIG['MOZ_ZLIB_CFLAGS']\n>  \n> -HOST_CXXFLAGS += CONFIG['MOZ_BZ2_CFLAGS']\n> +HOST_USE_LIBS += [ 'hostzlib' ]\n\n--with-system-zlib builds won't have that hostzlib library, and will fail as a consequence.", "author": "mh+mozilla@glandium.org", "id": 12900613, "time": "2017-12-06T01:30:15Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nhttps://reviewboard.mozilla.org/r/202854/#review211250\n\nNote that I'm likely to kill update-common.mozbuild soon.\n\n::: toolkit/mozapps/update/updater/updater-common.build:107\n(Diff revision 5)\n>  LOCAL_INCLUDES += [\n>      '/toolkit/mozapps/update/common',\n>      '/xpcom/base', # for nsVersionComparator.cpp\n>  ]\n>  \n> +if not CONFIG['MOZ_ZLIB_CFLAGS']:\n\nSame comment as previous patch, you can invert the if/else branches.\n\n::: toolkit/mozapps/update/updater/updater-common.build:110\n(Diff revision 5)\n>  ]\n>  \n> +if not CONFIG['MOZ_ZLIB_CFLAGS']:\n> +    LOCAL_INCLUDES += ['/modules/zlib/src']\n> +else:\n> +    HOST_CXXFLAGS += CONFIG['MOZ_ZLIB_CFLAGS']\n\nThere's not host source built here. You want CXXFLAGS.", "author": "mh+mozilla@glandium.org", "id": 12900617, "time": "2017-12-06T01:32:22Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nhttps://reviewboard.mozilla.org/r/202856/#review211254", "author": "mh+mozilla@glandium.org", "id": 12900619, "time": "2017-12-06T01:33:14Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nhttps://reviewboard.mozilla.org/r/205448/#review211256", "author": "mh+mozilla@glandium.org", "id": 12900620, "time": "2017-12-06T01:33:39Z"}, {"text": "(In reply to Mike Hommey [:glandium] from comment #34)\n> Comment on attachment 8931717\n> Bug 1418425 - Update the updater to use libz instead of bz2 for the crc algo\n> \n> https://reviewboard.mozilla.org/r/202854/#review211250\n> \n> Note that I'm likely to kill update-common.mozbuild soon.\n\nAh no, that's another updater-related file that I'm going to kill, you can ignore this comment.", "author": "mh+mozilla@glandium.org", "id": 12900630, "time": "2017-12-06T01:37:38Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/2-3/", "author": "sledru@mozilla.com", "id": 12902233, "time": "2017-12-06T15:24:27Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/4-5/", "author": "sledru@mozilla.com", "id": 12902234, "time": "2017-12-06T15:24:27Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/5-6/", "author": "sledru@mozilla.com", "id": 12902235, "time": "2017-12-06T15:24:27Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/5-6/", "author": "sledru@mozilla.com", "id": 12902236, "time": "2017-12-06T15:24:27Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/1-2/", "author": "sledru@mozilla.com", "id": 12902237, "time": "2017-12-06T15:24:27Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review212038\n\n::: other-licenses/bsdiff/moz.build:23\n(Diff revision 5)\n>  \n>  LOCAL_INCLUDES += [\n>      '/toolkit/mozapps/update/updater',\n>  ]\n> +if CONFIG['MOZ_ZLIB_CFLAGS']:\n> +    HOST_CFLAGS += CONFIG['MOZ_ZLIB_CFLAGS']\n\nwithout some ldflags this is going to fail --with-system-zlib. Please do a linux try build with --with-system-zlib set (although try without patches first, to check those builds actually work on automation).", "author": "mh+mozilla@glandium.org", "id": 12906592, "time": "2017-12-07T22:01:05Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nhttps://reviewboard.mozilla.org/r/202854/#review212042", "author": "mh+mozilla@glandium.org", "id": 12906604, "time": "2017-12-07T22:03:34Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/3-4/", "author": "sledru@mozilla.com", "id": 12908033, "time": "2017-12-08T12:35:52Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/5-6/", "author": "sledru@mozilla.com", "id": 12908034, "time": "2017-12-08T12:35:52Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/6-7/", "author": "sledru@mozilla.com", "id": 12908035, "time": "2017-12-08T12:35:52Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/6-7/", "author": "sledru@mozilla.com", "id": 12908036, "time": "2017-12-08T12:35:52Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/2-3/", "author": "sledru@mozilla.com", "id": 12908037, "time": "2017-12-08T12:35:52Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/4-5/", "author": "sledru@mozilla.com", "id": 12908041, "time": "2017-12-08T12:38:13Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/6-7/", "author": "sledru@mozilla.com", "id": 12908042, "time": "2017-12-08T12:38:13Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/7-8/", "author": "sledru@mozilla.com", "id": 12908043, "time": "2017-12-08T12:38:13Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/7-8/", "author": "sledru@mozilla.com", "id": 12908044, "time": "2017-12-08T12:38:13Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/3-4/", "author": "sledru@mozilla.com", "id": 12908045, "time": "2017-12-08T12:38:13Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review212948", "author": "mh+mozilla@glandium.org", "id": 12914996, "time": "2017-12-12T14:25:12Z"}, {"text": "Pushed by sledru@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/656649ecfb11\nCompile zlib as host lib r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/fd4af65bf966\nUpdate bsdiff to use libz instead of bz2 for the crc algo r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/1d798e14223b\nUpdate the updater to use libz instead of bz2 for the crc algo r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/f29f7bb3059a\nRemove libbz2 files as we were only using it for crc32 as the updater moved to lzma r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/228743018ded\nDo not build bsdiff on Android. The updater doesn't use it (we ship apk directly) r=glandium", "author": "pulsebot@bots.tld", "id": 12914998, "time": "2017-12-12T14:27:51Z"}, {"text": "Backed out 5 changesets (bug 1418425) for Windows updater bustages and xpshell failures on toolkit/mozapps/update/tests/unit_base_updater/marSuccessPartial.js r=backout on a CLOSED TREE\n\nFailure push: https://treeherder.mozilla.org/#/jobs?repo=autoland&revision=228743018ded362f84bd71fa97f688068422abab\n\nRecent failure log: https://treeherder.mozilla.org/logviewer.html#/?repo=autoland&job_id=151286727&lineNumber=8052\n\nBackout: https://hg.mozilla.org/integration/autoland/rev/c17fd6ccda7eec43bad45ec1f4fbb7ad7f1ee05f", "author": "apavel@mozilla.com", "id": 12915114, "time": "2017-12-12T15:52:41Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/5-6/", "author": "sledru@mozilla.com", "id": 12944211, "time": "2018-01-04T13:49:41Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/7-8/", "author": "sledru@mozilla.com", "id": 12944212, "time": "2018-01-04T13:49:41Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/8-9/", "author": "sledru@mozilla.com", "id": 12944213, "time": "2018-01-04T13:49:41Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/8-9/", "author": "sledru@mozilla.com", "id": 12944214, "time": "2018-01-04T13:49:41Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/4-5/", "author": "sledru@mozilla.com", "id": 12944215, "time": "2018-01-04T13:49:41Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/9-10/", "author": "sledru@mozilla.com", "id": 12944217, "time": "2018-01-04T13:50:49Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/9-10/", "author": "sledru@mozilla.com", "id": 12944218, "time": "2018-01-04T13:50:49Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/5-6/", "author": "sledru@mozilla.com", "id": 12944219, "time": "2018-01-04T13:50:49Z"}, {"text": "So, it seems that the crc32 algo that we use as to be the same as the releng side.\n\nTherefor, for the updater, I copied the crctable from bz2 into toolkit/mozapps/update/updater/crctable.h, added the license file and kept the crc32 function which was used in updater.cpp  845  \n\nSee: https://reviewboard.mozilla.org/r/202854/\n\nBoth tests work for me now with the change:\n./mach test toolkit/mozapps/update/tests/unit_base_updater/marSuccessPartial.js \n./mach test toolkit/mozapps/update/tests/unit_base_updater/marFailurePartial.js", "author": "sledru@mozilla.com", "id": 12944225, "time": "2018-01-04T13:54:38Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nhttps://reviewboard.mozilla.org/r/202854/#review217008\n\n::: toolkit/mozapps/update/updater/BZ2_LICENSE:4\n(Diff revision 10)\n> +This program, \"bzip2\", the associated library \"libbzip2\", and all\n> +documentation, are copyright (C) 1996-2010 Julian R Seward.  All\n> +rights reserved.\n\nThis paragraph is kind of misleading. OTOH, this file is only there because of the crctable header, but this license actually barely applies to that file. Why? Because crctable.h contains a lookup table for a polynomial, and ways to generate that table have been public since before bzip2 was published. For example, there's this document from 1993: http://www.ross.net/crc/download/crc_v3.txt\nIt contains a public domain generator for the crc-32 table, and if you take crcmodel.[ch] and crctable.c from there, and change TB_REVER to FALSE, you get the exact same table as the one in the bzip2 source.\nIOW, the table is essentially public domain, and you don't need all those license boilerplates.\n\n(As for why bzip2 and gzip crc-32 are not compatible, it's because despite using the same crc, they are actually using reversed polynomials, which don't generate the same results)", "author": "mh+mozilla@glandium.org", "id": 12953963, "time": "2018-01-09T05:04:27Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/10-11/", "author": "sledru@mozilla.com", "id": 12954096, "time": "2018-01-09T07:35:58Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/10-11/", "author": "sledru@mozilla.com", "id": 12954097, "time": "2018-01-09T07:35:58Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/6-7/", "author": "sledru@mozilla.com", "id": 12954098, "time": "2018-01-09T07:35:58Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nhttps://reviewboard.mozilla.org/r/202854/#review218070", "author": "mh+mozilla@glandium.org", "id": 12963429, "time": "2018-01-12T06:59:23Z"}, {"text": "Pushed by sledru@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/218077e82115\nCompile zlib as host lib r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/29fd023f999f\nUpdate bsdiff to use libz instead of bz2 for the crc algo r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/772538a846cb\nShip only the crc table from bz2 and use it in the updater r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/d32ae48690a7\nRemove libbz2 files as we were only using it for crc32 as the updater moved to lzma r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/8154486d3e00\nDo not build bsdiff on Android. The updater doesn't use it (we ship apk directly) r=glandium", "author": "pulsebot@bots.tld", "id": 12963590, "time": "2018-01-12T08:44:22Z"}, {"text": "Backed out for windows build bustage \"mbsdiff.exe : fatal error LNK1120\"\n\nLog: https://treeherder.mozilla.org/logviewer.html#?job_id=155868736&repo=autoland&lineNumber=27936\nRev: https://hg.mozilla.org/integration/autoland/rev/c011bb60725113e3da91a813b8ef250cf2109b3d", "author": "nbeleuzu@mozilla.com", "id": 12963727, "time": "2018-01-12T09:36:05Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/6-7/", "author": "sledru@mozilla.com", "id": 12964769, "time": "2018-01-12T15:24:41Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/8-9/", "author": "sledru@mozilla.com", "id": 12964770, "time": "2018-01-12T15:24:41Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/11-12/", "author": "sledru@mozilla.com", "id": 12964771, "time": "2018-01-12T15:24:41Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/11-12/", "author": "sledru@mozilla.com", "id": 12964772, "time": "2018-01-12T15:24:41Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/7-8/", "author": "sledru@mozilla.com", "id": 12964773, "time": "2018-01-12T15:24:41Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review218236\n\n::: other-licenses/bsdiff/moz.build:16\n(Diff revision 9)\n> -    ]\n> -\n>  if CONFIG['HOST_OS_ARCH'] == 'WINNT':\n>      HOST_OS_LIBS += [\n>          'ws2_32',\n> +        'vcruntime',\n\nI added that to fix the build issue.\nTry confirmed that it fixed the issue.", "author": "sledru@mozilla.com", "id": 12965092, "time": "2018-01-12T16:56:45Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nhttps://reviewboard.mozilla.org/r/200818/#review218252", "author": "bpostelnicu@mozilla.com", "id": 12965245, "time": "2018-01-12T17:57:21Z"}, {"text": "Pushed by sledru@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/142001babb39\nCompile zlib as host lib r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/47fbcaf5ad05\nUpdate bsdiff to use libz instead of bz2 for the crc algo r=andi,glandium\nhttps://hg.mozilla.org/integration/autoland/rev/2e95ebdcae6d\nShip only the crc table from bz2 and use it in the updater r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/7b7725d1d3c3\nRemove libbz2 files as we were only using it for crc32 as the updater moved to lzma r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/0ecc98bd0822\nDo not build bsdiff on Android. The updater doesn't use it (we ship apk directly) r=glandium", "author": "pulsebot@bots.tld", "id": 12965250, "time": "2018-01-12T18:00:50Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/142001babb39\nhttps://hg.mozilla.org/mozilla-central/rev/47fbcaf5ad05\nhttps://hg.mozilla.org/mozilla-central/rev/2e95ebdcae6d\nhttps://hg.mozilla.org/mozilla-central/rev/7b7725d1d3c3\nhttps://hg.mozilla.org/mozilla-central/rev/0ecc98bd0822", "author": "ncsoregi@mozilla.com", "id": 12965980, "time": "2018-01-12T22:07:52Z"}, {"text": "Sebastian, could you please backout this patches from m-c & mb?\nBug 1430535 is a blocker and we will need time to figure out the best solution here.\n\n(and also tests covering that stuff in m-c)", "author": "sledru@mozilla.com", "id": 12969843, "time": "2018-01-15T12:25:26Z"}, {"text": "Backed out as requested per Comment 83\n\nbackout: https://hg.mozilla.org/integration/autoland/rev/492a154a477f9f38122a5214367a95b76c82b560\n\npush: https://treeherder.mozilla.org/#/jobs?repo=autoland&revision=0ecc98bd0822159169d717dbf4c6d2fc4f54e03e", "author": "ncsoregi@mozilla.com", "id": 12969957, "time": "2018-01-15T13:32:44Z"}, {"text": "It should automatically get synced to beta.", "author": "aryx.bugmail@gmx-topmail.de", "id": 12969963, "time": "2018-01-15T13:37:54Z"}, {"text": "Backout by ncsoregi@mozilla.com:\nhttps://hg.mozilla.org/mozilla-central/rev/a00e3a3dbad4\nBacked out 5 changesets requested per comment #83. on a CLOSED TREE a=backout", "author": "pulsebot@bots.tld", "id": 12970038, "time": "2018-01-15T14:16:39Z"}, {"text": "This blackout has landed on m-c, and is in tonight's Nightly build:\ncset https://hg.mozilla.org/mozilla-central/rev/8e33bdf820dcc2ecd6f326eb83c39fc5e4769dcf\n\nNightly is not finding this latest build - keeps telling me its up-to-date.  Will a manual download/update be required to get back on track ?", "author": "jmjeffery@embarqmail.com", "id": 12971049, "time": "2018-01-16T01:22:35Z"}, {"text": "Jim, see bug 1430535 about the issue itself.", "author": "sledru@mozilla.com", "id": 12971864, "time": "2018-01-16T13:31:56Z"}, {"text": "Mike, I have a few ideas to fix the issue:\n1) As Simon suggested, we could use the two crc32 functions: 1) check with the bz2 impl 2) check with the zlib impl 3) fails the check\nThe next time we have a watershed, we moved to that.\n2) Keep the bz2 implementation in updater & bsdiff (for now, it is just in the updater)\nWe could create a new directory with the crctable and the algo.\n3) keep everything as it and just delete unused bz2 file.\n(very similar to the previous one)\n4) Migrate all to zlib but this requires a watershed and complex mechanics for a small gain\n\nMike, what do you think?", "author": "sledru@mozilla.com", "id": 12971871, "time": "2018-01-16T13:37:59Z"}, {"text": "It would be a good thing to land this on oak and verify that everything is working by updating clients prior to landing on nightly.", "author": "robert.strong.bugs@gmail.com", "id": 12972476, "time": "2018-01-16T17:38:53Z"}, {"text": "I wouldn't be surprised if the crc generated with larger file sizes is broken in the copied implementation since the ci tests do check the crc on small files and they passed.\n\nIdeally, the reason why the copied implementation failed would be figured out instead of implementing comment #89.", "author": "robert.strong.bugs@gmail.com", "id": 12975499, "time": "2018-01-17T08:33:54Z"}, {"text": "Is the CI using bsdiff to generate test files?", "author": "VYV03354@nifty.ne.jp", "id": 12978229, "time": "2018-01-18T04:56:25Z"}, {"text": "(In reply to Sylvestre Ledru [:sylvestre] from comment #89)\n> 2) Keep the bz2 implementation in updater & bsdiff (for now, it is just in\n> the updater)\n\nThis is the best option IMHO.\n\n> We could create a new directory with the crctable and the algo.\n\nNote there's CRC32C (yet different polynomials than zlib and bz2) in xpcom/io/.", "author": "mh+mozilla@glandium.org", "id": 12978358, "time": "2018-01-18T07:07:46Z"}, {"text": "(In reply to Masatoshi Kimura [:emk] from comment #92)\n> Is the CI using bsdiff to generate test files?\nYes", "author": "robert.strong.bugs@gmail.com", "id": 12978378, "time": "2018-01-18T07:33:06Z"}, {"text": "(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from comment #94)\n> (In reply to Masatoshi Kimura [:emk] from comment #92)\n> > Is the CI using bsdiff to generate test files?\n> Yes\n\nReally? The CI didn't fail even if I changed crc32() in bsdiff.c to a dummy:\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=a79e9f10296de16a7b5fee28bca589407549caef", "author": "VYV03354@nifty.ne.jp", "id": 12978894, "time": "2018-01-18T12:16:29Z"}, {"text": "(In reply to Masatoshi Kimura [:emk] from comment #95)\n> (In reply to Robert Strong [:rstrong] (use needinfo to contact me) from\n> comment #94)\n> > (In reply to Masatoshi Kimura [:emk] from comment #92)\n> > > Is the CI using bsdiff to generate test files?\n> > Yes\n> \n> Really? The CI didn't fail even if I changed crc32() in bsdiff.c to a dummy:\n> https://treeherder.mozilla.org/#/\n> jobs?repo=try&revision=a79e9f10296de16a7b5fee28bca589407549caef\nThe mbsdiff host binary used by the build system is not tested but the test mar files are generated using the mbsdiff binary. Also see comment #91", "author": "robert.strong.bugs@gmail.com", "id": 12979789, "time": "2018-01-18T18:02:33Z"}, {"text": "(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from comment #96)\n> (In reply to Masatoshi Kimura [:emk] from comment #95)\n> > (In reply to Robert Strong [:rstrong] (use needinfo to contact me) from\n> > comment #94)\n> > > (In reply to Masatoshi Kimura [:emk] from comment #92)\n> > > > Is the CI using bsdiff to generate test files?\n> > > Yes\n> > \n> > Really? The CI didn't fail even if I changed crc32() in bsdiff.c to a dummy:\n> > https://treeherder.mozilla.org/#/\n> > jobs?repo=try&revision=a79e9f10296de16a7b5fee28bca589407549caef\n> The mbsdiff host binary used by the build system is not tested but the test\n> mar files are generated using the mbsdiff binary. Also see comment #91\n\nThe bzip2 crc32 is simply incompatible with the zlib crc32 (see comment #67). <https://hg.mozilla.org/integration/autoland/rev/47fbcaf5ad05> changed the bzip2 crc32 to the zlib crc32 in bsdiff.c, so it did no longer match the updator's crc32 that is still using bzip2 crc32. But the CI did not catch it because the CI does not test the mbsdiff binary. So we have to implement comment #89.", "author": "VYV03354@nifty.ne.jp", "id": 12980589, "time": "2018-01-18T22:28:36Z"}, {"text": "Is there no way to use a crc32 that is compatible with the existing crc32 instead of using the zlib crc32 which is incompatible?", "author": "robert.strong.bugs@gmail.com", "id": 12980672, "time": "2018-01-18T23:18:49Z"}, {"text": "(In reply to Robert Strong [:rstrong] (use needinfo to contact me) from comment #98)\n> Is there no way to use a crc32 that is compatible with the existing crc32\n> instead of using the zlib crc32 which is incompatible?\n\nIsn't it 2) or 3) of comment #89?", "author": "VYV03354@nifty.ne.jp", "id": 12980784, "time": "2018-01-19T00:26:46Z"}, {"text": "Essentially 2 since that would make it so a watershed is not necessary. I pushed the existing patches as one push to oak with minor changes that I think should do it. Should be able to check if all is well tomorrow.\n\nhttps://hg.mozilla.org/projects/oak/rev/48af9e5146eeb412d8a367cceac3413ca9e672fe\n\nhttps://treeherder.mozilla.org/#/jobs?repo=oak", "author": "robert.strong.bugs@gmail.com", "id": 12980886, "time": "2018-01-19T01:13:41Z"}, {"text": "This is the patch I had locally.\nThe only question was about crctable.h, should it remain updater or be moved into a specific directory.", "author": "sledru@mozilla.com", "id": 12981190, "time": "2018-01-19T07:38:26Z"}, {"text": "I prefer keeping shared files like that with the client code so leave it. Please also verify that updates work on oak tomorrow, etc.", "author": "robert.strong.bugs@gmail.com", "id": 12981210, "time": "2018-01-19T07:51:17Z"}, {"text": "Sure, will do that!\nThanks", "author": "sledru@mozilla.com", "id": 12981262, "time": "2018-01-19T08:32:27Z"}, {"text": "One of the concerns here is that the msbdiff binary from mozilla-central got used on -release and -beta (and maybe even on esr, unsure there no build started during this problem)\n\nSo please coordinate with releng if we modify the crc used by the msbdiff on central, even if the Gecko 60 updater is modified to support both formats. We'll figure out the solution on our automations end, but will need to be in the loop here.", "author": "bugspam.Callek@gmail.com", "id": 12981866, "time": "2018-01-19T14:50:09Z"}, {"text": "Just remembered that oak isn't set up to create partial mar files so I compared the patch files created by the mbsdiff with and without the changes and they have the same output. So, this should be good to go.", "author": "robert.strong.bugs@gmail.com", "id": 12982594, "time": "2018-01-19T20:52:23Z"}, {"text": "Also, about:license should be updated to remove \"The bzip2 compression library (Julian Seward)\" but please do that in another bug.", "author": "robert.strong.bugs@gmail.com", "id": 12982627, "time": "2018-01-19T21:07:08Z"}, {"text": "Sylvestre, the changes from the original patch make it so the crc that is created by mbsdiff is the same as the one created by the version of mbsdiff currently in use by the build system. With that in mind is there any reason not to get this landed?", "author": "robert.strong.bugs@gmail.com", "id": 13125584, "time": "2018-03-13T16:59:13Z"}, {"text": "I have been distracted by other things. I will try to work on that this week or next week.", "author": "sledru@mozilla.com", "id": 13125628, "time": "2018-03-13T17:08:31Z"}, {"text": "Created attachment 8970168\nBug 1418425 - Update bsdiff to use the crc table directly and not link against bz2\n\nReview commit: https://reviewboard.mozilla.org/r/238968/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/238968/", "author": "sledru@mozilla.com", "id": 13226465, "time": "2018-04-23T13:48:50Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/7-8/", "author": "sledru@mozilla.com", "id": 13226466, "time": "2018-04-23T13:48:50Z"}, {"text": "Comment on attachment 8929542\nBug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/200818/diff/9-10/", "author": "sledru@mozilla.com", "id": 13226467, "time": "2018-04-23T13:48:50Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/12-13/", "author": "sledru@mozilla.com", "id": 13226468, "time": "2018-04-23T13:48:50Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/12-13/", "author": "sledru@mozilla.com", "id": 13226469, "time": "2018-04-23T13:48:50Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/8-9/", "author": "sledru@mozilla.com", "id": 13226470, "time": "2018-04-23T13:48:50Z"}, {"text": "Try seem happy: https://treeherder.mozilla.org/#/jobs?repo=try&revision=407c4e6c60ed6697eb5d01573df183fbf72caea9&selectedJob=175129969\n(at least for the build)\n\nI will try to land it once nightly is 62", "author": "sledru@mozilla.com", "id": 13228871, "time": "2018-04-24T08:19:13Z"}, {"text": "So, (In reply to Sylvestre Ledru [:sylvestre] from comment #110)\n> Comment on attachment 8931986\n> Bug 1418425 - Compile zlib as host lib\n> \n> Review request updated; see interdiff:\n> https://reviewboard.mozilla.org/r/203044/diff/7-8/\nThis patch should no longer be needed.", "author": "robert.strong.bugs@gmail.com", "id": 13233407, "time": "2018-04-25T19:03:29Z"}, {"text": "Could you update the patches so instead of reverting changes the changes are not made in the first place?", "author": "robert.strong.bugs@gmail.com", "id": 13233426, "time": "2018-04-25T19:09:37Z"}, {"text": "yeah, i was planning to do that before landing. Here, it was to clearly show the difference between what I had on mozreview and what landed on oak!", "author": "sledru@mozilla.com", "id": 13233536, "time": "2018-04-25T19:50:29Z"}, {"text": "Comment on attachment 8970168\nBug 1418425 - Update bsdiff to use the crc table directly and not link against bz2\n\nhttps://reviewboard.mozilla.org/r/238968/#review245450", "author": "robert.strong.bugs@gmail.com", "id": 13233567, "time": "2018-04-25T20:01:55Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nhttps://reviewboard.mozilla.org/r/202854/#review245454\n\nr=me with the changes that aren't needed or are reverted in later patches aren't landed.", "author": "robert.strong.bugs@gmail.com", "id": 13233569, "time": "2018-04-25T20:03:21Z"}, {"text": "Comment on attachment 8931986\nBug 1418425 - Compile zlib as host lib\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/203044/diff/8-9/", "author": "sledru@mozilla.com", "id": 13260791, "time": "2018-05-07T21:23:55Z"}, {"text": "Comment on attachment 8970168\nBug 1418425 - Update bsdiff to use the crc table directly and not link against bz2\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/238968/diff/1-2/", "author": "sledru@mozilla.com", "id": 13260792, "time": "2018-05-07T21:23:55Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/13-14/", "author": "sledru@mozilla.com", "id": 13260793, "time": "2018-05-07T21:23:55Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/13-14/", "author": "sledru@mozilla.com", "id": 13260794, "time": "2018-05-07T21:23:55Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/9-10/", "author": "sledru@mozilla.com", "id": 13260795, "time": "2018-05-07T21:23:55Z"}, {"text": "Comment on attachment 8970168\nBug 1418425 - Update bsdiff to use the crc table directly and not link against bz2\n\nhttps://reviewboard.mozilla.org/r/238968/#review248096\n\n::: other-licenses/bsdiff/bsdiff.c:35\n(Diff revision 2)\n>  #include <unistd.h>\n>  #include <arpa/inet.h>\n>  #define _O_BINARY 0\n>  #endif\n>  \n> +#include \"crctable.h\"\n\nThis file is added in part 3, but this is part 2.\n\nAlso, the commit message is outdated.", "author": "mh+mozilla@glandium.org", "id": 13261141, "time": "2018-05-07T23:44:19Z"}, {"text": "Comment on attachment 8931717\nBug 1418425 - Ship only the crc table from bz2 and use it in the updater\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202854/diff/14-15/", "author": "sledru@mozilla.com", "id": 13261519, "time": "2018-05-08T06:37:35Z"}, {"text": "Comment on attachment 8970168\nBug 1418425 - Update bsdiff to use the crc table directly and not link against bz2\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/238968/diff/2-3/", "author": "sledru@mozilla.com", "id": 13261520, "time": "2018-05-08T06:37:35Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/14-15/", "author": "sledru@mozilla.com", "id": 13261521, "time": "2018-05-08T06:37:35Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/10-11/", "author": "sledru@mozilla.com", "id": 13261522, "time": "2018-05-08T06:37:35Z"}, {"text": "Comment on attachment 8970168\nBug 1418425 - Update bsdiff to use the crc table directly and not link against bz2\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/238968/diff/3-4/", "author": "sledru@mozilla.com", "id": 13261527, "time": "2018-05-08T06:41:33Z"}, {"text": "Comment on attachment 8931718\nBug 1418425 - Remove libbz2 files as we were only using it for crc32 as the updater moved to lzma\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/202856/diff/15-16/", "author": "sledru@mozilla.com", "id": 13261528, "time": "2018-05-08T06:41:33Z"}, {"text": "Comment on attachment 8934543\nBug 1418425 - Do not build bsdiff on Android. The updater doesn't use it (we ship apk directly)\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/205448/diff/11-12/", "author": "sledru@mozilla.com", "id": 13261529, "time": "2018-05-08T06:41:33Z"}, {"text": "Pushed by sledru@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/c5acba2f11e0\nCompile zlib as host lib r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/932ea532bb41\nShip only the crc table from bz2 and use it in the updater r=glandium,rstrong\nhttps://hg.mozilla.org/integration/autoland/rev/40d6bf73191f\nUpdate bsdiff to use the crc table directly and not link against bz2 r=rstrong\nhttps://hg.mozilla.org/integration/autoland/rev/652c4066dab8\nRemove libbz2 files as we were only using it for crc32 as the updater moved to lzma r=glandium\nhttps://hg.mozilla.org/integration/autoland/rev/d361bb2907bc\nDo not build bsdiff on Android. The updater doesn't use it (we ship apk directly) r=glandium", "author": "pulsebot@bots.tld", "id": 13261532, "time": "2018-05-08T06:44:04Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/c5acba2f11e0\nhttps://hg.mozilla.org/mozilla-central/rev/932ea532bb41\nhttps://hg.mozilla.org/mozilla-central/rev/40d6bf73191f\nhttps://hg.mozilla.org/mozilla-central/rev/652c4066dab8\nhttps://hg.mozilla.org/mozilla-central/rev/d361bb2907bc", "author": "aiakab@mozilla.com", "id": 13262243, "time": "2018-05-08T12:57:46Z"}, {"text": "Landed a week ago, looks like we are good now!", "author": "sledru@mozilla.com", "id": 13278489, "time": "2018-05-15T12:47:23Z"}], "id": 1418425, "priority": "--", "mentors_detail": [], "comment_count": 137, "cf_status_thunderbird_esr52": "---", "cf_qa_whiteboard": "", "version": "Trunk", "cf_tracking_firefox62": "---", "cf_platform_rel": "---", "product": "Firefox Build System", "cf_fx_iteration": "---", "blocks": [1415819, 1459851], "qa_contact": "", "see_also": ["https://bugzilla.mozilla.org/show_bug.cgi?id=1430535"], "cf_status_firefox_esr52": "---", "component": "General", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "fixed", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "mozilla62", "is_cc_accessible": true, "cf_tracking_thunderbird_esr60": "---", "groups": [], "cf_tracking_firefox_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "sledru@mozilla.com", "id": 495955, "name": "sledru@mozilla.com", "real_name": "Sylvestre Ledru [:sylvestre]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "bhearsum@mozilla.com", "id": 259016, "name": "bhearsum@mozilla.com", "real_name": "Ben Hearsum (:bhearsum)"}, {"email": "bugspam.Callek@gmail.com", "id": 129968, "name": "bugspam.Callek@gmail.com", "real_name": "Justin Wood (:Callek)"}, {"email": "gps@mozilla.com", "id": 420446, "name": "gps@mozilla.com", "real_name": "Gregory Szorc [:gps]"}, {"email": "jcristau@mozilla.com", "id": 580382, "name": "jcristau@mozilla.com", "real_name": "Julien Cristau [:jcristau]"}, {"email": "jmjeffery@embarqmail.com", "id": 161650, "name": "jmjeffery@embarqmail.com", "real_name": "Jim Jeffery not reading bug-mail 1/2/11"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "mh+mozilla@glandium.org", "id": 47192, "name": "mh+mozilla@glandium.org", "real_name": "Mike Hommey [:glandium]"}, {"email": "robert.strong.bugs@gmail.com", "id": 141755, "name": "robert.strong.bugs@gmail.com", "real_name": "Robert Strong [:rstrong] (use needinfo to contact me)"}, {"email": "ted@mielczarek.org", "id": 39022, "name": "ted@mielczarek.org", "real_name": "Ted Mielczarek [:ted.mielczarek]"}, {"email": "VYV03354@nifty.ne.jp", "id": 5842, "name": "VYV03354@nifty.ne.jp", "real_name": "Masatoshi Kimura [:emk]"}], "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-15T12:47:23Z", "cf_status_firefox_esr60": "---", "assigned_to": "sledru@mozilla.com", "is_open": false, "history": [{"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8929542, "added": "review?(gps@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "gps@mozilla.com"}], "who": "sledru@mozilla.com", "when": "2017-11-17T18:18:05Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2017-11-17T19:02:40Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ted@mielczarek.org"}], "who": "ted@mielczarek.org", "when": "2017-11-17T19:03:20Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mh+mozilla@glandium.org"}], "who": "mh+mozilla@glandium.org", "when": "2017-11-17T21:57:26Z"}, {"changes": [{"removed": "Most of the bz2 files are unused or don't have tests", "field_name": "summary", "added": "Remove bz2 and use the zlib crc32 function instead"}], "who": "sledru@mozilla.com", "when": "2017-11-17T23:35:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gps@mozilla.com)", "attachment_id": 8929542, "added": ""}], "who": "gps@mozilla.com", "when": "2017-11-20T21:07:39Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1418425 - Remove some unused libbz2 files", "attachment_id": 8929542, "added": "Bug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8929542, "added": "review?(gps@mozilla.com)"}], "who": "sledru@mozilla.com", "when": "2017-11-24T16:33:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gps@mozilla.com)", "attachment_id": 8929542, "added": ""}], "who": "sledru@mozilla.com", "when": "2017-11-24T16:34:41Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8929542, "added": "review-"}], "who": "mh+mozilla@glandium.org", "when": "2017-11-24T21:33:08Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8931717, "added": "review-"}], "who": "mh+mozilla@glandium.org", "when": "2017-11-24T21:33:38Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review-", "attachment_id": 8929542, "added": ""}, {"field_name": "flagtypes.name", "removed": "review-", "attachment_id": 8931717, "added": ""}], "who": "sledru@mozilla.com", "when": "2017-11-26T22:49:15Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8929542, "added": "review-"}], "who": "mh+mozilla@glandium.org", "when": "2017-11-26T23:14:10Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review-", "attachment_id": 8929542, "added": ""}], "who": "sledru@mozilla.com", "when": "2017-11-27T11:13:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8931986, "added": "review?(mh+mozilla@glandium.org)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8931718, "added": "review?(mh+mozilla@glandium.org)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8934543, "added": "review?(mh+mozilla@glandium.org)"}], "who": "sledru@mozilla.com", "when": "2017-12-05T15:36:54Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8931986, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-06T01:28:43Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8929542, "added": "review-"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-06T01:30:15Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8931717, "added": "review-"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-06T01:32:22Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8931718, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-06T01:33:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8934543, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-06T01:33:39Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review-", "attachment_id": 8929542, "added": "review?(mh+mozilla@glandium.org)"}, {"field_name": "flagtypes.name", "removed": "review-", "attachment_id": 8931717, "added": "review?(mh+mozilla@glandium.org)"}], "who": "sledru@mozilla.com", "when": "2017-12-06T15:24:27Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8929542, "added": "review-"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-07T22:01:05Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8931717, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-07T22:03:34Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review-", "attachment_id": 8929542, "added": "review?(mh+mozilla@glandium.org)"}], "who": "sledru@mozilla.com", "when": "2017-12-08T12:35:52Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8929542, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-12-12T14:25:12Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(sledru@mozilla.com)"}], "who": "apavel@mozilla.com", "when": "2017-12-12T15:52:41Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1418425 - Update the updater to use libz instead of bz2 for the crc algo", "attachment_id": 8931717, "added": "Bug 1418425 - Ship only the crc table from bz2 and use it in the updater"}], "who": "sledru@mozilla.com", "when": "2018-01-04T13:49:41Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review+", "attachment_id": 8931717, "added": "review?(robert.strong.bugs@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "robert.strong.bugs@gmail.com"}], "who": "sledru@mozilla.com", "when": "2018-01-04T13:50:49Z"}, {"changes": [{"removed": "needinfo?(sledru@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "sledru@mozilla.com", "when": "2018-01-04T13:54:38Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8931717, "added": "review?(mh+mozilla@glandium.org)"}], "who": "sledru@mozilla.com", "when": "2018-01-09T07:35:58Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8931717, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2018-01-12T06:59:23Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(sledru@mozilla.com)"}], "who": "nbeleuzu@mozilla.com", "when": "2018-01-12T09:36:05Z"}, {"changes": [{"removed": "needinfo?(sledru@mozilla.com)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(robert.strong.bugs@gmail.com)", "attachment_id": 8931717, "added": ""}], "who": "sledru@mozilla.com", "when": "2018-01-12T17:00:04Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8929542, "added": "review+"}], "who": "bpostelnicu@mozilla.com", "when": "2018-01-12T17:57:21Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla59"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-01-12 22:07:52"}, {"removed": "affected", "field_name": "cf_status_firefox59", "added": "fixed"}], "who": "ncsoregi@mozilla.com", "when": "2018-01-12T22:07:52Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1430535"}], "who": "nthomas@mozilla.com", "when": "2018-01-15T08:57:28Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "aryx.bugmail@gmx-topmail.de"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(aryx.bugmail@gmx-topmail.de)"}], "who": "sledru@mozilla.com", "when": "2018-01-15T12:25:26Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "REOPENED"}, {"removed": "FIXED", "field_name": "resolution", "added": ""}, {"removed": "fixed", "field_name": "cf_status_firefox59", "added": "---"}], "who": "ncsoregi@mozilla.com", "when": "2018-01-15T13:32:44Z"}, {"changes": [{"removed": "mozilla59", "field_name": "target_milestone", "added": "---"}, {"removed": "needinfo?(aryx.bugmail@gmx-topmail.de)", "field_name": "flagtypes.name", "added": ""}], "who": "aryx.bugmail@gmx-topmail.de", "when": "2018-01-15T13:37:54Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bhearsum@mozilla.com"}], "who": "bhearsum@mozilla.com", "when": "2018-01-15T14:13:34Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jmjeffery@embarqmail.com"}], "who": "jmjeffery@embarqmail.com", "when": "2018-01-15T14:13:58Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(mh+mozilla@glandium.org)"}], "who": "sledru@mozilla.com", "when": "2018-01-16T13:37:59Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jcristau@mozilla.com"}], "who": "jcristau@mozilla.com", "when": "2018-01-17T09:39:53Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "VYV03354@nifty.ne.jp"}], "who": "VYV03354@nifty.ne.jp", "when": "2018-01-18T04:56:25Z"}, {"changes": [{"removed": "needinfo?(mh+mozilla@glandium.org)", "field_name": "flagtypes.name", "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2018-01-18T07:07:46Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bugspam.Callek@gmail.com"}], "who": "bugspam.Callek@gmail.com", "when": "2018-01-19T14:50:09Z"}, {"changes": [{"removed": "Core", "field_name": "product", "added": "Firefox Build System"}], "who": "automation@bmo.tld", "when": "2018-03-02T20:12:20Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(sledru@mozilla.com)"}], "who": "robert.strong.bugs@gmail.com", "when": "2018-03-13T16:59:13Z"}, {"changes": [{"removed": "needinfo?(sledru@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "sledru@mozilla.com", "when": "2018-03-13T17:08:31Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review+", "attachment_id": 8929542, "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8931717, "added": "review?(robert.strong.bugs@gmail.com)"}], "who": "sledru@mozilla.com", "when": "2018-04-23T13:48:50Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(sledru@mozilla.com)"}], "who": "robert.strong.bugs@gmail.com", "when": "2018-04-25T19:09:37Z"}, {"changes": [{"removed": "needinfo?(sledru@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "sledru@mozilla.com", "when": "2018-04-25T19:50:29Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8970168, "added": "review+"}], "who": "robert.strong.bugs@gmail.com", "when": "2018-04-25T20:01:55Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(robert.strong.bugs@gmail.com)", "attachment_id": 8931717, "added": "review+"}], "who": "robert.strong.bugs@gmail.com", "when": "2018-04-25T20:03:21Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1418425 - Still use bz2 for bsdiff", "attachment_id": 8970168, "added": "Bug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo"}, {"field_name": "flagtypes.name", "removed": "review+", "attachment_id": 8970168, "added": "review?(mh+mozilla@glandium.org)"}], "who": "sledru@mozilla.com", "when": "2018-05-07T21:23:55Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8929542, "added": "1"}], "who": "sledru@mozilla.com", "when": "2018-05-07T21:24:00Z"}, {"changes": [{"removed": "aryx.bugmail@gmx-topmail.de", "field_name": "cc", "added": ""}], "who": "aryx.bugmail@gmx-topmail.de", "when": "2018-05-07T21:30:40Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8970168, "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2018-05-07T23:44:19Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1418425 - Update bsdiff to use libz instead of bz2 for the crc algo", "attachment_id": 8970168, "added": "Bug 1418425 - Update bsdiff to use the crc table directly and not like against bz2"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8970168, "added": "review?(mh+mozilla@glandium.org)"}], "who": "sledru@mozilla.com", "when": "2018-05-08T06:37:35Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1418425 - Update bsdiff to use the crc table directly and not like against bz2", "attachment_id": 8970168, "added": "Bug 1418425 - Update bsdiff to use the crc table directly and not link against bz2"}], "who": "sledru@mozilla.com", "when": "2018-05-08T06:41:33Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8970168, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2018-05-08T06:48:26Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1459851"}], "who": "sledru@mozilla.com", "when": "2018-05-08T08:31:27Z"}, {"changes": [{"removed": "REOPENED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "2018-01-12 22:07:52", "field_name": "cf_last_resolved", "added": "2018-05-08 12:57:46"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "aiakab@mozilla.com", "when": "2018-05-08T12:57:46Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "VERIFIED"}], "who": "sledru@mozilla.com", "when": "2018-05-15T12:47:23Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}