{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "howareyou322@gmail.com", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8474428}, {"creator": "howareyou322@gmail.com", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8474954}, {"creator": "howareyou322@gmail.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-08-20T02:36:36Z", "type_id": 4, "creation_date": "2014-08-19T04:00:12Z", "id": 954356, "setter": "roc@ocallahan.org"}], "content_type": "text/plain", "id": 8474955}, {"creator": "howareyou322@gmail.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-08-21T01:42:33Z", "type_id": 4, "creation_date": "2014-08-21T01:42:33Z", "id": 956806, "setter": "howareyou322@gmail.com"}], "content_type": "text/plain", "id": 8476420}, {"creator": "howareyou322@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-08-22T11:32:34Z", "type_id": 4, "creation_date": "2014-08-22T11:32:34Z", "id": 958347, "setter": "howareyou322@gmail.com"}], "content_type": "text/plain", "id": 8477356}], "classification": "Components", "creator": "howareyou322@gmail.com", "cc": ["asmodeusme@yahoo.com", "botond@mozilla.com", "bugmail@mozilla.staktrace.com", "roc@ocallahan.org"], "depends_on": [], "creation_time": "2014-08-18T07:42:39Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86_64", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Add scroll start/stop notifications from apz to scroll observers", "id": 1054901, "assigned_to_detail": {"email": "howareyou322@gmail.com", "id": 452554, "name": "howareyou322@gmail.com", "real_name": "Peter Chang[:pchang]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "howareyou322@gmail.com", "comment_count": 18, "comments": [{"text": "Based on bug 1020801 comment 19, create this bug to add scroll start/stop notification from apz and then pass these events to scroll observers.", "author": "howareyou322@gmail.com", "id": 9194019, "time": "2014-08-18T07:42:39Z"}, {"text": "Created attachment 8474428\nWIP\n\nThis patch tries to add scroll start/stop notification from apz. And these notification will be used to show/hide the selection bubble from bug 1020801", "author": "howareyou322@gmail.com", "id": 9194239, "time": "2014-08-18T08:58:30Z"}, {"text": "Comment on attachment 8474428\nWIP\n\nReview of attachment 8474428:\n-----------------------------------------------------------------\n\n::: docshell/base/nsIScrollObserver.h\n@@ +21,5 @@\n>     * Called when the scroll position of some element has changed.\n>     */\n>    virtual void ScrollPositionChanged() = 0;\n> +  virtual void ScrollPositionChangeStarted(){};\n> +  virtual void ScrollPositionChangeStopped(){};\n\nHave empty implementation here because not every scroll observer want to listen scrollStart/Stop events.\nOr it requires to declare all functions as pure virtual function.", "author": "howareyou322@gmail.com", "id": 9194247, "time": "2014-08-18T09:01:44Z"}, {"text": "Note that the APZStateChange::TransformBegin|End notifications are fired any time there is a change to the transform. This doesn't necessarily mean that the scroll position is changing; it might be the zoom that is changing while the scroll position stays the same. So it might be better to rename your functions accordingly.", "author": "bugmail@mozilla.staktrace.com", "id": 9194928, "time": "2014-08-18T13:26:04Z"}, {"text": "(In reply to Kartikaya Gupta (email:kats@mozilla.com) from comment #3)\n> Note that the APZStateChange::TransformBegin|End notifications are fired any\n> time there is a change to the transform. This doesn't necessarily mean that\n> the scroll position is changing; it might be the zoom that is changing while\n> the scroll position stays the same. So it might be better to rename your\n> functions accordingly.\n\nThanks for the note. I also noticed that APZStateChange::TransformEnd is received but no scroll position changed events for scroll snapback case. How about the ScrollViewChangeStarted/ScrollViewChangeStopped?", "author": "howareyou322@gmail.com", "id": 9195534, "time": "2014-08-18T15:44:20Z"}, {"text": "Comment on attachment 8474428\nWIP\n\nReview of attachment 8474428:\n-----------------------------------------------------------------\n\nWill work on the v2 to rename ScrollPositionChangeStarted/Stopped", "author": "howareyou322@gmail.com", "id": 9195539, "time": "2014-08-18T15:45:26Z"}, {"text": "That sounds ok to me, but I'm not a layout peer so I'm not the one to make a decision on this.", "author": "bugmail@mozilla.staktrace.com", "id": 9195586, "time": "2014-08-18T15:52:53Z"}, {"text": "Created attachment 8474954\nWIP v2\n\nRename funcation to ScrollViewChangeStart/Stop based on comment 3.\n\nroc, this patch is trying to add the notification of scroll view changes(transform changes) from APZ and dispatch to scroll oberservers.\n\nThe selection bubble in bug 1020801 will use the new ScrollViewChangeStart/Stop callback to show/hide itself.", "author": "howareyou322@gmail.com", "id": 9199039, "time": "2014-08-19T03:58:34Z"}, {"text": "Created attachment 8474955\nWIP v2\n\nAttached to correct patch.\n\nRename funcation to ScrollViewChangeStart/Stop based on comment 3.\n\nroc, this patch is trying to add the notification of scroll view changes(transform changes) from APZ and dispatch to scroll oberservers.\n\nThe selection bubble in bug 1020801 will use the new ScrollViewChangeStart/Stop callback to show/hide itself.", "author": "howareyou322@gmail.com", "id": 9199046, "time": "2014-08-19T04:00:12Z"}, {"text": "Comment on attachment 8474955\nWIP v2\n\nReview of attachment 8474955:\n-----------------------------------------------------------------\n\n::: docshell/base/nsIScrollObserver.h\n@@ +24,5 @@\n> +\n> +  /**\n> +   * Called when the scroll view starts to change, i.e. like the transform\n> +   */\n> +  virtual void ScrollViewChangeStarted(){};\n\nThis isn't really clear enough.\n\nLet's call the functions AsyncPanZoomStarted/Stopped and the comment should say\n\"Called when an async panning/zooming transform has started being applied.\"\n\"Called when an async panning/zooming transform is no longer applied.\"", "author": "roc@ocallahan.org", "id": 9204560, "time": "2014-08-20T02:36:36Z"}, {"text": "Created attachment 8476420\nWIP v3\n\nAddress review's comment.\n\nWait for try server result.\nhttps://tbpl.mozilla.org/?tree=Try&rev=6aa9caceae7e", "author": "howareyou322@gmail.com", "id": 9210023, "time": "2014-08-21T01:42:33Z"}, {"text": "The updated patch didn't rename the functions as roc requested:\n\n(In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from comment #9)\n> Let's call the functions AsyncPanZoomStarted/Stopped and ...", "author": "bugmail@mozilla.staktrace.com", "id": 9212220, "time": "2014-08-21T12:51:58Z"}, {"text": "Comment on attachment 8476420\nWIP v3\n\nReview of attachment 8476420:\n-----------------------------------------------------------------\n\n::: docshell/base/nsIScrollObserver.h\n@@ +29,5 @@\n> +\n> +  /**\n> +   * Called when an async panning/zooming transform is no longer applied.\n> +   */\n> +  virtual void ScrollViewChangeStopped(){};\n\nNote that you need to change NS_ISCROLLOBSERVER_IID because of the functions you've added to this interface.", "author": "ehsan@mozilla.com", "id": 9213632, "time": "2014-08-21T17:32:26Z"}, {"text": "(In reply to Kartikaya Gupta (email:kats@mozilla.com) from comment #11)\n> The updated patch didn't rename the functions as roc requested:\n> \n> (In reply to Robert O'Callahan (:roc) (Mozilla Corporation) from comment #9)\n> > Let's call the functions AsyncPanZoomStarted/Stopped and ...\n\n(In reply to :Ehsan Akhgari (not reading bugmail, needinfo? me!) from comment #12)\n> Comment on attachment 8476420\n> WIP v3\n> \n> Review of attachment 8476420:\n> -----------------------------------------------------------------\n> \n> ::: docshell/base/nsIScrollObserver.h\n> @@ +29,5 @@\n> > +\n> > +  /**\n> > +   * Called when an async panning/zooming transform is no longer applied.\n> > +   */\n> > +  virtual void ScrollViewChangeStopped(){};\n> \n> Note that you need to change NS_ISCROLLOBSERVER_IID because of the functions\n> you've added to this interface.\n\nThanks for the note, I will re-upload patch again.", "author": "howareyou322@gmail.com", "id": 9216357, "time": "2014-08-22T04:06:58Z"}, {"text": "Created attachment 8477356\nWIP v4\n\nChange the uuid and update func name to AsyncPanZoomStarted/Stopped.", "author": "howareyou322@gmail.com", "id": 9217423, "time": "2014-08-22T11:32:34Z"}, {"text": "(In reply to peter chang[:pchang][:peter] from comment #10)\n> Created attachment 8476420\n> WIP v3\n> \n> Address review's comment.\n> \n> Wait for try server result.\n> https://tbpl.mozilla.org/?tree=Try&rev=6aa9caceae7e\n\nPrevious try is all green.\nAnd he difference between v3 and v4 are the uuid and function name changes. It won't impact the testing result.", "author": "howareyou322@gmail.com", "id": 9217428, "time": "2014-08-22T11:34:35Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/35535bbbd6d1", "author": "ryanvm@gmail.com", "id": 9217631, "time": "2014-08-22T12:53:06Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/35535bbbd6d1", "author": "kwierso@gmail.com", "id": 9220397, "time": "2014-08-22T23:51:16Z"}], "cf_last_resolved": "2014-08-22T23:51:16Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2014-08-22T23:51:16Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [1020801], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Panning and Zooming", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla34", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "howareyou322@gmail.com", "id": 452554, "name": "howareyou322@gmail.com", "real_name": "Peter Chang[:pchang]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "asmodeusme@yahoo.com", "id": 420570, "name": "asmodeusme@yahoo.com", "real_name": "Willy_ Foo_Foo"}, {"email": "botond@mozilla.com", "id": 474533, "name": "botond@mozilla.com", "real_name": "Botond Ballo [:botond]"}, {"email": "bugmail@mozilla.staktrace.com", "id": 426788, "name": "bugmail@mozilla.staktrace.com", "real_name": "Kartikaya Gupta (email:kats@mozilla.com)"}, {"email": "roc@ocallahan.org", "id": 5038, "name": "roc@ocallahan.org", "real_name": "Robert O'Callahan (:roc) (email my personal email if necessary)"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "pchang@mozilla.com"}], "who": "howareyou322@gmail.com", "when": "2014-08-18T07:44:38Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1020801"}], "who": "howareyou322@gmail.com", "when": "2014-08-18T07:44:49Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8474428, "added": "review?(roc@ocallahan.org)"}, {"removed": "", "field_name": "cc", "added": "roc@ocallahan.org"}], "who": "howareyou322@gmail.com", "when": "2014-08-18T08:58:30Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bugmail.mozilla@staktrace.com"}], "who": "bugmail@mozilla.staktrace.com", "when": "2014-08-18T13:26:04Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "botond@mozilla.com"}], "who": "botond@mozilla.com", "when": "2014-08-18T15:22:44Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(bugmail.mozilla@staktrace.com)"}], "who": "howareyou322@gmail.com", "when": "2014-08-18T15:44:20Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(roc@ocallahan.org)", "attachment_id": 8474428, "added": ""}], "who": "howareyou322@gmail.com", "when": "2014-08-18T15:45:26Z"}, {"changes": [{"removed": "needinfo?(bugmail.mozilla@staktrace.com)", "field_name": "flagtypes.name", "added": ""}], "who": "bugmail@mozilla.staktrace.com", "when": "2014-08-18T15:52:53Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8474428, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8474954, "added": "review?(roc@ocallahan.org)"}], "who": "howareyou322@gmail.com", "when": "2014-08-19T03:58:34Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8474954, "added": "1"}, {"field_name": "flagtypes.name", "removed": "review?(roc@ocallahan.org)", "attachment_id": 8474954, "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8474955, "added": "review?(roc@ocallahan.org)"}], "who": "howareyou322@gmail.com", "when": "2014-08-19T04:00:12Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(roc@ocallahan.org)", "attachment_id": 8474955, "added": "review+"}], "who": "roc@ocallahan.org", "when": "2014-08-20T02:36:36Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8474955, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8476420, "added": "review+"}], "who": "howareyou322@gmail.com", "when": "2014-08-21T01:42:33Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8476420, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8477356, "added": "review+"}], "who": "howareyou322@gmail.com", "when": "2014-08-22T11:32:34Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}], "who": "howareyou322@gmail.com", "when": "2014-08-22T11:34:35Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}], "who": "ryanvm@gmail.com", "when": "2014-08-22T12:53:06Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bezaleel360@gmail.com"}], "who": "asmodeusme@yahoo.com", "when": "2014-08-22T14:37:03Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla34"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2014-08-22 16:51:16"}], "who": "kwierso@gmail.com", "when": "2014-08-22T23:51:16Z"}], "resolution": "FIXED", "op_sys": "Gonk (Firefox OS)", "cf_fx_points": "---", "cf_blocking_fennec": "---"}