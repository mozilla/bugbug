{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "jruderman@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/html", "id": 8556864}, {"creator": "jruderman@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8556866}, {"creator": "jcoppeard@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-02-06T19:31:36Z", "type_id": 4, "creation_date": "2015-02-06T16:01:25Z", "id": 1093795, "setter": "terrence.d.cole@gmail.com"}], "content_type": "text/plain", "id": 8560491}], "classification": "Components", "creator": "jruderman@gmail.com", "cc": ["bachileha@gmail.com", "bill.mccloskey@gmail.com", "jcoppeard@mozilla.com", "terrence.d.cole@gmail.com"], "depends_on": [], "creation_time": "2015-01-30T04:44:00Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86_64", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": ["assertion", "testcase"], "summary": "\"Assertion failure: !zone->isPreservingCode()\"", "id": 1127696, "assigned_to_detail": {"email": "jcoppeard@mozilla.com", "id": 443194, "name": "jcoppeard@mozilla.com", "real_name": "Jon Coppeard (:jonco) (PTO until 13th March)"}, "severity": "critical", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "jcoppeard@mozilla.com", "comment_count": 5, "comments": [{"text": "Created attachment 8556864\ntestcase\n\n1. Create a profile with:\n     e10 disabled\n     https://www.squarefree.com/extensions/domFuzzLite3.xpi intalled\n2. Run: firefox -profile <profiledir> z.html\n\nAssertion failure: !zone->isPreservingCode(), at js/src/jsgc.cpp:2179", "author": "jruderman@gmail.com", "id": 9861345, "time": "2015-01-30T04:44:00Z"}, {"text": "Created attachment 8556866\nstack", "author": "jruderman@gmail.com", "id": 9861348, "time": "2015-01-30T04:44:13Z"}, {"text": "Created attachment 8560491\nset-compacting-flag-at-start\n\nIt seems the problem is that we can start a new incremental shrinking GC while we are already running an incremental normal GC.  This means that zones may have the code preserving flag set from the start of the first GC.\n\nHere's a patch that adds a separate 'isCompacting' flag to GCRuntime that is set exactly once at the very start of the GC.  It also tidies up incrementalCollectSlice() a little, and does the same for the 'cleanUpEverythingFlag'.\n\nI tried to write test code to reproduce this but it seems we can't trigger this situation via our API, because we always reset if an API-triggered GC happens.", "author": "jcoppeard@mozilla.com", "id": 9890483, "time": "2015-02-06T16:01:25Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/82f2c8bd9c85", "author": "jcoppeard@mozilla.com", "id": 9893365, "time": "2015-02-07T09:43:43Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/82f2c8bd9c85", "author": "philringnalda@gmail.com", "id": 9893724, "time": "2015-02-07T16:50:08Z"}], "cf_last_resolved": "2015-02-07T16:50:08Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-06-05T10:53:28Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "JavaScript: GC", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla38", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "jruderman@gmail.com", "id": 11608, "name": "jruderman@gmail.com", "real_name": "Jesse Ruderman"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "bachileha@gmail.com", "id": 519873, "name": "bachileha@gmail.com", "real_name": ""}, {"email": "bill.mccloskey@gmail.com", "id": 389993, "name": "bill.mccloskey@gmail.com", "real_name": "Bill McCloskey [inactive unless it's an emergency] (:billm)"}, {"email": "jcoppeard@mozilla.com", "id": 443194, "name": "jcoppeard@mozilla.com", "real_name": "Jon Coppeard (:jonco) (PTO until 13th March)"}, {"email": "terrence.d.cole@gmail.com", "id": 231770, "name": "terrence.d.cole@gmail.com", "real_name": "Terrence Cole [:terrence]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "jcoppeard@mozilla.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8560491, "added": "review?(terrence@mozilla.com)"}], "who": "jcoppeard@mozilla.com", "when": "2015-02-06T16:01:25Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(terrence@mozilla.com)", "attachment_id": 8560491, "added": "review+"}], "who": "terrence.d.cole@gmail.com", "when": "2015-02-06T19:31:36Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla38"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-02-07 08:50:08"}, {"removed": "---", "field_name": "cf_status_firefox38", "added": "fixed"}], "who": "philringnalda@gmail.com", "when": "2015-02-07T16:50:08Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bachileha@gmail.com"}], "who": "bachileha@gmail.com", "when": "2015-06-05T10:53:28Z"}], "resolution": "FIXED", "op_sys": "Mac OS X", "cf_fx_points": "---", "cf_blocking_fennec": "---"}