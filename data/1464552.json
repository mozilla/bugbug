{"status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Client Software", "creator": "kmaglione+bmo@mozilla.com", "cc": ["continuation@gmail.com", "felipc@gmail.com", "gandalf@aviary.pl", "igoldan@mozilla.com", "jhofmann@mozilla.com", "mcastelluccio@mozilla.com", "mconley@mozilla.com"], "depends_on": [], "creation_time": "2018-05-26T00:12:38Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "summary": "Split content.js into multiple lazily-loaded modules", "cf_last_resolved": "2018-06-08T09:59:25Z", "attachments": [{"creator": "kmaglione+bmo@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-30T03:34:20Z", "type_id": 748, "creation_date": "2018-05-26T01:46:31Z", "id": 1762056, "setter": "felipc@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8980823}, {"creator": "kmaglione+bmo@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-30T03:40:23Z", "type_id": 748, "creation_date": "2018-05-26T01:46:31Z", "id": 1762057, "setter": "felipc@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8980824}, {"creator": "kmaglione+bmo@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-30T03:47:11Z", "type_id": 748, "creation_date": "2018-05-26T01:46:31Z", "id": 1762058, "setter": "felipc@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8980825}, {"creator": "kmaglione+bmo@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-30T03:55:26Z", "type_id": 748, "creation_date": "2018-05-26T01:46:31Z", "id": 1762059, "setter": "felipc@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8980826}], "assigned_to_detail": {"email": "kmaglione+bmo@mozilla.com", "id": 106098, "name": "kmaglione+bmo@mozilla.com", "real_name": "Kris Maglione [:kmag]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 14, "comments": [{"text": "content.js is currently loaded into every content frameloader, and creates tens of KB of memory overhead for a lot of functionality which is rarely needed. This should be split into several modules, which the functionality of each being loaded when first needed.", "author": "kmaglione+bmo@mozilla.com", "id": 13365560, "time": "2018-05-26T00:12:38Z"}, {"text": "Apparently some of this has already been done, and landed earlier today, so I am presumably going to conflict with someone else.", "author": "kmaglione+bmo@mozilla.com", "id": 13365607, "time": "2018-05-26T01:06:51Z"}, {"text": "Created attachment 8980823\nBug 1464552: Part 1 - Split net and cert error utils into separate JSM.\n\nReview commit: https://reviewboard.mozilla.org/r/247006/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/247006/", "author": "kmaglione+bmo@mozilla.com", "id": 13365618, "time": "2018-05-26T01:46:31Z"}, {"text": "Created attachment 8980824\nBug 1464552: Part 2 - Split blocked site handler into separate JSM.\n\nReview commit: https://reviewboard.mozilla.org/r/247008/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/247008/", "author": "kmaglione+bmo@mozilla.com", "id": 13365619, "time": "2018-05-26T01:46:31Z"}, {"text": "Created attachment 8980825\nBug 1464552: Part 3 - Split print preview helpers into separate JSM.\n\nReview commit: https://reviewboard.mozilla.org/r/247010/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/247010/", "author": "kmaglione+bmo@mozilla.com", "id": 13365620, "time": "2018-05-26T01:46:31Z"}, {"text": "Created attachment 8980826\nBug 1464552: Part 4 - Split selection source helpers into separate JSM.\n\nReview commit: https://reviewboard.mozilla.org/r/247012/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/247012/", "author": "kmaglione+bmo@mozilla.com", "id": 13365621, "time": "2018-05-26T01:46:31Z"}, {"text": "So, upon reflection, I think it might be wiser to have felipe look at these. I think he has a better sense of the direction that things are headed (or should be headed) for frame script splitting and lazi-fication.", "author": "mconley@mozilla.com", "id": 13371514, "time": "2018-05-29T15:50:07Z"}, {"text": "Comment on attachment 8980823\nBug 1464552: Part 1 - Split net and cert error utils into separate JSM.\n\nhttps://reviewboard.mozilla.org/r/247006/#review253870\n\nWe put all of the front-end modules in browser/modules, so instead of creating this new file in browser/base/content, please put it there.\n\nSame goes for the other patches in the queue. On the toolkit side, there's the toolkit/modules equivalent\n\n::: browser/base/content/NetErrorContent.jsm:6\n(Diff revision 1)\n>  /* This content script should work in any browser or iframe and should not\n>   * depend on the frame being contained in tabbrowser. */\n\nnit: remove this comment", "author": "felipc@gmail.com", "id": 13373303, "time": "2018-05-30T03:34:20Z"}, {"text": "Comment on attachment 8980824\nBug 1464552: Part 2 - Split blocked site handler into separate JSM.\n\nhttps://reviewboard.mozilla.org/r/247008/#review253874\n\n::: browser/base/content/BlockedSiteContent.jsm:6\n(Diff revision 1)\n>  /* This content script should work in any browser or iframe and should not\n>   * depend on the frame being contained in tabbrowser. */\n\n(same nit, as this comment doesn't apply anymore)", "author": "felipc@gmail.com", "id": 13373306, "time": "2018-05-30T03:40:23Z"}, {"text": "Comment on attachment 8980825\nBug 1464552: Part 3 - Split print preview helpers into separate JSM.\n\nhttps://reviewboard.mozilla.org/r/247010/#review253876", "author": "felipc@gmail.com", "id": 13373310, "time": "2018-05-30T03:47:11Z"}, {"text": "Comment on attachment 8980826\nBug 1464552: Part 4 - Split selection source helpers into separate JSM.\n\nhttps://reviewboard.mozilla.org/r/247012/#review253878\n\nThis could use defineLazyProxy to make it even cleaner in browser-content.js, which was built exactly for this use case\n\n`XPCOMUtils.defineLazyProxy(this, \"ViewSelectionSource\", \"resource://...\");`\n`addMessageListener(\"ViewSource:GetSelection\", ViewSelectionSource);`\n\nAnd then you can replace the global with `message.target`.\n\nI guess the same goes for the PrintPreview patch, but that has the added trouble of having to extract the mm from the event target.. (which isn't too hard)\n\nup to you to decide on the style", "author": "felipc@gmail.com", "id": 13373317, "time": "2018-05-30T03:55:26Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/fc197074cafbdaf86b4a17e3e2d182675ad22885\nBug 1464552: Part 1 - Split net and cert error utils into separate JSM. r=felipe\n\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/885cc804f0e0eae8532dc9cbefb7d919d7c13d44\nBug 1464552: Part 2 - Split blocked site handler into separate JSM. r=felipe\n\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/c10662f1a5b4b83752852363ec094fde349e83da\nBug 1464552: Part 3 - Split print preview helpers into separate JSM. r=felipe\n\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/fbb3ac47702ca89c99162a9cb9ad74b58a1c8395\nBug 1464552: Part 4 - Split selection source helpers into separate JSM. r=felipe", "author": "kmaglione+bmo@mozilla.com", "id": 13395274, "time": "2018-06-08T00:33:46Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/fc197074cafb\nhttps://hg.mozilla.org/mozilla-central/rev/885cc804f0e0\nhttps://hg.mozilla.org/mozilla-central/rev/c10662f1a5b4\nhttps://hg.mozilla.org/mozilla-central/rev/fbb3ac47702c", "author": "aiakab@mozilla.com", "id": 13395819, "time": "2018-06-08T09:59:25Z"}, {"text": "Perf wins from either this bug or bug 1464548:\n\n== Change summary for alert #13746 (as of Thu, 07 Jun 2018 21:33:41 GMT) ==\n\nImprovements:\n\n  2%  cpstartup content-process-startup windows7-32 opt e10s stylo     176.83 -> 172.83\n  2%  cpstartup content-process-startup windows10-64-qr opt e10s stylo 166.08 -> 162.58\n  2%  cpstartup content-process-startup windows10-64 pgo e10s stylo    160.42 -> 157.17\n  2%  cpstartup content-process-startup windows10-64 opt e10s stylo    167.00 -> 164.17\n\nFor up to date results, see: https://treeherder.mozilla.org/perf.html#/alerts?id=13746", "author": "igoldan@mozilla.com", "id": 13400328, "time": "2018-06-11T06:49:17Z"}], "id": 1464552, "priority": "P1", "mentors_detail": [], "cf_crash_signature": "", "version": "57 Branch", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "---", "cf_platform_rel": "---", "product": "Firefox", "cf_status_firefox_esr52": "---", "blocks": [1436250], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "General", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "fixed", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "Firefox 62", "is_cc_accessible": true, "cf_rank": null, "groups": [], "url": "", "creator_detail": {"email": "kmaglione+bmo@mozilla.com", "id": 106098, "name": "kmaglione+bmo@mozilla.com", "real_name": "Kris Maglione [:kmag]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, {"email": "felipc@gmail.com", "id": 208747, "name": "felipc@gmail.com", "real_name": ":Felipe Gomes (needinfo me!)"}, {"email": "gandalf@aviary.pl", "id": 41270, "name": "gandalf@aviary.pl", "real_name": "Zibi Braniecki [:gandalf][:zibi]"}, {"email": "igoldan@mozilla.com", "id": 590618, "name": "igoldan@mozilla.com", "real_name": "Ionu\u021b Goldan [:igoldan], Performance Sheriffing"}, {"email": "jhofmann@mozilla.com", "id": 522029, "name": "jhofmann@mozilla.com", "real_name": "Johann Hofmann [:johannh]"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "mconley@mozilla.com", "id": 403756, "name": "mconley@mozilla.com", "real_name": "Mike Conley (:mconley) (:\u2699\ufe0f) (Catching up on needinfos / reviews)"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-06-11T06:49:17Z", "cf_status_firefox_esr60": "---", "assigned_to": "kmaglione+bmo@mozilla.com", "is_open": false, "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "gandalf@aviary.pl"}], "who": "gandalf@aviary.pl", "when": "2018-05-26T00:13:44Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8980823, "added": "review?(mconley@mozilla.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8980824, "added": "review?(mconley@mozilla.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8980825, "added": "review?(mconley@mozilla.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8980826, "added": "review?(mconley@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "mconley@mozilla.com"}], "who": "kmaglione+bmo@mozilla.com", "when": "2018-05-26T01:46:31Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2018-05-26T02:34:38Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "felipc@gmail.com, jhofmann@mozilla.com"}], "who": "jhofmann@mozilla.com", "when": "2018-05-28T07:36:22Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mconley@mozilla.com)", "attachment_id": 8980823, "added": "review?(felipc@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "review?(mconley@mozilla.com)", "attachment_id": 8980824, "added": "review?(felipc@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "review?(mconley@mozilla.com)", "attachment_id": 8980825, "added": "review?(felipc@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "review?(mconley@mozilla.com)", "attachment_id": 8980826, "added": "review?(felipc@gmail.com)"}], "who": "mconley@mozilla.com", "when": "2018-05-29T15:48:19Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "continuation@gmail.com"}], "who": "continuation@gmail.com", "when": "2018-05-29T17:31:16Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(felipc@gmail.com)", "attachment_id": 8980823, "added": "review+"}], "who": "felipc@gmail.com", "when": "2018-05-30T03:34:20Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(felipc@gmail.com)", "attachment_id": 8980824, "added": "review+"}], "who": "felipc@gmail.com", "when": "2018-05-30T03:40:23Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(felipc@gmail.com)", "attachment_id": 8980825, "added": "review+"}], "who": "felipc@gmail.com", "when": "2018-05-30T03:47:11Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(felipc@gmail.com)", "attachment_id": 8980826, "added": "review+"}], "who": "felipc@gmail.com", "when": "2018-05-30T03:55:26Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P1"}], "who": "dolske@mozilla.com", "when": "2018-06-05T05:06:04Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "Firefox 62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-06-08 09:59:25"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "aiakab@mozilla.com", "when": "2018-06-08T09:59:25Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "igoldan@mozilla.com"}], "who": "igoldan@mozilla.com", "when": "2018-06-11T06:49:17Z"}]}