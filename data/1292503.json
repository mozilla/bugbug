{"status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "jsnajdr@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2016-08-08T10:57:10Z", "type_id": 748, "creation_date": "2016-08-05T11:33:07Z", "id": 1434424, "setter": "poirot.alex@gmail.com"}], "content_type": "text/plain", "id": 8778220}], "classification": "Client Software", "creator": "jsnajdr@gmail.com", "cc": ["cirdeiliviu@gmail.com", "jmathies@mozilla.com", "poirot.alex@gmail.com"], "depends_on": [], "creation_time": "2016-08-05T10:56:49Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Fix e10s issues in resending HTTP requests, enable browser_net_resend.js test", "id": 1292503, "cf_status_firefox50": "---", "assigned_to_detail": {"email": "jsnajdr@gmail.com", "id": 538821, "name": "jsnajdr@gmail.com", "real_name": "Jarda Snajdr [:jsnajdr]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "jsnajdr@gmail.com", "comment_count": 7, "comments": [{"text": "In bug 1091612, the browser_net_resend.js test was disabled in e10s, because the resend feature doesn't work 100% in multiprocess mode.\n\nLet's fix the cause and re-enable the test.", "author": "jsnajdr@gmail.com", "id": 11601840, "time": "2016-08-05T10:56:49Z"}, {"text": "Created attachment 8778220\nFix e10s issues in resending HTTP requests, enable browser_net_resend.js test\n\nThe WebConsoleActor.onSendHTTPRequest method sends a HTTP request, creates an empty NetworkEventActor for it, and returns it to the caller. This way, the caller can associate future network events with the request. [1]\n\nWhen creating a new NetworkEventActor, the getNetworkEventActor checks if the actor for the request was already created, and returns the already existing one. The key in the this._netEvents map is the nsIChannel. [2]\n\nThis works well in single process, where the onNetworkEvent function is called from [3]. However, in e10s, the network events are proxied to the child from the parent, and the call to onNetworkEvent at [4] doesn't know the channel. Therefore, the existing actor is not found and a new one is created.\n\nSince we now have channelId property on the nsIHttpChannel, this is easy to fix. Just use the channelId that is now available both in parent and child. The onNetworkEvent method now needs only one parameter - aEvent. It already has the channelId as a property. The aChannel parameter is no longer needed, and the third one, the networkMonitor instance, was already never used.\n\n[1] http://searchfox.org/mozilla-central/source/devtools/server/actors/webconsole.js#1580-1588\n[2] http://searchfox.org/mozilla-central/source/devtools/server/actors/webconsole.js#1548-1554\n[3] http://searchfox.org/mozilla-central/source/devtools/shared/webconsole/network-monitor.js#1082\n[4] http://searchfox.org/mozilla-central/source/devtools/shared/webconsole/network-monitor.js#1481", "author": "jsnajdr@gmail.com", "id": 11601901, "time": "2016-08-05T11:33:07Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=137781cf8580", "author": "jsnajdr@gmail.com", "id": 11601929, "time": "2016-08-05T11:54:07Z"}, {"text": "Comment on attachment 8778220\nFix e10s issues in resending HTTP requests, enable browser_net_resend.js test\n\nReview of attachment 8778220:\n-----------------------------------------------------------------\n\nMakes a lot of sense. Thanks for the cleanup.", "author": "poirot.alex@gmail.com", "id": 11606573, "time": "2016-08-08T10:57:10Z"}, {"text": "Pushed by kwierso@gmail.com:\nhttps://hg.mozilla.org/integration/fx-team/rev/100cd15ce84d\nFix e10s issues in resending HTTP requests, enable browser_net_resend.js test r=ochameau", "author": "pulsebot@bots.tld", "id": 11616266, "time": "2016-08-11T00:14:40Z"}, {"text": "https://hg.mozilla.org/integration/fx-team/rev/100cd15ce84d", "author": "kwierso@gmail.com", "id": 11616271, "time": "2016-08-11T00:14:46Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/100cd15ce84d", "author": "kwierso@gmail.com", "id": 11622329, "time": "2016-08-12T21:39:31Z"}], "cf_last_resolved": "2016-08-12T21:39:31Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2016-08-12T21:39:31Z", "cf_platform_rel": "---", "product": "Firefox", "cf_status_firefox_esr52": "---", "blocks": [1091612, 1270096], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Developer Tools: Netmonitor", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "Firefox 51", "is_cc_accessible": true, "url": "", "creator_detail": {"email": "jsnajdr@gmail.com", "id": 538821, "name": "jsnajdr@gmail.com", "real_name": "Jarda Snajdr [:jsnajdr]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "cirdeiliviu@gmail.com", "id": 557660, "name": "cirdeiliviu@gmail.com", "real_name": "Liviu Cirdei"}, {"email": "jmathies@mozilla.com", "id": 279663, "name": "jmathies@mozilla.com", "real_name": "Jim Mathies [:jimm]"}, {"email": "poirot.alex@gmail.com", "id": 283262, "name": "poirot.alex@gmail.com", "real_name": "Alexandre Poirot [:ochameau]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "blocks", "added": "1091612, 1270096"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "jsnajdr@gmail.com"}], "who": "jsnajdr@gmail.com", "when": "2016-08-05T10:57:12Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8778220, "added": "review?(poirot.alex@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "poirot.alex@gmail.com"}], "who": "jsnajdr@gmail.com", "when": "2016-08-05T11:33:07Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "liviu.cirdei@softvision.ro"}, {"removed": "---", "field_name": "cf_tracking_e10s", "added": "?"}], "who": "cirdeiliviu@gmail.com", "when": "2016-08-08T08:46:04Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(poirot.alex@gmail.com)", "attachment_id": 8778220, "added": "review+"}], "who": "poirot.alex@gmail.com", "when": "2016-08-08T10:57:10Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}], "who": "jsnajdr@gmail.com", "when": "2016-08-08T11:00:33Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}], "who": "pulsebot@bots.tld", "when": "2016-08-11T00:14:40Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jmathies@mozilla.com"}, {"removed": "?", "field_name": "cf_tracking_e10s", "added": "+"}], "who": "jmathies@mozilla.com", "when": "2016-08-11T16:35:16Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "Firefox 51"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2016-08-12 21:39:31"}, {"removed": "---", "field_name": "cf_status_firefox51", "added": "fixed"}], "who": "kwierso@gmail.com", "when": "2016-08-12T21:39:31Z"}]}