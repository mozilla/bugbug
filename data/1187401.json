{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "seth.bugzilla@blackhail.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-08-17T19:25:26Z", "type_id": 4, "creation_date": "2015-08-15T00:48:41Z", "id": 1232582, "setter": "tnikkel@gmail.com"}], "content_type": "text/plain", "id": 8648317}, {"creator": "seth.bugzilla@blackhail.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-08-17T19:31:15Z", "type_id": 4, "creation_date": "2015-08-15T00:50:45Z", "id": 1232583, "setter": "tnikkel@gmail.com"}], "content_type": "text/plain", "id": 8648318}, {"creator": "seth.bugzilla@blackhail.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-08-17T19:31:41Z", "type_id": 4, "creation_date": "2015-08-15T00:52:58Z", "id": 1232586, "setter": "tnikkel@gmail.com"}], "content_type": "text/plain", "id": 8648320}], "classification": "Components", "creator": "seth.bugzilla@blackhail.net", "cc": ["tnikkel@gmail.com"], "depends_on": [1187386], "creation_time": "2015-07-24T17:46:11Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "All", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Remove Decoder::GetDecodeTotallyDone()", "id": 1187401, "assigned_to_detail": {"email": "seth.bugzilla@blackhail.net", "id": 452036, "name": "seth.bugzilla@blackhail.net", "real_name": "Seth Fowler [:seth] [:s2h]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_status_firefox45": "---", "cf_has_regression_range": "---", "assigned_to": "seth.bugzilla@blackhail.net", "comment_count": 7, "comments": [{"text": "We should rework the code in RasterImage::FinalizeDecoder so that Decoder::GetDecodeTotallyDone() is unnecessary, and then remove it. I would've made this change in bug 1187386, but since that's a refactoring bug I wanted to minimize the risk of changing behavior in that bug.", "author": "seth.bugzilla@blackhail.net", "id": 10535140, "time": "2015-07-24T17:46:11Z"}, {"text": "Created attachment 8648317\n(Part 1) - Simplify the condition that determines whether we set RasterImage::mHasBeenDecoded\n\nI think we can, and should, use a simpler condition here. Basically, if the\ndecoder was a full decoder, and it finished and wasn't aborted early, then we\ncan set mHasBeenDecoded to true. It doesn't matter whether we encountered an\nerror or not. I don't see any good reason to have different behavior if an error\nwas encountered, so that issue is ignored in the new condition.\n\nThis does mean that we're changing our behavior a little bit here, because\npreviously if a full decoder finished but did not set Decoder::mDecodeDone, we\nwouldn't set RasterImage::mHasBeenDecoded. This seems pointless, though, because\nthis would always result from a deterministic error condition, so we effectively\n*have* decoded the image to the extent that we can. And doing it the way we do\nnow hurts us, because it means that seriously corrupt, but small, images could\npotentially get decoded on the main thread repeatedly when SYNC_DECODE_IF_FAST\nis passed, since mHasBeenDecoded will never get set.", "author": "seth.bugzilla@blackhail.net", "id": 10621605, "time": "2015-08-15T00:48:41Z"}, {"text": "Created attachment 8648318\n(Part 2) - Eliminate the nsresult return value from RasterImage::SetMetadata, since it's not used anymore\n\nThis is a pure refactoring patch: since we're not using the return value from\nSetMetadata() anymore, let's get rid of it.", "author": "seth.bugzilla@blackhail.net", "id": 10621606, "time": "2015-08-15T00:50:45Z"}, {"text": "Created attachment 8648320\n(Part 3) - For consistency, call DoError if SetMetadata sees a negative size\n\nI noticed that we don't call DoError() if SetMetadata() sees a negative size.\nThis could trigger the assertion in FinalizeDecoder() that we always either\nencounter an error or get the size in SetMetadata(). It's also inconsistent\nbehavior. So let's fix that.", "author": "seth.bugzilla@blackhail.net", "id": 10621612, "time": "2015-08-15T00:52:58Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=7c5872901ab5", "author": "seth.bugzilla@blackhail.net", "id": 10621613, "time": "2015-08-15T00:55:27Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/9bfb0efd0b6f\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/dc4bec055512\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/08dd09256e7e", "author": "seth.bugzilla@blackhail.net", "id": 10633151, "time": "2015-08-19T00:20:14Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/9bfb0efd0b6f\nhttps://hg.mozilla.org/mozilla-central/rev/dc4bec055512\nhttps://hg.mozilla.org/mozilla-central/rev/08dd09256e7e", "author": "ryanvm@gmail.com", "id": 10634794, "time": "2015-08-19T11:43:29Z"}], "cf_last_resolved": "2015-08-19T11:43:29Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-08-19T11:43:29Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "ImageLib", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla43", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "seth.bugzilla@blackhail.net", "id": 452036, "name": "seth.bugzilla@blackhail.net", "real_name": "Seth Fowler [:seth] [:s2h]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "tnikkel@gmail.com", "id": 255010, "name": "tnikkel@gmail.com", "real_name": "Timothy Nikkel (:tnikkel)"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8648317, "added": "review?(tnikkel@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "tnikkel@gmail.com"}], "who": "seth.bugzilla@blackhail.net", "when": "2015-08-15T00:48:41Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8648318, "added": "review?(tnikkel@gmail.com)"}], "who": "seth.bugzilla@blackhail.net", "when": "2015-08-15T00:50:45Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8648320, "added": "review?(tnikkel@gmail.com)"}], "who": "seth.bugzilla@blackhail.net", "when": "2015-08-15T00:52:58Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(tnikkel@gmail.com)", "attachment_id": 8648317, "added": "review+"}], "who": "tnikkel@gmail.com", "when": "2015-08-17T19:25:26Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(tnikkel@gmail.com)", "attachment_id": 8648318, "added": "review+"}], "who": "tnikkel@gmail.com", "when": "2015-08-17T19:31:15Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(tnikkel@gmail.com)", "attachment_id": 8648320, "added": "review+"}], "who": "tnikkel@gmail.com", "when": "2015-08-17T19:31:41Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla43"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-08-19 04:43:29"}, {"removed": "---", "field_name": "cf_status_firefox43", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2015-08-19T11:43:29Z"}], "resolution": "FIXED", "op_sys": "All", "cf_fx_points": "---", "cf_blocking_fennec": "---"}