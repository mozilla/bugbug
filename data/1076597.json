{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "kyle@nonpolynomial.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "feedback", "modification_date": "2014-10-03T12:38:31Z", "type_id": 607, "creation_date": "2014-10-02T05:37:29Z", "id": 993680, "setter": "lissyx+mozillians@lissyx.dyndns.org"}], "content_type": "text/plain", "id": 8498652}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8500406}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8500408}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8500480}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8500481}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8501037}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8501038}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8501072}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-10-07T17:41:22Z", "type_id": 4, "creation_date": "2014-10-07T17:18:49Z", "id": 998033, "setter": "bent.mozilla@gmail.com"}], "content_type": "text/plain", "id": 8501192}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-10-08T07:05:14Z", "type_id": 4, "creation_date": "2014-10-08T07:05:14Z", "id": 998799, "setter": "lissyx+mozillians@lissyx.dyndns.org"}], "content_type": "text/plain", "id": 8501537}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-10-08T09:08:30Z", "type_id": 4, "creation_date": "2014-10-08T09:08:30Z", "id": 998902, "setter": "lissyx+mozillians@lissyx.dyndns.org"}], "content_type": "text/plain", "id": 8501613}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-10-08T13:29:20Z", "type_id": 4, "creation_date": "2014-10-08T13:29:20Z", "id": 999116, "setter": "lissyx+mozillians@lissyx.dyndns.org"}], "content_type": "text/plain", "id": 8501718}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-10-09T07:25:15Z", "type_id": 4, "creation_date": "2014-10-09T07:25:15Z", "id": 1000036, "setter": "lissyx+mozillians@lissyx.dyndns.org"}], "content_type": "text/plain", "id": 8502305}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8502421}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-10-09T11:07:58Z", "type_id": 4, "creation_date": "2014-10-09T11:07:58Z", "id": 1000213, "setter": "lissyx+mozillians@lissyx.dyndns.org"}], "content_type": "text/plain", "id": 8502423}, {"creator": "lissyx+mozillians@lissyx.dyndns.org", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-10-09T12:12:53Z", "type_id": 4, "creation_date": "2014-10-09T12:12:53Z", "id": 1000240, "setter": "lissyx+mozillians@lissyx.dyndns.org"}, {"status": "+", "name": "approval-mozilla-b2g34", "modification_date": "2014-10-15T00:32:52Z", "type_id": 870, "creation_date": "2014-10-12T13:31:23Z", "id": 1002576, "setter": "bajaj.bhavana@gmail.com"}], "content_type": "text/plain", "id": 8502447}, {"creator": "malini@malinidas.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8513491}], "classification": "Components", "creator": "kyle@nonpolynomial.com", "mentors_detail": [], "depends_on": [1083685, 1092941], "cf_status_firefox33": "wontfix", "cf_has_str": "---", "cf_status_firefox35": "fixed", "cf_status_firefox34": "wontfix", "mentors": [], "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86_64", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "cf_fx_iteration": "---", "summary": "Race condition in settings api during app shutdown", "cf_last_resolved": "2014-10-09T23:43:53Z", "votes": 0, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 88, "comments": [{"text": "When an app shuts down, the SettingsManager will try to close all of its locks during dom-window-destroyed, by sending the Finalize message for each lock to the SettingsRequestManager. However, at the time of child message manager death, the SettingsRequestManager receives a child-process-shutdown event through the observer, and calls removeMessageManager, which removes all tracked locks and tasks for that message manager. This means that if we have things that shut down quickly while also running settings calls (like, say, the callscreen in bug 1070066), settings calls can be made that will never actually commit to the database, finish, and be broadcast to observers.\n\nThe fix here is an interesting question. I /think/ the right solution is that instead of just killing locks/tasks in removeMessageManager, we somehow make sure that finalize is going to be called on the remaining locks for the message manager. The app itself won't get anything back, but we'll still let the rest of the system update.", "author": "kyle@nonpolynomial.com", "id": 9391659, "time": "2014-10-02T03:17:23Z"}, {"text": "Created attachment 8498652\nPatch 1 (v1) - WIP: Always finalize open locks on child process death\n\nHere's my cleaned up WIP. Honestly, this could probably land this way.\n\nThis changes what happens when we remove a message manager due to child process death. It used to be that we would just clear out all of the tasks, and transactions would die unfinished. Now, we make sure that all locks have a finalize task. If they don't, we queue one for them. This means that all locks for the dead message manager will still be in the queue, but should finish their transaction, which means observers will be called.\n\nNote that I have NOT run mochis on this yet, just ran it on the phone, and it seems ok there. Doing a desktop build now, will post mochi results when that's done.", "author": "kyle@nonpolynomial.com", "id": 9392093, "time": "2014-10-02T05:37:29Z"}, {"text": "Patch clears mochis fine.", "author": "kyle@nonpolynomial.com", "id": 9392132, "time": "2014-10-02T05:52:59Z"}, {"text": "Comment on attachment 8498652\nPatch 1 (v1) - WIP: Always finalize open locks on child process death\n\nReview of attachment 8498652:\n-----------------------------------------------------------------\n\nI have been looking at this since yesterday, and it all makes a lot of sense. I have been testing this on my Xperia ZR and now on my Flame. As far as I can say, for the ZR at least, I could not reproduce anymore most of the settings-related bugs once applied.\n\nI would like, however, to be able to write some tests to make this nicer.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9398975, "time": "2014-10-03T12:38:31Z"}, {"text": "[Blocking Requested - why for this release]: because triggered by STRs of bug 1070066 which is 2.1+", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9399153, "time": "2014-10-03T13:21:28Z"}, {"text": "Created attachment 8500406\nSettings API messages unit testing", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9406443, "time": "2014-10-06T12:57:53Z"}, {"text": "Created attachment 8500408\nFix Settings API shutdown race condition", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9406446, "time": "2014-10-06T12:57:56Z"}, {"text": "Created attachment 8500480\nSettings API messages unit testing", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9407222, "time": "2014-10-06T15:36:02Z"}, {"text": "Created attachment 8500481\nFix Settings API shutdown race condition", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9407223, "time": "2014-10-06T15:36:06Z"}, {"text": "There is few changes on the fix itself, mostly cosmetic. Tests are getting into shape, and now all bits should be in place to implement the core logic exposing the race condition there.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9407234, "time": "2014-10-06T15:38:53Z"}, {"text": "Regression", "author": "anygregor@gmail.com", "id": 9407371, "time": "2014-10-06T16:06:14Z"}, {"text": "Try with tests and fix: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=a9bf91bc0468\nTry with only tests: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=1a879a93cd4f", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9412299, "time": "2014-10-07T10:09:40Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #11)\n> Try with tests and fix:\n> https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=a9bf91bc0468\n> Try with only tests:\n> https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=1a879a93cd4f\n\nAnd those are invalid because one need to add the xpcshell.ini to http://dxr.mozilla.org/mozilla-central/source/testing/xpcshell/xpcshell_b2g.ini :(", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9413031, "time": "2014-10-07T13:20:13Z"}, {"text": "New set of try:\n - fix and tests: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=2552a4baec12\n - tests only: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=e569aefef30e", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9413071, "time": "2014-10-07T13:30:04Z"}, {"text": "Created attachment 8501037\nSettings API messages unit testing", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9413091, "time": "2014-10-07T13:34:59Z"}, {"text": "Created attachment 8501038\nFix Settings API shutdown race condition", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9413092, "time": "2014-10-07T13:35:04Z"}, {"text": "With those two patches, we expect to have:\n - try green with the fix\n - try red (timeout) without", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9413153, "time": "2014-10-07T13:49:02Z"}, {"text": "Created attachment 8501072\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9413367, "time": "2014-10-07T14:27:07Z"}, {"text": "Comment on attachment 8501072\nFix Settings API shutdown race condition r=bent\n\nBen, according to git log you have been reviewing a lot of patches on dom/settings. Since qDot is away, I'm asking you for review on this. This patch is the same as the two others one, it's just a squashed as one commit and with debug disabled.\n\nIf someone else is more suited to review this, feel free to transfer :)", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9413387, "time": "2014-10-07T14:29:41Z"}, {"text": "Created attachment 8501192\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9414386, "time": "2014-10-07T17:09:41Z"}, {"text": "Comment on attachment 8501192\nFix Settings API shutdown race condition r=bent\n\nChanged the name of the setting used in the test since the previous one exists and made the first test to fail (since it expects it does not exists)", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9414422, "time": "2014-10-07T17:18:49Z"}, {"text": "Re-triggered try because of failure.\nTry with tests: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=2577906394be\nTry with tests and fix: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=1d6aa022af4a", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9414453, "time": "2014-10-07T17:24:10Z"}, {"text": "Comment on attachment 8501192\nFix Settings API shutdown race condition r=bent\n\nReview of attachment 8501192:\n-----------------------------------------------------------------\n\n::: dom/settings/SettingsRequestManager.jsm\n@@ +751,5 @@\n>      let closedLockIDs = [];\n>      let lockIDs = Object.keys(this.lockInfo);\n>      for (let i in lockIDs) {\n> +      let lock = this.lockInfo[lockIDs[i]];\n> +      if (lock._mm == aMsgMgr) {\n\nCan you also verify that the principal is the same?\n\n@@ +753,5 @@\n>      for (let i in lockIDs) {\n> +      let lock = this.lockInfo[lockIDs[i]];\n> +      if (lock._mm == aMsgMgr) {\n> +        let is_finalizing = false;\n> +        for (let task_index in lock.tasks) {\n\nCan you iterate backwards? Finalize should be at the end.", "author": "bent.mozilla@gmail.com", "id": 9414567, "time": "2014-10-07T17:41:22Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #21)\n> Re-triggered try because of failure.\n> Try with tests:\n> https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=2577906394be\n> Try with tests and fix:\n> https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=1d6aa022af4a\n\nTests worked as expected, but we have an issue on https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=1d6aa022af4a (which should be green): it's broken on emulator debug, with an IndexedDB error :(", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9417517, "time": "2014-10-08T05:23:49Z"}, {"text": "New set of try with the addressed review comments:\n https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=0afae351c3de\n https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=49b4f89be8b5", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9417608, "time": "2014-10-08T06:14:46Z"}, {"text": "Created attachment 8501537\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9417614, "time": "2014-10-08T06:16:27Z"}, {"text": "Comment on attachment 8501537\nFix Settings API shutdown race condition r=bent\n\nCarrying r+ from attachment 8501192\nAdding principal check and backward iteration on tasks.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9417790, "time": "2014-10-08T07:05:14Z"}, {"text": "The error seems to be 100% reproductible on b2g emulator debug. Looking at full log, I see:\n> 00:41:00     INFO -  10-08 06:06:50.791 I/Gecko   ( 1567): -*- SettingsRequestManager: Making READWRITE transaction for 435d2192-4f21-48d4-90b7-285f147a56be\n> 00:41:00     INFO -  10-08 06:06:50.841 I/Gecko   ( 1567): -*- SettingsRequestManager: Making get request for xpcshell.language.current\n> 00:41:00     INFO -  10-08 06:06:50.981 I/Gecko   ( 1567): [1567] WARNING: 'NS_FAILED(rv)', file ../../../gecko/dom/indexedDB/ActorsParent.cpp, line 6582\n> 00:41:00     INFO -  10-08 06:06:51.001 I/Gecko   ( 1567): [1567] WARNING: 'NS_FAILED(rv)', file ../../../gecko/dom/indexedDB/ActorsParent.cpp, line 12877\n> 00:41:00     INFO -  10-08 06:06:51.011 I/Gecko   ( 1567): [1567] WARNING: Converting non-IndexedDB error code (0x80630001) to NS_ERROR_DOM_INDEXEDDB_UNKNOWN_ERR: file ../../../gecko/dom/indexedDB/ActorsParent.cpp, line 408\n> 00:41:00  WARNING -  10-08 06:06:51.021 W/GeckoConsole( 1567): [JavaScript Error: \"IndexedDB UnknownErr: ActorsParent.cpp:414\"]\n> 00:41:00     INFO -  10-08 06:06:51.101 I/Gecko   ( 1567): -*- SettingsRequestManager: Transaction for lock 435d2192-4f21-48d4-90b7-285f147a56be aborted\n> 00:41:00     INFO -  10-08 06:06:51.141 I/Gecko   ( 1567): -*- SettingsRequestManager: getRequest FAILED xpcshell.language.current\n\nDoing a local run against b2g desktop in debug mode, I don't reproduce :(", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9418114, "time": "2014-10-08T08:17:15Z"}, {"text": "Created attachment 8501613\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9418297, "time": "2014-10-08T09:06:17Z"}, {"text": "Comment on attachment 8501613\nFix Settings API shutdown race condition r=bent\n\nCarrying r+ from attachment 8501192\nFixing some js warning/errors triggered in debug build. Also changed the Settings:Get, hoping this will make emulator debug happy.\nTry: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=98ad1b0fb7e5", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9418308, "time": "2014-10-08T09:08:30Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #24)\n> New set of try with the addressed review comments:\n>  https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=0afae351c3de\n>  https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=49b4f89be8b5\n\nApart from the emulator-debug failure still present, those try are ok: red without the fix, green with.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9418585, "time": "2014-10-08T10:16:44Z"}, {"text": "Created attachment 8501718\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419101, "time": "2014-10-08T13:02:27Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #31)\n> Created attachment 8501718\n> Fix Settings API shutdown race condition r=bent\n> \n> When child message manager dies, it sends a child-process-shutdown\n> message to the SettingsRequestManager. This would just close the locks\n> and tasks of this message manager. The race happens when some\n> applications can shutdown quickly: settings requests will never be\n> committed to the database. One example is the callscreen. The fix,\n> provided by qDot, simply put those tasks in a finalize state to make\n> sure they are properly executed and committed.\n\nChanged the lock id to use \"{uuid}\" instead of \"uuid\".\n\nNew try: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=58f9248a4c99\n\nLocally, this is passing in my emulator debug :(", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419108, "time": "2014-10-08T13:03:42Z"}, {"text": "Comment on attachment 8501718\nFix Settings API shutdown race condition r=bent\n\nCarrying r+", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419224, "time": "2014-10-08T13:29:20Z"}, {"text": "Try at: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=98ad1b0fb7e5 is green for opt, with some known unrelated intermittents.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419638, "time": "2014-10-08T14:39:12Z"}, {"text": "Try: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=58f9248a4c99\nThis one just fixes the lock id, adding curly bracsed around.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419640, "time": "2014-10-08T14:40:25Z"}, {"text": "Try: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=c12c7577df9c\nThis one just removes debug, in case it could explain the failures", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419642, "time": "2014-10-08T14:41:11Z"}, {"text": "Try: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=839f49403404\nThis one blacklist the added test for gonk debug, to avoid red on b2g emulator debug builds", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419644, "time": "2014-10-08T14:41:48Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #27)\n> The error seems to be 100% reproductible on b2g emulator debug. Looking at\n> full log, I see:\n> > 00:41:00     INFO -  10-08 06:06:50.791 I/Gecko   ( 1567): -*- SettingsRequestManager: Making READWRITE transaction for 435d2192-4f21-48d4-90b7-285f147a56be\n> > 00:41:00     INFO -  10-08 06:06:50.841 I/Gecko   ( 1567): -*- SettingsRequestManager: Making get request for xpcshell.language.current\n> > 00:41:00     INFO -  10-08 06:06:50.981 I/Gecko   ( 1567): [1567] WARNING: 'NS_FAILED(rv)', file ../../../gecko/dom/indexedDB/ActorsParent.cpp, line 6582\n> > 00:41:00     INFO -  10-08 06:06:51.001 I/Gecko   ( 1567): [1567] WARNING: 'NS_FAILED(rv)', file ../../../gecko/dom/indexedDB/ActorsParent.cpp, line 12877\n> > 00:41:00     INFO -  10-08 06:06:51.011 I/Gecko   ( 1567): [1567] WARNING: Converting non-IndexedDB error code (0x80630001) to NS_ERROR_DOM_INDEXEDDB_UNKNOWN_ERR: file ../../../gecko/dom/indexedDB/ActorsParent.cpp, line 408\n> > 00:41:00  WARNING -  10-08 06:06:51.021 W/GeckoConsole( 1567): [JavaScript Error: \"IndexedDB UnknownErr: ActorsParent.cpp:414\"]\n> > 00:41:00     INFO -  10-08 06:06:51.101 I/Gecko   ( 1567): -*- SettingsRequestManager: Transaction for lock 435d2192-4f21-48d4-90b7-285f147a56be aborted\n> > 00:41:00     INFO -  10-08 06:06:51.141 I/Gecko   ( 1567): -*- SettingsRequestManager: getRequest FAILED xpcshell.language.current\n> \n> Doing a local run against b2g desktop in debug mode, I don't reproduce :(\n\nBen, I could not even reproduce locally on a debug b2g in emulator. See above, I've sent a couple of try with slight changes. My plan is to land the fix with the test running on b2g emulator opt, and file a followup for this issue.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9419991, "time": "2014-10-08T15:39:53Z"}, {"text": "The error code here says that the database is locked by another process... I don't know how that could happen since we should only touch the file from the parent process.", "author": "bent.mozilla@gmail.com", "id": 9422208, "time": "2014-10-08T21:35:51Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #37)\n> Try: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=839f49403404\n> This one blacklist the added test for gonk debug, to avoid red on b2g\n> emulator debug builds\n>\n> Try: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=c12c7577df9c\n> This one just removes debug, in case it could explain the failures\n\nBoth are green, so it would have been fixed by removing debug \\o/\n\nI retriggered 10 jobs for each xpcshell tests in each build, just to make sure. But if we can land this without the disabling for b2g emulator debug, it's a good news :)", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9423678, "time": "2014-10-09T05:18:57Z"}, {"text": "Try with skip: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=a92a8ee50547\nTry without skip: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=5c80e298220a\n\nFrom the second link, it seems that removing the SettingsRequestManager debug improved the situation but it is still failing often enough for this not to be reliable for sherrifs. So I think the safe way is to disable this test for b2g emulator debug builds.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9423930, "time": "2014-10-09T07:13:30Z"}, {"text": "Created attachment 8502305\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9423956, "time": "2014-10-09T07:22:56Z"}, {"text": "Comment on attachment 8502305\nFix Settings API shutdown race condition r=bent\n\nCarrying r+ from :bent", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9423966, "time": "2014-10-09T07:25:15Z"}, {"text": "Try is green for b2g emulator opt, after retriggers: https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=a92a8ee50547\n\nThe only failure are known intermittents.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9424226, "time": "2014-10-09T08:30:54Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/318da8a0ab90", "author": "cbook@mozilla.com", "id": 9424322, "time": "2014-10-09T09:02:44Z"}, {"text": "Created attachment 8502421\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9424822, "time": "2014-10-09T11:04:08Z"}, {"text": "Comment on attachment 8502305\nFix Settings API shutdown race condition r=bent\n\nobsolete by backout", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9424826, "time": "2014-10-09T11:04:41Z"}, {"text": "Created attachment 8502423\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9424831, "time": "2014-10-09T11:06:41Z"}, {"text": "Comment on attachment 8502423\nFix Settings API shutdown race condition r=bent\n\nCarrying r+ from :bent\n\nDisabling the test on non b2g builds and on emulator/debug.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9424833, "time": "2014-10-09T11:07:58Z"}, {"text": "Finger crossed, but this one should be green ...", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9424836, "time": "2014-10-09T11:08:40Z"}, {"text": "had to backout again for https://treeherder.mozilla.org/ui/logviewer.html#?job_id=2886050&repo=mozilla-inbound\n\nmaybe we need to run try again ?", "author": "cbook@mozilla.com", "id": 9424964, "time": "2014-10-09T12:01:22Z"}, {"text": "Created attachment 8502447\nFix Settings API shutdown race condition r=bent\n\nWhen child message manager dies, it sends a child-process-shutdown\nmessage to the SettingsRequestManager. This would just close the locks\nand tasks of this message manager. The race happens when some\napplications can shutdown quickly: settings requests will never be\ncommitted to the database. One example is the callscreen. The fix,\nprovided by qDot, simply put those tasks in a finalize state to make\nsure they are properly executed and committed.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9425021, "time": "2014-10-09T12:12:09Z"}, {"text": "Comment on attachment 8502447\nFix Settings API shutdown race condition r=bent\n\nCarrying r+, fixing typo in skip-if", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9425026, "time": "2014-10-09T12:12:53Z"}, {"text": "https://hg.mozilla.org/integration/b2g-inbound/rev/69866036d793", "author": "ryanvm@gmail.com", "id": 9425985, "time": "2014-10-09T15:41:23Z"}, {"text": "*** Bug 1074379 has been marked as a duplicate of this bug. ***", "author": "bugzilla@sherk.me", "id": 9426558, "time": "2014-10-09T17:10:59Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/69866036d793", "author": "kwierso@gmail.com", "id": 9428521, "time": "2014-10-09T23:43:53Z"}, {"text": "Please request b2g34 approval on this patch when you get a chance.", "author": "ryanvm@gmail.com", "id": 9433496, "time": "2014-10-11T01:50:00Z"}, {"text": "Sure.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9435808, "time": "2014-10-12T13:28:10Z"}, {"text": "Comment on attachment 8502447\nFix Settings API shutdown race condition r=bent\n\nNOTE: Please see https://wiki.mozilla.org/Release_Management/B2G_Landing to better understand the B2G approval process and landings.\n\n[Approval Request Comment]\nBug caused by (feature/regressing bug #): Settings OOP\nUser impact if declined: improper api settings behavior on quickly shutting down applications\nTesting completed: adding xpcshell tests to ensure the race is covered, merged in master since a couple of days, multiple QA (:jlorenzo) checking of the patch to assert it was fixing the depends\nRisk to taking this patch (and alternatives if risky): low\nString or UUID changes made by this patch: none", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9435811, "time": "2014-10-12T13:31:23Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-b2g34_v2_1/rev/151136a2bdb8", "author": "ryanvm@gmail.com", "id": 9447602, "time": "2014-10-15T01:39:32Z"}, {"text": "OK, so this land on b-i and around the same time, Mnw goes basically permafail (with errors that I swear I remember qDot hitting at one point too). Now it gets uplifted to b2g34 and also permafail. Coincidence? :)\nhttps://treeherder.mozilla.org/ui/logviewer.html#?job_id=3660&repo=mozilla-b2g34_v2_1\n\nI'm backing this out from b2g34 for now to see if Mnw indeed greens up. If so, I'm going to recommend doing the same on trunk as well.\nhttps://hg.mozilla.org/releases/mozilla-b2g34_v2_1/rev/76b4a13e4fc7", "author": "ryanvm@gmail.com", "id": 9452328, "time": "2014-10-15T19:46:51Z"}, {"text": "Yep, backing it out got us back from permafail to our more usual just fails most of the time state. I'd recommend backing it out from m-c as well, but seeing as how Mnw isn't a sheriffed test suite at this point, I'll defer to the bug owners here to decide.", "author": "ryanvm@gmail.com", "id": 9453232, "time": "2014-10-15T22:36:55Z"}, {"text": "Well, it sort of fixed the perma-fail. I did indeed make the cascade of failures from comment 61 go away. However, test_dom_BluetoothManager_enabled.js is still perma-failing afterwards.", "author": "ryanvm@gmail.com", "id": 9453561, "time": "2014-10-15T23:55:50Z"}, {"text": "(In reply to Ryan VanderMeulen [:RyanVM UTC-4] from comment #63)\n> Well, it sort of fixed the perma-fail. I did indeed make the cascade of\n> failures from comment 61 go away. However,\n> test_dom_BluetoothManager_enabled.js is still perma-failing afterwards.\n\nSo test_dom_BluetoothManager_enabled.js is perma-fail without my patch, how can we be sure that it's my patch that is causing this mess then?", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9454803, "time": "2014-10-16T07:18:30Z"}, {"text": "Mach does not work. This will be hard to work on:\n\nalex@portable-alex:~/codaz/Mozilla/b2g/devices/Emulator/B2G$ ./mach help marionette-webapi\nusage: mach [global arguments] marionette-webapi [command arguments]\n\nRun a Marionette webapi test (test WebAPIs using marionette).\n\nGlobal Arguments:\n  -v, --verbose         Print verbose output.\n  -l FILENAME, --log-file FILENAME\n                        Filename to write log data to.\n  --log-interval        Prefix log line with interval from last message rather\n                        than relative time. Note that this is NOT execution\n                        time if there are parallel operations.\n  --log-no-times        Do not prefix log lines with times. By default, mach\n                        will prefix each output line with the time since\n                        command start.\n  -h, --help            Show this help message.\n\nCommand Arguments:\n  --type TESTTYPE  Test type, usually one of: browser, b2g, b2g-qemu.\n  TESTS            Path to test(s) to run.\nalex@portable-alex:~/codaz/Mozilla/b2g/devices/Emulator/B2G$ ./mach --log-file bluetooth.log --log-interval marionette-webapi dom/bluetooth/tests/marionette/test_dom_BluetoothManager_enabled.js\nUsage: mach [options]\n\nmach: error: no such option: --log-file\nalex@portable-alex:~/codaz/Mozilla/b2g/devices/Emulator/B2G$ git pull \nAlready up-to-date.\nalex@portable-alex:~/codaz/Mozilla/b2g/devices/Emulator/B2G$ ./mach -l bluetooth.log --log-interval marionette-webapi dom/bluetooth/tests/marionette/test_dom_BluetoothManager_enabled.js\nUsage: mach [options]\n\nmach: error: no such option: -l\nalex@portable-alex:~/codaz/Mozilla/b2g/devices/Emulator/B2G$ ./mach -l bluetooth.log marionette-webapi dom/bluetooth/tests/marionette/test_dom_BluetoothManager_enabled.js\nUsage: mach [options]\n\nmach: error: no such option: -l", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9454962, "time": "2014-10-16T08:22:25Z"}, {"text": "My patch landed in:\n - https://tbpl.mozilla.org/?rev=c0a98d9b9a33 with green Mnw\n - https://tbpl.mozilla.org/?rev=95d1486223f7 with green Mnw\n - https://tbpl.mozilla.org/?rev=b91b22431613 is the first failure.\n - https://tbpl.mozilla.org/?rev=50b689feab5f is then back to green Mnw\n - https://tbpl.mozilla.org/?rev=097821fd89ed green Mnw\n - https://tbpl.mozilla.org/?rev=708b45d9b1b1 orange Mnw but not similar failure\nStarting with https://tbpl.mozilla.org/?rev=999ad2f1e108 I do see a perma red Mnw matching pattern.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9455143, "time": "2014-10-16T09:28:30Z"}, {"text": "I ran the marionette-webapi test locally a dozen of times against a B2G Emulator Debug build, could not reproduce any problem ...", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9455253, "time": "2014-10-16T09:53:03Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #67)\n> I ran the marionette-webapi test locally a dozen of times against a B2G\n> Emulator Debug build, could not reproduce any problem ...\n\nNo luck with opt build locally when running: |./mach marionette-webapi gecko/dom/bluetooth/tests/marionette/|", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9455600, "time": "2014-10-16T12:00:23Z"}, {"text": "Retriggered a set of try jobs for master (where it has not been reverted): https://tbpl.mozilla.org/?tree=Try&rev=66345e60b0e2", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9456451, "time": "2014-10-16T14:50:22Z"}, {"text": "(In reply to Alexandre LISSY :gerard-majax from comment #69)\n> Retriggered a set of try jobs for master (where it has not been reverted):\n> https://tbpl.mozilla.org/?tree=Try&rev=66345e60b0e2\n\nAnd there are errors on master, but intermittent.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9457148, "time": "2014-10-16T16:38:42Z"}, {"text": "Yes, Mnw is known to be incredibly flaky. Always has been. Not sure what specifically you're expecting from me about it.", "author": "ryanvm@gmail.com", "id": 9457179, "time": "2014-10-16T16:44:19Z"}, {"text": "Failed run: https://tbpl.mozilla.org/php/getParsedLog.php?id=50360599&tree=Try&full=1\nSuccessful run: https://tbpl.mozilla.org/php/getParsedLog.php?id=50378525&tree=Try&full=1\n\nIn the later case, we can see that we have the logcat of the emulator, and all the debug that has been switched. We don't have any logcat at all in the first case, so I cannot even know if emulator properly started or not ...", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9460883, "time": "2014-10-17T08:59:18Z"}, {"text": "We're seeing increasing failures on Mnw (Bug 1081529), and that busted build problem is becoming more and more frequent. The problem is we can't get the logcat or any other build artifact b/c they don't get uploaded if buildbot kills the mozharness script before it can upload the artifacts, so we have no visibility into the core problem. I'm requesting this feature Bug 1069641, but in the mean time, I'll make time next week to try to isolate the cause of the busted builds.", "author": "malini@malinidas.com", "id": 9461993, "time": "2014-10-17T14:06:49Z"}, {"text": "Bug for busted builds: https://bugzilla.mozilla.org/show_bug.cgi?id=1084415", "author": "malini@malinidas.com", "id": 9462046, "time": "2014-10-17T14:16:41Z"}, {"text": "Alexandre just pointed out to me that the patch that landed on m-c was the wrong one. I'm not sure how that happened (qimportbz should have Just Worked here AFAICT), but I've gone ahead and backed out and re-landed at least.\nhttps://hg.mozilla.org/integration/b2g-inbound/rev/0197ff8217ec\nhttps://hg.mozilla.org/integration/b2g-inbound/rev/cf4d42ad0275", "author": "ryanvm@gmail.com", "id": 9477799, "time": "2014-10-21T14:16:07Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/cf4d42ad0275", "author": "ryanvm@gmail.com", "id": 9480162, "time": "2014-10-21T19:17:41Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/cf4d42ad0275", "author": "kwierso@gmail.com", "id": 9482010, "time": "2014-10-22T01:36:45Z"}, {"text": "Created attachment 8513491\nlogcat\n\nBy running the test with some additional parameters in mozharness, I have the logcat, but I don't see anything suspicious, especially not with marionette (we would have seen marionette error logs or something suspicious with the xpcom interfaces it uses).\n\nYou can see line 280 corresponds with https://mxr.mozilla.org/mozilla-central/source/dom/bluetooth/tests/marionette/head.js#551, so it got that far in execution, but https://mxr.mozilla.org/mozilla-central/source/dom/bluetooth/tests/marionette/test_dom_BluetoothManager_enabled.js#30 is never logged, so I suspect that a script you've been using is now timing out in your test's head.js or something before it can get there.", "author": "malini@malinidas.com", "id": 9517383, "time": "2014-10-29T14:17:02Z"}, {"text": "fyi, if you want to see the full test run: https://tbpl.mozilla.org/php/getParsedLog.php?id=51269174&tree=Ash&full=1#error1", "author": "malini@malinidas.com", "id": 9517385, "time": "2014-10-29T14:17:37Z"}, {"text": "interestingly, the subsequent tests are failing because a setup script in marionette's test harness is timing out... I wonder if the emulator is just incredibly slow.", "author": "malini@malinidas.com", "id": 9517434, "time": "2014-10-29T14:24:29Z"}, {"text": "Thanks!\n\nI see something suspicious: https://tbpl.mozilla.org/php/getParsedLog.php?id=51269174&tree=Ash&full=1#error0", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9517471, "time": "2014-10-29T14:29:00Z"}, {"text": "Also:\n> 17:13:46     INFO -  10-29 00:12:42.145 W/(Preallocated app)(  271): [JavaScript Error: \"TypeError: infos is null\" {file: \"chrome://global/content/BrowserElementChild.js\" line: 57}]\n> 17:13:46     INFO -  10-29 00:12:45.085 W/GeckoConsole(   44): [JavaScript Error: \"TypeError: actor.target is undefined\" {file: \"resource://gre/modules/InterAppCommService.jsm\" line: 810}]", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9517485, "time": "2014-10-29T14:32:14Z"}, {"text": "Do you think you could capture a logcat after enabling all debug in dom/settings ?\n\nJust switching the |DEBUG| to true in all js/jsm files in this directory, maybe it could help :)", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9517509, "time": "2014-10-29T14:35:08Z"}, {"text": "Unfortunately, I can't yet. That logcat output was a test run of a mozharness script. You can't modify any other code when testing out mozharness changes, so I can't change the test/gecko/anything. In the meantime, I filed https://bugzilla.mozilla.org/show_bug.cgi?id=1090978 to get logcat output interleaved in the stdout. When that lands, you'll be able to see logcat output in MnW, so you can try anything out and see what happens.", "author": "malini@malinidas.com", "id": 9517592, "time": "2014-10-29T14:47:20Z"}, {"text": "Ok. Well the log already show us that bluetooth test starts and that after this, we properly get the permissions. The very next step here is to read bluetooth.enabled setting, so we cannot go further until we can trigger debugging of this code :)", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9517637, "time": "2014-10-29T14:52:59Z"}, {"text": "Landing of bug 1092941 fixed Mnw.", "author": "lissyx+mozillians@lissyx.dyndns.org", "id": 9559697, "time": "2014-11-07T11:02:42Z"}, {"text": "*fingers crossed*\n\nhttps://hg.mozilla.org/releases/mozilla-b2g34_v2_1/rev/90f687bae552", "author": "ryanvm@gmail.com", "id": 9581295, "time": "2014-11-12T18:56:04Z"}], "id": 1076597, "priority": "--", "cc": ["anthony@ricaud.me", "anygregor@gmail.com", "bbouvier@mozilla.com", "bent.mozilla@gmail.com", "cbook@mozilla.com", "cserran@mozilla.com", "ehsan@mozilla.com", "francisco@jordano.es", "khuey@kylehuey.com", "lissyx+mozillians@lissyx.dyndns.org", "malini@malinidas.com"], "cf_crash_signature": "", "version": "25 Branch", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "see_also": ["https://bugzilla.mozilla.org/show_bug.cgi?id=1070066"], "cf_tracking_firefox59": "---", "cf_status_b2g_2_2": "fixed", "last_change_time": "2014-12-08T19:42:38Z", "cf_platform_rel": "---", "product": "Core", "cf_status_b2g_2_0m": "unaffected", "blocks": [1074379, 1081714, 1107982], "qa_contact": "", "creation_time": "2014-10-02T03:17:23Z", "cf_status_firefox_esr52": "---", "component": "DOM: Device Interfaces", "assigned_to_detail": {"email": "lissyx+mozillians@lissyx.dyndns.org", "id": 41385, "name": "lissyx+mozillians@lissyx.dyndns.org", "real_name": "Alexandre LISSY :gerard-majax"}, "groups": [], "cf_status_firefox60": "---", "cf_blocking_b2g": "2.1+", "target_milestone": "2.1 S6 (10oct)", "is_cc_accessible": true, "cf_rank": null, "cf_status_thunderbird_esr52": "---", "cf_status_b2g_1_4": "---", "url": "", "creator_detail": {"email": "kyle@nonpolynomial.com", "id": 424719, "name": "kyle@nonpolynomial.com", "real_name": "Kyle Machulis [:qdot] [:kmachulis] (if a patch has no decent commit message, automatic r-)"}, "whiteboard": "[systemsfe]", "cf_status_b2g_2_1": "fixed", "cf_status_b2g_2_0": "unaffected", "cc_detail": [{"email": "anthony@ricaud.me", "id": 319615, "name": "anthony@ricaud.me", "real_name": "Anthony Ricaud (:rik)"}, {"email": "anygregor@gmail.com", "id": 314734, "name": "anygregor@gmail.com", "real_name": "Gregor Wagner [:gwagner]"}, {"email": "bbouvier@mozilla.com", "id": 468907, "name": "bbouvier@mozilla.com", "real_name": "Benjamin Bouvier [:bbouvier]"}, {"email": "bent.mozilla@gmail.com", "id": 200444, "name": "bent.mozilla@gmail.com", "real_name": "Ben Turner (not reading bugmail, use the needinfo flag!)"}, {"email": "cbook@mozilla.com", "id": 277293, "name": "cbook@mozilla.com", "real_name": "Carsten Book [:Tomcat]"}, {"email": "cserran@mozilla.com", "id": 470372, "name": "cserran@mozilla.com", "real_name": "Candice Serran (:cserran)"}, {"email": "ehsan@mozilla.com", "id": 251051, "name": "ehsan@mozilla.com", "real_name": ":Ehsan Akhgari"}, {"email": "francisco@jordano.es", "id": 443116, "name": "francisco@jordano.es", "real_name": "Francisco Jordano [:arcturus] [:francisco]"}, {"email": "khuey@kylehuey.com", "id": 336670, "name": "khuey@kylehuey.com", "real_name": "Kyle Huey [:khuey] (Exited; not receiving bugmail, email if necessary)"}, {"email": "lissyx+mozillians@lissyx.dyndns.org", "id": 41385, "name": "lissyx+mozillians@lissyx.dyndns.org", "real_name": "Alexandre LISSY :gerard-majax"}, {"email": "malini@malinidas.com", "id": 418814, "name": "malini@malinidas.com", "real_name": "Malini Das [:mdas] - Away, not checking bugmail"}], "alias": null, "dupe_of": null, "flags": [{"status": "+", "name": "in-testsuite", "modification_date": "2014-10-21T19:17:41Z", "type_id": 37, "creation_date": "2014-10-21T19:17:41Z", "id": 1011339, "setter": "ryanvm@gmail.com"}], "cf_tracking_firefox58": "---", "assigned_to": "lissyx+mozillians@lissyx.dyndns.org", "is_open": false, "history": [{"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8498652, "added": "feedback?(lissyx+mozillians@lissyx.dyndns.org)"}], "who": "kyle@nonpolynomial.com", "when": "2014-10-02T05:37:29Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "feedback?(lissyx+mozillians@lissyx.dyndns.org)", "attachment_id": 8498652, "added": "feedback+"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-03T12:38:31Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "lissyx+mozillians@lissyx.dyndns.org"}, {"removed": "---", "field_name": "cf_blocking_b2g", "added": "2.1?"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-03T13:21:28Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": "[systemsfe]"}], "who": "anygregor@gmail.com", "when": "2014-10-06T03:30:25Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "anthony@ricaud.me"}], "who": "anthony@ricaud.me", "when": "2014-10-06T12:49:56Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "francisco@jordano.es"}], "who": "francisco@jordano.es", "when": "2014-10-06T14:24:22Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1074379"}], "who": "jlorenzo@mozilla.com", "when": "2014-10-06T15:22:15Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1070066"}], "who": "jlorenzo@mozilla.com", "when": "2014-10-06T15:24:02Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8500406, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-06T15:36:32Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8500408, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-06T15:36:36Z"}, {"changes": [{"removed": "2.1?", "field_name": "cf_blocking_b2g", "added": "2.1+"}], "who": "anygregor@gmail.com", "when": "2014-10-06T16:06:14Z"}, {"changes": [{"removed": "1070066", "field_name": "blocks", "added": ""}, {"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1070066"}], "who": "bugzilla@sherk.me", "when": "2014-10-06T18:20:34Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8498652, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-07T13:34:26Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8500480, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-07T13:34:31Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8500481, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-07T13:34:35Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8501072, "added": "review?(bent.mozilla@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "bent.mozilla@gmail.com"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-07T14:29:41Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "cserran@mozilla.com"}, {"removed": "---", "field_name": "target_milestone", "added": "2.1 S6 (10oct)"}], "who": "cserran@mozilla.com", "when": "2014-10-07T15:31:00Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8501072, "added": "1"}, {"field_name": "flagtypes.name", "removed": "review?(bent.mozilla@gmail.com)", "attachment_id": 8501072, "added": ""}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-07T17:15:24Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8501192, "added": "review?(bent.mozilla@gmail.com)"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-07T17:18:49Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bent.mozilla@gmail.com)", "attachment_id": 8501192, "added": "review+"}], "who": "bent.mozilla@gmail.com", "when": "2014-10-07T17:41:22Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8501537, "added": "review+"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T07:05:14Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8501192, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T07:05:24Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "benj@benj.me"}], "who": "bbouvier@mozilla.com", "when": "2014-10-08T08:51:13Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8501613, "added": "review+"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T09:08:30Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8501718, "added": "review+"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T13:29:20Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8501537, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T13:29:29Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8501613, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T13:29:39Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8501718, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T13:31:22Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(bent.mozilla@gmail.com)"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-08T15:39:53Z"}, {"changes": [{"removed": "needinfo?(bent.mozilla@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "bent.mozilla@gmail.com", "when": "2014-10-08T21:35:51Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8501037, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T07:22:31Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8501038, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T07:22:35Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8502305, "added": "review+"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T07:25:15Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T08:31:05Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}], "who": "cbook@mozilla.com", "when": "2014-10-09T09:02:44Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8502305, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T11:04:41Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8502421, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T11:05:32Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8502423, "added": "review+"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T11:07:58Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T11:08:40Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}, {"removed": "", "field_name": "cc", "added": "cbook@mozilla.com"}], "who": "cbook@mozilla.com", "when": "2014-10-09T12:01:22Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8502423, "added": "1"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T12:12:39Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8502447, "added": "review+"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T12:12:53Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-09T12:13:11Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}], "who": "ryanvm@gmail.com", "when": "2014-10-09T15:41:23Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "khuey@kylehuey.com"}], "who": "bugzilla@sherk.me", "when": "2014-10-09T17:10:59Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2014-10-09 16:43:53"}], "who": "kwierso@gmail.com", "when": "2014-10-09T23:43:53Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(lissyx+mozillians@lissyx.dyndns.org)"}, {"removed": "---", "field_name": "cf_status_firefox33", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox34", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox35", "added": "fixed"}, {"removed": "affected", "field_name": "cf_status_b2g_2_2", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2014-10-11T01:50:00Z"}, {"changes": [{"removed": "needinfo?(lissyx+mozillians@lissyx.dyndns.org)", "field_name": "flagtypes.name", "added": ""}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-12T13:28:10Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8502447, "added": "approval-mozilla-b2g34?"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-12T13:31:23Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1081714"}], "who": "whuang@mozilla.com", "when": "2014-10-13T07:37:44Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-b2g34?", "attachment_id": 8502447, "added": "approval-mozilla-b2g34+"}], "who": "bajaj.bhavana@gmail.com", "when": "2014-10-15T00:32:52Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_b2g_2_1", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2014-10-15T01:39:32Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ehsan.akhgari@gmail.com"}, {"removed": "fixed", "field_name": "cf_status_b2g_2_1", "added": "affected"}], "who": "ryanvm@gmail.com", "when": "2014-10-15T19:46:51Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mdas@mozilla.com"}], "who": "ryanvm@gmail.com", "when": "2014-10-15T22:38:33Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1083685"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-16T08:28:07Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(ryanvm@gmail.com)"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-16T16:38:42Z"}, {"changes": [{"removed": "needinfo?(ryanvm@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "ryanvm@gmail.com", "when": "2014-10-16T16:44:19Z"}, {"changes": [{"removed": "ryanvm@gmail.com", "field_name": "cc", "added": ""}], "who": "ryanvm@gmail.com", "when": "2014-10-17T13:31:35Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "in-testsuite+"}], "who": "ryanvm@gmail.com", "when": "2014-10-21T19:17:41Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(mdas@mozilla.com)"}], "who": "lissyx+mozillians@lissyx.dyndns.org", "when": "2014-10-29T14:35:08Z"}, {"changes": [{"removed": "needinfo?(mdas@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "malini@malinidas.com", "when": "2014-10-29T14:47:20Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1092941"}], "who": "ryanvm@gmail.com", "when": "2014-11-07T21:18:58Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_b2g_2_1", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2014-11-12T18:56:04Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1107982"}], "who": "kyle@nonpolynomial.com", "when": "2014-12-08T19:42:38Z"}], "resolution": "FIXED", "op_sys": "Linux", "cf_fx_points": "---", "cf_blocking_fennec": "---"}