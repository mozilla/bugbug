{"status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "nfitzgerald@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-11-13T18:06:25Z", "type_id": 748, "creation_date": "2015-11-13T17:23:01Z", "id": 1292210, "setter": "jordan@jsantell.com"}, {"status": "+", "name": "approval-mozilla-aurora", "modification_date": "2015-11-18T21:26:30Z", "type_id": 720, "creation_date": "2015-11-17T18:10:16Z", "id": 1294138, "setter": "rkothari@mozilla.com"}], "content_type": "text/plain", "id": 8687277}], "classification": "Client Software", "creator": "nfitzgerald@mozilla.com", "cc": ["jordan@jsantell.com", "nfitzgerald@mozilla.com", "rkothari@mozilla.com"], "depends_on": [], "creation_time": "2015-11-12T02:09:28Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "MemoryActor should use \"runtime: true\" rather than \"debuggees: this.dbg\" when saving snapshots from browser toolbox", "cf_last_resolved": "2015-11-14T21:12:27Z", "assigned_to_detail": {"email": "nfitzgerald@mozilla.com", "id": 417695, "name": "nfitzgerald@mozilla.com", "real_name": "Nick Fitzgerald [:fitzgen] [\u23f0PST; UTC-8]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "nfitzgerald@mozilla.com", "comment_count": 15, "comments": [{"text": "Even though we ahve all globals as debuggees, it affects the root set of the heap snapshot as well as the edges that get traversed.", "author": "nfitzgerald@mozilla.com", "id": 10925655, "time": "2015-11-12T02:09:28Z"}, {"text": "Created attachment 8687277\nScope the boundaries of full runtime heap snapshots taken from the MemoryActor properly", "author": "nfitzgerald@mozilla.com", "id": 10931089, "time": "2015-11-13T17:23:01Z"}, {"text": "Try push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=44807be05d74", "author": "nfitzgerald@mozilla.com", "id": 10931118, "time": "2015-11-13T17:31:08Z"}, {"text": "Comment on attachment 8687277\nScope the boundaries of full runtime heap snapshots taken from the MemoryActor properly\n\nReview of attachment 8687277:\n-----------------------------------------------------------------\n\n::: devtools/server/performance/memory.js\n@@ +142,5 @@\n>     *\n>     * @returns {String} The snapshot id.\n>     */\n>    saveHeapSnapshot: expectState(\"attached\", function () {\n> +    const opts = this.parent instanceof ChromeActor || this.parent instanceof ChildProcessActor\n\nComments here on what this is doing, and when this would be called (browser toolbox for ChromeActor, and FxOS for the ChildProcessActors?) What is parent an instance of when using this.dbg?", "author": "jordan@jsantell.com", "id": 10931227, "time": "2015-11-13T18:06:25Z"}, {"text": "https://hg.mozilla.org/integration/fx-team/rev/08d771037660", "author": "pulsebot@bots.tld", "id": 10931581, "time": "2015-11-13T19:47:41Z"}, {"text": "ni myself to request uplift once this sits in m-c for a couple days", "author": "nfitzgerald@mozilla.com", "id": 10932506, "time": "2015-11-14T01:07:49Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/08d771037660", "author": "philringnalda@gmail.com", "id": 10933164, "time": "2015-11-14T21:12:27Z"}, {"text": "Comment on attachment 8687277\nScope the boundaries of full runtime heap snapshots taken from the MemoryActor properly\n\nApproval Request Comment\n[Feature/regressing bug #]: bug 1200446\n[User impact if declined]: Saving a heap snapshot for the whole browser rather than a specific tab will be subtly wrong\n[Describe test coverage new/current, TreeHerder]: Pretty extensive test suite, been green in m-c for a few days\n[Risks and why]: Minimal\n[String/UUID change made/needed]: None", "author": "nfitzgerald@mozilla.com", "id": 10940300, "time": "2015-11-17T18:10:16Z"}, {"text": "Comment on attachment 8687277\nScope the boundaries of full runtime heap snapshots taken from the MemoryActor properly\n\nIf this is not a recent regression (i.e. since 42 released) and given the size of the patch (possible risk associated(, I would like this to ride the trains. \n\nAre our end-users noticing the subtle difference in the memory snapshots and complaining about it? I am just trying to minimize code churn and only uplift patches that are low risk+high end-user impact. Please let me know if you have any concerns.", "author": "rkothari@mozilla.com", "id": 10944368, "time": "2015-11-18T18:58:25Z"}, {"text": "(In reply to Ritu Kothari (:ritu) from comment #8)\n> Comment on attachment 8687277\n> Scope the boundaries of full runtime heap snapshots taken from the\n> MemoryActor properly\n> \n> If this is not a recent regression (i.e. since 42 released) and given the\n> size of the patch (possible risk associated(, I would like this to ride the\n> trains. \n> \n> Are our end-users noticing the subtle difference in the memory snapshots and\n> complaining about it? I am just trying to minimize code churn and only\n> uplift patches that are low risk+high end-user impact. Please let me know if\n> you have any concerns.\n\nWe didn't expose this functionality to users until 44. No one has noticed, but I'd like to reconsider as fxos branches off of 44, and people debugging fxos are among those who will be most affected. The risk of taking this patch is *very* low.", "author": "nfitzgerald@mozilla.com", "id": 10944384, "time": "2015-11-18T19:03:40Z"}, {"text": "(In reply to Nick Fitzgerald [:fitzgen][:nf] from comment #9)\n> (In reply to Ritu Kothari (:ritu) from comment #8)\n> > Comment on attachment 8687277\n> > Scope the boundaries of full runtime heap snapshots taken from the\n> > MemoryActor properly\n> > \n> > If this is not a recent regression (i.e. since 42 released) and given the\n> > size of the patch (possible risk associated(, I would like this to ride the\n> > trains. \n> > \n> > Are our end-users noticing the subtle difference in the memory snapshots and\n> > complaining about it? I am just trying to minimize code churn and only\n> > uplift patches that are low risk+high end-user impact. Please let me know if\n> > you have any concerns.\n> \n> We didn't expose this functionality to users until 44. No one has noticed,\n> but I'd like to reconsider as fxos branches off of 44, and people debugging\n> fxos are among those who will be most affected. The risk of taking this\n> patch is *very* low.\n\nNick, thanks for the additional context. It was unclear to me from the original aurora uplift request that this may affect fxos end-users. Also, upon looking at the patch again, I noticed that most of the change is in the test automation. I guess I will take this patch in Aurora.", "author": "rkothari@mozilla.com", "id": 10944970, "time": "2015-11-18T21:24:28Z"}, {"text": "Thanks! I will try and write better requests in the future :)", "author": "nfitzgerald@mozilla.com", "id": 10944975, "time": "2015-11-18T21:25:22Z"}, {"text": "Comment on attachment 8687277\nScope the boundaries of full runtime heap snapshots taken from the MemoryActor properly\n\nSee comment 10 for justification. Aurora44+.", "author": "rkothari@mozilla.com", "id": 10944979, "time": "2015-11-18T21:26:30Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-aurora/rev/2e6d20d6dba3", "author": "cbook@mozilla.com", "id": 10946444, "time": "2015-11-19T09:11:19Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-b2g44_v2_5/rev/2e6d20d6dba3", "author": "cbook@mozilla.com", "id": 10951057, "time": "2015-11-20T13:37:14Z"}], "id": 1224077, "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-11-20T13:37:14Z", "cf_platform_rel": "---", "product": "Firefox", "cf_status_firefox_esr52": "---", "blocks": [], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Developer Tools: Memory", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "Firefox 45", "cf_status_firefox44": "fixed", "is_cc_accessible": true, "url": "", "creator_detail": {"email": "nfitzgerald@mozilla.com", "id": 417695, "name": "nfitzgerald@mozilla.com", "real_name": "Nick Fitzgerald [:fitzgen] [\u23f0PST; UTC-8]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "jordan@jsantell.com", "id": 464691, "name": "jordan@jsantell.com", "real_name": "Jordan Santell [:jsantell] [@jsantell]"}, {"email": "nfitzgerald@mozilla.com", "id": 417695, "name": "nfitzgerald@mozilla.com", "real_name": "Nick Fitzgerald [:fitzgen] [\u23f0PST; UTC-8]"}, {"email": "rkothari@mozilla.com", "id": 538805, "name": "rkothari@mozilla.com", "real_name": "Ritu Kothari (:ritu)"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8687277, "added": "review?(jsantell@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "jsantell@mozilla.com"}], "who": "nfitzgerald@mozilla.com", "when": "2015-11-13T17:23:01Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jsantell@mozilla.com)", "attachment_id": 8687277, "added": "review+"}], "who": "jordan@jsantell.com", "when": "2015-11-13T18:06:25Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "nfitzgerald@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(nfitzgerald@mozilla.com)"}], "who": "nfitzgerald@mozilla.com", "when": "2015-11-14T01:07:49Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "Firefox 45"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-11-14 13:12:27"}, {"removed": "---", "field_name": "cf_status_firefox45", "added": "fixed"}], "who": "philringnalda@gmail.com", "when": "2015-11-14T21:12:27Z"}, {"changes": [{"removed": "needinfo?(nfitzgerald@mozilla.com)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8687277, "added": "approval-mozilla-aurora?"}], "who": "nfitzgerald@mozilla.com", "when": "2015-11-17T18:10:16Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "rkothari@mozilla.com"}, {"removed": "---", "field_name": "cf_status_firefox44", "added": "affected"}], "who": "rkothari@mozilla.com", "when": "2015-11-18T18:56:39Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-aurora?", "attachment_id": 8687277, "added": "approval-mozilla-aurora-"}], "who": "rkothari@mozilla.com", "when": "2015-11-18T18:58:25Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(rkothari@mozilla.com)"}], "who": "nfitzgerald@mozilla.com", "when": "2015-11-18T19:03:40Z"}, {"changes": [{"removed": "needinfo?(rkothari@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "rkothari@mozilla.com", "when": "2015-11-18T21:24:28Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-aurora-", "attachment_id": 8687277, "added": "approval-mozilla-aurora+"}], "who": "rkothari@mozilla.com", "when": "2015-11-18T21:26:30Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox44", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2015-11-19T09:11:19Z"}, {"changes": [{"removed": "---", "field_name": "cf_status_b2g_2_5", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2015-11-20T13:37:14Z"}]}