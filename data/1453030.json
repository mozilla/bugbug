{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "jkratzer@mozilla.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_backlog": "---", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox59": "wontfix", "keywords": ["crash", "testcase"], "cc_detail": [{"email": "dminor@mozilla.com", "id": 466787, "name": "dminor@mozilla.com", "real_name": "Dan Minor [:dminor]"}, {"email": "docfaraday@gmail.com", "id": 478411, "name": "docfaraday@gmail.com", "real_name": "Byron Campen [:bwc]"}, {"email": "fuzzing@mozilla.com", "id": 469204, "name": "fuzzing@mozilla.com", "real_name": "Fuzzing Team"}, {"email": "jcristau@mozilla.com", "id": 580382, "name": "jcristau@mozilla.com", "real_name": "Julien Cristau [:jcristau]"}, {"email": "jib@mozilla.com", "id": 456498, "name": "jib@mozilla.com", "real_name": "Jan-Ivar Bruaroey [:jib] (needinfo? me)"}], "cf_last_resolved": "2018-04-12T09:42:46Z", "attachments": [{"creator": "jkratzer@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/html", "id": 8966641}, {"creator": "dminor@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-11T13:38:46Z", "type_id": 4, "creation_date": "2018-04-10T18:30:08Z", "id": 1741897, "setter": "docfaraday@gmail.com"}, {"status": "-", "name": "approval-mozilla-beta", "modification_date": "2018-04-19T14:56:45Z", "type_id": 721, "creation_date": "2018-04-17T11:11:34Z", "id": 1744909, "setter": "jcristau@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8966691}, {"creator": "dminor@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-11T13:39:47Z", "type_id": 4, "creation_date": "2018-04-10T18:30:08Z", "id": 1741898, "setter": "docfaraday@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8966692}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 22, "comments": [{"text": "Created attachment 8966641\ntrigger.html\n\nTestcase found while fuzzing mozilla-central rev a8061a09cd70.\n\n==29995==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x7f7a4b73a4bd bp 0x7f7a3fced240 sp 0x7f7a3fcecf20 T11)\n==29995==The signal is caused by a READ memory access.\n==29995==Hint: address points to the zero page.\n    #0 0x7f7a4b73a4bc in mozilla::WebrtcVideoConduit::ConfigureRecvMediaCodecs(std::vector<mozilla::VideoCodecConfig*, std::allocator<mozilla::VideoCodecConfig*> > const&) /builds/worker/workspace/build/src/media/webrtc/signaling/src/media-conduit/VideoConduit.cpp:1318\n    #1 0x7f7a4b855828 in operator() /builds/worker/workspace/build/src/media/webrtc/signaling/src/peerconnection/TransceiverImpl.cpp:580:18\n    #2 0x7f7a4b855828 in apply<(lambda at /builds/worker/workspace/build/src/media/webrtc/signaling/src/peerconnection/TransceiverImpl.cpp:577:39)> /builds/worker/workspace/build/src/obj-firefox/dist/include/mtransport/runnable_utils.h:62\n    #3 0x7f7a4b855828 in mozilla::runnable_args_func<mozilla::TransceiverImpl::InsertDTMFTone(int, unsigned int)::$_3>::Run() /builds/worker/workspace/build/src/obj-firefox/dist/include/mtransport/runnable_utils.h:102\n    #4 0x7f7a49bda4f8 in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/workspace/build/src/xpcom/threads/nsThread.cpp:1096:14\n    #5 0x7f7a49bf6930 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/workspace/build/src/xpcom/threads/nsThreadUtils.cpp:519:10\n    #6 0x7f7a49e346f4 in mozilla::net::nsSocketTransportService::Run() /builds/worker/workspace/build/src/netwerk/base/nsSocketTransportService2.cpp:1007:21\n    #7 0x7f7a49e36b4c in non-virtual thunk to mozilla::net::nsSocketTransportService::Run() /builds/worker/workspace/build/src/netwerk/base/nsSocketTransportService2.cpp\n    #8 0x7f7a49bda4f8 in nsThread::ProcessNextEvent(bool, bool*) /builds/worker/workspace/build/src/xpcom/threads/nsThread.cpp:1096:14\n    #9 0x7f7a49bf6930 in NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/workspace/build/src/xpcom/threads/nsThreadUtils.cpp:519:10\n    #10 0x7f7a4aacbfab in mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) /builds/worker/workspace/build/src/ipc/glue/MessagePump.cpp:334:20\n    #11 0x7f7a4aa1ad89 in RunInternal /builds/worker/workspace/build/src/ipc/chromium/src/base/message_loop.cc:326:10\n    #12 0x7f7a4aa1ad89 in RunHandler /builds/worker/workspace/build/src/ipc/chromium/src/base/message_loop.cc:319\n    #13 0x7f7a4aa1ad89 in MessageLoop::Run() /builds/worker/workspace/build/src/ipc/chromium/src/base/message_loop.cc:299\n    #14 0x7f7a49bd4948 in nsThread::ThreadFunc(void*) /builds/worker/workspace/build/src/xpcom/threads/nsThread.cpp:425:11\n    #15 0x7f7a6752547e in _pt_root /builds/worker/workspace/build/src/nsprpub/pr/src/pthreads/ptthread.c:201:5\n    #16 0x7f7a6ab266b9 in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76b9)\n    #17 0x7f7a69ba841c in clone /build/glibc-Cl5G7W/glibc-2.23/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV /builds/worker/workspace/build/src/media/webrtc/signaling/src/media-conduit/VideoConduit.cpp:1318 in mozilla::WebrtcVideoConduit::ConfigureRecvMediaCodecs(std::vector<mozilla::VideoCodecConfig*, std::allocator<mozilla::VideoCodecConfig*> > const&)\nThread T11 (Socket Thread) created by T0 (file:// Content) here:\n    #0 0x4ae80d in __interceptor_pthread_create /builds/worker/workspace/moz-toolchain/src/llvm/projects/compiler-rt/lib/asan/asan_interceptors.cc:204:3\n    #1 0x7f7a675221cf in _PR_CreateThread /builds/worker/workspace/build/src/nsprpub/pr/src/pthreads/ptthread.c:433:14\n    #2 0x7f7a67521dbe in PR_CreateThread /builds/worker/workspace/build/src/nsprpub/pr/src/pthreads/ptthread.c:518:12\n    #3 0x7f7a49bd68c3 in nsThread::Init(nsTSubstring<char> const&) /builds/worker/workspace/build/src/xpcom/threads/nsThread.cpp:612:8\n    #4 0x7f7a49be04aa in nsThreadManager::NewNamedThread(nsTSubstring<char> const&, unsigned int, nsIThread**) /builds/worker/workspace/build/src/xpcom/threads/nsThreadManager.cpp:471:22\n    #5 0x7f7a49bf0a34 in NS_NewNamedThread(nsTSubstring<char> const&, nsIThread**, nsIRunnable*, unsigned int) /builds/worker/workspace/build/src/xpcom/threads/nsThreadUtils.cpp:143:45\n    #6 0x7f7a49e314a8 in NS_NewNamedThread<14> /builds/worker/workspace/build/src/obj-firefox/dist/include/nsThreadUtils.h:72:10\n    #7 0x7f7a49e314a8 in mozilla::net::nsSocketTransportService::Init() /builds/worker/workspace/build/src/netwerk/base/nsSocketTransportService2.cpp:590\n    #8 0x7f7a4a9f5f8c in nsSocketTransportServiceConstructor(nsISupports*, nsID const&, void**) /builds/worker/workspace/build/src/netwerk/build/nsNetModule.cpp:75:1\n    #9 0x7f7a49b8a265 in nsComponentManagerImpl::CreateInstanceByContractID(char const*, nsISupports*, nsID const&, void**) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:1049:19\n    #10 0x7f7a49b8182d in nsComponentManagerImpl::GetServiceByContractID(char const*, nsID const&, void**) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:1409:10\n    #11 0x7f7a49b90275 in CallGetService /builds/worker/workspace/build/src/xpcom/components/nsComponentManagerUtils.cpp:67:43\n    #12 0x7f7a49b90275 in nsGetServiceByContractIDWithError::operator()(nsID const&, void**) const /builds/worker/workspace/build/src/xpcom/components/nsComponentManagerUtils.cpp:292\n    #13 0x7f7a49a4b74a in nsCOMPtr_base::assign_from_gs_contractid_with_error(nsGetServiceByContractIDWithError const&, nsID const&) /builds/worker/workspace/build/src/xpcom/base/nsCOMPtr.cpp:106:7\n    #14 0x7f7a49d8a650 in operator= /builds/worker/workspace/build/src/obj-firefox/dist/include/nsCOMPtr.h:704:5\n    #15 0x7f7a49d8a650 in InitializeSocketTransportService /builds/worker/workspace/build/src/netwerk/base/nsIOService.cpp:293\n    #16 0x7f7a49d8a650 in mozilla::net::nsIOService::SetOffline(bool) /builds/worker/workspace/build/src/netwerk/base/nsIOService.cpp:1136\n    #17 0x7f7a49d8975c in mozilla::net::nsIOService::Init() /builds/worker/workspace/build/src/netwerk/base/nsIOService.cpp:257:5\n    #18 0x7f7a49d8bd39 in mozilla::net::nsIOService::GetInstance() /builds/worker/workspace/build/src/netwerk/base/nsIOService.cpp:354:13\n    #19 0x7f7a4a9f5d27 in nsIOServiceConstructor(nsISupports*, nsID const&, void**) /builds/worker/workspace/build/src/netwerk/build/nsNetModule.cpp:57:1\n    #20 0x7f7a49b8a265 in nsComponentManagerImpl::CreateInstanceByContractID(char const*, nsISupports*, nsID const&, void**) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:1049:19\n    #21 0x7f7a49b8182d in nsComponentManagerImpl::GetServiceByContractID(char const*, nsID const&, void**) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:1409:10\n    #22 0x7f7a4baf5744 in CallGetService<nsIIOService> /builds/worker/workspace/build/src/obj-firefox/dist/include/nsServiceManagerUtils.h:89:10\n    #23 0x7f7a4baf5744 in nsScriptSecurityManager::Init() /builds/worker/workspace/build/src/caps/nsScriptSecurityManager.cpp:1332\n    #24 0x7f7a4baf6330 in nsScriptSecurityManager::InitStatics() /builds/worker/workspace/build/src/caps/nsScriptSecurityManager.cpp:1406:30\n    #25 0x7f7a4b528855 in nsXPConnect::InitStatics() /builds/worker/workspace/build/src/js/xpconnect/src/nsXPConnect.cpp:138:5\n    #26 0x7f7a4b4c2c28 in xpcModuleCtor() /builds/worker/workspace/build/src/js/xpconnect/src/XPCModule.cpp:13:5\n    #27 0x7f7a527e5517 in Initialize() /builds/worker/workspace/build/src/layout/build/nsLayoutModule.cpp:269:8\n    #28 0x7f7a49b893f2 in Load /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:726:21\n    #29 0x7f7a49b893f2 in nsFactoryEntry::GetFactory() /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:1748\n    #30 0x7f7a49b8a21a in nsComponentManagerImpl::CreateInstanceByContractID(char const*, nsISupports*, nsID const&, void**) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:1046:41\n    #31 0x7f7a49b8fcab in CallCreateInstance /builds/worker/workspace/build/src/xpcom/components/nsComponentManagerUtils.cpp:149:38\n    #32 0x7f7a49b8fcab in nsCreateInstanceByContractID::operator()(nsID const&, void**) const /builds/worker/workspace/build/src/xpcom/components/nsComponentManagerUtils.cpp:197\n    #33 0x7f7a49a4baed in nsCOMPtr_base::assign_from_helper(nsCOMPtr_helper const&, nsID const&) /builds/worker/workspace/build/src/xpcom/base/nsCOMPtr.cpp:128:7\n    #34 0x7f7a49b728a1 in nsCOMPtr /builds/worker/workspace/build/src/obj-firefox/dist/include/nsCOMPtr.h:605:5\n    #35 0x7f7a49b728a1 in LogMessageWithContext(mozilla::FileLocation&, unsigned int, char const*, ...) /builds/worker/workspace/build/src/xpcom/components/ManifestParser.cpp:173\n    #36 0x7f7a49b78a6e in nsComponentManagerImpl::ManifestContract(nsComponentManagerImpl::ManifestProcessingContext&, int, char* const*) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:658:5\n    #37 0x7f7a49b75ecc in ParseManifest(NSLocationType, mozilla::FileLocation&, char*, bool) /builds/worker/workspace/build/src/xpcom/components/ManifestParser.cpp:738:9\n    #38 0x7f7a49b85eb9 in DoRegisterManifest /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:541:5\n    #39 0x7f7a49b85eb9 in nsComponentManagerImpl::RegisterManifest(NSLocationType, mozilla::FileLocation&, bool) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:554\n    #40 0x7f7a49b86177 in nsComponentManagerImpl::ManifestManifest(nsComponentManagerImpl::ManifestProcessingContext&, int, char* const*) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:563:3\n    #41 0x7f7a49b75ecc in ParseManifest(NSLocationType, mozilla::FileLocation&, char*, bool) /builds/worker/workspace/build/src/xpcom/components/ManifestParser.cpp:738:9\n    #42 0x7f7a49b85eb9 in DoRegisterManifest /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:541:5\n    #43 0x7f7a49b85eb9 in nsComponentManagerImpl::RegisterManifest(NSLocationType, mozilla::FileLocation&, bool) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:554\n    #44 0x7f7a49b849e6 in nsComponentManagerImpl::RereadChromeManifests(bool) /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:684:5\n    #45 0x7f7a49b83271 in nsComponentManagerImpl::Init() /builds/worker/workspace/build/src/xpcom/components/nsComponentManager.cpp:349:5\n    #46 0x7f7a49c34e6e in NS_InitXPCOM2 /builds/worker/workspace/build/src/xpcom/build/XPCOMInit.cpp:664:51\n    #47 0x7f7a559fad43 in XRE_InitEmbedding2(nsIFile*, nsIFile*, nsIDirectoryServiceProvider*) /builds/worker/workspace/build/src/toolkit/xre/nsEmbedFunctions.cpp:190:8\n    #48 0x7f7a4aad657e in mozilla::ipc::ScopedXREEmbed::Start() /builds/worker/workspace/build/src/ipc/glue/ScopedXREEmbed.cpp\n    #49 0x7f7a50fc97c1 in mozilla::dom::ContentProcess::Init(int, char**) /builds/worker/workspace/build/src/dom/ipc/ContentProcess.cpp:223:13\n    #50 0x7f7a559fb911 in XRE_InitChildProcess(int, char**, XREChildData const*) /builds/worker/workspace/build/src/toolkit/xre/nsEmbedFunctions.cpp:695:21\n    #51 0x4f50dc in content_process_main /builds/worker/workspace/build/src/browser/app/../../ipc/contentproc/plugin-container.cpp:50:30\n    #52 0x4f50dc in main /builds/worker/workspace/build/src/browser/app/nsBrowserApp.cpp:280\n    #53 0x7f7a69ac182f in __libc_start_main /build/glibc-Cl5G7W/glibc-2.23/csu/../csu/libc-start.c:291", "author": "jkratzer@mozilla.com", "id": 13195309, "time": "2018-04-10T16:21:58Z"}, {"text": "Created attachment 8966691\nBug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;\n\nReview commit: https://reviewboard.mozilla.org/r/235396/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/235396/", "author": "dminor@mozilla.com", "id": 13195715, "time": "2018-04-10T18:30:08Z"}, {"text": "Created attachment 8966692\nBug 1453030 - Add crashtest;\n\nReview commit: https://reviewboard.mozilla.org/r/235398/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/235398/", "author": "dminor@mozilla.com", "id": 13195716, "time": "2018-04-10T18:30:08Z"}, {"text": "try run: https://treeherder.mozilla.org/#/jobs?repo=try&revision=d690f24a96536b499944b8a1cca3b1063fe1002d", "author": "dminor@mozilla.com", "id": 13195719, "time": "2018-04-10T18:31:08Z"}, {"text": "Comment on attachment 8966691\nBug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;\n\nhttps://reviewboard.mozilla.org/r/235396/#review241088\n\nVideo senders probably shouldn't have a dtmf sender in the first place. It would be reasonable to put a MOZ_CRASH or MOZ_ASSERT in TransceiverImpl::InsertDTMFTone though. We probably need to make our modification in PeerConnection.js", "author": "docfaraday@gmail.com", "id": 13195840, "time": "2018-04-10T19:08:11Z"}, {"text": "^ Does that sound right, jib?", "author": "docfaraday@gmail.com", "id": 13195842, "time": "2018-04-10T19:09:01Z"}, {"text": "It looks like the spec now has a canInsertDTMF attribute on the RTCDTMFSender which presumably should be false for video senders [1].\n\n[1] https://w3c.github.io/webrtc-pc/#dom-rtcdtmfsender-caninsertdtmf", "author": "dminor@mozilla.com", "id": 13195984, "time": "2018-04-10T20:00:30Z"}, {"text": "sender.dtmf MUST be null for video senders. From [1]:\n\n  \"4. Let sender have a [[Dtmf]] internal slot initialized to null.\n   5. If sender is of kind \"audio\" then create an RTCDTMFSender dtmf and set the [[Dtmf]] internal slot to dtmf. \"\n\nThe canInsertDTMF attribute is separate, and when it transitions is described in [2].\n\n[1] https://w3c.github.io/webrtc-pc/#rtcrtpsender-interface\n[2] https://github.com/w3c/webrtc-pc/issues/1619#issuecomment-366963505", "author": "jib@mozilla.com", "id": 13196520, "time": "2018-04-11T00:18:16Z"}, {"text": "I've clarified the spec language some in https://github.com/w3c/webrtc-pc/issues/1830", "author": "jib@mozilla.com", "id": 13196543, "time": "2018-04-11T00:55:06Z"}, {"text": "Comment on attachment 8966691\nBug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/235396/diff/1-2/", "author": "dminor@mozilla.com", "id": 13197774, "time": "2018-04-11T13:36:49Z"}, {"text": "Comment on attachment 8966692\nBug 1453030 - Add crashtest;\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/235398/diff/1-2/", "author": "dminor@mozilla.com", "id": 13197775, "time": "2018-04-11T13:36:49Z"}, {"text": "(In reply to Jan-Ivar Bruaroey [:jib] (needinfo? me) from comment #7)\n> sender.dtmf MUST be null for video senders. From [1]:\n> \n>   \"4. Let sender have a [[Dtmf]] internal slot initialized to null.\n>    5. If sender is of kind \"audio\" then create an RTCDTMFSender dtmf and set\n> the [[Dtmf]] internal slot to dtmf. \"\n> \n> The canInsertDTMF attribute is separate, and when it transitions is\n> described in [2].\n> \n> [1] https://w3c.github.io/webrtc-pc/#rtcrtpsender-interface\n> [2] https://github.com/w3c/webrtc-pc/issues/1619#issuecomment-366963505\n\nThanks! I'm obviously not very good at searching the spec.", "author": "dminor@mozilla.com", "id": 13197779, "time": "2018-04-11T13:37:51Z"}, {"text": "Comment on attachment 8966691\nBug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;\n\nhttps://reviewboard.mozilla.org/r/235396/#review241402", "author": "docfaraday@gmail.com", "id": 13197780, "time": "2018-04-11T13:38:46Z"}, {"text": "Comment on attachment 8966692\nBug 1453030 - Add crashtest;\n\nhttps://reviewboard.mozilla.org/r/235398/#review241404\n\n::: dom/media/tests/crashtests/1453030.html:9\n(Diff revision 2)\n> +      function getDTMF () {\n> +        try { o4 = o2.dtmf } catch(e) { }\n> +        try { o4.insertDTMF(\"1BC1D55\", new Uint32Array([3538134876])[0], new Uint32Array([666182017])[0]) } catch (e) { }\n> +        document.documentElement.removeAttribute(\"class\");\n> +      }\n> +      \n\nNit: Extra whitespace.", "author": "docfaraday@gmail.com", "id": 13197784, "time": "2018-04-11T13:39:47Z"}, {"text": "Comment on attachment 8966691\nBug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/235396/diff/2-3/", "author": "dminor@mozilla.com", "id": 13198578, "time": "2018-04-11T16:57:52Z"}, {"text": "Comment on attachment 8966692\nBug 1453030 - Add crashtest;\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/235398/diff/2-3/", "author": "dminor@mozilla.com", "id": 13198579, "time": "2018-04-11T16:57:52Z"}, {"text": "*** Bug 1376947 has been marked as a duplicate of this bug. ***", "author": "dminor@mozilla.com", "id": 13198590, "time": "2018-04-11T16:59:58Z"}, {"text": "Pushed by dminor@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/8b5119957214\nOnly create RTCDTMFSender on audio RTCRtpSender senders; r=bwc\nhttps://hg.mozilla.org/integration/autoland/rev/0c41b40807b8\nAdd crashtest; r=bwc", "author": "pulsebot@bots.tld", "id": 13199688, "time": "2018-04-12T00:25:31Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/8b5119957214\nhttps://hg.mozilla.org/mozilla-central/rev/0c41b40807b8", "author": "ebalazs@mozilla.com", "id": 13200347, "time": "2018-04-12T09:42:46Z"}, {"text": "Is there a user impact here which warrants uplift consideration for 60? AFAICT, this crash doesn't appear to be hitting in the wild.", "author": "ryanvm@gmail.com", "id": 13211354, "time": "2018-04-17T01:51:27Z"}, {"text": "Comment on attachment 8966691\nBug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;\n\nApproval Request Comment\n[Feature/Bug causing the regression]:\nThe problematic code has existed since DTMF was implemented (Bug 1291715), but I don't think it caused crashes until the changes associated with Transceivers (Bug 1290948).\n[User impact if declined]:\nThis allows a malicious website to crash Firefox by sending DTMF on a video track.\n[Is this code covered by automated tests?]:\nYes.\n[Has the fix been verified in Nightly?]:\nYes (by automated tests).\n[Needs manual test from QE? If yes, steps to reproduce]: \nNo.\n[List of other uplifts needed for the feature/fix]:\nNone.\n[Is the change risky?]:\nLow risk.\n[Why is the change risky/not risky?]:\nThis should only impact DTMF on a video track, which is not something allowed by the spec anyway. I've done some quick tests (and run the automated tests) and DTMF on audio tracks seems to be working fine.\n[String changes made/needed]:\nNone.", "author": "dminor@mozilla.com", "id": 13212076, "time": "2018-04-17T11:11:34Z"}, {"text": "Comment on attachment 8966691\nBug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;\n\nSeems like this can ride to 61.", "author": "jcristau@mozilla.com", "id": 13218714, "time": "2018-04-19T14:56:45Z"}], "id": 1453030, "priority": "P2", "cc": ["dminor@mozilla.com", "docfaraday@gmail.com", "fuzzing@mozilla.com", "jcristau@mozilla.com", "jib@mozilla.com"], "cf_crash_signature": "[@ mozilla::WebrtcVideoConduit::ConfigureRecvMediaCodecs]", "version": "59 Branch", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": ["https://bugzilla.mozilla.org/show_bug.cgi?id=1376947"], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [792125, 1340565], "qa_contact": "", "creation_time": "2018-04-10T16:21:58Z", "cf_status_firefox_esr52": "unaffected", "component": "WebRTC", "assigned_to_detail": {"email": "dminor@mozilla.com", "id": 466787, "name": "dminor@mozilla.com", "real_name": "Dan Minor [:dminor]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "fixed", "cf_status_firefox60": "wontfix", "target_milestone": "mozilla61", "cf_rank": "15", "cf_qa_whiteboard": "", "severity": "critical", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "jkratzer@mozilla.com", "id": 586683, "name": "jkratzer@mozilla.com", "real_name": "Jason Kratzer [:jkratzer]"}, "whiteboard": "", "mentors": [], "summary": "Crash [@ mozilla::WebrtcVideoConduit::ConfigureRecvMediaCodecs]", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [{"status": "+", "name": "in-testsuite", "modification_date": "2018-04-17T01:51:27Z", "type_id": 37, "creation_date": "2018-04-10T16:21:58Z", "id": 1741823, "setter": "ryanvm@gmail.com"}], "last_change_time": "2018-04-19T14:56:51Z", "assigned_to": "dminor@mozilla.com", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "in-testsuite?"}], "who": "jkratzer@mozilla.com", "when": "2018-04-10T16:21:58Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "dminor@mozilla.com"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "dminor@mozilla.com"}], "who": "dminor@mozilla.com", "when": "2018-04-10T16:41:22Z"}, {"changes": [{"removed": "", "field_name": "cf_rank", "added": "15"}, {"removed": "--", "field_name": "priority", "added": "P2"}], "who": "dminor@mozilla.com", "when": "2018-04-10T16:41:36Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8966691, "added": "review?(docfaraday@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8966692, "added": "review?(docfaraday@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "docfaraday@gmail.com"}], "who": "dminor@mozilla.com", "when": "2018-04-10T18:30:08Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}], "who": "dminor@mozilla.com", "when": "2018-04-10T18:31:08Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(docfaraday@gmail.com)", "attachment_id": 8966691, "added": "review-"}], "who": "docfaraday@gmail.com", "when": "2018-04-10T19:08:11Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jib@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(jib@mozilla.com)"}], "who": "docfaraday@gmail.com", "when": "2018-04-10T19:09:01Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1376947"}], "who": "dminor@mozilla.com", "when": "2018-04-10T20:01:57Z"}, {"changes": [{"removed": "needinfo?(jib@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "jib@mozilla.com", "when": "2018-04-11T00:18:16Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1453030 - Check conduit type before casting to audio conduit;", "attachment_id": 8966691, "added": "Bug 1453030 - Only create RTCDTMFSender on audio RTCRtpSender senders;"}, {"field_name": "flagtypes.name", "removed": "review-", "attachment_id": 8966691, "added": "review?(docfaraday@gmail.com)"}], "who": "dminor@mozilla.com", "when": "2018-04-11T13:36:49Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(docfaraday@gmail.com)", "attachment_id": 8966691, "added": "review+"}], "who": "docfaraday@gmail.com", "when": "2018-04-11T13:38:46Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(docfaraday@gmail.com)", "attachment_id": 8966692, "added": "review+"}], "who": "docfaraday@gmail.com", "when": "2018-04-11T13:39:47Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla61"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-04-12 09:42:46"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ebalazs@mozilla.com", "when": "2018-04-12T09:42:46Z"}, {"changes": [{"removed": "", "field_name": "cf_crash_signature", "added": "[@ mozilla::WebrtcVideoConduit::ConfigureRecvMediaCodecs]"}, {"removed": "in-testsuite?", "field_name": "flagtypes.name", "added": "needinfo?(dminor@mozilla.com), in-testsuite+"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox59", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "fix-optional"}], "who": "ryanvm@gmail.com", "when": "2018-04-17T01:51:27Z"}, {"changes": [{"removed": "needinfo?(dminor@mozilla.com)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8966691, "added": "approval-mozilla-beta?"}], "who": "dminor@mozilla.com", "when": "2018-04-17T11:11:34Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8966691, "added": "approval-mozilla-beta-"}], "who": "jcristau@mozilla.com", "when": "2018-04-19T14:56:45Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jcristau@mozilla.com"}, {"removed": "fix-optional", "field_name": "cf_status_firefox60", "added": "wontfix"}], "who": "jcristau@mozilla.com", "when": "2018-04-19T14:56:51Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}