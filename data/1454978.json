{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "rhunt@eqrion.net", "mentors_detail": [], "depends_on": [1458462, 1458480], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "cc_detail": [{"email": "bas@basschouten.com", "id": 272464, "name": "bas@basschouten.com", "real_name": "Bas Schouten (:bas.schouten)"}], "cf_last_resolved": "2018-05-01T10:23:01Z", "attachments": [{"creator": "rhunt@eqrion.net", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-26T17:57:44Z", "type_id": 4, "creation_date": "2018-04-25T22:01:43Z", "id": 1749103, "setter": "bas@basschouten.com"}], "content_type": "text/x-review-board-request", "id": 8971050}, {"creator": "rhunt@eqrion.net", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-26T17:58:43Z", "type_id": 4, "creation_date": "2018-04-25T22:01:43Z", "id": 1749104, "setter": "bas@basschouten.com"}], "content_type": "text/x-review-board-request", "id": 8971051}, {"creator": "rhunt@eqrion.net", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-26T18:00:07Z", "type_id": 4, "creation_date": "2018-04-25T22:01:43Z", "id": 1749105, "setter": "bas@basschouten.com"}], "content_type": "text/x-review-board-request", "id": 8971052}, {"creator": "rhunt@eqrion.net", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-26T18:01:44Z", "type_id": 4, "creation_date": "2018-04-25T22:01:43Z", "id": 1749106, "setter": "bas@basschouten.com"}], "content_type": "text/x-review-board-request", "id": 8971053}, {"creator": "rhunt@eqrion.net", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-30T14:50:32Z", "type_id": 4, "creation_date": "2018-04-27T20:05:13Z", "id": 1750116, "setter": "bas@basschouten.com"}], "content_type": "text/x-review-board-request", "id": 8971694}], "votes": 2, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 21, "comments": [{"text": "This is for enabling the `layers.enable-tiles-if-skia-pomtp` and `layers.omtp.paint-workers` prefs on windows on nightly.\n\nNote: these prefs will only have effect on users that are using skia (AKA not hardware accelerated). You can opt into this by setting `gfx.direct2d.disabled` to true.", "author": "rhunt@eqrion.net", "id": 13215578, "time": "2018-04-18T14:51:27Z"}, {"text": "(In reply to Ryan Hunt [:rhunt] from comment #0)\n> This is for enabling the `layers.enable-tiles-if-skia-pomtp` and\n> `layers.omtp.paint-workers` prefs on windows on nightly.\n> \n\nBoom!! bp-7106396a-f342-40f4-a678-087d90180418", "author": "ananuti@gmail.com", "id": 13217156, "time": "2018-04-18T23:54:41Z"}, {"text": "(In reply to Ekanan Ketunuti from comment #1)\n> (In reply to Ryan Hunt [:rhunt] from comment #0)\n> > This is for enabling the `layers.enable-tiles-if-skia-pomtp` and\n> > `layers.omtp.paint-workers` prefs on windows on nightly.\n> > \n> \n> Boom!! bp-7106396a-f342-40f4-a678-087d90180418\n\nand bp-7011586a-5171-46b0-acdd-3108d0180419", "author": "ananuti@gmail.com", "id": 13217185, "time": "2018-04-19T00:14:39Z"}, {"text": "(In reply to Ekanan Ketunuti from comment #2)\n> (In reply to Ekanan Ketunuti from comment #1)\n> > (In reply to Ryan Hunt [:rhunt] from comment #0)\n> > > This is for enabling the `layers.enable-tiles-if-skia-pomtp` and\n> > > `layers.omtp.paint-workers` prefs on windows on nightly.\n> > > \n> > \n> > Boom!! bp-7106396a-f342-40f4-a678-087d90180418\n> \n> and bp-7011586a-5171-46b0-acdd-3108d0180419\n\nThose look like they're from some incomplete code in gfxPlatform for pref configuration. That will be fixed.\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=200b0791d242272ce8dd78221e4ed746509a39d4\n\nI was able to figure out what was causing the try assertion, it looks like a race condition in SourceSurfaceSkia. Nothing that would actually affect anyone though, it would just hit the assertion.\n\nThere are some fuzzy value changes that will need to happen. I have a patch written but realized that as this will only be enabled in nightly once this goes the beta those fuzzy value changes will be out of date and start causing failures. So I need to think about that a little more. The rest can be reviewed now though.", "author": "rhunt@eqrion.net", "id": 13233882, "time": "2018-04-25T22:01:03Z"}, {"text": "Created attachment 8971050\nBug 1454978 - Move MOZ_ASSERT(mIsMapped) into mChangeMutex.\n\nWe must check mIsMapped inside mChangeMutex or else we could run into a race condition where\nthe source surface is subsequently mapped again before the function terminates. This was\nbeing hit on try.\n\nReview commit: https://reviewboard.mozilla.org/r/239782/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/239782/", "author": "rhunt@eqrion.net", "id": 13233883, "time": "2018-04-25T22:01:43Z"}, {"text": "Created attachment 8971051\nBug 1454978 - Cleanup tiling prefs in all.js.\n\nThis moves all the tiling prefs into one spot and organizes them a bit. It also fixes a common issue\nwith `edge-padding` being enabled on windows because it wouldn't be defined in all.js and defaulting\nto enabled. Note that `worker-threads` is switched to `-1` by default here instead of just for OSX.\nThis should have no affect because we don't actually create the threads unless we are tiling, which\nonly happens right now on OSX.\n\nReview commit: https://reviewboard.mozilla.org/r/239784/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/239784/", "author": "rhunt@eqrion.net", "id": 13233884, "time": "2018-04-25T22:01:43Z"}, {"text": "Created attachment 8971052\nBug 1454978 - Make OMTP feature detection not depend on tiling.\n\nThere's a circular dependency between `UsesTiling` and `InitOMTPConfig` because\nwe try to disable OMTP if we will be using tiling and edge padding is enabled.\nNow that edge padding is disabled everywhere except android it should be safe\nto assume that if edge padding is enabled then we'll be using tiling as well\nand should disable OMTP.\n\nThis commit also removes a check on `UsesTiling` from CalculateWorkerCount\nas it is redundant.\n\nReview commit: https://reviewboard.mozilla.org/r/239786/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/239786/", "author": "rhunt@eqrion.net", "id": 13233885, "time": "2018-04-25T22:01:43Z"}, {"text": "Created attachment 8971053\nBug 1454978 - Enable tiled parallel OMTP when we are using skia on windows on nightly.\n\nReview commit: https://reviewboard.mozilla.org/r/239788/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/239788/", "author": "rhunt@eqrion.net", "id": 13233886, "time": "2018-04-25T22:01:43Z"}, {"text": "Comment on attachment 8971050\nBug 1454978 - Move MOZ_ASSERT(mIsMapped) into mChangeMutex.\n\nhttps://reviewboard.mozilla.org/r/239782/#review245892\n\nShould this really be a release assert?", "author": "bas@basschouten.com", "id": 13236228, "time": "2018-04-26T17:57:44Z"}, {"text": "Comment on attachment 8971051\nBug 1454978 - Cleanup tiling prefs in all.js.\n\nhttps://reviewboard.mozilla.org/r/239784/#review245894", "author": "bas@basschouten.com", "id": 13236230, "time": "2018-04-26T17:58:43Z"}, {"text": "Comment on attachment 8971052\nBug 1454978 - Make OMTP feature detection not depend on tiling.\n\nhttps://reviewboard.mozilla.org/r/239786/#review245896", "author": "bas@basschouten.com", "id": 13236240, "time": "2018-04-26T18:00:07Z"}, {"text": "Comment on attachment 8971053\nBug 1454978 - Enable tiled parallel OMTP when we are using skia on windows on nightly.\n\nhttps://reviewboard.mozilla.org/r/239788/#review245898", "author": "bas@basschouten.com", "id": 13236243, "time": "2018-04-26T18:01:44Z"}, {"text": "(In reply to Bas Schouten (:bas.schouten) from comment #8)\n> Comment on attachment 8971050\n> Bug 1454978 - Move MOZ_ASSERT(mIsMapped) into mChangeMutex.\n> \n> https://reviewboard.mozilla.org/r/239782/#review245892\n> \n> Should this really be a release assert?\n\nNo it shouldn't, that should've been reverted back. I'll fix that.", "author": "rhunt@eqrion.net", "id": 13236324, "time": "2018-04-26T18:31:30Z"}, {"text": "Created attachment 8971694\nBug 1454978 - Update test fuzziness.\n\nReview commit: https://reviewboard.mozilla.org/r/240462/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/240462/", "author": "rhunt@eqrion.net", "id": 13239050, "time": "2018-04-27T20:05:13Z"}, {"text": "Comment on attachment 8971050\nBug 1454978 - Move MOZ_ASSERT(mIsMapped) into mChangeMutex.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/239782/diff/1-2/", "author": "rhunt@eqrion.net", "id": 13239051, "time": "2018-04-27T20:05:13Z"}, {"text": "Comment on attachment 8971051\nBug 1454978 - Cleanup tiling prefs in all.js.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/239784/diff/1-2/", "author": "rhunt@eqrion.net", "id": 13239052, "time": "2018-04-27T20:05:13Z"}, {"text": "Comment on attachment 8971052\nBug 1454978 - Make OMTP feature detection not depend on tiling.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/239786/diff/1-2/", "author": "rhunt@eqrion.net", "id": 13239053, "time": "2018-04-27T20:05:13Z"}, {"text": "Comment on attachment 8971053\nBug 1454978 - Enable tiled parallel OMTP when we are using skia on windows on nightly.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/239788/diff/1-2/", "author": "rhunt@eqrion.net", "id": 13239054, "time": "2018-04-27T20:05:13Z"}, {"text": "Comment on attachment 8971694\nBug 1454978 - Update test fuzziness.\n\nhttps://reviewboard.mozilla.org/r/240462/#review246416", "author": "bas@basschouten.com", "id": 13243316, "time": "2018-04-30T14:50:32Z"}, {"text": "Pushed by rhunt@eqrion.net:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/4317518ef415\nMove MOZ_ASSERT(mIsMapped) into mChangeMutex. r=bas\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/0caaa2b6f3a0\nCleanup tiling prefs in all.js. r=bas\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/2ba500ed529b\nMake OMTP feature detection not depend on tiling. r=bas\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/a9f8c9c32b95\nEnable tiled parallel OMTP when we are using skia on windows on nightly. r=bas\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/c460245ddcff\nUpdate test fuzziness. r=bas", "author": "pulsebot@bots.tld", "id": 13243345, "time": "2018-04-30T15:01:05Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/4317518ef415\nhttps://hg.mozilla.org/mozilla-central/rev/0caaa2b6f3a0\nhttps://hg.mozilla.org/mozilla-central/rev/2ba500ed529b\nhttps://hg.mozilla.org/mozilla-central/rev/a9f8c9c32b95\nhttps://hg.mozilla.org/mozilla-central/rev/c460245ddcff", "author": "apavel@mozilla.com", "id": 13245757, "time": "2018-05-01T10:23:01Z"}], "id": 1454978, "priority": "P3", "cc": ["bas@basschouten.com"], "cf_crash_signature": "", "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1369541, 1454980], "qa_contact": "", "creation_time": "2018-04-18T14:51:27Z", "cf_status_firefox_esr52": "---", "component": "Graphics: Layers", "assigned_to_detail": {"email": "rhunt@eqrion.net", "id": 573202, "name": "rhunt@eqrion.net", "real_name": "Ryan Hunt [:rhunt]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "fixed", "cf_status_firefox60": "---", "target_milestone": "mozilla61", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "rhunt@eqrion.net", "id": 573202, "name": "rhunt@eqrion.net", "real_name": "Ryan Hunt [:rhunt]"}, "whiteboard": "[gfx-noted]", "mentors": [], "summary": "Enable POMTP tiling when we use skia on windows on nightly", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-02T09:31:18Z", "assigned_to": "rhunt@eqrion.net", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "blocks", "added": "1454980"}], "who": "rhunt@eqrion.net", "when": "2018-04-18T14:53:35Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971050, "added": "review?(bas@basschouten.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971051, "added": "review?(bas@basschouten.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971052, "added": "review?(bas@basschouten.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971053, "added": "review?(bas@basschouten.com)"}, {"removed": "", "field_name": "cc", "added": "bas@basschouten.com"}], "who": "rhunt@eqrion.net", "when": "2018-04-25T22:01:43Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bas@basschouten.com)", "attachment_id": 8971050, "added": "review+"}], "who": "bas@basschouten.com", "when": "2018-04-26T17:57:44Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bas@basschouten.com)", "attachment_id": 8971051, "added": "review+"}], "who": "bas@basschouten.com", "when": "2018-04-26T17:58:43Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bas@basschouten.com)", "attachment_id": 8971052, "added": "review+"}], "who": "bas@basschouten.com", "when": "2018-04-26T18:00:07Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bas@basschouten.com)", "attachment_id": 8971053, "added": "review+"}], "who": "bas@basschouten.com", "when": "2018-04-26T18:01:44Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971694, "added": "review?(bas@basschouten.com)"}], "who": "rhunt@eqrion.net", "when": "2018-04-27T20:05:13Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bas@basschouten.com)", "attachment_id": 8971694, "added": "review+"}], "who": "bas@basschouten.com", "when": "2018-04-30T14:50:32Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla61"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-01 10:23:01"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "apavel@mozilla.com", "when": "2018-05-01T10:23:01Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1458462"}], "who": "cdenizet@mozilla.com", "when": "2018-05-02T08:02:19Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1458480"}], "who": "igoldan@mozilla.com", "when": "2018-05-02T09:31:18Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}