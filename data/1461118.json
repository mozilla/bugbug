{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "vseerror@lehigh.edu", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "wontfix", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": ["crash"], "cc_detail": [{"email": "arai.unmht@gmail.com", "id": 310076, "name": "arai.unmht@gmail.com", "real_name": "Tooru Fujisawa [:arai]"}, {"email": "dbolter@mozilla.com", "id": 152868, "name": "dbolter@mozilla.com", "real_name": "David Bolter [:davidb] (NeedInfo me for attention)"}, {"email": "lsalzman@mozilla.com", "id": 536714, "name": "lsalzman@mozilla.com", "real_name": "Lee Salzman [:lsalzman]"}, {"email": "mstange@themasta.com", "id": 293943, "name": "mstange@themasta.com", "real_name": "Markus Stange [:mstange]"}, {"email": "m_kato@ga2.so-net.ne.jp", "id": 8636, "name": "m_kato@ga2.so-net.ne.jp", "real_name": "Makoto Kato [:m_kato]"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "spohl.mozilla.bugs@gmail.com", "id": 456485, "name": "spohl.mozilla.bugs@gmail.com", "real_name": "Stephen A Pohl [:spohl]"}], "cf_last_resolved": "2018-05-29T09:55:07Z", "attachments": [{"creator": "mstange@themasta.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-28T23:14:37Z", "type_id": 4, "creation_date": "2018-05-28T22:01:15Z", "id": 1762586, "setter": "spohl.mozilla.bugs@gmail.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-05-30T18:05:39Z", "type_id": 721, "creation_date": "2018-05-30T02:47:05Z", "id": 1763319, "setter": "ryanvm@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8981261}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 13, "comments": [{"text": "#10 crash for Macs\n\n\nThe user of bp-8b0e7652-e940-43fe-9381-5bad80180505 writes \"While trying to create a new subfolder. \"\n\n=============================================================\nTop 6 frames of crashing thread:\n\n0 XUL _moz_pixman_region32_copy gfx/cairo/libpixman/src/pixman-region.c:523\n1 XUL -[ChildView mouseUp:] /builds/slave/tb-rel-c-esr52-m64_bld-0000000/build/objdir-tb/x86_64/dist/include/nsRegion.h:67\n2 AppKit -[NSWindow _handleMouseUpEvent:isDelayedEvent:] \n3 AppKit -[NSWindow _reallySendEvent:isDelayedEvent:] \n4 AppKit -[NSWindow sendEvent:] \n5 AppKit -[NSApplication sendEvent:] \n=============================================================\n\n\nbp-657edeb0-fcce-4d58-ac55-ed70b0180325 is \"moving folder from one account to another account\"", "author": "vseerror@lehigh.edu", "id": 13272682, "time": "2018-05-12T17:13:44Z"}, {"text": "bp-8f417869-1441-4287-b9c4-d9c1a0180512 is Firefox 60, so I change component to Core", "author": "m_kato@ga2.so-net.ne.jp", "id": 13273487, "time": "2018-05-14T01:06:19Z"}, {"text": "Maybe Lee knows what's going on here?", "author": "dbolter@mozilla.com", "id": 13369316, "time": "2018-05-28T15:42:32Z"}, {"text": "It seems like, inside the ChildView mouseUp handler that mGeckoChild is possibly a null pointer. So when it tries to call GetNonDraggableRegion() on it, it invokes the nsRegion copy constructor, which is then objecting to the source being an offset from said null pointer.\n\nMarkus, since you implemented that particular code in bug 1070710, want to take a look?", "author": "lsalzman@mozilla.com", "id": 13369460, "time": "2018-05-28T17:26:32Z"}, {"text": "Right on. There's even this comment just above the call:\n\n  // This might destroy our widget (and null out mGeckoChild).", "author": "mstange@themasta.com", "id": 13369779, "time": "2018-05-28T22:01:07Z"}, {"text": "Created attachment 8981261\nBug 1461118 - Null-check mGeckoChild after calling DispatchInputEvent.\n\nReview commit: https://reviewboard.mozilla.org/r/247352/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/247352/", "author": "mstange@themasta.com", "id": 13369780, "time": "2018-05-28T22:01:15Z"}, {"text": "Comment on attachment 8981261\nBug 1461118 - Null-check mGeckoChild after calling DispatchInputEvent.\n\nhttps://reviewboard.mozilla.org/r/247352/#review253396", "author": "spohl.mozilla.bugs@gmail.com", "id": 13369897, "time": "2018-05-28T23:14:37Z"}, {"text": "Pushed by mstange@themasta.com:\nhttps://hg.mozilla.org/integration/autoland/rev/f620bf59c952\nNull-check mGeckoChild after calling DispatchInputEvent. r=spohl", "author": "pulsebot@bots.tld", "id": 13369904, "time": "2018-05-28T23:21:44Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/f620bf59c952", "author": "shindli@mozilla.com", "id": 13370592, "time": "2018-05-29T09:55:07Z"}, {"text": "Does seem worth worrying about for ESR60, but a Beta uplift wouldn't hurt since we're only halfway through the cycle.", "author": "ryanvm@gmail.com", "id": 13373210, "time": "2018-05-30T02:17:28Z"}, {"text": "Comment on attachment 8981261\nBug 1461118 - Null-check mGeckoChild after calling DispatchInputEvent.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: probably bug 1072391, four years ago\n[User impact if declined]: crashes on rare mouse interactions\n[Is this code covered by automated tests?]: no\n[Has the fix been verified in Nightly?]: no\n[Needs manual test from QE? If yes, steps to reproduce]: no, mostly affects Thunderbird and steps to reproduce are unclear\n[List of other uplifts needed for the feature/fix]: none\n[Is the change risky?]: no\n[Why is the change risky/not risky?]: it's just an addition of an obviously-necessary null check\n[String changes made/needed]: none", "author": "mstange@themasta.com", "id": 13373241, "time": "2018-05-30T02:47:05Z"}, {"text": "Comment on attachment 8981261\nBug 1461118 - Null-check mGeckoChild after calling DispatchInputEvent.\n\nAdds a null check to fix a rare crash. Approved for 61.0b10.", "author": "ryanvm@gmail.com", "id": 13375255, "time": "2018-05-30T18:05:39Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/1a44b26d00a5", "author": "ryanvm@gmail.com", "id": 13375331, "time": "2018-05-30T18:33:44Z"}], "id": 1461118, "priority": "P2", "cc": ["arai.unmht@gmail.com", "dbolter@mozilla.com", "lsalzman@mozilla.com", "mstange@themasta.com", "m_kato@ga2.so-net.ne.jp", "ryanvm@gmail.com", "spohl.mozilla.bugs@gmail.com"], "cf_crash_signature": "[@ _moz_pixman_region32_copy]", "version": "Trunk", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "", "creation_time": "2018-05-12T17:13:44Z", "cf_status_firefox_esr52": "wontfix", "component": "Graphics", "assigned_to_detail": {"email": "mstange@themasta.com", "id": 293943, "name": "mstange@themasta.com", "real_name": "Markus Stange [:mstange]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "fixed", "cf_status_firefox61": "fixed", "cf_status_firefox60": "wontfix", "target_milestone": "mozilla62", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "critical", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "vseerror@lehigh.edu", "id": 29811, "name": "vseerror@lehigh.edu", "real_name": "Wayne Mery (:wsmwk)"}, "whiteboard": "", "mentors": [], "summary": "Crash in _moz_pixman_region32_copy working with folder [Mac]", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-30T18:33:44Z", "assigned_to": "mstange@themasta.com", "is_open": false, "history": [{"changes": [{"removed": "General", "field_name": "component", "added": "Graphics"}, {"removed": "Thunderbird", "field_name": "product", "added": "Core"}], "who": "m_kato@ga2.so-net.ne.jp", "when": "2018-05-14T01:06:19Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}, {"removed": "", "field_name": "cc", "added": "dbolter@mozilla.com, lsalzman@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(lsalzman@mozilla.com)"}], "who": "dbolter@mozilla.com", "when": "2018-05-28T15:42:32Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mstange@themasta.com"}, {"removed": "needinfo?(lsalzman@mozilla.com)", "field_name": "flagtypes.name", "added": "needinfo?(mstange@themasta.com)"}], "who": "lsalzman@mozilla.com", "when": "2018-05-28T17:26:32Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "mstange@themasta.com"}, {"removed": "needinfo?(mstange@themasta.com)", "field_name": "flagtypes.name", "added": ""}], "who": "mstange@themasta.com", "when": "2018-05-28T22:01:07Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8981261, "added": "review?(spohl.mozilla.bugs@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "spohl.mozilla.bugs@gmail.com"}], "who": "mstange@themasta.com", "when": "2018-05-28T22:01:15Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(spohl.mozilla.bugs@gmail.com)", "attachment_id": 8981261, "added": "review+"}], "who": "spohl.mozilla.bugs@gmail.com", "when": "2018-05-28T23:14:37Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-29 09:55:07"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "shindli@mozilla.com", "when": "2018-05-29T09:55:07Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(mstange@themasta.com)"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "affected"}], "who": "ryanvm@gmail.com", "when": "2018-05-30T02:17:28Z"}, {"changes": [{"removed": "needinfo?(mstange@themasta.com)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8981261, "added": "approval-mozilla-beta?"}], "who": "mstange@themasta.com", "when": "2018-05-30T02:47:05Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8981261, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-05-30T18:05:39Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-30T18:33:44Z"}], "resolution": "FIXED", "op_sys": "Mac OS X", "cf_fx_points": "---", "cf_blocking_fennec": "---"}