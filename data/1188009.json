{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "hv1989@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8742871}], "classification": "Components", "creator": "hv1989@gmail.com", "cc": ["botond@mozilla.com", "bugmail@mozilla.staktrace.com", "hv1989@gmail.com", "kkumari@softvision.com", "lsalzman@mozilla.com", "milan@mozilla.com"], "depends_on": [1233163], "creation_time": "2015-07-27T17:29:49Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": ["perf"], "summary": "17.96% regression on browsermark 2.1, graphics SVG on July 22th, 2015", "id": 1188009, "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "nobody@mozilla.org", "comment_count": 18, "comments": [{"text": "A regression was reported on AWFY:\n- slave: Mac OS X 10.10 (Mac Pro, browser)\n- mode: Ion (=> this is the normal mode)\n\nRegression(s)/Improvement(s):\n- browsermark: Graphics 2.1: -6.49% (regression)\n- browsermark: Graphics SVG 2.1: -17.96% (regression)\n\nRecorded range:\n- http://hg.mozilla.org/integration/mozilla-inbound/pushloghtml?fromchange=f4f010e2f0b1&tochange=cef50aeb685e\n\nMore details: http://arewefastyet.com/regressions/#/regression/1792974\n(Note: Clicking on the scores won't show a graph. We cannot publicly publish all results of Browsermark.)", "author": "hv1989@gmail.com", "id": 10541362, "time": "2015-07-27T17:29:49Z"}, {"text": "Posted the steps to reproduce in private comment.", "author": "hv1989@gmail.com", "id": 10541404, "time": "2015-07-27T17:39:09Z"}, {"text": "Lee, is this from your changes?", "author": "milan@mozilla.com", "id": 10558331, "time": "2015-07-30T20:51:15Z"}, {"text": "(In reply to Milan Sreckovic [:milan] from comment #3)\n> Lee, is this from your changes?\n\nMy Cairo change landed on 7-29, so the timeline wouldn't fit this.", "author": "lsalzman@mozilla.com", "id": 10558746, "time": "2015-07-30T22:37:58Z"}, {"text": "I don't doubt that this was caused by APZ. Joel also started an email thread about a slew of talos regressions on Windows e10s PGO builds that point to APZ. It's something we'll need to look into.", "author": "bugmail@mozilla.staktrace.com", "id": 10561283, "time": "2015-07-31T14:18:32Z"}, {"text": "Any update / progress on this bug? Regressions like these can mask other regressions.\nAlso the merge date is 10 August. In four days.", "author": "hv1989@gmail.com", "id": 10584433, "time": "2015-08-06T06:59:40Z"}, {"text": "APZ is Nightly-only for now, it is not riding the trains yet, so the regression would not make it to Aurora at the upcoming merge.", "author": "botond@mozilla.com", "id": 10585864, "time": "2015-08-06T14:03:56Z"}, {"text": "(In reply to Botond Ballo [:botond] from comment #7)\n> APZ is Nightly-only for now, it is not riding the trains yet, so the\n> regression would not make it to Aurora at the upcoming merge.\n\nGood to know. But still keep in mind that this still isn't ideal for different reasons.\n\n1) AWFY is only scanning Nightlies. As a result we don't have numbers for aurora/beta/release (yet?).\n\n2) A regression can mask another regression. It happens often that another regression is introduced, but isn't visible until the first regression is solved. In that case we only see that when the first regression is fixed, we are still not at the original performance. In this case it is hard to deduce if the original regression isn't fully fixed or if we had a masked regression.\n\n3) If a second regression happens and is visible, but gets fixed first and happens to give better performance than before the second regression, but worse than the first regression. In that case the fix improved performance, but once the first regression gets fixed, we don't know what the actual baseline should be. If we are happy with just having the same performance before the first regression, it might be that we actually didn't fixed the full regression, since we had an improvement in between.\n\nTherefore I would suggest against keeping a regression in the tree ...", "author": "hv1989@gmail.com", "id": 10597872, "time": "2015-08-10T10:44:44Z"}, {"text": "I agree that it's bad to leave the regression in the tree. I can take a look at it this week, sorry for the delay. That being said, if it's possible to run AWFY with custom prefs it might be worth running with layers.async-pan-zoom.enabled set to false so that it continues to pick up other regressions and whatnot.", "author": "bugmail@mozilla.staktrace.com", "id": 10598664, "time": "2015-08-10T15:05:04Z"}, {"text": "Also since the graphics SVG test in browsermark is so hard to run in isolation I'm going to try and focus on the SVG tests that we have in talos that also regressed (tracked in bug 1189817) and hope that the fixes there take care of this. The talos tests are much easier to run in isolation/on-demand/with a profiler and so it should be easier to identify the problem.", "author": "bugmail@mozilla.staktrace.com", "id": 10600877, "time": "2015-08-10T22:38:23Z"}, {"text": "On July 29th we regressed even more:\n- browsermark: Graphics 2.1: -3.99% (regression)\n- browsermark: Graphics SVG 2.1: -12.61% (regression)\n\nRecorded range:\n- http://hg.mozilla.org/integration/mozilla-inbound/pushloghtml?fromchange=b65c048414f7&tochange=0d65dafbdce5\n\nGiven that range, I assume:\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1186164\n\nGonna try to set \"layers.async-pan-zoom.enabled\" to false hopefully soonish. But in that case I need clear communication when this flag gets enabled in aurora and higher. To make sure I'm not measuring the wrong data.", "author": "hv1989@gmail.com", "id": 10638741, "time": "2015-08-20T06:10:49Z"}, {"text": "In that range bug 1180326 seems far more likely to me to be the culprit. Bug 1186164 should not have affected any desktop platforms, only B2G. And yes I will definitely let you know when the flag starts riding the trains.", "author": "bugmail@mozilla.staktrace.com", "id": 10639375, "time": "2015-08-20T11:16:58Z"}, {"text": "APZ will almost certainly ride the trains on 46. There have been a few talos regressions reported as well but in pretty much every case we've looked into so far the regression was a combination of the event regions code and the larger paint area, both of which are required for APZ correctness. Therefore we will probably have to just accept the regressions for now and incrementally improve things as we go forward. The apz-talos metabug tracks all the regressions as dependencies and will track improvements as blockers.", "author": "bugmail@mozilla.staktrace.com", "id": 11027777, "time": "2015-12-23T13:50:10Z"}, {"text": "Would you be able to check if APZ still produces a regression on this benchmark in Nightly? We have landed various improvements and although it likely won't be fixed entirely it should be a little better.\n\nPreferably I'd like to know what the results are in these three configurations:\n- e10s enabled, layers.async-pan-zoom.enabled true (default Nightly)\n- e10s enabled, layers.async-pan-zoom.enabled false\n- e10s enabled, layers.async-pan-zoom.enabled false, layout.event-regions.enabled true\n\nBoth of these pref changes require a browser restart.", "author": "bugmail@mozilla.staktrace.com", "id": 11329581, "time": "2016-04-15T12:23:16Z"}, {"text": "Sure, I'll do that on Monday", "author": "hv1989@gmail.com", "id": 11329669, "time": "2016-04-15T12:57:50Z"}, {"text": "Created attachment 8742871\nPerf numbers\n\nThe full numbers are in the attachment.\n\nFor browsermark svg I see:\n(default Nightly): 6752\nlayers.async-pan-zoom.enabled false: 6771\nlayers.async-pan-zoom.enabled false, layout.event-regions.enabled true: 6762\n\nWhich all looks like in noise levels!\nAnd the numbers are now back to what it was before July 2015", "author": "hv1989@gmail.com", "id": 11337840, "time": "2016-04-19T14:47:30Z"}, {"text": "Great, thanks! I'm going to close this bug as fixed then.", "author": "bugmail@mozilla.staktrace.com", "id": 11337876, "time": "2016-04-19T14:59:03Z"}], "cf_last_resolved": "2016-04-19T14:59:03Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2016-04-19T14:59:03Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [1013364, 1157746], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Panning and Zooming", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "---", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "hv1989@gmail.com", "id": 196399, "name": "hv1989@gmail.com", "real_name": "Hannes Verschore [:h4writer]"}, "whiteboard": "[gfx-noted]", "mentors": [], "cc_detail": [{"email": "botond@mozilla.com", "id": 474533, "name": "botond@mozilla.com", "real_name": "Botond Ballo [:botond]"}, {"email": "bugmail@mozilla.staktrace.com", "id": 426788, "name": "bugmail@mozilla.staktrace.com", "real_name": "Kartikaya Gupta (email:kats@mozilla.com)"}, {"email": "hv1989@gmail.com", "id": 196399, "name": "hv1989@gmail.com", "real_name": "Hannes Verschore [:h4writer]"}, {"email": "kkumari@softvision.com", "id": 558218, "name": "kkumari@softvision.com", "real_name": "Kanchan Kumari QA"}, {"email": "lsalzman@mozilla.com", "id": 536714, "name": "lsalzman@mozilla.com", "real_name": "Lee Salzman [:lsalzman]"}, {"email": "milan@mozilla.com", "id": 456486, "name": "milan@mozilla.com", "real_name": "Milan Sreckovic [:milan]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "blocks", "added": "1157746"}], "who": "hv1989@gmail.com", "when": "2015-07-27T17:39:35Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "lsalzman@mozilla.com, milan@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(lsalzman@mozilla.com)"}], "who": "milan@mozilla.com", "when": "2015-07-30T20:51:15Z"}, {"changes": [{"removed": "needinfo?(lsalzman@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "lsalzman@mozilla.com", "when": "2015-07-30T22:37:58Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bugmail.mozilla@staktrace.com"}], "who": "bugmail@mozilla.staktrace.com", "when": "2015-07-31T14:18:32Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1013364"}], "who": "bugmail@mozilla.staktrace.com", "when": "2015-07-31T14:18:42Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "botond@mozilla.com"}], "who": "botond@mozilla.com", "when": "2015-08-06T14:03:56Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "bugmail.mozilla@staktrace.com"}], "who": "bugmail@mozilla.staktrace.com", "when": "2015-08-10T15:05:04Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1189817"}], "who": "bugmail@mozilla.staktrace.com", "when": "2015-08-10T22:38:23Z"}, {"changes": [{"removed": "1189817", "field_name": "depends_on", "added": "1233163"}, {"removed": "bugmail.mozilla@staktrace.com", "field_name": "assigned_to", "added": "nobody@mozilla.org"}], "who": "bugmail@mozilla.staktrace.com", "when": "2015-12-23T13:50:10Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "kkumari@softvision.com"}], "who": "kkumari@softvision.com", "when": "2016-02-01T22:15:33Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "perf"}], "who": "bugmail@mozilla.staktrace.com", "when": "2016-02-03T17:15:07Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": "[gfx-noted]"}], "who": "bugmail@mozilla.staktrace.com", "when": "2016-02-18T15:17:35Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "hv1989@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(hv1989@gmail.com)"}], "who": "bugmail@mozilla.staktrace.com", "when": "2016-04-15T12:23:16Z"}, {"changes": [{"removed": "needinfo?(hv1989@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "hv1989@gmail.com", "when": "2016-04-19T14:47:30Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2016-04-19 07:59:03"}], "who": "bugmail@mozilla.staktrace.com", "when": "2016-04-19T14:59:03Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}