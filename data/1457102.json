{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "bob@bclary.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "wontfix", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox59": "unaffected", "keywords": ["assertion", "regressionwindow-wanted"], "cc_detail": [{"email": "cam@mcc.id.au", "id": 54040, "name": "cam@mcc.id.au", "real_name": "Cameron McCormack (:heycam)"}, {"email": "emilio@crisal.io", "id": 546716, "name": "emilio@crisal.io", "real_name": "Emilio Cobos \u00c1lvarez [:emilio]"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}], "cf_last_resolved": "2018-04-27T10:09:05Z", "attachments": [{"creator": "bob@bclary.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8971178}, {"creator": "emilio@crisal.io", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-27T00:01:58Z", "type_id": 4, "creation_date": "2018-04-26T14:14:44Z", "id": 1749416, "setter": "cam@mcc.id.au"}], "content_type": "text/x-review-board-request", "id": 8971210}, {"creator": "emilio@crisal.io", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-27T00:04:55Z", "type_id": 4, "creation_date": "2018-04-26T14:14:44Z", "id": 1749417, "setter": "cam@mcc.id.au"}], "content_type": "text/x-review-board-request", "id": 8971211}, {"creator": "emilio@crisal.io", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-27T00:11:54Z", "type_id": 4, "creation_date": "2018-04-26T14:14:44Z", "id": 1749418, "setter": "cam@mcc.id.au"}], "content_type": "text/x-review-board-request", "id": 8971212}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 11, "comments": [{"text": "Created attachment 8971178\nLinux Debug log\n\n1. http://www.dardarkom.com/37640-watch-and-download-17-again-2009-online.html\n\nWindows/Linux Nightly/61 at least.\n\nPretty reliable though not 100%. May need to reload or try a couple of times.\n\n2. Assertion failure: !StylistNeedsUpdate(), at /builds/worker/workspace/build/src/layout/style/ServoStyleSet.cpp:458\n#01: mozilla::ServoStyleSet::ResolveStyleLazily [layout/style/ServoStyleSet.cpp:615]\n#02: nsComputedDOMStyle::DoGetComputedStyleNoFlush [mfbt/AlreadyAddRefed.h:168]\n#03: nsComputedDOMStyle::UpdateCurrentStyleSources [mfbt/AlreadyAddRefed.h:168]\n#04: nsComputedDOMStyle::GetPropertyCSSValueWithoutWarning [layout/style/nsComputedDOMStyle.cpp:1040]\n#05: nsComputedDOMStyle::GetPropertyValue [mfbt/AlreadyAddRefed.h:168]\n#06: nsComputedDOMStyle::GetPropertyValue [xpcom/string/nsTSubstring.h:77]\n#07: nsDOMCSSDeclaration::GetWebkitBoxSizing [dom/bindings/ErrorResult.h:377]\n#08: mozilla::dom::CSS2PropertiesBinding::get_boxSizing [s3:gecko-generated-sources:8b55b957851f788c3e0fd080986975baef96ee47cf90c19763357ffb8779240003e7dfbf55130317161ca738706204d4d7916065c92d018c19f322d637be17a1/dom/bindings/CSS2PropertiesBinding.cpp::6317]", "author": "bob@bclary.com", "id": 13234970, "time": "2018-04-26T11:10:18Z"}, {"text": "Created attachment 8971210\nBug 1457102: Avoid all the work if the compat mode hasn't actually changed.\n\nIn this case the stylist is marked dirty because a compat mode change. The\nchange just doesn't exist (NavQuirks -> NavQuirks).\n\nSo avoid the work in the first place.\n\nReview commit: https://reviewboard.mozilla.org/r/239998/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/239998/", "author": "emilio@crisal.io", "id": 13235312, "time": "2018-04-26T14:14:44Z"}, {"text": "Created attachment 8971211\nBug 1457102: Avoid grabbing a reference to the pres context.\n\nNothing from within CompatibilityModeChanged can kill it.\n\nReview commit: https://reviewboard.mozilla.org/r/240000/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/240000/", "author": "emilio@crisal.io", "id": 13235313, "time": "2018-04-26T14:14:44Z"}, {"text": "Created attachment 8971212\nBug 1457102: Ensure a style flush happens after a compat mode change.\n\nThis is the actual fix. The compat mode changed (well, it didn't), but we were\nnot scheduling a style flush.\n\nThen someone called getComputedStyle on an element in this document, and the\nstyles were thought clean, thus we didn't flush style, and we assert when style\nresolution happened.\n\nReview commit: https://reviewboard.mozilla.org/r/240002/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/240002/", "author": "emilio@crisal.io", "id": 13235314, "time": "2018-04-26T14:14:44Z"}, {"text": "Comment on attachment 8971210\nBug 1457102: Avoid all the work if the compat mode hasn't actually changed.\n\nhttps://reviewboard.mozilla.org/r/239998/#review246004", "author": "cam@mcc.id.au", "id": 13237163, "time": "2018-04-27T00:01:58Z"}, {"text": "Comment on attachment 8971211\nBug 1457102: Avoid grabbing a reference to the pres context.\n\nhttps://reviewboard.mozilla.org/r/240000/#review246008", "author": "cam@mcc.id.au", "id": 13237169, "time": "2018-04-27T00:04:55Z"}, {"text": "Comment on attachment 8971212\nBug 1457102: Ensure a style flush happens after a compat mode change.\n\nhttps://reviewboard.mozilla.org/r/240002/#review246010", "author": "cam@mcc.id.au", "id": 13237176, "time": "2018-04-27T00:11:54Z"}, {"text": "Pushed by ecoal95@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/681cf57b9ff3\nAvoid all the work if the compat mode hasn't actually changed. r=heycam\nhttps://hg.mozilla.org/integration/autoland/rev/860f468355b9\nAvoid grabbing a reference to the pres context. r=heycam\nhttps://hg.mozilla.org/integration/autoland/rev/9806b8af0e6f\nEnsure a style flush happens after a compat mode change. r=heycam", "author": "pulsebot@bots.tld", "id": 13237218, "time": "2018-04-27T00:50:57Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/681cf57b9ff3\nhttps://hg.mozilla.org/mozilla-central/rev/860f468355b9\nhttps://hg.mozilla.org/mozilla-central/rev/9806b8af0e6f", "author": "csabou@mozilla.com", "id": 13237816, "time": "2018-04-27T10:09:05Z"}, {"text": "AFAICT, this also affects 60 (based on blame). Is there a user impact which warrants backport consideration or can this ride the trains?", "author": "ryanvm@gmail.com", "id": 13239886, "time": "2018-04-28T16:16:57Z"}, {"text": "(In reply to Ryan VanderMeulen [:RyanVM] from comment #9)\n> AFAICT, this also affects 60 (based on blame). Is there a user impact which\n> warrants backport consideration or can this ride the trains?\n\nI don't think so. This theoretically could have user-visible impact / lack of correctness. But I haven't seen that at all (in this case the compat mode had not even changed). I don't think it's worth backporting.", "author": "emilio@crisal.io", "id": 13247599, "time": "2018-05-02T02:23:45Z"}], "id": 1457102, "priority": "--", "cc": ["cam@mcc.id.au", "emilio@crisal.io", "ryanvm@gmail.com"], "cf_crash_signature": "", "version": "61 Branch", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [532972], "qa_contact": "", "creation_time": "2018-04-26T11:10:18Z", "cf_status_firefox_esr52": "unaffected", "component": "CSS Parsing and Computation", "assigned_to_detail": {"email": "emilio@crisal.io", "id": 546716, "name": "emilio@crisal.io", "real_name": "Emilio Cobos \u00c1lvarez [:emilio]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "fixed", "cf_status_firefox60": "wontfix", "target_milestone": "mozilla61", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "http://www.dardarkom.com/37640-watch-and-download-17-again-2009-online.html", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "bob@bclary.com", "id": 23402, "name": "bob@bclary.com", "real_name": "Bob Clary [:bc:]"}, "whiteboard": "", "mentors": [], "summary": "Assertion failure: !StylistNeedsUpdate() @ mozilla::ServoStyleSet::PreTraverseSync", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-02T02:24:10Z", "assigned_to": "emilio@crisal.io", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "emilio@crisal.io"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(emilio@crisal.io)"}], "who": "emilio@crisal.io", "when": "2018-04-26T11:26:33Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "emilio@crisal.io"}, {"removed": "needinfo?(emilio@crisal.io)", "field_name": "flagtypes.name", "added": ""}], "who": "emilio@crisal.io", "when": "2018-04-26T14:14:02Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971210, "added": "review?(cam@mcc.id.au)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971211, "added": "review?(cam@mcc.id.au)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8971212, "added": "review?(cam@mcc.id.au)"}, {"removed": "", "field_name": "cc", "added": "cam@mcc.id.au"}], "who": "emilio@crisal.io", "when": "2018-04-26T14:14:44Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(cam@mcc.id.au)", "attachment_id": 8971210, "added": "review+"}], "who": "cam@mcc.id.au", "when": "2018-04-27T00:01:58Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(cam@mcc.id.au)", "attachment_id": 8971211, "added": "review+"}], "who": "cam@mcc.id.au", "when": "2018-04-27T00:04:55Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(cam@mcc.id.au)", "attachment_id": 8971212, "added": "review+"}], "who": "cam@mcc.id.au", "when": "2018-04-27T00:11:54Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla61"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-04-27 10:09:05"}, {"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "csabou@mozilla.com", "when": "2018-04-27T10:09:05Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "affected"}, {"removed": "---", "field_name": "cf_status_firefox59", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "wontfix"}], "who": "ryanvm@gmail.com", "when": "2018-04-28T16:16:57Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(emilio@crisal.io)"}], "who": "ryanvm@gmail.com", "when": "2018-05-02T02:04:46Z"}, {"changes": [{"removed": "needinfo?(emilio@crisal.io)", "field_name": "flagtypes.name", "added": ""}], "who": "emilio@crisal.io", "when": "2018-05-02T02:23:45Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox_esr60", "added": "wontfix"}], "who": "ryanvm@gmail.com", "when": "2018-05-02T02:24:10Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}