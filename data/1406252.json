{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "twsmith@mozilla.com", "mentors_detail": [], "depends_on": [1282940], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_status_firefox56": "wontfix", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "wontfix", "cf_status_firefox59": "?", "keywords": ["assertion", "testcase"], "cf_status_firefox57": "wontfix", "summary": "Assertion failure: totalDesiredPortionOfOrigFreeSpace == 0 || ((totalDesiredPortionOfOrigFreeSpace > 0) == (availableFreeSpace > 0)), [@nsFlexContainerFrame::FlexLine::ResolveFlexibleLengths]", "cf_last_resolved": "2018-06-04T22:32:53Z", "attachments": [{"creator": "twsmith@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/html", "id": 8915803}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "no", "comment_count": 7, "comments": [{"text": "Created attachment 8915803\ntest_case.html\n\nAssertion failure: totalDesiredPortionOfOrigFreeSpace == 0 || ((totalDesiredPortionOfOrigFreeSpace > 0) == (availableFreeSpace > 0)) (When we reduce available free space for flex factors < 1,we shouldn't change the sign of the free space...), at /src/layout/generic/nsFlexContainerFrame.cpp:2535\n\n#0 nsFlexContainerFrame::FlexLine::ResolveFlexibleLengths(int) /src/layout/generic/nsFlexContainerFrame.cpp:2647:3\n#1 nsFlexContainerFrame::DoFlexLayout(nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, nsReflowStatus&, int, int, nsTArray<nsFlexContainerFrame::StrutInfo>&, nsFlexContainerFrame::FlexboxAxisTracker const&) /src/layout/generic/nsFlexContainerFrame.cpp:4157:11\n#2 nsFlexContainerFrame::Reflow(nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, nsReflowStatus&) /src/layout/generic/nsFlexContainerFrame.cpp:3995:3\n#3 nsBlockReflowContext::ReflowBlock(mozilla::LogicalRect const&, bool, nsCollapsingMargin&, int, bool, nsLineBox*, mozilla::ReflowInput&, nsReflowStatus&, mozilla::BlockReflowInput&) /src/layout/generic/nsBlockReflowContext.cpp:306:11\n#4 nsBlockFrame::ReflowBlockFrame(mozilla::BlockReflowInput&, nsLineList_iterator, bool*) /src/layout/generic/nsBlockFrame.cpp:3521:11\n#5 nsBlockFrame::ReflowLine(mozilla::BlockReflowInput&, nsLineList_iterator, bool*) /src/layout/generic/nsBlockFrame.cpp:2870:5\n#6 nsBlockFrame::ReflowDirtyLines(mozilla::BlockReflowInput&) /src/layout/generic/nsBlockFrame.cpp:2409:7\n#7 nsBlockFrame::Reflow(nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, nsReflowStatus&) /src/layout/generic/nsBlockFrame.cpp:1235:3\n#8 nsBlockReflowContext::ReflowBlock(mozilla::LogicalRect const&, bool, nsCollapsingMargin&, int, bool, nsLineBox*, mozilla::ReflowInput&, nsReflowStatus&, mozilla::BlockReflowInput&) /src/layout/generic/nsBlockReflowContext.cpp:306:11\n#9 nsBlockFrame::ReflowBlockFrame(mozilla::BlockReflowInput&, nsLineList_iterator, bool*) /src/layout/generic/nsBlockFrame.cpp:3521:11\n#10 nsBlockFrame::ReflowLine(mozilla::BlockReflowInput&, nsLineList_iterator, bool*) /src/layout/generic/nsBlockFrame.cpp:2870:5\n#11 nsBlockFrame::ReflowDirtyLines(mozilla::BlockReflowInput&) /src/layout/generic/nsBlockFrame.cpp:2409:7\n#12 nsBlockFrame::Reflow(nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, nsReflowStatus&) /src/layout/generic/nsBlockFrame.cpp:1235:3\n#13 nsContainerFrame::ReflowChild(nsIFrame*, nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, mozilla::WritingMode const&, mozilla::LogicalPoint const&, nsSize const&, unsigned int, nsReflowStatus&, nsOverflowContinuationTracker*) /src/layout/generic/nsContainerFrame.cpp:932:14\n#14 nsCanvasFrame::Reflow(nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, nsReflowStatus&) /src/layout/generic/nsCanvasFrame.cpp:751:5\n#15 nsContainerFrame::ReflowChild(nsIFrame*, nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, mozilla::WritingMode const&, mozilla::LogicalPoint const&, nsSize const&, unsigned int, nsReflowStatus&, nsOverflowContinuationTracker*) /src/layout/generic/nsContainerFrame.cpp:932:14\n#16 nsHTMLScrollFrame::ReflowScrolledFrame(mozilla::ScrollReflowInput*, bool, bool, mozilla::ReflowOutput*, bool) /src/layout/generic/nsGfxScrollFrame.cpp:550:3\n#17 nsHTMLScrollFrame::ReflowContents(mozilla::ScrollReflowInput*, mozilla::ReflowOutput const&) /src/layout/generic/nsGfxScrollFrame.cpp:662:3\n#18 nsHTMLScrollFrame::Reflow(nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, nsReflowStatus&) /src/layout/generic/nsGfxScrollFrame.cpp:1039:3\n#19 nsContainerFrame::ReflowChild(nsIFrame*, nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, int, int, unsigned int, nsReflowStatus&, nsOverflowContinuationTracker*) /src/layout/generic/nsContainerFrame.cpp:976:14\n#20 mozilla::ViewportFrame::Reflow(nsPresContext*, mozilla::ReflowOutput&, mozilla::ReflowInput const&, nsReflowStatus&) /src/layout/generic/ViewportFrame.cpp:330:7\n#21 mozilla::PresShell::DoReflow(nsIFrame*, bool) /src/layout/base/PresShell.cpp:8943:11\n#22 mozilla::PresShell::ProcessReflowCommands(bool) /src/layout/base/PresShell.cpp:9116:24\n#23 mozilla::PresShell::DoFlushPendingNotifications(mozilla::ChangesToFlush) /src/layout/base/PresShell.cpp:4182:11\n#24 nsRefreshDriver::Tick(long, mozilla::TimeStamp) /src/layout/base/nsRefreshDriver.cpp:1957:16\n#25 mozilla::RefreshDriverTimer::TickRefreshDrivers(long, mozilla::TimeStamp, nsTArray<RefPtr<nsRefreshDriver> >&) /src/layout/base/nsRefreshDriver.cpp:307:7\n#26 mozilla::RefreshDriverTimer::Tick(long, mozilla::TimeStamp) /src/layout/base/nsRefreshDriver.cpp:328:5\n#27 mozilla::VsyncRefreshDriverTimer::RunRefreshDrivers(mozilla::TimeStamp) /src/layout/base/nsRefreshDriver.cpp:770:5\n#28 mozilla::VsyncRefreshDriverTimer::RefreshDriverVsyncObserver::TickRefreshDriver(mozilla::TimeStamp) /src/layout/base/nsRefreshDriver.cpp:683:35\n#29 mozilla::VsyncRefreshDriverTimer::RefreshDriverVsyncObserver::ParentProcessVsyncNotifier::Run() /src/layout/base/nsRefreshDriver.cpp:529:20\n#30 nsThread::ProcessNextEvent(bool, bool*) /src/xpcom/threads/nsThread.cpp:1039:14\n#31 NS_ProcessNextEvent(nsIThread*, bool) /src/xpcom/threads/nsThreadUtils.cpp:524:10\n#32 mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /src/ipc/glue/MessagePump.cpp:97:21\n#33 MessageLoop::RunInternal() /src/ipc/chromium/src/base/message_loop.cc:326:10\n#34 MessageLoop::Run() /src/ipc/chromium/src/base/message_loop.cc:299:3\n#35 nsBaseAppShell::Run() /src/widget/nsBaseAppShell.cpp:158:27\n#36 nsAppStartup::Run() /src/toolkit/components/startup/nsAppStartup.cpp:288:30\n#37 XREMain::XRE_mainRun() /src/toolkit/xre/nsAppRunner.cpp:4694:22\n#38 XREMain::XRE_main(int, char**, mozilla::BootstrapConfig const&) /src/toolkit/xre/nsAppRunner.cpp:4858:8\n#39 XRE_main(int, char**, mozilla::BootstrapConfig const&) /src/toolkit/xre/nsAppRunner.cpp:4953:21\n#40 do_main(int, char**, char**) /src/browser/app/nsBrowserApp.cpp:231:22\n#41 main /src/browser/app/nsBrowserApp.cpp:304:16\n#42 __libc_start_main /build/glibc-bfm8X4/glibc-2.23/csu/../csu/libc-start.c:291\n#43 _start (firefox+0x41eae4)", "author": "twsmith@mozilla.com", "id": 12734010, "time": "2017-10-06T02:28:14Z"}, {"text": "More than a year old, so older than mozregression can bisect.", "author": "ryanvm@gmail.com", "id": 12736168, "time": "2017-10-06T19:17:22Z"}, {"text": "This happens in part because we've got huge sizes and integer overflow as a result.\n\nThe huge sizes come from bug 1282940 -- I suspect this testcase will become fine (no assert) after that bug is fixed.  (It might be possible to modify the testcase & hardcode some particular huge sizes that make it still trigger an assertion failure at that point, though -- not sure.)", "author": "dholbert@mozilla.com", "id": 12767935, "time": "2017-10-17T21:42:16Z"}, {"text": "https://wiki.mozilla.org/Bug_Triage/Projects/Bug_Handling/Bug_Husbandry#Move_fix-optionals", "author": "bug-husbandry-bot@mozilla.bugs", "id": 12974306, "time": "2018-01-16T23:25:15Z"}, {"text": "This doesn't assert anymore in current mozilla-central.\n\n--> WFM (based on comment 2, likely due to bug 1282940). I'll add a crashtest, too.", "author": "dholbert@mozilla.com", "id": 13386652, "time": "2018-06-04T22:32:53Z"}, {"text": "Pushed by dholbert@mozilla.com:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/36600b9bcff7\nAdd crashtest. (test-only)", "author": "pulsebot@bots.tld", "id": 13386672, "time": "2018-06-04T22:51:27Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/36600b9bcff7", "author": "btara@mozilla.com", "id": 13387487, "time": "2018-06-05T09:44:08Z"}], "id": 1406252, "priority": "P3", "cc": ["dholbert@mozilla.com", "ryanvm@gmail.com"], "cf_crash_signature": "", "version": "Trunk", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1079155, 1289609], "qa_contact": "", "creation_time": "2017-10-06T02:28:14Z", "cf_status_firefox_esr52": "wontfix", "component": "Layout", "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "---", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "twsmith@mozilla.com", "id": 486634, "name": "twsmith@mozilla.com", "real_name": "Tyson Smith [:tsmith]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "dholbert@mozilla.com", "id": 278074, "name": "dholbert@mozilla.com", "real_name": "Daniel Holbert [:dholbert]"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [{"status": "?", "name": "in-testsuite", "modification_date": "2017-10-06T02:28:14Z", "type_id": 37, "creation_date": "2017-10-06T02:28:14Z", "id": 1660516, "setter": "twsmith@mozilla.com"}], "last_change_time": "2018-06-05T09:44:08Z", "assigned_to": "nobody@mozilla.org", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "in-testsuite?"}], "who": "twsmith@mozilla.com", "when": "2017-10-06T02:28:14Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "---", "field_name": "cf_has_regression_range", "added": "no"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox56", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox57", "added": "wontfix"}, {"removed": "affected", "field_name": "cf_status_firefox58", "added": "fix-optional"}], "who": "ryanvm@gmail.com", "when": "2017-10-06T19:17:22Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "dholbert@mozilla.com"}, {"removed": "", "field_name": "blocks", "added": "1079155"}], "who": "dholbert@mozilla.com", "when": "2017-10-06T19:32:34Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1282940"}], "who": "dholbert@mozilla.com", "when": "2017-10-17T21:42:16Z"}, {"changes": [{"removed": "fix-optional", "field_name": "cf_status_firefox58", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox59", "added": "?"}], "who": "bug-husbandry-bot@mozilla.bugs", "when": "2018-01-16T23:25:15Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P3"}, {"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "WORKSFORME"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-06-04 22:32:53"}], "who": "dholbert@mozilla.com", "when": "2018-06-04T22:32:53Z"}], "resolution": "WORKSFORME", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}