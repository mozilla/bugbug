{"cf_status_firefox38": "fixed", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "jryans@gmail.com", "is_obsolete": 1, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2015-02-02T09:32:08Z", "type_id": 748, "creation_date": "2015-01-30T19:36:14Z", "id": 1088453, "setter": "pbrosset@mozilla.com"}, {"status": "+", "name": "review", "modification_date": "2015-02-02T09:32:19Z", "type_id": 748, "creation_date": "2015-02-02T09:32:19Z", "id": 1089238, "setter": "pbrosset@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8557255}, {"creator": "jryans@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2015-06-10T15:20:48Z", "type_id": 748, "creation_date": "2015-06-10T15:20:48Z", "id": 1187435, "setter": "pbrosset@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8619226}], "classification": "Client Software", "creator": "jryans@gmail.com", "cc": ["jryans@gmail.com", "pbrosset@mozilla.com"], "depends_on": [], "creation_time": "2015-01-27T16:14:57Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "All", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Keep destroying the toolbox even if a panel fails", "id": 1126350, "assigned_to_detail": {"email": "jryans@gmail.com", "id": 282978, "name": "jryans@gmail.com", "real_name": "J. Ryan Stinnett [:jryans] (use ni?)"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "jryans@gmail.com", "comment_count": 12, "comments": [{"text": "While investigating bug 1118974, I noticed that the toolbox destruction path will abort early if any one of the panels fails.\n\nWe should rewrite this to continue destruction of all panels and the toolbox, even if one part fails, and should just log a message when there is an error.", "author": "jryans@gmail.com", "id": 9848028, "time": "2015-01-27T16:14:57Z"}, {"text": "Created attachment 8557255\nMozReview Request: bz://1126350/jryans\n\n/r/3177 - Bug 1126350 - Settle all toolbox destruction before final cleanup. r=pbrosset\n\nPull down this commit:\n\nhg pull review -r c1d921d17fb59f805ff179f26eac7e7a4e20839d", "author": "jryans@gmail.com", "id": 9864322, "time": "2015-01-30T19:36:14Z"}, {"text": "Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=265bb729311a", "author": "jryans@gmail.com", "id": 9864325, "time": "2015-01-30T19:36:35Z"}, {"text": "Comment on attachment 8557255\nMozReview Request: bz://1126350/jryans\n\nhttps://reviewboard.mozilla.org/r/3175/#review2657\n\nShip It!\n\n::: toolkit/devtools/DevToolsUtils.js\n(Diff revision 1)\n> + * This differs from Promise.all, which will reject immediately after the first\n\nI was surprised this was the case, but yeah, it does look like we need a helper to wait for all promises to resolve or reject.\n\n::: toolkit/devtools/DevToolsUtils.js\n(Diff revision 1)\n> +  return new Promise((resolve, reject) => {\n\nI'm all for using DOM promises, but have only seen promise.jsm promises in our code so far (also there's a require(\"promise\") in this file).\nWhat's our approach here? Slowly start to insert DOM promises step by step, or use promise.jsm only and then do a big-bang migration?", "author": "pbrosset@mozilla.com", "id": 9868683, "time": "2015-02-02T09:32:08Z"}, {"text": "Comment on attachment 8557255\nMozReview Request: bz://1126350/jryans\n\nhttps://reviewboard.mozilla.org/r/3175/#review2659\n\nShip It!", "author": "pbrosset@mozilla.com", "id": 9868686, "time": "2015-02-02T09:32:19Z"}, {"text": "https://reviewboard.mozilla.org/r/3175/#review2675\n\n> I'm all for using DOM promises, but have only seen promise.jsm promises in our code so far (also there's a require(\"promise\") in this file).\n> What's our approach here? Slowly start to insert DOM promises step by step, or use promise.jsm only and then do a big-bang migration?\n\nThere are a few [usages][1] already, but mostly in tests.\n\nPersonally, it seems fine to me to make use of them piecemeal, but it's mostly a style point I would think.  I'll email the list to ask the team about it.\n\nIn this case, it appeared because I copied Promise.jsm's implemtation of |all| as a starting point, which itself uses this DOM promise.\n\n[1]: https://dxr.mozilla.org/mozilla-central/search?q=%22new%20Promise%22%20path%3Adevtools&case=true&=mozilla-central", "author": "jryans@gmail.com", "id": 9869724, "time": "2015-02-02T15:32:31Z"}, {"text": "(In reply to J. Ryan Stinnett [:jryans] from comment #5)\n> Personally, it seems fine to me to make use of them piecemeal, but it's\n> mostly a style point I would think.  I'll email the list to ask the team\n> about it.\n\nConsensus was the team prefers Promise.jsm for now because of the extra debugging features.  I'll switch to that.", "author": "jryans@gmail.com", "id": 9898842, "time": "2015-02-09T19:57:35Z"}, {"text": "Updated try with Promise.jsm:\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=6bc5d9b5109a", "author": "jryans@gmail.com", "id": 9899057, "time": "2015-02-09T20:42:39Z"}, {"text": "https://hg.mozilla.org/integration/fx-team/rev/c70ba1f08a7f", "author": "jryans@gmail.com", "id": 9903825, "time": "2015-02-10T18:37:56Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/c70ba1f08a7f", "author": "ryanvm@gmail.com", "id": 9904462, "time": "2015-02-10T20:59:34Z"}, {"text": "Comment on attachment 8557255\nMozReview Request: bz://1126350/jryans", "author": "jryans@gmail.com", "id": 10368127, "time": "2015-06-10T15:20:48Z"}, {"text": "Created attachment 8619226\nMozReview Request: Bug 1126350 - Settle all toolbox destruction before final cleanup. r=pbrosset", "author": "jryans@gmail.com", "id": 10368128, "time": "2015-06-10T15:20:48Z"}], "cf_last_resolved": "2015-02-10T20:59:34Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-06-10T15:20:48Z", "cf_platform_rel": "---", "product": "Firefox", "cf_status_firefox_esr52": "---", "blocks": [], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Developer Tools: Framework", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "Firefox 38", "is_cc_accessible": true, "url": "", "creator_detail": {"email": "jryans@gmail.com", "id": 282978, "name": "jryans@gmail.com", "real_name": "J. Ryan Stinnett [:jryans] (use ni?)"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "jryans@gmail.com", "id": 282978, "name": "jryans@gmail.com", "real_name": "J. Ryan Stinnett [:jryans] (use ni?)"}, {"email": "pbrosset@mozilla.com", "id": 478661, "name": "pbrosset@mozilla.com", "real_name": "Patrick Brosset <:pbro>"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "resolution": "FIXED", "op_sys": "All", "cf_fx_points": "---", "history": [{"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "", "field_name": "cc", "added": "jryans@gmail.com"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "jryans@gmail.com"}], "who": "jryans@gmail.com", "when": "2015-01-30T19:35:05Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8557255, "added": "review?(pbrosset@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "pbrosset@mozilla.com"}], "who": "jryans@gmail.com", "when": "2015-01-30T19:36:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(pbrosset@mozilla.com)", "attachment_id": 8557255, "added": "review+"}], "who": "pbrosset@mozilla.com", "when": "2015-02-02T09:32:08Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8557255, "added": "review+"}], "who": "pbrosset@mozilla.com", "when": "2015-02-02T09:32:19Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": "[fixed-in-fx-team]"}], "who": "jryans@gmail.com", "when": "2015-02-10T18:37:56Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "Firefox 38"}, {"removed": "[fixed-in-fx-team]", "field_name": "whiteboard", "added": ""}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-02-10 12:59:34"}, {"removed": "---", "field_name": "cf_status_firefox38", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2015-02-10T20:59:34Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8557255, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8619226, "added": "review+"}], "who": "jryans@gmail.com", "when": "2015-06-10T15:20:48Z"}]}