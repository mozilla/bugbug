{"cf_tracking_thunderbird_esr52": "---", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "timdream@gmail.com", "mentors_detail": [], "depends_on": [1441857, 1448528, 1448556, 1449532, 1449536, 1450013], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "cc_detail": [{"email": "bgrinstead@mozilla.com", "id": 476442, "name": "bgrinstead@mozilla.com", "real_name": "Brian Grinstead [:bgrins]"}, {"email": "dholbert@mozilla.com", "id": 278074, "name": "dholbert@mozilla.com", "real_name": "Daniel Holbert [:dholbert]"}, {"email": "e7358d9c@opayq.com", "id": 590837, "name": "e7358d9c@opayq.com", "real_name": "ExE Boss"}, {"email": "gijskruitbosch+bugs@gmail.com", "id": 159069, "name": "gijskruitbosch+bugs@gmail.com", "real_name": ":Gijs (he/him)"}, {"email": "jh+bugzilla@buttercookie.de", "id": 470713, "name": "jh+bugzilla@buttercookie.de", "real_name": "Jan Henning (on vacation in June) [:JanH]"}, {"email": "ralin@mozilla.com", "id": 554237, "name": "ralin@mozilla.com", "real_name": "Ray Lin[:ralin]"}, {"email": "tshakespeare@mozilla.com", "id": 478202, "name": "tshakespeare@mozilla.com", "real_name": "Tiffanie Shakespeare [:tif] UX"}], "cf_last_resolved": "2018-03-22T09:37:59Z", "attachments": [{"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-21T11:51:53Z", "type_id": 4, "creation_date": "2018-03-21T07:26:31Z", "id": 1732449, "setter": "gijskruitbosch+bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8957737}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-20T11:48:27Z", "type_id": 4, "creation_date": "2018-03-16T14:58:27Z", "id": 1730589, "setter": "gijskruitbosch+bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8957749}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-20T12:16:27Z", "type_id": 4, "creation_date": "2018-03-16T14:58:27Z", "id": 1730590, "setter": "gijskruitbosch+bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8957764}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-20T11:34:48Z", "type_id": 4, "creation_date": "2018-03-16T14:58:27Z", "id": 1730587, "setter": "gijskruitbosch+bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8958099}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-15T01:06:59Z", "type_id": 4, "creation_date": "2018-03-14T23:53:24Z", "id": 1729791, "setter": "dholbert@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8958100}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-16T14:11:56Z", "type_id": 4, "creation_date": "2018-03-16T00:16:46Z", "id": 1730358, "setter": "gijskruitbosch+bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8958800}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "image/png", "id": 8958801}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "image/png", "id": 8958803}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-16T20:31:02Z", "type_id": 4, "creation_date": "2018-03-16T14:58:27Z", "id": 1730591, "setter": "gijskruitbosch+bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8959394}, {"creator": "timdream@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-03-21T11:47:26Z", "type_id": 4, "creation_date": "2018-03-21T07:24:58Z", "id": 1732448, "setter": "gijskruitbosch+bugs@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8960883}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 164, "comments": [{"text": "The touchControls binding \n\nhttps://dxr.mozilla.org/mozilla-central/rev/55d91695f4bb951c224005155baef054a786c1f7/toolkit/content/widgets/videocontrols.xml#1909\n\nis the only binding that relies on other xbl bindings to function. As mentioned in  bug 1444193 comment 9, the approach bug 1431255 is going for will not enable us to use custom elements in the future in-content.\n\nWe will need to think through the approaches to deal with it.", "author": "timdream@gmail.com", "id": 13117593, "time": "2018-03-09T19:17:16Z"}, {"text": "I wonder if there is some way to \"import\" the custom elements locally in the in-content widget in JS? Granted it will not follow the usual path, but it would be good to avoid rewrite touchControls.\n\nIf the local \"import\" also handles stylesheets we can invalid bug 1444193. I would like to land the assertion anyway though.", "author": "timdream@gmail.com", "id": 13117605, "time": "2018-03-09T19:23:47Z"}, {"text": "(In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment #1)\n> I wonder if there is some way to \"import\" the custom elements locally in the\n> in-content widget in JS?\n\nLike rip out <label>s from the markup, and create them dynamically with |new FirefoxLabel(...)| instead. Would it work?", "author": "timdream@gmail.com", "id": 13117620, "time": "2018-03-09T19:29:20Z"}, {"text": "I'd also like to get a sense of what it would take to modify / re-use the HTML markup we currently have for videoControls instead of using XUL widgets (XBL or CE) in touchControls.", "author": "bgrinstead@mozilla.com", "id": 13117706, "time": "2018-03-09T19:42:58Z"}, {"text": "Another alternative: try to load videoControls on Android and see if it works. It might be closer than trying to convert few, if not all, elements to HTML in touchControls.", "author": "timdream@gmail.com", "id": 13117769, "time": "2018-03-09T20:05:15Z"}, {"text": "(In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment #4)\n> Another alternative: try to load videoControls on Android and see if it\n> works. It might be closer than trying to convert few, if not all, elements\n> to HTML in touchControls.\n\nTurned out there is already a bug filed (bug 1310907).", "author": "timdream@gmail.com", "id": 13118294, "time": "2018-03-09T22:57:16Z"}, {"text": "Created attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview commit: https://reviewboard.mozilla.org/r/226696/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/226696/", "author": "timdream@gmail.com", "id": 13118320, "time": "2018-03-09T23:14:36Z"}, {"text": "I have a WIP patch that makes videoControls work on Fennec.\n\nThe differences I found so far are:\n\n- The mobile control bar is a little bit taller to make the buttons bigger.\n- There isn't a volume slider. There is one in the markup, I assume it shows up in <audio> only (need test)\n- There isn't a closed caption button but WebVTT works on mobile.\n- There is a Casting button on mobile control \u2014 missing on desktop.\n- The full screen button looks different (I am not sure if we care).\n\nOverall the design looks pretty similar and the interaction is almost identical \u2014 I am pretty sure the effort to tweak desktop controls to what mobile needs will be much smaller than trying to do anything to touchControls.", "author": "timdream@gmail.com", "id": 13118327, "time": "2018-03-09T23:21:32Z"}, {"text": "(In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment #7)\n> I have a WIP patch that makes videoControls work on Fennec.\n>\n> Overall the design looks pretty similar and the interaction is almost\n> identical \u2014 I am pretty sure the effort to tweak desktop controls to what\n> mobile needs will be much smaller than trying to do anything to\n> touchControls.\n\nThat's great progress - using the videoControls instead of touchControls would be a win for at least a few reasons:\n1) it would delete an in-content binding\n2) it would let us to remove the \"load xul.css in content\" condition entirely\n3) it would mean we don't have to worry about supporting XUL Custom Elements inside of native anonymous content", "author": "bgrinstead@mozilla.com", "id": 13118379, "time": "2018-03-10T00:04:09Z"}, {"text": "Created attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview commit: https://reviewboard.mozilla.org/r/226710/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/226710/", "author": "timdream@gmail.com", "id": 13118434, "time": "2018-03-10T00:43:12Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/1-2/", "author": "timdream@gmail.com", "id": 13118435, "time": "2018-03-10T00:43:12Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/1-2/", "author": "timdream@gmail.com", "id": 13118441, "time": "2018-03-10T00:48:35Z"}, {"text": "Created attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nEnlarge everything by 1.6x.\n\nTODO: subtitle selection menu.\n\nReview commit: https://reviewboard.mozilla.org/r/226750/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/226750/", "author": "timdream@gmail.com", "id": 13118535, "time": "2018-03-10T02:12:26Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/2-3/", "author": "timdream@gmail.com", "id": 13118536, "time": "2018-03-10T02:12:26Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/2-3/", "author": "timdream@gmail.com", "id": 13118537, "time": "2018-03-10T02:12:26Z"}, {"text": "4: By removing `touchControls` and using `videoControls` exclusively, we end up using responsive design, rather than serving two different layouts, one for desktop and one for mobile, which removes code duplication and will probably make things easier to manage in the long term.", "author": "e7358d9c@opayq.com", "id": 13118555, "time": "2018-03-10T02:37:09Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/3-4/", "author": "timdream@gmail.com", "id": 13121203, "time": "2018-03-12T03:12:47Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/3-4/", "author": "timdream@gmail.com", "id": 13121204, "time": "2018-03-12T03:12:47Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/1-2/", "author": "timdream@gmail.com", "id": 13121205, "time": "2018-03-12T03:12:47Z"}, {"text": "Created attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nThe noControls binding is bound to <video> without controls, and\nis only visible on mobile when casting is available.\n\nReview commit: https://reviewboard.mozilla.org/r/227052/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/227052/", "author": "timdream@gmail.com", "id": 13122185, "time": "2018-03-12T15:04:35Z"}, {"text": "Created attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview commit: https://reviewboard.mozilla.org/r/227054/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/227054/", "author": "timdream@gmail.com", "id": 13122186, "time": "2018-03-12T15:04:35Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/4-5/", "author": "timdream@gmail.com", "id": 13122187, "time": "2018-03-12T15:04:35Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/4-5/", "author": "timdream@gmail.com", "id": 13122188, "time": "2018-03-12T15:04:35Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/2-3/", "author": "timdream@gmail.com", "id": 13122189, "time": "2018-03-12T15:04:35Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/1-2/", "author": "timdream@gmail.com", "id": 13124214, "time": "2018-03-13T06:07:31Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/5-6/", "author": "timdream@gmail.com", "id": 13124215, "time": "2018-03-13T06:07:31Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/5-6/", "author": "timdream@gmail.com", "id": 13124216, "time": "2018-03-13T06:07:31Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/1-2/", "author": "timdream@gmail.com", "id": 13124217, "time": "2018-03-13T06:07:31Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/3-4/", "author": "timdream@gmail.com", "id": 13124218, "time": "2018-03-13T06:07:31Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/2-3/", "author": "timdream@gmail.com", "id": 13125609, "time": "2018-03-13T17:04:43Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/6-7/", "author": "timdream@gmail.com", "id": 13125610, "time": "2018-03-13T17:04:43Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/6-7/", "author": "timdream@gmail.com", "id": 13125611, "time": "2018-03-13T17:04:43Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/2-3/", "author": "timdream@gmail.com", "id": 13125612, "time": "2018-03-13T17:04:43Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/4-5/", "author": "timdream@gmail.com", "id": 13125613, "time": "2018-03-13T17:04:43Z"}, {"text": "Created attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nConvert all is* methods to getter or rename them if they take arguments.\n\nReview commit: https://reviewboard.mozilla.org/r/227710/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/227710/", "author": "timdream@gmail.com", "id": 13127741, "time": "2018-03-14T13:22:23Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/3-4/", "author": "timdream@gmail.com", "id": 13127742, "time": "2018-03-14T13:22:23Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/7-8/", "author": "timdream@gmail.com", "id": 13127743, "time": "2018-03-14T13:22:23Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/7-8/", "author": "timdream@gmail.com", "id": 13127744, "time": "2018-03-14T13:22:23Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/3-4/", "author": "timdream@gmail.com", "id": 13127745, "time": "2018-03-14T13:22:23Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/5-6/", "author": "timdream@gmail.com", "id": 13127746, "time": "2018-03-14T13:22:23Z"}, {"text": "Created attachment 8958801\nResized desktop video controls on mobile", "author": "timdream@gmail.com", "id": 13127752, "time": "2018-03-14T13:26:39Z"}, {"text": "Created attachment 8958803\nCurrent video control on Nightly\n\nThe new touch control is simply the desktop control with dimension enlarged by around 1.3 times to match the size of the original touch control.", "author": "timdream@gmail.com", "id": 13127757, "time": "2018-03-14T13:28:38Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/6-7/", "author": "timdream@gmail.com", "id": 13127761, "time": "2018-03-14T13:29:57Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/1-2/", "author": "timdream@gmail.com", "id": 13127762, "time": "2018-03-14T13:29:57Z"}, {"text": "@shorlander and I reviewed your attachments this AM and they look good to us. Thanks!", "author": "tshakespeare@mozilla.com", "id": 13128534, "time": "2018-03-14T18:07:13Z"}, {"text": "*** Bug 1310907 has been marked as a duplicate of this bug. ***", "author": "bgrinstead@mozilla.com", "id": 13128837, "time": "2018-03-14T19:42:37Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nhttps://reviewboard.mozilla.org/r/227054/#review233728\n\nr=me\n\n::: commit-message-d66df:1\n(Diff revision 4)\n> +Bug 1444489 - Part IV, Remove xul videocontrols reflow code\n\nTwo requests for the commit message here (either in first line or in subsequent extra-info lines, up to you):\n\n (1) Please mention \"Android\"  (since this patch is Android-specific -- the deleted code is all #ifdef ANDROID)\n\n (2) Please make it clear why this code is deletable (I'm guessing it's to reflow frames for elements that no longer exist at this point in the patch stack -- is that right?)", "author": "dholbert@mozilla.com", "id": 13129762, "time": "2018-03-15T01:06:59Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/4-5/", "author": "timdream@gmail.com", "id": 13130105, "time": "2018-03-15T08:13:26Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/8-9/", "author": "timdream@gmail.com", "id": 13130106, "time": "2018-03-15T08:13:26Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/8-9/", "author": "timdream@gmail.com", "id": 13130107, "time": "2018-03-15T08:13:26Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/4-5/", "author": "timdream@gmail.com", "id": 13130108, "time": "2018-03-15T08:13:26Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/7-8/", "author": "timdream@gmail.com", "id": 13130109, "time": "2018-03-15T08:13:26Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/2-3/", "author": "timdream@gmail.com", "id": 13130110, "time": "2018-03-15T08:13:26Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nhttps://reviewboard.mozilla.org/r/226696/#review233788\n\n\nCode analysis found 1 defect in this patch:\n - 1 defect found by mozlint\n\nYou can run this analysis locally with:\n - `./mach lint path/to/file` (JS/Python)\n\n\nIf you see a problem in this automated review, please report it here: http://bit.ly/2y9N9Vx\n\n\n::: toolkit/content/widgets/videocontrols.xml:1117\n(Diff revision 9)\n> -        this.updateOrientationState(this.isVideoInFullScreen());\n> +        // XXX This should be the place where we lock/unlock orientation\n> +        // according to the fullscreen state. Sadly because of bug 718107 as\n> +        // soon as this function exits the attached binding gets destructored.\n> +        // we therefore omit the orientation state update here and have the\n> +        // constructor to set the orientation lock instead.\n> +        //this.updateOrientationState(this.isVideoInFullScreen());\n\nError: Expected space or tab after '//' in comment. [eslint: spaced-comment]", "author": "jkeromnes+clangbot@mozilla.com", "id": 13130126, "time": "2018-03-15T08:26:42Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nhttps://reviewboard.mozilla.org/r/226710/#review233792\n\n\nCode analysis found 1 defect in this patch:\n - 1 defect found by mozlint\n\nYou can run this analysis locally with:\n - `./mach lint path/to/file` (JS/Python)\n\n\nIf you see a problem in this automated review, please report it here: http://bit.ly/2y9N9Vx\n\n\n::: toolkit/content/widgets/videocontrols.xml:1118\n(Diff revision 9)\n>          // XXX This should be the place where we lock/unlock orientation\n>          // according to the fullscreen state. Sadly because of bug 718107 as\n>          // soon as this function exits the attached binding gets destructored.\n>          // we therefore omit the orientation state update here and have the\n>          // constructor to set the orientation lock instead.\n>          //this.updateOrientationState(this.isVideoInFullScreen());\n\nError: Expected space or tab after '//' in comment. [eslint: spaced-comment]", "author": "jkeromnes+clangbot@mozilla.com", "id": 13130128, "time": "2018-03-15T08:27:26Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nhttps://reviewboard.mozilla.org/r/227710/#review233794\n\n\nCode analysis found 1 defect in this patch:\n - 1 defect found by mozlint\n\nYou can run this analysis locally with:\n - `./mach lint path/to/file` (JS/Python)\n\n\nIf you see a problem in this automated review, please report it here: http://bit.ly/2y9N9Vx\n\n\n::: toolkit/content/widgets/videocontrols.xml:1118\n(Diff revision 3)\n>          // XXX This should be the place where we lock/unlock orientation\n>          // according to the fullscreen state. Sadly because of bug 718107 as\n>          // soon as this function exits the attached binding gets destructored.\n>          // we therefore omit the orientation state update here and have the\n>          // constructor to set the orientation lock instead.\n> -        //this.updateOrientationState(this.isVideoInFullScreen());\n> +        //this.updateOrientationState(this.isVideoInFullScreen);\n\nError: Expected space or tab after '//' in comment. [eslint: spaced-comment]", "author": "jkeromnes+clangbot@mozilla.com", "id": 13130133, "time": "2018-03-15T08:31:04Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/9-10/", "author": "timdream@gmail.com", "id": 13130209, "time": "2018-03-15T09:34:35Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/9-10/", "author": "timdream@gmail.com", "id": 13130210, "time": "2018-03-15T09:34:35Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/5-6/", "author": "timdream@gmail.com", "id": 13130211, "time": "2018-03-15T09:34:35Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/8-9/", "author": "timdream@gmail.com", "id": 13130212, "time": "2018-03-15T09:34:35Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/3-4/", "author": "timdream@gmail.com", "id": 13130213, "time": "2018-03-15T09:34:35Z"}, {"text": "Created attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nFades out all the UIs by applying CSS transition on opacity and visibility.\nStop relying on transitionend event to set the hidden state.\n\nThis removes a source of intermittent failure and while making sure UIs are\nhidden.\n\nReview commit: https://reviewboard.mozilla.org/r/228212/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/228212/", "author": "timdream@gmail.com", "id": 13132487, "time": "2018-03-16T00:11:58Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nhttps://reviewboard.mozilla.org/r/227052/#review234162\n\n::: browser/base/content/test/static/browser_parsable_css.js:106\n(Diff revision 5)\n> +  {propName: \"--clickToPlay-width\",\n> +   isFromDevTools: false},\n> +  // Bug 1441857\n> +  {propName: \"--clickToPlay-height\",\n> +   isFromDevTools: false},\n\nBut these are actually not referenced?\n\n::: toolkit/content/widgets/videocontrols.xml\n(Diff revision 5)\n>  </binding>\n>  \n>  <binding id=\"noControls\">\n>  \n>    <resources>\n> -    <stylesheet src=\"chrome://global/content/bindings/videocontrols.css\"/>\n\nDo we no longer need https://dxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/videocontrols.css#24-31 ? Why not?\n\n::: toolkit/themes/mobile/jar.mn:46\n(Diff revision 5)\n>     skin/classic/global/media/imagedoc-lightnoise.png       (global/media/imagedoc-lightnoise.png)\n>     skin/classic/global/media/imagedoc-darknoise.png        (global/media/imagedoc-darknoise.png)\n>  \n> +* skin/classic/global/media/videocontrols.css              (../shared/media/videocontrols.css)\n> +  skin/classic/global/media/pauseButton.svg                (../shared/media/pauseButton.svg)\n> +  skin/classic/global/media/playButton.svg                 (../shared/media/playButton.svg)\n\nThese changes seem like they don't belong in this changeset? There are no controls in the binding that this is altering...\n\n::: toolkit/themes/shared/media/videocontrols.css:22\n(Diff revision 5)\n> -  --clickToPlay-width: 48px;\n> -  --clickToPlay-height: var(--clickToPlay-width);\n> +  --clickToPlay-width: var(--clickToPlay-size);\n> +  --clickToPlay-height: var(--clickToPlay-size);\n\nWhy keep the width/height variants? They're unused now, right?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13133518, "time": "2018-03-16T13:54:11Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nhttps://reviewboard.mozilla.org/r/226696/#review234178\n\nI think this is broken, per the below, and I think the geckoview changes need review from a mobile peer in addition to the video controls review. It's not clear to me whether geckoview uses the mobile theming, for instance, and breaking media control for geckoview would be bad.\n\nI haven't reviewed this extensively because the brokenness looks serious enough and I'm really busy, so it doesn't seem useful to dive into this in more depth if we're going to need a change of plan for the binding removal anyway.\n\n::: toolkit/content/widgets/videocontrols.xml\n(Diff revision 10)\n> -<binding id=\"suppressChangeEvent\"\n> -         extends=\"chrome://global/content/bindings/scale.xml#scale\">\n\nYou've not removed the css in the bindings for this, and this is still used by the desktop controls (which are becoming the touch controls here) at https://dxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/videocontrols.xml#163 and https://dxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/videocontrols.xml#177 . So I don't think this is right.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13133537, "time": "2018-03-16T14:00:00Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nhttps://reviewboard.mozilla.org/r/226710/#review234186\n\nCasting support doesn't exist on desktop, so the button should be hidden there, and I don't see any code in this patch that does that (probably based on AppConstants or ifdef'd or whatever).\n\n::: toolkit/themes/shared/media/castingButton-active.svg:1\n(Diff revision 10)\n> +<svg width=\"66\" height=\"54\" xmlns=\"http://www.w3.org/2000/svg\">\n> +  <path d=\"M0 45v9h9c0-4.98-4.02-9-9-9zm0-12v6c8.28 0 15 6.72 15 15h6c0-11.61-9.39-21-21-21zm54-21H12v4.89C23.88 20.73 33.27 30.12 37.11 42H54V12zM0 21v6c14.91 0 27 12.09 27 27h6c0-18.24-14.79-33-33-33zM60 0H6C2.7 0 0 2.7 0 6v9h6V6h54v42H39v6h21c3.3 0 6-2.7 6-6V6c0-3.3-2.7-6-6-6z\" fill=\"context-fill\" fill-rule=\"evenodd\"/>\n\nWhere did these SVG files come from? If they're copied/moved from elsewhere, can you make sure they're annotated as such through hg?\n\nEither way they need a license header, and why does the height/width not match up with the size we used them at?\n\n::: toolkit/themes/shared/media/videocontrols.css:168\n(Diff revision 10)\n>    display: none;\n>  }\n>  \n> +.castingButton {\n> +  background-image: url(chrome://global/skin/media/castingButton-ready.svg);\n> +  background-size: 18px 14.727px;\n\nWhy do we need this?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13133555, "time": "2018-03-16T14:05:34Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nhttps://reviewboard.mozilla.org/r/226750/#review234192\n\n::: toolkit/themes/shared/media/videocontrols.css:29\n(Diff revision 9)\n>    list-style-image: none !important;\n>    font: normal normal normal 100%/normal sans-serif !important;\n>    text-decoration: none !important;\n>  }\n>  \n> -.controlContainer {\n> +.controlsContainer {\n\nThis should be in an earlier cset.\n\n::: toolkit/themes/shared/media/videocontrols.css:31\n(Diff revision 9)\n>    text-decoration: none !important;\n>  }\n>  \n> -.controlContainer {\n> +.controlsContainer {\n> +%ifdef DESKTOP_VIDEOCONTROLS\n>    --clickToPlay-size: 48px;\n\nThe \"whole point\" of variables is that we could just set the variables differently based on a class or attribute that we set on one of the nodes, and change the variables that way, causing all the elements that use them to be restyled.\n\nIn other words, can we implement this change without all the ifdefs? We can add font size variables where sizes aren't yet in variables if that's necessary.\n\n::: toolkit/themes/shared/media/videocontrols.css:127\n(Diff revision 9)\n>    box-sizing: border-box;\n>    justify-content: center;\n>    align-items: center;\n>    overflow: hidden;\n> +%ifdef DESKTOP_VIDEOCONTROLS\n>    height: 40px;\n\nLooks like this should just be an existing variable.\n\n::: toolkit/themes/shared/media/videocontrols.css:154\n(Diff revision 9)\n>    background-origin: content-box;\n>    background-clip: content-box;\n>    -moz-context-properties: fill;\n>    fill: #ffffff;\n> +%ifdef TOUCH_VIDEOCONTROLS\n> +  background-size: 24px 24px;\n\nWhy do we not need a bg size for desktop? Are the SVGs going to look blurry or jagged on hi-res mobile devices?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13133568, "time": "2018-03-16T14:09:53Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nhttps://reviewboard.mozilla.org/r/227710/#review234198", "author": "gijskruitbosch+bugs@gmail.com", "id": 13133576, "time": "2018-03-16T14:11:56Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nhttps://reviewboard.mozilla.org/r/228212/#review234202\n\n::: toolkit/themes/shared/media/videocontrols.css:513\n(Diff revision 1)\n>  }\n>  \n>  .clickToPlay[fadeout] {\n>    transform: scale(3);\n>    opacity: 0;\n> +  visibility: hidden;\n\nVisibility will just change mid-transition now, won't it? Thus changing the visibility halfway through the transition, cutting off the opacity transition. So I don't think this is right...", "author": "gijskruitbosch+bugs@gmail.com", "id": 13133598, "time": "2018-03-16T14:15:19Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nhttps://reviewboard.mozilla.org/r/226696/#review234178\n\n> You've not removed the css in the bindings for this, and this is still used by the desktop controls (which are becoming the touch controls here) at https://dxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/videocontrols.xml#163 and https://dxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/videocontrols.xml#177 . So I don't think this is right.\n\nCSS is removed in toolkit/content/widgets/videocontrols.css from the entire file.\n\nThe binding is not being used on HTML <input type=range> because the selector is in xul namespace.", "author": "timdream@gmail.com", "id": 13133628, "time": "2018-03-16T14:25:39Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nhttps://reviewboard.mozilla.org/r/226710/#review234186\n\nIt will always hidden on runtime because the control will not receive media-videoCasting event. Do you want to it to be hidden on build time? I can do that in jar.mn & videocontrols.css.\n\nNoted that we do not have access to AppConstants in the content process and ESLint doesn't like #ifdef in JavaScript.\n\n> Where did these SVG files come from? If they're copied/moved from elsewhere, can you make sure they're annotated as such through hg?\n> \n> Either way they need a license header, and why does the height/width not match up with the size we used them at?\n\nDid you read the commit message. They are SVGO'd version of the original casting button SVGs from the previous commit. How do you want to annotate in HG for a feature removed from one commit and added back from another? Would you like me to merge the two commits together?\n\nAs of the license header: the original files didn't come with them. Should I just add them and assume they are licensed as such?\n\n> Why do we need this?\n\nBecause SVGO does not scale the image to the size we want and I am too lazy to manually scale it in Inkscape. Should I do that so that we could not use a CSS feature here?", "author": "timdream@gmail.com", "id": 13133665, "time": "2018-03-16T14:37:11Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nhttps://reviewboard.mozilla.org/r/226750/#review234192\n\n> The \"whole point\" of variables is that we could just set the variables differently based on a class or attribute that we set on one of the nodes, and change the variables that way, causing all the elements that use them to be restyled.\n> \n> In other words, can we implement this change without all the ifdefs? We can add font size variables where sizes aren't yet in variables if that's necessary.\n\nI personally think it will be very hard to track the origin of the numbers if we have multiple variables references one and another (and calc(), thank God there is no floor() and ceil() in CSS). That's why I implemented this in #ifdef.\n\nIf you still have problem with it I will do what you said, i.e. have one and only one #ifdef block to set a few variables and calc() our way to produce other values including values in these access-by-JS-only variables.\n\n> Why do we not need a bg size for desktop? Are the SVGs going to look blurry or jagged on hi-res mobile devices?\n\nThe native size of the SVGs are 18x18, so we don't need the bg size there.\n\nI don't see any blurry or jagged on mobile, in fact I will be very suprised if they do. I am told on comment 44 that shorlander has reviewed the size change. What you do suggest I should do more with this?", "author": "timdream@gmail.com", "id": 13133697, "time": "2018-03-16T14:47:35Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nhttps://reviewboard.mozilla.org/r/228212/#review234202\n\n> Visibility will just change mid-transition now, won't it? Thus changing the visibility halfway through the transition, cutting off the opacity transition. So I don't think this is right...\n\nNo. See https://www.w3.org/TR/css-transitions-1/#animtype-visibility . The element is visibile during the entire transition, regardless of transition to hidden or transition to visible.", "author": "timdream@gmail.com", "id": 13133711, "time": "2018-03-16T14:51:51Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/5-6/", "author": "timdream@gmail.com", "id": 13133735, "time": "2018-03-16T14:58:27Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/10-11/", "author": "timdream@gmail.com", "id": 13133736, "time": "2018-03-16T14:58:27Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/10-11/", "author": "timdream@gmail.com", "id": 13133737, "time": "2018-03-16T14:58:27Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/6-7/", "author": "timdream@gmail.com", "id": 13133738, "time": "2018-03-16T14:58:27Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/9-10/", "author": "timdream@gmail.com", "id": 13133739, "time": "2018-03-16T14:58:27Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/4-5/", "author": "timdream@gmail.com", "id": 13133740, "time": "2018-03-16T14:58:27Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/1-2/", "author": "timdream@gmail.com", "id": 13133741, "time": "2018-03-16T14:58:27Z"}, {"text": "(In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment #69)\n> > Where did these SVG files come from? If they're copied/moved from elsewhere, can you make sure they're annotated as such through hg?\n> > \n> > Either way they need a license header, and why does the height/width not match up with the size we used them at?\n> \n> Did you read the commit message. They are SVGO'd version of the original\n> casting button SVGs from the previous commit. How do you want to annotate in\n> HG for a feature removed from one commit and added back from another? Would\n> you like me to merge the two commits together?\n\nIf I understand correctly, it would make sense to update the SVG in place in one commit instead of removing them and re-adding the optimized version in separate commits. This would make the diff easier to follow and also allow us to keep history on the file.", "author": "bgrinstead@mozilla.com", "id": 13134157, "time": "2018-03-16T17:05:46Z"}, {"text": "(In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment #70)\n> Comment on attachment 8957764\n> Bug 1444489 - Part V, Enlarge the size of controls on mobile\n> \n> https://reviewboard.mozilla.org/r/226750/#review234192\n> \n> > The \"whole point\" of variables is that we could just set the variables differently based on a class or attribute that we set on one of the nodes, and change the variables that way, causing all the elements that use them to be restyled.\n> > \n> > In other words, can we implement this change without all the ifdefs? We can add font size variables where sizes aren't yet in variables if that's necessary.\n> \n> I personally think it will be very hard to track the origin of the numbers\n> if we have multiple variables references one and another (and calc(), thank\n> God there is no floor() and ceil() in CSS). That's why I implemented this in\n> #ifdef.\n> \n> If you still have problem with it I will do what you said, i.e. have one and\n> only one #ifdef block to set a few variables and calc() our way to produce\n> other values including values in these access-by-JS-only variables.\n\nI don't think we need any ifdefs, that was sort of my point. The way that I'd think we'd want to do this is to do something like:\n\n.controlsBar {\n --foopy: 15px;\n}\n\n.controlsBar[touch] {\n  --foopy: 20px;\n}\n\nand then set the `touch` attribute in the binding code. Then we can just use `--foopy` everywhere, and it'll do the right thing both in the touch and the non-touch cases.\n\nWould that work?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13134313, "time": "2018-03-16T17:55:07Z"}, {"text": "(In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment #69)\n> Noted that we do not have access to AppConstants in the content process and\n> ESLint doesn't like #ifdef in JavaScript.\n\nWe have access to AppConstants in the content process, but not in unprivileged code.\n\nhttps://dxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/videocontrols.xml#1361\n\nuses navigator.platform to determine whether we're on Mac. I assume we can do the same for Android.\n\n> Did you read the commit message.\n\nI missed it, sorry.\n\n> They are SVGO'd version of the original\n> casting button SVGs from the previous commit. How do you want to annotate in\n> HG for a feature removed from one commit and added back from another? Would\n> you like me to merge the two commits together?\n\nI think they should be moved in one commit, yes.\n\n> As of the license header: the original files didn't come with them. Should I\n> just add them and assume they are licensed as such?\n\nYou can find out where they come from with hg annotate/blame, but unless they came from outside moco/mofo (e.g. from some external icon set?) they should be licensed with the regular MPL, yes.\n\n> > Why do we need this?\n> \n> Because SVGO does not scale the image to the size we want and I am too lazy\n> to manually scale it in Inkscape. Should I do that so that we could not use\n> a CSS feature here?\n\nI think it would be best to ensure that the image size is correct without the additional CSS, yes.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13134332, "time": "2018-03-16T18:02:06Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nhttps://reviewboard.mozilla.org/r/228212/#review234346\n\nOK, so based on the docs you linked to, I guess this works. Note the issue below, though - and I'm assuming this actually fixes the issue on try? (The trypush mozreview is showing me is orange on android mochitest-plain for the modified test, but doesn't seem to include this cset, unless I'm missing something, and I don't see any trypushes linked in the bug.)\n\n::: toolkit/content/tests/widgets/test_videocontrols_error.html:35\n(Diff revision 2)\n>      await new Promise(resolve => {\n>        video.src = \"seek_with_sound.ogg\";\n>        video.addEventListener(\"loadedmetadata\", () => SimpleTest.executeSoon(resolve));\n>      });\n>  \n> -    // Wait for the fade out transition to complete in case the throbber\n> +    await SimpleTest.promiseWaitForCondition(() => statusOverlay.hasAttribute(\"fadeout\") || statusOverlay.hidden,\n\nIs something else still setting .hidden or should we just remove the checks for `.hidden` entirely (here and below) ?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13134774, "time": "2018-03-16T20:31:02Z"}, {"text": "FWIW, what with the swapping bits between csets, I expect I will come back to these requests after the next set up of updates to the patches, if that's OK.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13134778, "time": "2018-03-16T20:31:43Z"}, {"text": "(In reply to :Gijs from comment #80)\n> .controlsBar {\n>  --foopy: 15px;\n> }\n> \n> .controlsBar[touch] {\n>   --foopy: 20px;\n> }\n> \n> and then set the `touch` attribute in the binding code. Then we can just use\n> `--foopy` everywhere, and it'll do the right thing both in the touch and the\n> non-touch cases.\n\nA better option would probably be:\n\n```\n.controls-bar {\n  --foopy: 15px;\n}\n\n/* Q: Does the :root in XBL <content> point to the root of the shadow XBL content or the root of the light DOM? */\n/* If the latter, then this would need to be replaced with `:host[touch]` or something */\n:root[touch] .controls-bar {\n  --foopy: 15px;\n}\n```", "author": "e7358d9c@opayq.com", "id": 13135207, "time": "2018-03-17T00:24:44Z"}, {"text": "(In reply to ExE Boss from comment #84)\n> A better option would probably be:\n> \n> ```\n> .controls-bar {\n>   --foopy: 15px;\n> }\n> \n> /* Q: Does the :root in XBL <content> point to the root of the shadow XBL\n> content or the root of the light DOM? */\n> /* If the latter, then this would need to be replaced with `:host[touch]` or\n> something */\n> :root[touch] .controls-bar {\n>   --foopy: 15px;\n> }\n> ```\n\nWhy do you think this is better, given it adds a descendant selector?\n\n(FWIW, I'm not aware of there being a good way to select for the root of the XBL content anyway. :root almost certainly points to the document root rather than the XBL root.)", "author": "gijskruitbosch+bugs@gmail.com", "id": 13135447, "time": "2018-03-17T08:38:28Z"}, {"text": "(In reply to :Gijs from comment #85)\n> (In reply to ExE Boss from comment #84)\n> > A better option would probably be:\n> > \n> > ```\n> > .controls-bar {\n> >   --foopy: 15px;\n> > }\n> > \n> > /* Q: Does the :root in XBL <content> point to the root of the shadow XBL\n> > content or the root of the light DOM? */\n> > /* If the latter, then this would need to be replaced with `:host[touch]` or\n> > something */\n> > :root[touch] .controls-bar {\n> >   --foopy: 15px;\n> > }\n> > ```\n> \n> Why do you think this is better, given it adds a descendant selector?\n> \n> (FWIW, I'm not aware of there being a good way to select for the root of the\n> XBL content anyway. :root almost certainly points to the document root\n> rather than the XBL root.)\n\nBeause the `touch` attribute (or whatever we will decide to call it) only needs to be set at the root instead of being set for every element in the tree.", "author": "e7358d9c@opayq.com", "id": 13135449, "time": "2018-03-17T08:42:34Z"}, {"text": "(In reply to :Gijs from comment #81)\n> (In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment\n> #69)\n> > Noted that we do not have access to AppConstants in the content process and\n> > ESLint doesn't like #ifdef in JavaScript.\n> \n> We have access to AppConstants in the content process, but not in\n> unprivileged code.\n> \n> https://dxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/\n> videocontrols.xml#1361\n> \n> uses navigator.platform to determine whether we're on Mac. I assume we can\n> do the same for Android.\n\nWe can't, sorry. navigator.platform is Linux on Fennec.\n\nI do see |navigator.userAgent.includes(\"Android\")| being used in test scripts. Do you see that as a lesser evil to #ifdef :-P ?", "author": "timdream@gmail.com", "id": 13135800, "time": "2018-03-17T16:58:09Z"}, {"text": "(In reply to Tim Guan-tin Chien [:timdream] (please needinfo) from comment #87)\n> We can't, sorry. navigator.platform is Linux on Fennec.\n> \n> I do see |navigator.userAgent.includes(\"Android\")| being used in test\n> scripts. Do you see that as a lesser evil to #ifdef :-P ?\n\nYou could use navigator.appVersion, I think, but yeah, I think that'd be preferred over ifdef. Eventually we'll get rid of preprocessing. Alternatively, you could set the attribute from C++ when creating the <videocontrols> element in layout land.\n\n(In reply to ExE Boss from comment #86)\n> Beause the `touch` attribute (or whatever we will decide to call it) only\n> needs to be set at the root instead of being set for every element in the\n> tree.\n\nBut we wouldn't need to do that - the variables get defined on the topmost element where they're needed (probably the controlsContainer or whatever it's called) only, and because of how CSS works you can then use those properties in the subtree without any further work. We should only need to define variables on 1 element, so only that element will need an attribute. Worst case, that element can be the <videocontrols> element itself.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13135938, "time": "2018-03-17T19:58:30Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nhttps://reviewboard.mozilla.org/r/228212/#review234346\n\nI did try pushes from the command line. This is the push of the latest commits: \n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=17fdd84f25840790769e2c1a924357debb5b89a2\n\nYes this commit fixes the test on Android; for some reason transitionend is not reliable timing-wise for the new combinations.\n\n> Is something else still setting .hidden or should we just remove the checks for `.hidden` entirely (here and below) ?\n\nThe element starts with hidden=true, and it will never get unset if the platform loads the video fast enough which prevents the initial throbber to show.", "author": "timdream@gmail.com", "id": 13136118, "time": "2018-03-18T02:41:52Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/6-7/", "author": "timdream@gmail.com", "id": 13136119, "time": "2018-03-18T02:43:13Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/11-12/", "author": "timdream@gmail.com", "id": 13136120, "time": "2018-03-18T02:43:13Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/11-12/", "author": "timdream@gmail.com", "id": 13136121, "time": "2018-03-18T02:43:13Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/7-8/", "author": "timdream@gmail.com", "id": 13136122, "time": "2018-03-18T02:43:13Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/10-11/", "author": "timdream@gmail.com", "id": 13136123, "time": "2018-03-18T02:43:13Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/5-6/", "author": "timdream@gmail.com", "id": 13136124, "time": "2018-03-18T02:43:13Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/2-3/", "author": "timdream@gmail.com", "id": 13136125, "time": "2018-03-18T02:43:13Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nhttps://reviewboard.mozilla.org/r/226750/#review234454\n\n\nCode analysis found 1 defect in this patch:\n - 1 defect found by mozlint\n\nYou can run this analysis locally with:\n - `./mach lint path/to/file` (JS/Python)\n\n\nIf you see a problem in this automated review, please report it here: http://bit.ly/2y9N9Vx\n\n\n::: toolkit/content/widgets/videocontrols.xml:1693\n(Diff revision 11)\n>          if (this.positionDurationBox) {\n>            this.durationSpan = this.positionDurationBox.getElementsByTagName(\"span\")[0];\n>          }\n>  \n> +        this.videocontrols.isTouchControls = true;\n> +          //navigator.appVersion.includes(\"Android\");\n\nError: Expected space or tab after '//' in comment. [eslint: spaced-comment]", "author": "jkeromnes+clangbot@mozilla.com", "id": 13136126, "time": "2018-03-18T02:49:11Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nhttps://reviewboard.mozilla.org/r/227710/#review234456\n\n\nCode analysis found 1 defect in this patch:\n - 1 defect found by mozlint\n\nYou can run this analysis locally with:\n - `./mach lint path/to/file` (JS/Python)\n\n\nIf you see a problem in this automated review, please report it here: http://bit.ly/2y9N9Vx\n\n\n::: toolkit/content/widgets/videocontrols.xml:1693\n(Diff revision 6)\n>          if (this.positionDurationBox) {\n>            this.durationSpan = this.positionDurationBox.getElementsByTagName(\"span\")[0];\n>          }\n>  \n>          this.videocontrols.isTouchControls = true;\n>            //navigator.appVersion.includes(\"Android\");\n\nError: Expected space or tab after '//' in comment. [eslint: spaced-comment]", "author": "jkeromnes+clangbot@mozilla.com", "id": 13136127, "time": "2018-03-18T02:49:45Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nhttps://reviewboard.mozilla.org/r/228212/#review234458\n\n\nCode analysis found 1 defect in this patch:\n - 1 defect found by mozlint\n\nYou can run this analysis locally with:\n - `./mach lint path/to/file` (JS/Python)\n\n\nIf you see a problem in this automated review, please report it here: http://bit.ly/2y9N9Vx\n\n\n::: toolkit/content/widgets/videocontrols.xml:1677\n(Diff revision 3)\n>          if (this.positionDurationBox) {\n>            this.durationSpan = this.positionDurationBox.getElementsByTagName(\"span\")[0];\n>          }\n>  \n>          this.videocontrols.isTouchControls = true;\n>            //navigator.appVersion.includes(\"Android\");\n\nError: Expected space or tab after '//' in comment. [eslint: spaced-comment]", "author": "jkeromnes+clangbot@mozilla.com", "id": 13136128, "time": "2018-03-18T02:50:17Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/11-12/", "author": "timdream@gmail.com", "id": 13136132, "time": "2018-03-18T03:12:28Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/6-7/", "author": "timdream@gmail.com", "id": 13136133, "time": "2018-03-18T03:12:28Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/3-4/", "author": "timdream@gmail.com", "id": 13136134, "time": "2018-03-18T03:12:28Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nhttps://reviewboard.mozilla.org/r/228212/#review234346\n\nSorry, I've made a mistake. The correct try push should be\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=19712ce334419345dbd2a1f550dd9256302f128d", "author": "timdream@gmail.com", "id": 13136136, "time": "2018-03-18T03:14:16Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/12-13/", "author": "timdream@gmail.com", "id": 13136276, "time": "2018-03-18T09:40:11Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/12-13/", "author": "timdream@gmail.com", "id": 13136277, "time": "2018-03-18T09:40:11Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/8-9/", "author": "timdream@gmail.com", "id": 13136278, "time": "2018-03-18T09:40:11Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/12-13/", "author": "timdream@gmail.com", "id": 13136279, "time": "2018-03-18T09:40:11Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/7-8/", "author": "timdream@gmail.com", "id": 13136280, "time": "2018-03-18T09:40:11Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/4-5/", "author": "timdream@gmail.com", "id": 13136281, "time": "2018-03-18T09:40:11Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nhttps://reviewboard.mozilla.org/r/228212/#review234346\n\nand with a test fixed: https://treeherder.mozilla.org/#/jobs?repo=try&revision=42e444d27888b33a020c4d9e76de22f006731319", "author": "timdream@gmail.com", "id": 13136403, "time": "2018-03-18T13:31:04Z"}, {"text": "Patch updated -- I forget to remove the needinfo!", "author": "timdream@gmail.com", "id": 13141718, "time": "2018-03-20T05:55:28Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nhttps://reviewboard.mozilla.org/r/227052/#review235054\n\n::: toolkit/themes/mobile/jar.mn:44\n(Diff revision 7)\n>     skin/classic/global/media/TopLevelImageDocument.css     (global/media/TopLevelImageDocument.css)\n>     skin/classic/global/media/TopLevelVideoDocument.css     (global/media/TopLevelVideoDocument.css)\n>     skin/classic/global/media/imagedoc-lightnoise.png       (global/media/imagedoc-lightnoise.png)\n>     skin/classic/global/media/imagedoc-darknoise.png        (global/media/imagedoc-darknoise.png)\n>  \n> +* skin/classic/global/media/videocontrols-html.css         (../shared/media/videocontrols.css)\n\nYou rename this to just plain `videocontrols.css` in the next cset. Seems to me we should just add it without the `-html` suffix in the first place in this commit.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13142201, "time": "2018-03-20T11:34:48Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nhttps://reviewboard.mozilla.org/r/226710/#review235060\n\nr=me with the label put back (might need to remove deletion from the previous cset if that's where it happened?) and the `isTrusted` check restored.\n\n::: toolkit/content/widgets/videocontrols.xml:69\n(Diff revision 13)\n>                    unmutelabel=\"&muteButton.unmuteLabel;\"\n>                    tabindex=\"-1\"/>\n>            <div anonid=\"volumeStack\" class=\"volumeStack progressContainer\" role=\"none\">\n>              <input type=\"range\" anonid=\"volumeControl\" class=\"volumeControl\" min=\"0\" max=\"100\" step=\"1\" tabindex=\"-1\"/>\n>            </div>\n> +          <button anonid=\"castingButton\" class=\"castingButton\"/>\n\nThis used to have a text label (I expect for a11y) - it probably should still have one? I'm guessing we'll want to add it as an `aria-label` attribute, judging by what we do for the other buttons.\n\n::: toolkit/content/widgets/videocontrols.xml:1783\n(Diff revision 13)\n> +          addListener(this.video, \"media-videoCasting\",\n> +            (evt) => this.updateCasting(evt.detail));\n> +        }\n\nIt seems you removed the `evt.isTrusted` check compared to the previous implementation (cf. https://dxr.mozilla.org/mozilla-central/rev/6ff60a083701d08c52702daf50f28e8f46ae3a1c/toolkit/content/widgets/videocontrols.xml#2116-2121 ). Please add it back.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13142220, "time": "2018-03-20T11:48:27Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nhttps://reviewboard.mozilla.org/r/226696/#review235062\n\nThis is basically ready except that I don't understand the fullscreen-related changes. Can you explain why they're part of this cset? From bug 718107 it seems the issue applies equally to mobile and desktop, so apart from moving things around (which isn't what's happening here, as far as I can tell - I can't find equivalent code in the pre-existing binding) I don't really understand why those changes are here.\n\n::: toolkit/content/tests/widgets/test_videocontrols_error.html:38\n(Diff revision 13)\n>      });\n>  \n> -    ok(statusOverlay.hidden, \"statusOverlay shoud not present without error\");\n> +    // Wait for the fade out transition to complete in case the throbber\n> +    // shows up on slower platforms.\n> +    await SimpleTest.promiseWaitForCondition(() => statusOverlay.hidden,\n> +      \"statusOverlay shoud not present without error\");\n\nNit: Can we fix the spelling while we're here? :-) (s/shoud/should/)\n\n::: toolkit/content/widgets/videocontrols.xml:1108\n(Diff revision 13)\n> -        this.updateOrientationState(this.isVideoInFullScreen());\n> +        // XXX This should be the place where we lock/unlock orientation\n> +        // according to the fullscreen state. Sadly because of bug 718107 as\n> +        // soon as this function exits the attached binding gets destructored.\n> +        // we therefore omit the orientation state update here and have the\n> +        // constructor to set the orientation lock instead.\n> +        //\n> +        // this.updateOrientationState(this.isVideoInFullScreen());\n\nI'm a little bit confused by the changes related to fullscreen. Does this deterministically happen now? Are we actually fixing an orthogonal bug (and in that case, can we do that in a separate cset, please)? Why can we omit the `updateOrientationState` call but need to keep the timeout and button state update?\n\n::: toolkit/content/widgets/videocontrols.xml:1823\n(Diff revision 13)\n>        terminateEventListeners() {\n>          for (var event of this.videoEvents) {\n>            try {\n>              this.Utils.video.removeEventListener(event, this);\n>            } catch (ex) {}\n>          }\n>        },\n\nAs far as I can tell the TouchUtils never have a defined `videoEvents` property. By contrast, some of the event listeners look like they wouldn't be removed (the casting one and the moved `mouseup` handler, for example).\n\nIf I'm not missing something, can you file a follow-up for this issue please? (It predates your changes.)", "author": "gijskruitbosch+bugs@gmail.com", "id": 13142241, "time": "2018-03-20T12:07:39Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nhttps://reviewboard.mozilla.org/r/226750/#review235068\n\nr=me with some minor comments below.\n\n::: toolkit/content/widgets/videocontrols.xml:1692\n(Diff revision 13)\n> +        this.videocontrols.isTouchControls =\n> +          navigator.appVersion.includes(\"Android\");\n\nCan you file a follow-up to also use the 'touch control' mode on Windows 8+ if we detect there's no mouse (ie tablets etc.) ?\n\n::: toolkit/content/widgets/videocontrols.xml:1695\n(Diff revision 13)\n>          }\n>  \n> +        this.videocontrols.isTouchControls =\n> +          navigator.appVersion.includes(\"Android\");\n> +        if (this.videocontrols.isTouchControls) {\n> +          this.controlsContainer.classList.add(\"touch\");\n\nI'm tempted to just add the class to the control bar as well to simplify some of the selectors, but I'm not super convinced either way. Up to you.\n\n::: toolkit/themes/shared/media/videocontrols.css:153\n(Diff revision 13)\n> +.touch .playButton,\n> +.touch .muteButton,\n> +.touch .castingButton,\n> +.touch .closedCaptionButton,\n> +.touch .fullscreenButton {\n\nNit: `.touch .controlBar > button`\n\nwould cover all of these, right?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13142256, "time": "2018-03-20T12:16:27Z"}, {"text": "(In reply to :Gijs from comment #114)\n> ::: toolkit/content/widgets/videocontrols.xml:1823\n> (Diff revision 13)\n> >        terminateEventListeners() {\n> >          for (var event of this.videoEvents) {\n> >            try {\n> >              this.Utils.video.removeEventListener(event, this);\n> >            } catch (ex) {}\n> >          }\n> >        },\n> \n> As far as I can tell the TouchUtils never have a defined `videoEvents`\n> property. By contrast, some of the event listeners look like they wouldn't\n> be removed (the casting one and the moved `mouseup` handler, for example).\n> \n> If I'm not missing something, can you file a follow-up for this issue\n> please? (It predates your changes.)\n\nErr, the mouseup is obviously not a video event - but the casting event looks like it is (at least the listener is added to the 'video' element).", "author": "gijskruitbosch+bugs@gmail.com", "id": 13142262, "time": "2018-03-20T12:17:57Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nhttps://reviewboard.mozilla.org/r/227052/#review235054\n\n> You rename this to just plain `videocontrols.css` in the next cset. Seems to me we should just add it without the `-html` suffix in the first place in this commit.\n\nActually, no. Because on this cset I have not remove this line:\n\nhttps://dxr.mozilla.org/mozilla-central/rev/6ff60a083701d08c52702daf50f28e8f46ae3a1c/mobile/android/themes/geckoview/jar.mn#35\n\nSo the style sheet here must not occupy the same URL.", "author": "timdream@gmail.com", "id": 13142623, "time": "2018-03-20T14:45:23Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nhttps://reviewboard.mozilla.org/r/226696/#review235062\n\n> I'm a little bit confused by the changes related to fullscreen. Does this deterministically happen now? Are we actually fixing an orthogonal bug (and in that case, can we do that in a separate cset, please)? Why can we omit the `updateOrientationState` call but need to keep the timeout and button state update?\n\nIt deterministically happens on my phone and on Try. No, bug 718107 does not happen on touchControls.\n\nWithout this workaround, videoControls along cannot set the orientation correctly (only once) and test_videocontrols_orientation.html will deterministically fail.\n\nYour question on the timeout and the button state does make a point. I assume the button state update is moot \u2014\u2014 the constructor will update it too \u2014\u2014 Given that we don't cancel the timeout on the destructor, I assume `_hideControlsFn` will still run (and can't be cancelled?)", "author": "timdream@gmail.com", "id": 13142666, "time": "2018-03-20T15:00:07Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nhttps://reviewboard.mozilla.org/r/226750/#review235068\n\n> Nit: `.touch .controlBar > button`\n> \n> would cover all of these, right?\n\nI ended up adding a class named `button` on all the <button>s so the specificity won't change.", "author": "timdream@gmail.com", "id": 13144450, "time": "2018-03-21T02:27:19Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/7-8/", "author": "timdream@gmail.com", "id": 13144560, "time": "2018-03-21T04:30:32Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/13-14/", "author": "timdream@gmail.com", "id": 13144561, "time": "2018-03-21T04:30:32Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/13-14/", "author": "timdream@gmail.com", "id": 13144562, "time": "2018-03-21T04:30:32Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/9-10/", "author": "timdream@gmail.com", "id": 13144563, "time": "2018-03-21T04:30:32Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/13-14/", "author": "timdream@gmail.com", "id": 13144564, "time": "2018-03-21T04:30:32Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/8-9/", "author": "timdream@gmail.com", "id": 13144565, "time": "2018-03-21T04:30:32Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/5-6/", "author": "timdream@gmail.com", "id": 13144566, "time": "2018-03-21T04:30:32Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nhttps://reviewboard.mozilla.org/r/226696/#review235062\n\n> It deterministically happens on my phone and on Try. No, bug 718107 does not happen on touchControls.\n> \n> Without this workaround, videoControls along cannot set the orientation correctly (only once) and test_videocontrols_orientation.html will deterministically fail.\n> \n> Your question on the timeout and the button state does make a point. I assume the button state update is moot \u2014\u2014 the constructor will update it too \u2014\u2014 Given that we don't cancel the timeout on the destructor, I assume `_hideControlsFn` will still run (and can't be cancelled?)\n\nI ended up decided to comment out the entire onFullscreenChange function. See comment in the cset for reasons.\n\nThe \"mozfullscreenchange\" was a result of incorrectly rebase here, I think.\n\nhttps://searchfox.org/mozilla-central/diff/5a89cbb1ca73446d680b7ee7f4dc7f9aafd4d55d/toolkit/content/widgets/videocontrols.xml#1562\n\nSo I remove it.", "author": "timdream@gmail.com", "id": 13144572, "time": "2018-03-21T04:34:03Z"}, {"text": "Created attachment 8960883\nBug 1444489 - Part II, Replace touchControls with videoControls and remove touchControls\n\nAlso migrates TouchUtils to videoControls in order to keep some interactions.\n\nRemoved the casting button from TouchUtils (to be add back to Utils in the next\ncommit; not removing the SVG images for hg annotation)\n\nReview commit: https://reviewboard.mozilla.org/r/229640/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/229640/", "author": "timdream@gmail.com", "id": 13144695, "time": "2018-03-21T07:23:30Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/14-15/", "author": "timdream@gmail.com", "id": 13144696, "time": "2018-03-21T07:23:30Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/14-15/", "author": "timdream@gmail.com", "id": 13144697, "time": "2018-03-21T07:23:30Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/10-11/", "author": "timdream@gmail.com", "id": 13144698, "time": "2018-03-21T07:23:30Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/14-15/", "author": "timdream@gmail.com", "id": 13144699, "time": "2018-03-21T07:23:30Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/9-10/", "author": "timdream@gmail.com", "id": 13144700, "time": "2018-03-21T07:23:30Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/6-7/", "author": "timdream@gmail.com", "id": 13144701, "time": "2018-03-21T07:23:30Z"}, {"text": "Comment on attachment 8960883\nBug 1444489 - Part II, Replace touchControls with videoControls and remove touchControls\n\nhttps://reviewboard.mozilla.org/r/229640/#review235408\n\n::: toolkit/content/widgets/videocontrols.xml:1339\n(Diff revision 1)\n>          return textTrack.kind == \"subtitles\" ||\n>                 textTrack.kind == \"captions\";\n>        },\n>  \n>        get isClosedCaptionAvailable() {\n> -        return this.overlayableTextTracks.length && !this.videocontrols.isTouchControls;\n> +        return this.overlayableTextTracks.length;\n\nI'm assuming this was just because some of the necessary work here hadn't been implemented in the touch control binding, not because of limitations in where we ship VTT support? That is, have you tested text track support on Android? Do we have any tests that we could now enable on android, maybe, to ensure that things continue working?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13145132, "time": "2018-03-21T11:47:26Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nhttps://reviewboard.mozilla.org/r/226696/#review235410\n\n::: commit-message-b72ac:3\n(Diff revision 15)\n> +Bug 1444489 - Part III, Workaround bug 718107\n> +\n> +The videocontrols binding will be destoryed and reattached when the video\n\nNit: destroyed\n\n::: toolkit/content/widgets/videocontrols.xml:232\n(Diff revision 15)\n>              this.muteButton.setAttribute(\"disabled\", \"true\");\n>            }\n>          }\n>  \n> +        // We should lock the orientation if we are already in\n> +        // fullscreen and was reattached because of bug 718107.\n\nNit: 'and were reattached'\n\n::: toolkit/content/widgets/videocontrols.xml:1108\n(Diff revision 15)\n>            this.fullscreenButton.removeAttribute(\"fullscreened\");\n>          }\n>        },\n>  \n> -      onFullscreenChange() {\n> -        this.updateOrientationState(this.isVideoInFullScreen());\n> +      // XXX This should be the place where we update the control states and\n> +      // screen orientation upon enter/leave fullscreen.\n\nNit: upon entering/leaving\n\n::: toolkit/content/widgets/videocontrols.xml:1111\n(Diff revision 15)\n> -        }\n> -        this.setFullscreenButtonState();\n> -      },\n> +      // We therefore omit anything here and let the new binding to settle\n> +      // in the corrected state from the constructor.\n> +      //\n\nNit: We therefore don't do anything here and leave it to the new binding to set state correctly from its constructor.\n\n::: toolkit/content/widgets/videocontrols.xml:1114\n(Diff revision 15)\n> +      // onFullscreenChange() {\n> +      //   // Constructor and destructor will lock/unlock the orientation exactly\n> +      //   // once. Doing so here again will cause the videocontrols to\n> +      //   // lock-unlock-lock the orientation when entering the fullscreen.\n> +      //   this.updateOrientationState(this.isVideoInFullScreen());\n> +      //\n> +      //   // This is already broken by bug 718107 (controls will be hidden\n> +      //   // as soon as the video enters fullscreen).\n> +      //   // We can think about restoring the behavior here once the bug is\n> +      //   // fixed, or we could simply acknowledge the current behavior\n> +      //   // after-the-fact and try not to fix this.\n> +      //   if (this.isVideoInFullScreen()) {\n> +      //     Utils._hideControlsTimeout = setTimeout(this._hideControlsFn, this.HIDE_CONTROLS_TIMEOUT_MS);\n> +      //   }\n> +      //\n> +      //   // Constructor will handle this correctly on the new DOM content in\n> +      //   // the new binding.\n> +      //   this.setFullscreenButtonState();\n> +      // },\n\nThanks for the extensive comments, this is helpful. Personally, I'd use a `/**/` style comment to comment out the function, to avoid the double `// //` but it's up to you...", "author": "gijskruitbosch+bugs@gmail.com", "id": 13145138, "time": "2018-03-21T11:51:53Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/15-16/", "author": "timdream@gmail.com", "id": 13145241, "time": "2018-03-21T12:44:21Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/15-16/", "author": "timdream@gmail.com", "id": 13145242, "time": "2018-03-21T12:44:21Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/11-12/", "author": "timdream@gmail.com", "id": 13145243, "time": "2018-03-21T12:44:21Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/15-16/", "author": "timdream@gmail.com", "id": 13145244, "time": "2018-03-21T12:44:21Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/10-11/", "author": "timdream@gmail.com", "id": 13145245, "time": "2018-03-21T12:44:21Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/7-8/", "author": "timdream@gmail.com", "id": 13145246, "time": "2018-03-21T12:44:21Z"}, {"text": "Comment on attachment 8960883\nBug 1444489 - Part II, Replace touchControls with videoControls and remove touchControls\n\nhttps://reviewboard.mozilla.org/r/229640/#review235408\n\n> I'm assuming this was just because some of the necessary work here hadn't been implemented in the touch control binding, not because of limitations in where we ship VTT support? That is, have you tested text track support on Android? Do we have any tests that we could now enable on android, maybe, to ensure that things continue working?\n\nThat's my assumption too, although I couldn't find anything documented in bug 887934 when it was implemented.\n\nThe text tracks works manually and I have enabled applicable tests on this cset.", "author": "timdream@gmail.com", "id": 13145327, "time": "2018-03-21T13:23:37Z"}, {"text": "Comment on attachment 8960883\nBug 1444489 - Part II, Replace touchControls with videoControls and remove touchControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/229640/diff/1-2/", "author": "timdream@gmail.com", "id": 13145329, "time": "2018-03-21T13:23:49Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/16-17/", "author": "timdream@gmail.com", "id": 13145330, "time": "2018-03-21T13:23:49Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/16-17/", "author": "timdream@gmail.com", "id": 13145331, "time": "2018-03-21T13:23:49Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/12-13/", "author": "timdream@gmail.com", "id": 13145332, "time": "2018-03-21T13:23:49Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/16-17/", "author": "timdream@gmail.com", "id": 13145333, "time": "2018-03-21T13:23:49Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/11-12/", "author": "timdream@gmail.com", "id": 13145334, "time": "2018-03-21T13:23:49Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/8-9/", "author": "timdream@gmail.com", "id": 13145335, "time": "2018-03-21T13:23:49Z"}, {"text": "Thanks for the review. This is now ready to land, pending one final try result:\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=d2ac2f1ab651423b1816dc16fb70e6a5c4dedb1a", "author": "timdream@gmail.com", "id": 13145346, "time": "2018-03-21T13:28:36Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nhttps://reviewboard.mozilla.org/r/226750/#review235446", "author": "e7358d9c@opayq.com", "id": 13145450, "time": "2018-03-21T14:05:43Z"}, {"text": "Comment on attachment 8958099\nBug 1444489 - Part I, Convert noControls binding to HTML content\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227052/diff/8-9/", "author": "timdream@gmail.com", "id": 13145813, "time": "2018-03-21T15:57:46Z"}, {"text": "Comment on attachment 8960883\nBug 1444489 - Part II, Replace touchControls with videoControls and remove touchControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/229640/diff/2-3/", "author": "timdream@gmail.com", "id": 13145814, "time": "2018-03-21T15:57:46Z"}, {"text": "Comment on attachment 8957737\nBug 1444489 - Part III, Workaround bug 718107\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226696/diff/17-18/", "author": "timdream@gmail.com", "id": 13145815, "time": "2018-03-21T15:57:46Z"}, {"text": "Comment on attachment 8957749\nBug 1444489 - Part IV, Implement Casting UI on videoControls\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226710/diff/17-18/", "author": "timdream@gmail.com", "id": 13145816, "time": "2018-03-21T15:57:46Z"}, {"text": "Comment on attachment 8958100\nBug 1444489 - Part V, Remove XUL videocontrols reflow code on Android\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227054/diff/13-14/", "author": "timdream@gmail.com", "id": 13145817, "time": "2018-03-21T15:57:46Z"}, {"text": "Comment on attachment 8957764\nBug 1444489 - Part VI, Enlarge the size of controls on mobile\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/226750/diff/17-18/", "author": "timdream@gmail.com", "id": 13145818, "time": "2018-03-21T15:57:46Z"}, {"text": "Comment on attachment 8958800\nBug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/227710/diff/12-13/", "author": "timdream@gmail.com", "id": 13145819, "time": "2018-03-21T15:57:46Z"}, {"text": "Comment on attachment 8959394\nBug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/228212/diff/9-10/", "author": "timdream@gmail.com", "id": 13145820, "time": "2018-03-21T15:57:46Z"}, {"text": "Pushed by timdream@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/264b7bdb6c6d\nPart I, Convert noControls binding to HTML content r=Gijs\nhttps://hg.mozilla.org/integration/autoland/rev/e0c831e58530\nPart II, Replace touchControls with videoControls and remove touchControls r=Gijs\nhttps://hg.mozilla.org/integration/autoland/rev/05d8a651e3d4\nPart III, Workaround bug 718107 r=Gijs\nhttps://hg.mozilla.org/integration/autoland/rev/2d3ee6cd29b1\nPart IV, Implement Casting UI on videoControls r=Gijs\nhttps://hg.mozilla.org/integration/autoland/rev/6bb4c1e01a69\nPart V, Remove XUL videocontrols reflow code on Android r=dholbert\nhttps://hg.mozilla.org/integration/autoland/rev/f13695146a00\nPart VI, Enlarge the size of controls on mobile r=e7358d9c+590837,Gijs\nhttps://hg.mozilla.org/integration/autoland/rev/0f95b59a3e75\nPart VII, nit: Improve naming consistency in videocontrols.xml r=Gijs\nhttps://hg.mozilla.org/integration/autoland/rev/99fc41ec7ce9\nPart VIII, Transition the visibility property instead of using transitionend event r=Gijs", "author": "pulsebot@bots.tld", "id": 13147429, "time": "2018-03-22T01:56:27Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/264b7bdb6c6d\nhttps://hg.mozilla.org/mozilla-central/rev/e0c831e58530\nhttps://hg.mozilla.org/mozilla-central/rev/05d8a651e3d4\nhttps://hg.mozilla.org/mozilla-central/rev/2d3ee6cd29b1\nhttps://hg.mozilla.org/mozilla-central/rev/6bb4c1e01a69\nhttps://hg.mozilla.org/mozilla-central/rev/f13695146a00\nhttps://hg.mozilla.org/mozilla-central/rev/0f95b59a3e75\nhttps://hg.mozilla.org/mozilla-central/rev/99fc41ec7ce9", "author": "apavel@mozilla.com", "id": 13147832, "time": "2018-03-22T09:37:59Z"}, {"text": "*** Bug 1448556 has been marked as a duplicate of this bug. ***", "author": "timdream@gmail.com", "id": 13153781, "time": "2018-03-25T03:02:30Z"}], "id": 1444489, "priority": "--", "cc": ["bgrinstead@mozilla.com", "dholbert@mozilla.com", "e7358d9c@opayq.com", "gijskruitbosch+bugs@gmail.com", "jh+bugzilla@buttercookie.de", "ralin@mozilla.com", "tshakespeare@mozilla.com"], "cf_crash_signature": "", "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "status": "RESOLVED", "product": "Toolkit", "cf_fx_iteration": "---", "blocks": [1397874, 1431255, 1443836, 1446829, 1446831, 1447547, 1448126, 726240, 1444193, 1447544], "qa_contact": "", "creation_time": "2018-03-09T19:17:16Z", "cf_status_firefox_esr52": "---", "component": "XUL Widgets", "assigned_to_detail": {"email": "timdream@gmail.com", "id": 185001, "name": "timdream@gmail.com", "real_name": "Tim Guan-tin Chien [:timdream] (please needinfo)"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "fixed", "cf_status_firefox60": "---", "target_milestone": "mozilla61", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "timdream@gmail.com", "id": 185001, "name": "timdream@gmail.com", "real_name": "Tim Guan-tin Chien [:timdream] (please needinfo)"}, "whiteboard": "", "mentors": [], "summary": "Remove the touchControls binding and instead use the videocontrols binding on mobile", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-03-29T17:24:07Z", "assigned_to": "timdream@gmail.com", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "blocks", "added": "1397874"}], "who": "bgrinstead@mozilla.com", "when": "2018-03-09T19:18:59Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1310907"}], "who": "timdream@gmail.com", "when": "2018-03-09T22:57:16Z"}, {"changes": [{"field_name": "attachments.description", "removed": "WIP bug 1444489 - Replace touchControls with videoControls", "attachment_id": 8957737, "added": "Bug 1444489 - Replace touchControls with videoControls and remove touchControls"}], "who": "timdream@gmail.com", "when": "2018-03-10T00:43:12Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "726240"}], "who": "e7358d9c@opayq.com", "when": "2018-03-10T02:22:40Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "e7358d9c@opayq.com"}], "who": "e7358d9c@opayq.com", "when": "2018-03-10T02:24:54Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1444489 - WIP Part III, Adjust the size of controls", "attachment_id": 8957764, "added": "Bug 1444489 - Part III, Enlarge the size of controls on mobile"}], "who": "timdream@gmail.com", "when": "2018-03-12T03:12:47Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1444489 - Replace touchControls with videoControls and remove touchControls", "attachment_id": 8957737, "added": "Bug 1444489 - Part II, Replace touchControls with videoControls and remove touchControls"}, {"field_name": "attachments.description", "removed": "Bug 1444489 - Part II, Implement Casting UI on videoControls", "attachment_id": 8957749, "added": "Bug 1444489 - Part III, Implement Casting UI on videoControls"}, {"field_name": "attachments.description", "removed": "Bug 1444489 - Part III, Enlarge the size of controls on mobile", "attachment_id": 8957764, "added": "Bug 1444489 - Part V, Enlarge the size of controls on mobile"}], "who": "timdream@gmail.com", "when": "2018-03-12T15:04:35Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "timdream@gmail.com"}], "who": "timdream@gmail.com", "when": "2018-03-13T16:13:08Z"}, {"changes": [{"field_name": "attachments.description", "removed": "old-touchcontrols.png", "attachment_id": 8958803, "added": "Current video control on Nightly"}], "who": "timdream@gmail.com", "when": "2018-03-14T16:32:02Z"}, {"changes": [{"field_name": "attachments.description", "removed": "new-touchcontrols.png", "attachment_id": 8958801, "added": "Resized desktop video controls on mobile"}], "who": "timdream@gmail.com", "when": "2018-03-14T16:36:15Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "tshakespeare@mozilla.com"}], "who": "tshakespeare@mozilla.com", "when": "2018-03-14T18:07:13Z"}, {"changes": [{"removed": "Find a way to deal with the touchControls binding", "field_name": "summary", "added": "Remove the touchControls binding and instead use the videocontrols binding on mobile"}], "who": "bgrinstead@mozilla.com", "when": "2018-03-14T19:39:42Z"}, {"changes": [{"removed": "https://bugzilla.mozilla.org/show_bug.cgi?id=1310907", "field_name": "see_also", "added": ""}, {"removed": "", "field_name": "cc", "added": "ralin@mozilla.com"}], "who": "bgrinstead@mozilla.com", "when": "2018-03-14T19:42:37Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "gijskruitbosch+bugs@gmail.com"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-14T19:47:42Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8958100, "added": "review?(dholbert@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "dholbert@mozilla.com"}], "who": "timdream@gmail.com", "when": "2018-03-14T23:53:24Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1444193"}, {"removed": "https://bugzilla.mozilla.org/show_bug.cgi?id=1444193", "field_name": "see_also", "added": ""}], "who": "timdream@gmail.com", "when": "2018-03-15T00:44:42Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(dholbert@mozilla.com)", "attachment_id": 8958100, "added": "review+"}], "who": "dholbert@mozilla.com", "when": "2018-03-15T01:06:59Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1444489 - Part IV, Remove xul videocontrols reflow code", "attachment_id": 8958100, "added": "Bug 1444489 - Part IV, Remove XUL videocontrols reflow code on Android"}], "who": "timdream@gmail.com", "when": "2018-03-15T08:13:26Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1431255"}], "who": "bgrinstead@mozilla.com", "when": "2018-03-15T16:34:19Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8958099, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957737, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957749, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957764, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8958800, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8959394, "added": "review?(gijskruitbosch+bugs@gmail.com)"}], "who": "timdream@gmail.com", "when": "2018-03-16T00:16:46Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8958099, "added": ""}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T13:54:11Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957737, "added": ""}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T14:00:00Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957749, "added": ""}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T14:05:34Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957764, "added": ""}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T14:09:53Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8958800, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T14:11:56Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8959394, "added": ""}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T14:15:19Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8958099, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957737, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957749, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957764, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8959394, "added": "review?(gijskruitbosch+bugs@gmail.com)"}], "who": "timdream@gmail.com", "when": "2018-03-16T14:58:27Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(timdream@gmail.com)"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T17:55:07Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8959394, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-16T20:31:02Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(e7358d9c@opayq.com)"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-17T08:38:28Z"}, {"changes": [{"removed": "needinfo?(e7358d9c@opayq.com)", "field_name": "flagtypes.name", "added": ""}], "who": "e7358d9c@opayq.com", "when": "2018-03-17T08:42:34Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(gijskruitbosch+bugs@gmail.com)"}], "who": "timdream@gmail.com", "when": "2018-03-17T16:58:09Z"}, {"changes": [{"removed": "needinfo?(gijskruitbosch+bugs@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-17T19:58:30Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1446829"}], "who": "bgrinstead@mozilla.com", "when": "2018-03-18T22:14:35Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1446831"}], "who": "bgrinstead@mozilla.com", "when": "2018-03-18T22:24:24Z"}, {"changes": [{"removed": "needinfo?(timdream@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "timdream@gmail.com", "when": "2018-03-20T05:55:28Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8958099, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-20T11:34:48Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957749, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-20T11:48:27Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957737, "added": ""}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-20T12:07:39Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957764, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-20T12:16:27Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1447544"}], "who": "timdream@gmail.com", "when": "2018-03-21T03:34:33Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1447547"}], "who": "timdream@gmail.com", "when": "2018-03-21T03:37:05Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957737, "added": "review?(gijskruitbosch+bugs@gmail.com)"}], "who": "timdream@gmail.com", "when": "2018-03-21T04:30:32Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1444489 - Part II, Replace touchControls with videoControls and remove touchControls", "attachment_id": 8957737, "added": "Bug 1444489 - Part III, Workaround bug 718107"}, {"field_name": "attachments.description", "removed": "Bug 1444489 - Part III, Implement Casting UI on videoControls", "attachment_id": 8957749, "added": "Bug 1444489 - Part IV, Implement Casting UI on videoControls"}, {"field_name": "attachments.description", "removed": "Bug 1444489 - Part IV, Remove XUL videocontrols reflow code on Android", "attachment_id": 8958100, "added": "Bug 1444489 - Part V, Remove XUL videocontrols reflow code on Android"}, {"field_name": "attachments.description", "removed": "Bug 1444489 - Part V, Enlarge the size of controls on mobile", "attachment_id": 8957764, "added": "Bug 1444489 - Part VI, Enlarge the size of controls on mobile"}, {"field_name": "attachments.description", "removed": "Bug 1444489 - Part VI, nit: Improve naming consistency in videocontrols.xml", "attachment_id": 8958800, "added": "Bug 1444489 - Part VII, nit: Improve naming consistency in videocontrols.xml"}, {"field_name": "attachments.description", "removed": "Bug 1444489 - Part VII, Transition the visibility property instead of using transitionend event", "attachment_id": 8959394, "added": "Bug 1444489 - Part VIII, Transition the visibility property instead of using transitionend event"}], "who": "timdream@gmail.com", "when": "2018-03-21T07:23:30Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8960883, "added": "review?(gijskruitbosch+bugs@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957737, "added": ""}], "who": "timdream@gmail.com", "when": "2018-03-21T07:24:58Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957737, "added": "review?(gijskruitbosch+bugs@gmail.com)"}], "who": "timdream@gmail.com", "when": "2018-03-21T07:26:31Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8960883, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-21T11:47:26Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8957737, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-03-21T11:51:53Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8957764, "added": "review+"}], "who": "e7358d9c@opayq.com", "when": "2018-03-21T14:05:43Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1441857"}], "who": "timdream@gmail.com", "when": "2018-03-21T14:44:04Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review+", "attachment_id": 8957764, "added": ""}], "who": "timdream@gmail.com", "when": "2018-03-21T15:57:46Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla61"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-03-22 09:37:59"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "apavel@mozilla.com", "when": "2018-03-22T09:37:59Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1448126"}], "who": "bgrinstead@mozilla.com", "when": "2018-03-22T19:51:56Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1448556"}], "who": "jh+bugzilla@buttercookie.de", "when": "2018-03-24T13:39:54Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jh+bugzilla@buttercookie.de"}], "who": "timdream@gmail.com", "when": "2018-03-25T03:02:30Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1448528"}], "who": "timdream@gmail.com", "when": "2018-03-25T03:13:58Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1449532"}], "who": "timdream@gmail.com", "when": "2018-03-28T11:15:47Z"}, {"changes": [{"removed": "XBL", "field_name": "component", "added": "XUL Widgets"}, {"removed": "Core", "field_name": "product", "added": "Toolkit"}], "who": "timdream@gmail.com", "when": "2018-03-28T11:24:34Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1449536"}], "who": "timdream@gmail.com", "when": "2018-03-28T11:27:04Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1450013"}], "who": "jh+bugzilla@buttercookie.de", "when": "2018-03-29T17:24:07Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}