{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "mstange@themasta.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "---", "cf_status_firefox35": "---", "cf_status_firefox36": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "comments": [{"text": "Created attachment 8567356\nscreen recording\n\nOpen this testcase: http://codepen.io/chriscoyier/pen/mvbpJ\n\nIn some cases, the letters of the middle \"hungry\" line (\"Nice blending way\") turn black. It's happening all the time in my main profile in Nightly, and some of the time in my local build in a testing profile.\n\nIt would be nice if somebody could find out under which condition the bug occurs, on what platforms, and whether it's a regression.", "author": "mstange@themasta.com", "id": 9942248, "time": "2015-02-20T22:49:57Z"}, {"text": "(In reply to Markus Stange [:mstange] from comment #0)\n> and some of the time in my local build in a testing profile.\n\nThis probably only worked in my local build because there was a bug in my patch for bug 961887 which I had applied in that build.\n\n> It would be nice if somebody could find out under which condition the bug\n> occurs, on what platforms, and whether it's a regression.\n\nSo far I have these results:\nOS X OpenGL OMTC: bug\nOS X BasicLayers: no bug\nOS X Basic OMTC:  no bug\nLinux OpenGL OMTC: bug\nLinux BasicLayers: no bug", "author": "mstange@themasta.com", "id": 9942914, "time": "2015-02-21T03:25:04Z"}, {"text": "I see this with 37.0.1 stable on OSX 10.10.2 (14C1514). Happens consistently.", "author": "andrew.stromme@gmail.com", "id": 10145575, "time": "2015-04-12T18:56:49Z"}, {"text": "Works for me in Windows 7 x64, in Firefox 37.0.2 with OMTC.\nBug 1163093 is possibly related.", "author": "gingerbread_man@live.com", "id": 10250515, "time": "2015-05-09T09:35:31Z"}, {"text": "Yea discovered this on osx 10.10.2 with FF 40.0.2 - still there and consistent.", "author": "dan@danielnwilliams.co.uk", "id": 10639199, "time": "2015-08-20T10:12:14Z"}, {"text": "I got the... \"solution\"! I wrote about this on a article right here: \n\nhttps://medium.com/@maykelesser/how-to-fix-osx-firefox-mix-blend-mode-bug-6b3548e9e546", "author": "maykelesser@outlook.com", "id": 10771912, "time": "2015-09-24T16:01:40Z"}, {"text": "FWIW, this doesn't reproduce on Linux OMTC on Fx41, though Markus points out that BasicLayers is used in that case. Still reproduces with OpenGL acceleration forced on.", "author": "ryanvm@gmail.com", "id": 10796763, "time": "2015-09-30T21:44:20Z"}, {"text": "(In reply to Ryan VanderMeulen [:RyanVM UTC-4] from comment #6)\n> FWIW, this doesn't reproduce on Linux OMTC on Fx41, though Markus points out\n> that BasicLayers is used in that case.\n\nIt's actually BasicCompositor. Sorry, the terminology here is very confusing... BasicLayers means \"no OMTC\", BasicCompositor means \"OMTC, but not accelerated\".", "author": "mstange@themasta.com", "id": 10796777, "time": "2015-09-30T21:46:51Z"}, {"text": "With layers.acceleration.force-enabled set to true, mozregression is giving the below regression range on Linux. Unfortunately, the regressions are too old to bisect on inbound, so the m-c pushlog range is the best we'll be able to do.\nhttps://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=99f694d1b50c&tochange=35f3fa435d2c\n\nThe regression is going from normal appearance (including proper opacity) and normal scroll behavior to the current black lettering behavior observed on other platforms. Bug 1023677 from Matt Woodrow looks possibly-relevant.\n\nI don't have access to a Mac, so this is about as far as I'll be able to help.", "author": "ryanvm@gmail.com", "id": 10797079, "time": "2015-09-30T23:21:59Z"}, {"text": "Matt and I looked at this today. The mix-blend-mode spec separates blending into two steps: the blend operation on the source and backdrop colors, and then how they are composited into the backdrop[1]. It appears in the compositors we skipped a step and do not factor in the destination alpha.\n\nIn the test case, the source text is being composited onto a transparent black surface - the backdrop is rgba(0,0,0,0) - so our formula becomes very obviously wrong. BasicLayers and BasicCompositor handle this correctly.\n\nUnfortunately we can't support the correct formula without shaders, so I'm just going to back out the OGL/D3D11 support for screen/multiply blending. We'll add it back soon though since we want to support all modes in the GPU. (bug 1209278)\n\n[1] http://www.w3.org/TR/compositing-1/#generalformula", "author": "dvander@alliedmods.net", "id": 10815195, "time": "2015-10-07T06:42:23Z"}, {"text": "Created attachment 8670636\nbug1135271.patch", "author": "dvander@alliedmods.net", "id": 10815215, "time": "2015-10-07T06:54:14Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/d337fcb3aef0", "author": "pulsebot@bots.tld", "id": 10818693, "time": "2015-10-07T23:40:42Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/d337fcb3aef0", "author": "cbook@mozilla.com", "id": 10820521, "time": "2015-10-08T14:28:50Z"}], "keywords": ["testcase"], "cf_tracking_firefox36": "---", "cf_fx_iteration": "---", "cc_detail": [{"email": "andrew.stromme@gmail.com", "id": 536526, "name": "andrew.stromme@gmail.com", "real_name": "Andrew Stromme"}, {"email": "dan@danielnwilliams.co.uk", "id": 547242, "name": "dan@danielnwilliams.co.uk", "real_name": "Dan Williams"}, {"email": "djaubert@davidjaubert.com", "id": 548772, "name": "djaubert@davidjaubert.com", "real_name": "David"}, {"email": "dvander@alliedmods.net", "id": 309316, "name": "dvander@alliedmods.net", "real_name": "David Anderson [:dvander] - inactive, e-mail if emergency"}, {"email": "gingerbread_man@live.com", "id": 353206, "name": "gingerbread_man@live.com", "real_name": "Gingerbread Man"}, {"email": "matt.woodrow@gmail.com", "id": 380838, "name": "matt.woodrow@gmail.com", "real_name": "Matt Woodrow (:mattwoodrow)"}, {"email": "maykelesser@outlook.com", "id": 550530, "name": "maykelesser@outlook.com", "real_name": ""}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "sotaro.ikeda.g@gmail.com", "id": 434202, "name": "sotaro.ikeda.g@gmail.com", "real_name": "Sotaro Ikeda [:sotaro]"}], "cf_last_resolved": "2015-10-08T14:28:50Z", "attachments": [{"creator": "mstange@themasta.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "video/webm", "id": 8567356}, {"creator": "dvander@alliedmods.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-10-07T21:59:10Z", "type_id": 4, "creation_date": "2015-10-07T06:54:14Z", "id": 1267094, "setter": "matt.woodrow@gmail.com"}], "content_type": "text/plain", "id": 8670636}], "votes": 2, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "is_cc_accessible": true, "comment_count": 13, "cf_has_str": "---", "id": 1135271, "priority": "--", "cc": ["andrew.stromme@gmail.com", "dan@danielnwilliams.co.uk", "djaubert@davidjaubert.com", "dvander@alliedmods.net", "gingerbread_man@live.com", "matt.woodrow@gmail.com", "maykelesser@outlook.com", "ryanvm@gmail.com", "sotaro.ikeda.g@gmail.com"], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_tracking_firefox34": "---", "blocks": [1208302, 1237979], "qa_contact": "", "creation_time": "2015-02-20T22:49:57Z", "cf_tracking_firefox35": "---", "cf_status_firefox_esr52": "---", "component": "Graphics", "assigned_to_detail": {"email": "dvander@alliedmods.net", "id": 309316, "name": "dvander@alliedmods.net", "real_name": "David Anderson [:dvander] - inactive, e-mail if emergency"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox34": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "mozilla44", "cf_rank": null, "platform": "x86", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "http://codepen.io/chriscoyier/pen/mvbpJ", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "mstange@themasta.com", "id": 293943, "name": "mstange@themasta.com", "real_name": "Markus Stange [:mstange]"}, "whiteboard": "gfx-noted", "mentors": [], "summary": "Unexpected mix-blend-mode rendering", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2016-01-09T01:15:13Z", "assigned_to": "dvander@alliedmods.net", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "sotaro.ikeda.g@gmail.com"}, {"removed": "", "field_name": "whiteboard", "added": "gfx-noted"}], "who": "sotaro.ikeda.g@gmail.com", "when": "2015-03-30T14:25:57Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "andrew.stromme@gmail.com"}], "who": "andrew.stromme@gmail.com", "when": "2015-04-12T18:56:49Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "testcase"}, {"removed": "", "field_name": "cc", "added": "gingerbread_man@live.com"}], "who": "gingerbread_man@live.com", "when": "2015-05-09T09:35:31Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "dan@danielnwilliams.co.uk"}], "who": "dan@danielnwilliams.co.uk", "when": "2015-08-20T10:12:14Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "djaubert@davidjaubert.com"}], "who": "djaubert@davidjaubert.com", "when": "2015-09-04T02:30:52Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "maykelesser@outlook.com"}], "who": "maykelesser@outlook.com", "when": "2015-09-24T16:01:40Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1208302"}], "who": "alice0775@yahoo.co.jp", "when": "2015-09-25T02:12:05Z"}, {"changes": [{"removed": "regressionwindow-wanted", "field_name": "keywords", "added": ""}, {"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}], "who": "ryanvm@gmail.com", "when": "2015-09-30T23:21:59Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "", "field_name": "cc", "added": "dvander@alliedmods.net"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "dvander@alliedmods.net"}], "who": "dvander@alliedmods.net", "when": "2015-10-07T06:42:23Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "matt.woodrow@gmail.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8670636, "added": "review?(matt.woodrow@gmail.com)"}], "who": "dvander@alliedmods.net", "when": "2015-10-07T06:54:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(matt.woodrow@gmail.com)", "attachment_id": 8670636, "added": "review+"}], "who": "matt.woodrow@gmail.com", "when": "2015-10-07T21:59:10Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla44"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-10-08 07:28:50"}, {"removed": "---", "field_name": "cf_status_firefox44", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2015-10-08T14:28:50Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1237979"}], "who": "alice0775@yahoo.co.jp", "when": "2016-01-09T01:15:13Z"}], "resolution": "FIXED", "op_sys": "Mac OS X", "cf_fx_points": "---", "cf_blocking_fennec": "---"}