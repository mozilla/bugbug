{"cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Server Software", "creator": "continuation@gmail.com", "mentors_detail": [], "depends_on": [], "creation_time": "2016-09-23T20:26:21Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "keywords": [], "summary": "Better telemetry alerts for regressions in the extremes of behavior", "cf_last_resolved": "2017-09-20T01:54:54Z", "attachments": [], "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "comments": [{"text": "We recently regressed cycle collector pauses very badly (bug 1301301) on August 26, but this did not generate a telemetry alert.\n\nThe regression shows up very clearly in the mean and the 95th percentile for CYCLE_COLLECTOR_MAX_PAUSE: https://mzl.la/2ctDxdF\n\nI think the difficulty here is that most of the time the CC does very little (running every 10 seconds), so almost all of the data we get is around 5ms. However, when the user closes a tab, the CC can take much longer, on the order of a second in some bad cases. To a user, it doesn't matter too much if CC pauses go from 5ms to 8ms, but it is more noticeable if a 500ms pause goes to 800ms, even though these pauses are much less frequent. It is in these longer CCs that we had the regression.\n\nI could add a new telemetry measure that only reports MAX_PAUSE when the value is greater than, say, 10ms, but that seems kind of hacky, and there are likely other measurements where we care about the extremes of behavior in addition to the over all picture, such as garbage collector pauses and tab switching times, so it would be nice to have some system set up for it. I'm not sure what the right approach would be.", "author": "continuation@gmail.com", "id": 11734002, "time": "2016-09-23T20:26:21Z"}, {"text": "Another example of this is GHOST_WINDOWS: https://mzl.la/2qlSZyH\n\nBug 1357872 was a regression that showed up on 4-18, and is clearly visible on the graph, but there was no regression email.\n\nEven worse, bug 1336811 was a really bad regression with commonly used addons like AdblockPlus that landed around Sept 13, but it made it all the way to release until somebody reported it and I was able to fix it (which you can see as the huge drop on 2-21).", "author": "continuation@gmail.com", "id": 12279597, "time": "2017-05-01T18:40:15Z"}, {"text": "It's almost certainly the overwhelmingly-dominant 0 shape that prevented the detector from registering the changes. The detector reacts to changes in the shape of the distributions, and they didn't really change.\n\nThis is one of the kind of changes that cerberus[1] is not capable of identifying in its current form. Which sucks.\n\n[1]: https://github.com/mozilla/cerberus/blob/master/alert/alert.py#L42", "author": "chutten@mozilla.com", "id": 12279637, "time": "2017-05-01T18:58:10Z"}, {"text": "Closing abandoned bugs in this product per https://bugzilla.mozilla.org/show_bug.cgi?id=1337972", "author": "bug-husbandry-bot@mozilla.bugs", "id": 12684243, "time": "2017-09-20T01:54:54Z"}, {"text": "Hooking this back up to the current Telemetry alerting bugtree in Webtools::Telemetry Dashboard.", "author": "chutten@mozilla.com", "id": 13215684, "time": "2018-04-18T15:15:07Z"}], "id": 1305142, "priority": "P4", "platform": "Unspecified", "comment_count": 5, "version": "other", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "---", "status": "REOPENED", "product": "Webtools", "cf_fx_iteration": "---", "blocks": [1450729], "qa_contact": "", "see_also": [], "cf_status_firefox_esr52": "---", "component": "Telemetry Dashboard", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "---", "cc": ["bill.mccloskey@gmail.com", "chutten@mozilla.com", "fbertsch@mozilla.com", "mdoglio@mozilla.com", "rvitillo@mozilla.com", "ryanvm@gmail.com", "thuelbert@mozilla.com"], "groups": [], "url": "", "creator_detail": {"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "bill.mccloskey@gmail.com", "id": 389993, "name": "bill.mccloskey@gmail.com", "real_name": "Bill McCloskey [inactive unless it's an emergency] (:billm)"}, {"email": "chutten@mozilla.com", "id": 553004, "name": "chutten@mozilla.com", "real_name": "Chris H-C :chutten"}, {"email": "fbertsch@mozilla.com", "id": 576696, "name": "fbertsch@mozilla.com", "real_name": "Frank Bertsch [:frank]"}, {"email": "mdoglio@mozilla.com", "id": 463213, "name": "mdoglio@mozilla.com", "real_name": "Mauro Doglio [:mdoglio]"}, {"email": "rvitillo@mozilla.com", "id": 488958, "name": "rvitillo@mozilla.com", "real_name": "Roberto Agostino Vitillo (:rvitillo)"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "thuelbert@mozilla.com", "id": 536011, "name": "thuelbert@mozilla.com", "real_name": "Thomas Huelbert"}], "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-04-18T15:15:07Z", "cf_status_firefox_esr60": "---", "assigned_to": "nobody@mozilla.org", "is_open": true, "cf_qa_whiteboard": "", "resolution": "", "op_sys": "Unspecified", "cf_fx_points": "3", "history": [{"changes": [{"removed": "Telemetry Server", "field_name": "component", "added": "Metrics: Pipeline"}, {"removed": "Trunk", "field_name": "version", "added": "unspecified"}, {"removed": "Webtools", "field_name": "product", "added": "Cloud Services"}], "who": "chutten@mozilla.com", "when": "2016-09-26T14:08:36Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mdoglio@mozilla.com"}], "who": "rvitillo@mozilla.com", "when": "2016-09-26T15:00:03Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P3"}, {"removed": "", "field_name": "cc", "added": "thuelbert@mozilla.com"}, {"removed": "---", "field_name": "cf_fx_points", "added": "3"}], "who": "thuelbert@mozilla.com", "when": "2016-09-28T16:26:12Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "fbertsch@mozilla.com, ryanvm@gmail.com"}], "who": "ryanvm@gmail.com", "when": "2016-12-16T14:56:43Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "INCOMPLETE"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2017-09-20 01:54:54"}], "who": "bug-husbandry-bot@mozilla.bugs", "when": "2017-09-20T01:54:54Z"}, {"changes": [{"removed": "P3", "field_name": "priority", "added": "P4"}, {"removed": "RESOLVED", "field_name": "status", "added": "REOPENED"}, {"removed": "Metrics: Pipeline", "field_name": "component", "added": "Telemetry Dashboard"}, {"removed": "unspecified", "field_name": "version", "added": "other"}, {"removed": "", "field_name": "blocks", "added": "1450729"}, {"removed": "INCOMPLETE", "field_name": "resolution", "added": ""}, {"removed": "Cloud Services", "field_name": "product", "added": "Webtools"}], "who": "chutten@mozilla.com", "when": "2018-04-18T15:15:07Z"}]}