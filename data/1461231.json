{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "+", "cf_tracking_firefox62": "+", "creator": "mtanalin@yandex.ru", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "unaffected", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": ["regression", "testcase"], "cc_detail": [{"email": "chrislord.net@gmail.com", "id": 194366, "name": "chrislord.net@gmail.com", "real_name": "Chris Lord [:cwiiis]"}, {"email": "dbolter@mozilla.com", "id": 152868, "name": "dbolter@mozilla.com", "real_name": "David Bolter [:davidb] (NeedInfo me for attention)"}, {"email": "jfkthame@gmail.com", "id": 329583, "name": "jfkthame@gmail.com", "real_name": "Jonathan Kew (:jfkthame)"}, {"email": "matt.woodrow@gmail.com", "id": 380838, "name": "matt.woodrow@gmail.com", "real_name": "Matt Woodrow (:mattwoodrow)"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "mikokm@gmail.com", "id": 547538, "name": "mikokm@gmail.com", "real_name": "Miko Mynttinen [:miko]"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "shobson@mozilla.com", "id": 260861, "name": "shobson@mozilla.com", "real_name": "Stephanie Hobson [:shobson]"}, {"email": "tnikkel@gmail.com", "id": 255010, "name": "tnikkel@gmail.com", "real_name": "Timothy Nikkel (:tnikkel)"}], "cf_last_resolved": "2018-05-16T10:04:04Z", "attachments": [{"creator": "matt.woodrow@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-15T17:23:59Z", "type_id": 4, "creation_date": "2018-05-15T02:28:17Z", "id": 1756763, "setter": "mikokm@gmail.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-05-17T01:26:13Z", "type_id": 721, "creation_date": "2018-05-17T01:03:28Z", "id": 1757920, "setter": "ryanvm@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8975706}], "votes": 2, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 13, "comments": [{"text": "User Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:61.0) Gecko/20100101 Firefox/61.0\nBuild ID: 20180510160705\n\nSteps to reproduce:\n\nAfter removing a fixed-positioned element from DOM, Firefox 61+ does not repaint window until an extra click is done anywhere on the page, or something that forces repaint \u2014 e.g. resizing Firefox window or hovering DOM nodes in Developer Tools.\n\nAFFECTED VERSIONS\n\nThe bug was introduced in the build 20180404100127 (mozilla-central). The previous build 20180403220040 was NOT affected.\n\nThe latest tested build 20180513220424 is still affected.\n\nStable Firefox 60 is NOT affected, so there is a chance to prevent leaking the issue into the stable branch and affecting majority of users.\n\nBoth 64-bit and 32-bit versions of Firefox are affected.\n\nTested on two different physical computers with the same results.\n\nTESTCASE\n\nPlease see the testcase URL.\n\nAlso, looks like exactly the same issue (introduced in the same Firefox build) is the reason of glitches with a Lightbox-like script used for displaying enlarged image on iXBT.com, e.g. see the first image (A08 robot photo) here (click the normal image version to see the glitches during showing its enlarged version):\n\nhttps://www.ixbt.com/news/2018/05/13/boston-dynamics-spotmini.html\n\nPOSSIBLE REASONS\n\nBased on what pushes have been made between the two days the unaffected and affected builds were built, one of these bugs may (or not) be the reason of the current bug given that they apparently affect the layout part of the Firefox engine, especially those related to invalidation (1450189 and 1443380):\n\nBug 1450266 -- Remove nsGlobalWindowInner::CleanUp in favor of FreeInnerObjects()\nBug 1450189 -- Don't invalidate display items when a frame gets a new style context\nBug 1443380 -- We don't need to mark frames modified when we recurse into InvalidateFrame\nBug 1442844 -- FinishAndStoreOverflow's aNewSize parameter isn't always used\nBug 1370575 -- Overpainting when composing a reply in GMail", "author": "mtanalin@yandex.ru", "id": 13273674, "time": "2018-05-14T01:11:56Z"}, {"text": "Mozregression brought me to:\n\nhttps://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=6415ccbf739f36f71548540bd92c3b86ab9e1529&tochange=d112cf7b2b60e6244099dc3b599a2444ba0d1da3\n\nBug 1443027 there sounds like it might be relevant.", "author": "jfkthame@gmail.com", "id": 13275069, "time": "2018-05-14T08:43:00Z"}, {"text": "Looks like Matt is on this. Removing my NI.", "author": "dbolter@mozilla.com", "id": 13276791, "time": "2018-05-14T19:25:41Z"}, {"text": "Created attachment 8975706\nBug 1461231 - Don't omit deleted items when constructing the DAG, since we need to record that we made a modification during MergeDisplayLists.\n\nWe can unconditionally delete the item though, and just put a placeholder entry into the DAG.\n\nReview commit: https://reviewboard.mozilla.org/r/243936/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/243936/", "author": "matt.woodrow@gmail.com", "id": 13277658, "time": "2018-05-15T02:28:17Z"}, {"text": "Thanks Marat for the awesome reduced testcase! Made this super easy to track down.", "author": "matt.woodrow@gmail.com", "id": 13277673, "time": "2018-05-15T02:45:58Z"}, {"text": "Comment on attachment 8975706\nBug 1461231 - Don't omit deleted items when constructing the DAG, since we need to record that we made a modification during MergeDisplayLists.\n\nhttps://reviewboard.mozilla.org/r/243936/#review250016\n\nLGTM.", "author": "mikokm@gmail.com", "id": 13279256, "time": "2018-05-15T17:23:59Z"}, {"text": "Pushed by mwoodrow@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/f288a2c9c439\nDon't omit deleted items when constructing the DAG, since we need to record that we made a modification during MergeDisplayLists. r=miko", "author": "pulsebot@bots.tld", "id": 13279729, "time": "2018-05-15T19:59:09Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/f288a2c9c439", "author": "ebalazs@mozilla.com", "id": 13280945, "time": "2018-05-16T10:04:04Z"}, {"text": "Comment on attachment 8975706\nBug 1461231 - Don't omit deleted items when constructing the DAG, since we need to record that we made a modification during MergeDisplayLists.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Retained-dl, bug 1443027\n[User impact if declined]:  If the only changes made are the removal of content, then sometime we forget to paint the change.\n[Is this code covered by automated tests?]: New reftest added.\n[Has the fix been verified in Nightly?]: Reftest passes!\n[Needs manual test from QE? If yes, steps to reproduce]: No.\n[List of other uplifts needed for the feature/fix]: None.\n[Is the change risky?]: No.\n[Why is the change risky/not risky?]: Just ensures that we don't take the 'no changes made' early return when a deletion change has been made.\n[String changes made/needed]: None.", "author": "matt.woodrow@gmail.com", "id": 13283338, "time": "2018-05-17T01:03:28Z"}, {"text": "Comment on attachment 8975706\nBug 1461231 - Don't omit deleted items when constructing the DAG, since we need to record that we made a modification during MergeDisplayLists.\n\nRetained display list fix needed for the feature to ship in Fx61. Approved for 61.0b6.", "author": "ryanvm@gmail.com", "id": 13283361, "time": "2018-05-17T01:26:13Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/2932a4b5f7e7", "author": "ryanvm@gmail.com", "id": 13283369, "time": "2018-05-17T01:28:04Z"}, {"text": "I don\u2019t see the issue anymore in Firefox Beta (Dev. Edition) 61.0b6 (20180517141400), nor in the latest Nightly 62.0a1 (20180518100150), including the more complex real-world case that I originally discovered the issue with. It\u2019s great that the issue has not leaked to stable Firefox.\n\nThanks, Matt and everyone involved.", "author": "mtanalin@yandex.ru", "id": 13288814, "time": "2018-05-18T23:02:49Z"}, {"text": "*** Bug 1457322 has been marked as a duplicate of this bug. ***", "author": "bwerth@mozilla.com", "id": 13295602, "time": "2018-05-22T02:39:28Z"}], "id": 1461231, "priority": "P1", "cc": ["chrislord.net@gmail.com", "dbolter@mozilla.com", "jfkthame@gmail.com", "matt.woodrow@gmail.com", "mcastelluccio@mozilla.com", "mikokm@gmail.com", "ryanvm@gmail.com", "shobson@mozilla.com", "tnikkel@gmail.com"], "cf_crash_signature": "", "version": "Trunk", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1461470, 1443027], "qa_contact": "", "creation_time": "2018-05-14T01:11:56Z", "cf_status_firefox_esr52": "unaffected", "component": "Graphics", "assigned_to_detail": {"email": "matt.woodrow@gmail.com", "id": 380838, "name": "matt.woodrow@gmail.com", "real_name": "Matt Woodrow (:mattwoodrow)"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "fixed", "cf_status_firefox61": "fixed", "cf_status_firefox60": "unaffected", "target_milestone": "mozilla62", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "blocker", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "http://tanalin.com/_experimentz/bugs/fx/2018/fixed-repaint/", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "mtanalin@yandex.ru", "id": 215949, "name": "mtanalin@yandex.ru", "real_name": "Marat Tanalin"}, "whiteboard": "", "mentors": [], "summary": "No repaint after removing an element that has `position: fixed` (exact Firefox build is known)", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [{"status": "+", "name": "in-testsuite", "modification_date": "2018-05-16T12:41:32Z", "type_id": 37, "creation_date": "2018-05-15T02:43:50Z", "id": 1756765, "setter": "ryanvm@gmail.com"}], "last_change_time": "2018-05-22T02:39:28Z", "assigned_to": "matt.woodrow@gmail.com", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "url", "added": "http://tanalin.com/_experimentz/bugs/fx/2018/fixed-repaint/"}], "who": "mtanalin@yandex.ru", "when": "2018-05-14T01:12:31Z"}, {"changes": [{"removed": "Untriaged", "field_name": "component", "added": "Graphics"}, {"removed": "Firefox", "field_name": "product", "added": "Core"}, {"removed": "normal", "field_name": "severity", "added": "major"}], "who": "mtanalin@yandex.ru", "when": "2018-05-14T01:14:07Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "dbolter@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(dbolter@mozilla.com)"}], "who": "mtanalin@yandex.ru", "when": "2018-05-14T01:19:54Z"}, {"changes": [{"removed": "UNCONFIRMED", "field_name": "status", "added": "NEW"}, {"removed": "", "field_name": "cc", "added": "matt.woodrow@gmail.com, tnikkel@gmail.com"}, {"removed": "0", "field_name": "is_confirmed", "added": "1"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(matt.woodrow@gmail.com)"}], "who": "tnikkel@gmail.com", "when": "2018-05-14T08:09:55Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jfkthame@gmail.com"}], "who": "jfkthame@gmail.com", "when": "2018-05-14T08:43:00Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "matt.woodrow@gmail.com"}, {"removed": "needinfo?(matt.woodrow@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "matt.woodrow@gmail.com", "when": "2018-05-14T09:07:22Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "regression"}, {"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2018-05-14T13:43:48Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "testcase"}], "who": "mtanalin@yandex.ru", "when": "2018-05-14T17:20:58Z"}, {"changes": [{"removed": "needinfo?(dbolter@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "dbolter@mozilla.com", "when": "2018-05-14T19:25:41Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8975706, "added": "review?(mikokm@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "mikokm@gmail.com"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-15T02:28:17Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "", "field_name": "blocks", "added": "1443027, 1461470"}, {"removed": "", "field_name": "flagtypes.name", "added": "in-testsuite?"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "unaffected"}, {"removed": "---", "field_name": "cf_tracking_firefox61", "added": "+"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "affected"}, {"removed": "---", "field_name": "cf_tracking_firefox62", "added": "+"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "affected"}], "who": "ryanvm@gmail.com", "when": "2018-05-15T02:43:50Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P1"}, {"removed": "major", "field_name": "severity", "added": "blocker"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-15T02:49:11Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "chrislord.net@gmail.com"}], "who": "chrislord.net@gmail.com", "when": "2018-05-15T10:22:59Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mikokm@gmail.com)", "attachment_id": 8975706, "added": "review+"}], "who": "mikokm@gmail.com", "when": "2018-05-15T17:23:59Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-16 10:04:04"}, {"removed": "affected", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "ebalazs@mozilla.com", "when": "2018-05-16T10:04:04Z"}, {"changes": [{"removed": "in-testsuite?", "field_name": "flagtypes.name", "added": "in-testsuite+"}], "who": "ryanvm@gmail.com", "when": "2018-05-16T12:41:32Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8975706, "added": "approval-mozilla-beta?"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-17T01:03:28Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8975706, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-05-17T01:26:13Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-17T01:28:04Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "shobson@mozilla.com"}], "who": "bwerth@mozilla.com", "when": "2018-05-22T02:39:28Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}