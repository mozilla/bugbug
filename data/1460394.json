{"status": "VERIFIED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Client Software", "creator": "eoger@fastmail.com", "cc": ["blakewu0205@gmail.com", "bwinton@mozilla.com", "daniel.bodea@softvision.ro", "jmaher@mozilla.com", "kmaglione+bmo@mozilla.com", "mcastelluccio@mozilla.com", "tchiovoloni@mozilla.com"], "depends_on": [], "creation_time": "2018-05-09T19:14:26Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": ["regression"], "summary": "History syncing not working on Windows", "cf_last_resolved": "2018-05-10T09:55:10Z", "attachments": [{"creator": "eoger@fastmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-09T19:46:02Z", "type_id": 748, "creation_date": "2018-05-09T19:40:02Z", "id": 1754846, "setter": "kmaglione+bmo@mozilla.com"}, {"status": "+", "name": "review", "modification_date": "2018-05-09T19:46:24Z", "type_id": 748, "creation_date": "2018-05-09T19:46:24Z", "id": 1754850, "setter": "eoger@fastmail.com"}], "content_type": "text/x-review-board-request", "id": 8974506}], "assigned_to_detail": {"email": "eoger@fastmail.com", "id": 521718, "name": "eoger@fastmail.com", "real_name": "Edouard Oger [:eoger]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 11, "comments": [{"text": "> \"[Exception... \\\"JavaScript component does not have a method named: \\\"onBeginUpdateBatch\\\"'JavaScript component does not have a method named: \\\"onBeginUpdateBatch\\\"' when calling method: [nsINavHistoryObserver::onBeginUpdateBatch]\\\"  nsresult: \\\"0x80570030 (NS_ERROR_XPC_JSOBJECT_HAS_NO_FUNCTION_NAMED)\\\"  location: \\\"JS frame :: resource://services-sync/engines/history.js :: notifyHistoryObservers :: line 238\\\"  data: no]\"\n\n> notifyHistoryObservers@resource://services-sync/engines/history.js:238:13\n> applyIncomingBatch@resource://services-sync/engines/history.js:246:7\n> async*_applyRecords@resource://services-sync/engines.js:1415:29\n> async*_processIncoming@resource://services-sync/engines.js:1205:33\n> async*_sync@resource://services-sync/engines.js:1837:13\n> async*WrappedNotify@resource://services-sync/util.js:179:27\n> async*sync@resource://services-sync/engines.js:900:12\n> async*_syncEngine@resource://services-sync/stages/enginesync.js:214:13\n> async*sync@resource://services-sync/stages/enginesync.js:156:21\n> async*onNotify@resource://services-sync/service.js:1131:13\n> async*WrappedNotify@resource://services-sync/util.js:179:27\n> async*WrappedLock@resource://services-sync/util.js:135:22\n> async*_lockedSync@resource://services-sync/service.js:1124:12\n> async*sync/<@resource://services-sync/service.js:1116:13\n> async*WrappedCatch@resource://services-sync/util.js:105:22\n> async*sync@resource://services-sync/service.js:1105:12\n> async*doSync/<@chrome://browser/content/browser-sync.js:594:46\n\nThis regression was caused by bug 1459854.", "author": "eoger@fastmail.com", "id": 13266353, "time": "2018-05-09T19:14:26Z"}, {"text": "I'm not convinced that that patch broke anything. The QueryInterface method for that class was previously broken. Or, well, it was broken when it used XPCOMUtils. It threw when it was migrated to ChromeUtils. Either way, it shouldn't have worked. It just wouldn't have failed with that error, because it never would have queried to that interface in the first place.\n\nI also removed the __noSuchMethod__ method, which was meant to hide those errors. But that hasn't been supported in years.\n\nBut that error is caught, so it shouldn't actually cause any problems.", "author": "kmaglione+bmo@mozilla.com", "id": 13266391, "time": "2018-05-09T19:23:58Z"}, {"text": "Let's implement empty methods.", "author": "eoger@fastmail.com", "id": 13266410, "time": "2018-05-09T19:28:54Z"}, {"text": "Created attachment 8974506\nBug 1460394 - Implement all nsINavHistoryObserver methods in gHistoryObserver.\n\nReview commit: https://reviewboard.mozilla.org/r/242838/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/242838/", "author": "eoger@fastmail.com", "id": 13266418, "time": "2018-05-09T19:30:15Z"}, {"text": "Comment on attachment 8974506\nBug 1460394 - Implement all nsINavHistoryObserver methods in gHistoryObserver.\n\n[wrong bug sorry]", "author": "eoger@fastmail.com", "id": 13266422, "time": "2018-05-09T19:31:46Z"}, {"text": "Comment on attachment 8974506\nBug 1460394 - Implement all nsINavHistoryObserver methods in gHistoryObserver.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/242838/diff/1-2/", "author": "eoger@fastmail.com", "id": 13266443, "time": "2018-05-09T19:40:02Z"}, {"text": "Comment on attachment 8974506\nBug 1460394 - Implement all nsINavHistoryObserver methods in gHistoryObserver.\n\nhttps://reviewboard.mozilla.org/r/242838/#review248692\n\nThanks.", "author": "kmaglione+bmo@mozilla.com", "id": 13266461, "time": "2018-05-09T19:46:02Z"}, {"text": "Comment on attachment 8974506\nBug 1460394 - Implement all nsINavHistoryObserver methods in gHistoryObserver.\n\nhttps://reviewboard.mozilla.org/r/242838/#review248694", "author": "eoger@fastmail.com", "id": 13266463, "time": "2018-05-09T19:46:24Z"}, {"text": "Pushed by eoger@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/9e20f20a1eb7\nImplement all nsINavHistoryObserver methods in gHistoryObserver. r=kmag", "author": "pulsebot@bots.tld", "id": 13266466, "time": "2018-05-09T19:47:57Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/9e20f20a1eb7", "author": "ncsoregi@mozilla.com", "id": 13267760, "time": "2018-05-10T09:55:10Z"}, {"text": "I have reproduced the issue in the Nightly build from 2018-05-09; then I have recreated the same steps on the latest Nightly (2018-06-06) without the reproduction of the original issue.\nThis bug's fix is verified on Windows 10 with Nightly v62.0a1.", "author": "daniel.bodea@softvision.ro", "id": 13390745, "time": "2018-06-06T12:10:13Z"}], "id": 1460394, "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "blocking", "cf_platform_rel": "---", "product": "Firefox", "cf_status_firefox_esr52": "unaffected", "blocks": [1459854], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Sync", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "verified", "cf_status_firefox61": "unaffected", "cf_status_firefox60": "unaffected", "target_milestone": "Firefox 62", "is_cc_accessible": true, "cf_rank": null, "groups": [], "url": "", "creator_detail": {"email": "eoger@fastmail.com", "id": 521718, "name": "eoger@fastmail.com", "real_name": "Edouard Oger [:eoger]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "blakewu0205@gmail.com", "id": 488943, "name": "blakewu0205@gmail.com", "real_name": "Blake Wu [:bwu][:blakewu]"}, {"email": "bwinton@mozilla.com", "id": 339434, "name": "bwinton@mozilla.com", "real_name": "Blake Winton (:bwinton) (:\u2615\ufe0f)"}, {"email": "daniel.bodea@softvision.ro", "id": 616104, "name": "daniel.bodea@softvision.ro", "real_name": "Bodea Daniel"}, {"email": "jmaher@mozilla.com", "id": 324370, "name": "jmaher@mozilla.com", "real_name": "Joel Maher ( :jmaher ) (UTC-4)"}, {"email": "kmaglione+bmo@mozilla.com", "id": 106098, "name": "kmaglione+bmo@mozilla.com", "real_name": "Kris Maglione [:kmag]"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "tchiovoloni@mozilla.com", "id": 567427, "name": "tchiovoloni@mozilla.com", "real_name": "Thom Chiovoloni [:tcsc]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-06-06T12:10:13Z", "cf_status_firefox_esr60": "unaffected", "assigned_to": "eoger@fastmail.com", "is_open": false, "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(kmaglione+bmo@mozilla.com)"}], "who": "eoger@fastmail.com", "when": "2018-05-09T19:14:38Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bwinton@mozilla.com"}], "who": "bwinton@mozilla.com", "when": "2018-05-09T19:23:13Z"}, {"changes": [{"removed": "needinfo?(kmaglione+bmo@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "kmaglione+bmo@mozilla.com", "when": "2018-05-09T19:23:58Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "eoger@fastmail.com"}], "who": "eoger@fastmail.com", "when": "2018-05-09T19:28:54Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8974506, "added": "review?(tchiovoloni@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "tchiovoloni@mozilla.com"}], "who": "eoger@fastmail.com", "when": "2018-05-09T19:30:15Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(tchiovoloni@mozilla.com)", "attachment_id": 8974506, "added": ""}], "who": "eoger@fastmail.com", "when": "2018-05-09T19:31:46Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8974506, "added": "1"}], "who": "eoger@fastmail.com", "when": "2018-05-09T19:32:04Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "1", "attachment_id": 8974506, "added": "0"}, {"field_name": "attachments.description", "removed": "Bug 1460394 - Make notifyHistoryObservers an arrow function.", "attachment_id": 8974506, "added": "Bug 1460394 - Implement all nsINavHistoryObserver methods in gHistoryObserver."}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8974506, "added": "review?(kmaglione+bmo@mozilla.com)"}], "who": "eoger@fastmail.com", "when": "2018-05-09T19:40:02Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(kmaglione+bmo@mozilla.com)", "attachment_id": 8974506, "added": "review+"}], "who": "kmaglione+bmo@mozilla.com", "when": "2018-05-09T19:46:02Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8974506, "added": "review+"}], "who": "eoger@fastmail.com", "when": "2018-05-09T19:46:24Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "Firefox 62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-10 09:55:10"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "ncsoregi@mozilla.com", "when": "2018-05-10T09:55:10Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "regression"}, {"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2018-05-10T20:24:13Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "qe-verify+"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "unaffected"}, {"removed": "---", "field_name": "cf_tracking_firefox62", "added": "blocking"}], "who": "ryanvm@gmail.com", "when": "2018-05-11T02:01:47Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "VERIFIED"}, {"removed": "", "field_name": "cc", "added": "daniel.bodea@softvision.ro"}, {"removed": "qe-verify+", "field_name": "flagtypes.name", "added": ""}, {"removed": "fixed", "field_name": "cf_status_firefox62", "added": "verified"}], "who": "daniel.bodea@softvision.ro", "when": "2018-06-06T12:10:13Z"}]}