{"cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Server Software", "creator": "willkg@mozilla.com", "mentors_detail": [], "depends_on": [], "creation_time": "2018-01-30T21:21:09Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "keywords": [], "summary": "remove GraphicsDeviceCronApp and related stored procedures", "cf_last_resolved": "2018-05-01T16:45:14Z", "attachments": [{"creator": "willkg@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/x-github-pull-request", "id": 8972221}], "assigned_to_detail": {"email": "willkg@mozilla.com", "id": 424160, "name": "willkg@mozilla.com", "real_name": "Will Kahn-Greene [:willkg] ET needinfo? me"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "comments": [{"text": "We have a graphics_devices postgres table that's fed by ingesting crash reports (also in postgres). That table is what backs the GraphicsDevice model that the signature report uses in some way.\n\nThis bug covers fixing the GraphicsDevice model to use Elasticsearch (if that's possible) and removing all the postgres bits (table, crontabber job that populates the table, related stored procedures, etc).\n\nIf that's not possible, then this bug covers figuring out another way to remove the postgres bits.", "author": "willkg@mozilla.com", "id": 13006441, "time": "2018-01-30T21:21:09Z"}, {"text": "Bumping this up to P2 to get done soon.", "author": "willkg@mozilla.com", "id": 13219777, "time": "2018-04-19T21:01:06Z"}, {"text": "Just to clarify, there is a sqlalchemy model \"GraphicsDevice\" (singular) which is backed by a \"graphics_device\" (singular) postgres table. The webapp uses a \"GraphicsDevices\" (plural) model which accesses the \"graphics_device\" table.\n\nThe graphics_device table has a lot of junk in it if \"vendor_hex\" and \"adapter_hex\" should be hex. Maybe that's a think we should look into some day. Probably after we wrap the graphics_device table with a real Django admin page that lets you see the table data.\n\nSpeaking of which, there's a page in the webapp admin that lets admin do lookups of vendor/adapter combos in the table and adjust their vendor name and adapter name. Further, you can add new combinations to the table.\n\nThe GraphicsDevices middleware is the only thing that accesses the graphics_device data. It's used by the signature report which shows graphics vendor/adapter facet enhanced by any vendor and adapter names in the graphics_device. If the items aren't in the table at all--that's fine.\n\nThe GraphicsDeviceCronApp runs update_graphics_devices.sql which looks at the last day of raw crashes for any new AdapterVendorID/AdapterDeviceID combinations and then inserts them into the table. We have these fields in ES as \"adapter_vendor_id\" and \"adapter_device_id\".\n\nGiven all that, I think we should just nix the cron app and stored procedures altogether. We don't need to be updating that table from raw crash data. Then we should switch the graphics_device table over to Django land. Then we should give that table a real admin page that lets you view the data, add new data, edit data.\n\nI'm going to delete the cron app and stored procedures in this bug. I'll write up a new bug for switching the graphics_device table over to Django land. We can deal with a new admin page when there's a need for it.", "author": "willkg@mozilla.com", "id": 13240231, "time": "2018-04-29T01:43:55Z"}, {"text": "Created attachment 8972221\npr 4426: fix bug 1440471, 1434425 - remove raw_update_channels and graphics_device related things", "author": "willkg@mozilla.com", "id": 13245356, "time": "2018-05-01T03:33:56Z"}, {"text": "Commits pushed to master at https://github.com/mozilla-services/socorro\n\nhttps://github.com/mozilla-services/socorro/commit/312c1070ae0d94632b6484818b9f64b165a94186\nfix bug 1434425: remove graphics_device things\n\nThis removes the stored procedures and crontabber app that updated the\ngraphics_device table.\n\nWe're going to move the table to Django land, so this doesn't touch that.\n\nhttps://github.com/mozilla-services/socorro/commit/ad9801d5d7e82350ed9c9b402d64bee83f395d53\nMerge pull request #4426 from willkg/1440471-1434425-raw-graphics\n\nfix bug 1440471, 1434425 - remove raw_update_channels and graphics_device related things", "author": "mozilla+bugcloser@davedash.com", "id": 13246502, "time": "2018-05-01T16:45:13Z"}], "id": 1434425, "priority": "P2", "platform": "Unspecified", "comment_count": 5, "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "---", "status": "RESOLVED", "product": "Socorro", "cf_fx_iteration": "---", "blocks": [1457747, 1257531], "qa_contact": "", "see_also": [], "cf_status_firefox_esr52": "---", "component": "General", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "---", "cc": [], "groups": [], "url": "", "creator_detail": {"email": "willkg@mozilla.com", "id": 424160, "name": "willkg@mozilla.com", "real_name": "Will Kahn-Greene [:willkg] ET needinfo? me"}, "whiteboard": "", "mentors": [], "cc_detail": [], "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-01T16:45:14Z", "cf_status_firefox_esr60": "---", "assigned_to": "willkg@mozilla.com", "is_open": false, "cf_qa_whiteboard": "", "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}], "who": "willkg@mozilla.com", "when": "2018-04-19T21:01:06Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1457747"}], "who": "willkg@mozilla.com", "when": "2018-04-29T01:45:25Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "willkg@mozilla.com"}, {"removed": "convert GraphicsDevices model to use Elasticsearch", "field_name": "summary", "added": "remove GraphicsDeviceCronApp and related stored procedures"}], "who": "willkg@mozilla.com", "when": "2018-04-29T01:46:07Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-01 16:45:14"}], "who": "mozilla+bugcloser@davedash.com", "when": "2018-05-01T16:45:14Z"}]}