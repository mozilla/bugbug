{"cf_tracking_thunderbird_esr52": "---", "status": "NEW", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "sledru@mozilla.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": ["crash"], "cc_detail": [{"email": "cdenizet@mozilla.com", "id": 560431, "name": "cdenizet@mozilla.com", "real_name": "Calixte Denizet (:calixte)"}, {"email": "jorendorff@mozilla.com", "id": 281791, "name": "jorendorff@mozilla.com", "real_name": "Jason Orendorff [:jorendorff]"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "tcampbell@mozilla.com", "id": 586681, "name": "tcampbell@mozilla.com", "real_name": "Ted Campbell [:tcampbell]"}], "cf_last_resolved": null, "attachments": [], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 7, "comments": [{"text": "This bug was filed from the Socorro interface and is\nreport bp-4f29ede8-673a-4d21-a766-ef49d0180418.\n=============================================================\n\nTop 10 frames of crashing thread:\n\n0 xul.dll mozilla::Vector<js::BindingName, 0, js::TempAllocPolicy>::growStorageBy mfbt/Vector.h:1054\n1 xul.dll js::frontend::NewFunctionScopeData js/src/frontend/Parser.cpp:1982\n2 xul.dll js::frontend::PerHandlerParser<js::frontend::FullParseHandler>::finishFunction js/src/frontend/Parser.cpp:2448\n3 xul.dll js::frontend::GeneralParser<js::frontend::FullParseHandler, char16_t>::functionFormalParametersAndBody js/src/frontend/Parser.cpp:3849\n4 xul.dll js::frontend::Parser<js::frontend::FullParseHandler, char16_t>::standaloneLazyFunction js/src/frontend/Parser.cpp:3701\n5 xul.dll js::frontend::CompileLazyFunction js/src/frontend/BytecodeCompiler.cpp:671\n6 xul.dll JSFunction::createScriptForLazilyInterpretedFunction js/src/vm/JSFunction.cpp:1626\n7 xul.dll JSFunction::getOrCreateScript js/src/vm/JSFunction.h:514\n8 xul.dll js::LazyScript::functionDelazifying js/src/vm/JSScript-inl.h:81\n9 xul.dll JSFunction::createScriptForLazilyInterpretedFunction js/src/vm/JSFunction.cpp:1606\n\n=============================================================\n\nhttps://codecov.io/gh/marco-c/gecko-dev/src/master/js/src/frontend/Parser.cpp#L3655\nI guess it doesn't help that standaloneLazyFunction isn't covered by tests...", "author": "sledru@mozilla.com", "id": 13221204, "time": "2018-04-20T12:34:15Z"}, {"text": "This is a startup crash on release.", "author": "sledru@mozilla.com", "id": 13221208, "time": "2018-04-20T12:36:19Z"}, {"text": "> https://codecov.io/gh/marco-c/gecko-dev/src/master/js/src/frontend/Parser.cpp#L3655\n> I guess it doesn't help that standaloneLazyFunction isn't covered by tests...\n\nThe coverage data is quite wrong about this! If I add a MOZ_CRASH in standaloneLazyFunction, then run JS shell tests locally, almost every test crashes. This is some of the most-exercised code in the tree.\n\nIt's curious that we're able to run any tests at all without hitting this. Where does the coverage data come from?", "author": "jorendorff@mozilla.com", "id": 13235469, "time": "2018-04-26T14:44:05Z"}, {"text": "Marco should know better than I do!", "author": "sledru@mozilla.com", "id": 13235510, "time": "2018-04-26T14:52:41Z"}, {"text": "Talking on IRC with nbp, the JS engine disables lazy parsing when it collects code coverage. This is why the function is not executed in the code coverage configuration.\n\nOne way to solve it would be to have two builds, one for C++ coverage and one for JS coverage, but this would double the AWS costs.\nAnother way would be to make the SpiderMonkey shell tests run in coverage mode too (and without collecting JS coverage in those cases, since it's useless), there's some work in progress in bug 1362013, but it appears to be stalled.", "author": "mcastelluccio@mozilla.com", "id": 13235628, "time": "2018-04-26T15:08:29Z"}, {"text": "Setting aside the code coverage fun, I don't think this is actionable. Nothing distinguishes it from generic heap corruption.\n\nDiscussed on IRC with Jeff. The impractical ideas we have are all things like:\n\n- Use a more hardened malloc impl on Nightly\n- Use a separate malloc heap for JS vs. the rest of Firefox", "author": "jorendorff@mozilla.com", "id": 13243959, "time": "2018-04-30T18:39:21Z"}, {"text": "(In reply to Jason Orendorff [:jorendorff] from comment #5)\n> - Use a separate malloc heap for JS vs. the rest of Firefox\n\nWe did this in Bug 1410132.", "author": "tcampbell@mozilla.com", "id": 13244598, "time": "2018-04-30T20:23:00Z"}], "id": 1455595, "priority": "P5", "cc": ["cdenizet@mozilla.com", "jorendorff@mozilla.com", "mcastelluccio@mozilla.com", "tcampbell@mozilla.com"], "cf_crash_signature": "[@ mozilla::Vector<T>::growStorageBy]", "version": "Trunk", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "", "creation_time": "2018-04-20T12:34:15Z", "cf_status_firefox_esr52": "wontfix", "component": "JavaScript Engine", "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "affected", "cf_status_firefox60": "affected", "target_milestone": "---", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "critical", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "sledru@mozilla.com", "id": 495955, "name": "sledru@mozilla.com", "real_name": "Sylvestre Ledru [:sylvestre]"}, "whiteboard": "[#jsapi:crashes-retriage]", "mentors": [], "summary": "Crash in mozilla::Vector<T>::growStorageBy", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-04-30T20:23:00Z", "assigned_to": "nobody@mozilla.org", "is_open": true, "history": [{"changes": [{"removed": "", "field_name": "keywords", "added": "topcrash"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox59", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "affected"}], "who": "sledru@mozilla.com", "when": "2018-04-20T12:35:00Z"}, {"changes": [{"removed": "topcrash", "field_name": "keywords", "added": ""}], "who": "sledru@mozilla.com", "when": "2018-04-20T12:36:19Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "cdenizet@mozilla.com"}], "who": "cdenizet@mozilla.com", "when": "2018-04-20T12:42:57Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jorendorff@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(sledru@mozilla.com)"}], "who": "jorendorff@mozilla.com", "when": "2018-04-26T14:44:05Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": "[#jsapi:crashes-retriage]"}], "who": "jorendorff@mozilla.com", "when": "2018-04-26T14:50:00Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}, {"removed": "needinfo?(sledru@mozilla.com)", "field_name": "flagtypes.name", "added": "needinfo?(mcastelluccio@mozilla.com)"}], "who": "sledru@mozilla.com", "when": "2018-04-26T14:52:23Z"}, {"changes": [{"removed": "needinfo?(mcastelluccio@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "mcastelluccio@mozilla.com", "when": "2018-04-26T15:08:29Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P5"}], "who": "jorendorff@mozilla.com", "when": "2018-04-30T18:39:21Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "tcampbell@mozilla.com"}], "who": "tcampbell@mozilla.com", "when": "2018-04-30T20:23:00Z"}], "resolution": "", "op_sys": "Windows 10", "cf_fx_points": "---", "cf_blocking_fennec": "---"}