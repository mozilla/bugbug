{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "jruderman@gmail.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": ["crash", "regression", "testcase"], "summary": "Crash [@ mozilla::WebAudioDecodeJob::SizeOfExcludingThis]", "cf_last_resolved": "2015-11-18T16:04:23Z", "attachments": [{"creator": "jruderman@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/html", "id": 8687773}, {"creator": "jruderman@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8687775}, {"creator": "karlt@mozbugz.karlt.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-11-17T02:07:18Z", "type_id": 4, "creation_date": "2015-11-17T01:50:27Z", "id": 1293624, "setter": "erahm@mozilla.com"}, {"status": "+", "name": "approval-mozilla-aurora", "modification_date": "2015-11-19T16:02:25Z", "type_id": 720, "creation_date": "2015-11-19T16:02:25Z", "id": 1295773, "setter": "lhenry@mozilla.com"}], "content_type": "text/plain", "id": 8688193}, {"creator": "karlt@mozbugz.karlt.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-11-17T10:10:06Z", "type_id": 4, "creation_date": "2015-11-17T01:51:22Z", "id": 1293625, "setter": "padenot@mozilla.com"}, {"status": "+", "name": "approval-mozilla-aurora", "modification_date": "2015-11-19T16:00:27Z", "type_id": 720, "creation_date": "2015-11-19T05:07:17Z", "id": 1295486, "setter": "lhenry@mozilla.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2015-11-19T16:00:27Z", "type_id": 721, "creation_date": "2015-11-19T05:07:17Z", "id": 1295487, "setter": "lhenry@mozilla.com"}], "content_type": "text/plain", "id": 8688194}, {"creator": "karlt@mozbugz.karlt.net", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "approval-mozilla-beta", "modification_date": "2015-11-19T16:01:26Z", "type_id": 721, "creation_date": "2015-11-19T16:01:26Z", "id": 1295770, "setter": "lhenry@mozilla.com"}], "content_type": "text/plain", "id": 8689325}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_status_firefox45": "fixed", "cf_has_regression_range": "---", "comment_count": 17, "comments": [{"text": "Created attachment 8687773\ntestcase (requires extension)\n\nThe testcase crashes [@ mozilla::WebAudioDecodeJob::SizeOfExcludingThis].\n\n(It might trip bug 1222202 first, but that's probably unrelated).\n\nThe testcase calls fuzzPriv.getMemoryReports, which does pretty much the same calls as clicking \"Measure\" in about:memory, but lets the testcase control the timing. Run with https://github.com/MozillaSecurity/funfuzz/tree/master/dom/extension installed in a temporary profile. (Or modify the testcase so the timing doesn't need to be so precise?)", "author": "jruderman@gmail.com", "id": 10934646, "time": "2015-11-16T04:59:51Z"}, {"text": "Created attachment 8687775\nstack", "author": "jruderman@gmail.com", "id": 10934650, "time": "2015-11-16T05:01:24Z"}, {"text": "Thanks.  Similar to bug 1221855.\n\nI should fix this too:\nhttps://hg.mozilla.org/mozilla-central/annotate/a8ed7dd831d1/dom/media/webaudio/AudioDestinationNode.cpp#l181", "author": "karlt@mozbugz.karlt.net", "id": 10934659, "time": "2015-11-16T05:13:50Z"}, {"text": "Created attachment 8688193\ntest no crashes in decodeAudioData() and offline context memory reporting\n\nThe testing of the offline context is limited due to bug 1225282, but does\ncatch the crash fixed here.", "author": "karlt@mozbugz.karlt.net", "id": 10938028, "time": "2015-11-17T01:50:27Z"}, {"text": "Created attachment 8688194\nnull-check mBuffer in SizeOfExcludingThis()", "author": "karlt@mozbugz.karlt.net", "id": 10938029, "time": "2015-11-17T01:51:22Z"}, {"text": "Comment on attachment 8688193\ntest no crashes in decodeAudioData() and offline context memory reporting\n\nReview of attachment 8688193:\n-----------------------------------------------------------------\n\n::: dom/media/webaudio/test/test_WebAudioMemoryReporting.html\n@@ +46,5 @@\n>  SpecialPowers.Cc[\"@mozilla.org/memory-reporter-manager;1\"].\n>    getService(SpecialPowers.Ci.nsIMemoryReporterManager).\n>    getReports(handleReport, null, finished, null, /* anonymized = */ false);\n>  \n> +ac.decodeAudioData(new ArrayBuffer(4), function(){}, function(){});\n\nmin: maybe add a note here about what we're trying to do. Is the goal to run |decodeAudioData| while reporting memory?", "author": "erahm@mozilla.com", "id": 10938039, "time": "2015-11-17T02:07:18Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/3c4b0d791c5d\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/4c1b0d416870", "author": "pulsebot@bots.tld", "id": 10941300, "time": "2015-11-17T21:58:19Z"}, {"text": "(In reply to Eric Rahm [:erahm] from comment #5)\n> min: maybe add a note here about what we're trying to do. Is the goal to run\n> |decodeAudioData| while reporting memory?\n\nYes.  Added a note.", "author": "karlt@mozbugz.karlt.net", "id": 10941721, "time": "2015-11-18T00:06:28Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/3c4b0d791c5d\nhttps://hg.mozilla.org/mozilla-central/rev/4c1b0d416870", "author": "cbook@mozilla.com", "id": 10943597, "time": "2015-11-18T16:04:23Z"}, {"text": "Created attachment 8689325\n43 branch: test no crashes in decodeAudioData() and offline context memory reporting\n\nUse this instead of attachment 8688193 on 43 branch, which does not have bug 1194555 fixed.", "author": "karlt@mozbugz.karlt.net", "id": 10946056, "time": "2015-11-19T05:03:35Z"}, {"text": "Comment on attachment 8688194\nnull-check mBuffer in SizeOfExcludingThis()\n\nApproval Request Comment\n[Feature/regressing bug #]: bug 1199559\n[User impact if declined]: potential null-deref crash after running about:memory while OfflineAudioContext or decodeAudioData() is in use.\n[Describe test coverage new/current, TreeHerder]: new test.\n[Risks and why]: very low.  simple null check.\nThis is the same fix as was uplifted for bug 1221855 in different code.\n[String/UUID change made/needed]: none.", "author": "karlt@mozbugz.karlt.net", "id": 10946062, "time": "2015-11-19T05:07:17Z"}, {"text": "Comment on attachment 8688194\nnull-check mBuffer in SizeOfExcludingThis()\n\nPlease uplift to aurora and beta, crash fix, includes a test.", "author": "lhenry@mozilla.com", "id": 10947516, "time": "2015-11-19T16:00:27Z"}, {"text": "Comment on attachment 8689325\n43 branch: test no crashes in decodeAudioData() and offline context memory reporting\n\n[Triage Comment]\n\nTest for crash fix. Please uplift this to beta (instead of attachment 8688193)", "author": "lhenry@mozilla.com", "id": 10947520, "time": "2015-11-19T16:01:26Z"}, {"text": "Comment on attachment 8688193\ntest no crashes in decodeAudioData() and offline context memory reporting\n\n[Triage Comment]\n\nTest for crash fix, ok to uplift to aurora.", "author": "lhenry@mozilla.com", "id": 10947530, "time": "2015-11-19T16:02:25Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-aurora/rev/0988f97bcef0\nhttps://hg.mozilla.org/releases/mozilla-aurora/rev/a551f6125d8c", "author": "kwierso@gmail.com", "id": 10948288, "time": "2015-11-19T19:15:40Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/73f660f039c4\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/996c7627ef12", "author": "kwierso@gmail.com", "id": 10948495, "time": "2015-11-19T20:06:33Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-b2g44_v2_5/rev/0988f97bcef0\nhttps://hg.mozilla.org/releases/mozilla-b2g44_v2_5/rev/a551f6125d8c", "author": "cbook@mozilla.com", "id": 10951059, "time": "2015-11-20T13:37:17Z"}], "id": 1225003, "priority": "P1", "cc": ["cbook@mozilla.com", "cdiehl@mozilla.com", "erahm@mozilla.com", "karlt@mozbugz.karlt.net", "kwierso@gmail.com", "mreavy@mozilla.com", "padenot@mozilla.com"], "cf_crash_signature": "[@ mozilla::WebAudioDecodeJob::SizeOfExcludingThis]", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_rank": "10", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [875414, 1199559], "qa_contact": "", "creation_time": "2015-11-16T04:59:51Z", "cf_status_firefox_esr52": "---", "component": "Web Audio", "assigned_to_detail": {"email": "karlt@mozbugz.karlt.net", "id": 274246, "name": "karlt@mozbugz.karlt.net", "real_name": "Karl Tomlinson (back June 19 :karlt)"}, "cf_tracking_firefox_esr60": "---", "alias": null, "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "cf_status_firefox43": "fixed", "cf_status_firefox42": "unaffected", "target_milestone": "mozilla45", "cf_status_firefox44": "fixed", "is_cc_accessible": true, "severity": "critical", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "jruderman@gmail.com", "id": 11608, "name": "jruderman@gmail.com", "real_name": "Jesse Ruderman"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "cbook@mozilla.com", "id": 277293, "name": "cbook@mozilla.com", "real_name": "Carsten Book [:Tomcat]"}, {"email": "cdiehl@mozilla.com", "id": 368570, "name": "cdiehl@mozilla.com", "real_name": "Christoph Diehl [:posidron]"}, {"email": "erahm@mozilla.com", "id": 496127, "name": "erahm@mozilla.com", "real_name": "Eric Rahm [:erahm] (please no mozreview requests)"}, {"email": "karlt@mozbugz.karlt.net", "id": 274246, "name": "karlt@mozbugz.karlt.net", "real_name": "Karl Tomlinson (back June 19 :karlt)"}, {"email": "kwierso@gmail.com", "id": 308534, "name": "kwierso@gmail.com", "real_name": "Wes Kocher (:KWierso)"}, {"email": "mreavy@mozilla.com", "id": 74434, "name": "mreavy@mozilla.com", "real_name": "Maire Reavy [:mreavy] Plz needinfo?"}, {"email": "padenot@mozilla.com", "id": 404637, "name": "padenot@mozilla.com", "real_name": "Paul Adenot (:padenot)"}], "cf_has_str": "---", "cf_status_b2g_2_5": "fixed", "dupe_of": null, "flags": [{"status": "+", "name": "in-testsuite", "modification_date": "2015-11-18T00:06:28Z", "type_id": 37, "creation_date": "2015-11-18T00:06:28Z", "id": 1294467, "setter": "karlt@mozbugz.karlt.net"}], "last_change_time": "2015-11-20T13:37:17Z", "assigned_to": "karlt@mozbugz.karlt.net", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "keywords", "added": "regression"}, {"removed": "--", "field_name": "priority", "added": "P1"}, {"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "", "field_name": "blocks", "added": "1199559"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "karlt@mozbugz.karlt.net"}, {"removed": "---", "field_name": "cf_status_firefox42", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox43", "added": "affected"}, {"removed": "---", "field_name": "cf_status_firefox44", "added": "affected"}], "who": "karlt@mozbugz.karlt.net", "when": "2015-11-16T05:13:50Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8688193, "added": "review?(erahm@mozilla.com)"}], "who": "karlt@mozbugz.karlt.net", "when": "2015-11-17T01:50:27Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8688194, "added": "review?(padenot@mozilla.com)"}], "who": "karlt@mozbugz.karlt.net", "when": "2015-11-17T01:51:22Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(erahm@mozilla.com)", "attachment_id": 8688193, "added": "review+"}], "who": "erahm@mozilla.com", "when": "2015-11-17T02:07:18Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(padenot@mozilla.com)", "attachment_id": 8688194, "added": "review+"}], "who": "padenot@mozilla.com", "when": "2015-11-17T10:10:06Z"}, {"changes": [{"removed": "", "field_name": "cf_rank", "added": "10"}], "who": "mreavy@mozilla.com", "when": "2015-11-17T17:48:24Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "in-testsuite+"}], "who": "karlt@mozbugz.karlt.net", "when": "2015-11-18T00:06:28Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla45"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-11-18 08:04:23"}, {"removed": "affected", "field_name": "cf_status_firefox45", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2015-11-18T16:04:23Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8688194, "added": "approval-mozilla-aurora?, approval-mozilla-beta?"}], "who": "karlt@mozbugz.karlt.net", "when": "2015-11-19T05:07:17Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-aurora?, approval-mozilla-beta?", "attachment_id": 8688194, "added": "approval-mozilla-aurora+, approval-mozilla-beta+"}], "who": "lhenry@mozilla.com", "when": "2015-11-19T16:00:27Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8689325, "added": "approval-mozilla-beta+"}], "who": "lhenry@mozilla.com", "when": "2015-11-19T16:01:26Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8688193, "added": "approval-mozilla-aurora+"}], "who": "lhenry@mozilla.com", "when": "2015-11-19T16:02:25Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox44", "added": "fixed"}], "who": "kwierso@gmail.com", "when": "2015-11-19T19:15:40Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox43", "added": "fixed"}], "who": "kwierso@gmail.com", "when": "2015-11-19T20:06:33Z"}, {"changes": [{"removed": "---", "field_name": "cf_status_b2g_2_5", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2015-11-20T13:37:17Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}