{"attachments": [{"creator": "pulgasaur@mozilla.bugs", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-22T11:17:20Z", "type_id": 4, "creation_date": "2018-05-21T12:31:37Z", "id": 1759439, "setter": "igoldan@mozilla.com"}, {"status": "+", "name": "feedback", "modification_date": "2018-05-22T18:11:59Z", "type_id": 607, "creation_date": "2018-05-21T12:31:37Z", "id": 1759440, "setter": "wlachance@mozilla.com"}], "content_type": "text/x-github-pull-request", "id": 8979207}, {"creator": "pulgasaur@mozilla.bugs", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-23T18:55:50Z", "type_id": 4, "creation_date": "2018-05-22T18:55:17Z", "id": 1760160, "setter": "cdawson@mozilla.com"}], "content_type": "text/x-github-pull-request", "id": 8979692}], "classification": "Other", "creator": "emorley@mozilla.com", "mentors_detail": [], "depends_on": [], "creation_time": "2018-05-21T10:33:09Z", "cf_user_story": "", "is_open": false, "keywords": [], "summary": "Update to AngularJS 1.7", "cf_last_resolved": "2018-05-23T19:03:54Z", "assigned_to_detail": {"email": "emorley@mozilla.com", "id": 373476, "name": "emorley@mozilla.com", "real_name": "Ed Morley [:emorley]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "comments": [{"text": "The AngularJS 1.7 release is the last breaking change release of AngularJS (they treat minor versions as breaking):\nhttps://github.com/angular/angular.js/blob/master/CHANGELOG.md#170-nonexistent-physiology-2018-05-11\n\nIn it they have removed the `$compileProvider.preAssignBindingsEnabled()` flag, which allowed reverting to the pre-AngularJS 1.6 behaviour:\nhttps://github.com/angular/angular.js/blob/master/CHANGELOG.md#compile-due-to\nhttps://github.com/angular/angular.js/commit/38f8c97af74649ce224b6dd45f433cc665acfbfb\nhttps://github.com/angular/angular.js/pull/15782\n\nIn order to update to 1.7 we'll need to fix the issue preAssignBindingsEnabled worked around.\n\nThe Renovate PR is here:\nhttps://github.com/mozilla/treeherder/pull/3542", "author": "emorley@mozilla.com", "id": 13293747, "time": "2018-05-21T10:33:09Z"}, {"text": "Created attachment 8979207\nLink to GitHub pull-request: https://github.com/mozilla/treeherder/pull/3567", "author": "pulgasaur@mozilla.bugs", "id": 13293869, "time": "2018-05-21T12:12:59Z"}, {"text": "Commit pushed to master at https://github.com/mozilla/treeherder\n\nhttps://github.com/mozilla/treeherder/commit/607b447820e432c2560770219e35a72bb8c54aeb\nBug 1463079 - Remove the preAssignBindingsEnabled workaround (#3567)\n\nAngularJS 1.6 changed the way controller bindings were initialised,\nbut allowed users to revert to the previous behaviour by setting\n`preAssignBindingsEnabled(true)`.\n\nAs part of our upgrade from AngularJS 1.5 to 1.6, we set that pref\nin Perfherder, to fix the bug 1428958 regression.\n\nHowever AngularJS 1.7 has now removed the pref, so we need to actually\nfix the root cause - by moving any controller logic that is dependant\non the bindings into the `.$onInit()` method, which is only called\nafter all of the bindings are guaranteed to exist.\n\nSee:\nhttps://docs.angularjs.org/guide/migration#migrate1.5to1.6-ng-services-$compile\n\nTesting this locally shows the regression in bug 1428958 no longer\noccurs, and as far as I can tell all other functionality in Perfherder\nworks fine (and there are no new exceptions seen in the console).", "author": "treeherderbugbot@gmail.com", "id": 13297479, "time": "2018-05-22T18:32:21Z"}, {"text": "Created attachment 8979692\nLink to GitHub pull-request: https://github.com/mozilla/treeherder/pull/3570", "author": "pulgasaur@mozilla.bugs", "id": 13297504, "time": "2018-05-22T18:41:30Z"}, {"text": "Commit pushed to master at https://github.com/mozilla/treeherder\n\nhttps://github.com/mozilla/treeherder/commit/c89fa8cfcb9dff5da056e5930d8b9d8087994728\nBug 1463079 - Update to AngularJS 1.7 (#3570)\n\nChangelog:\nhttps://github.com/angular/angular.js/blob/master/CHANGELOG.md#170-nonexistent-physiology-2018-05-11\n\n`PluginCtrl` has been updated to correctly cancel the `$http` requests\nmade by `selectJob`, since previously they were silently failing to be\ncancelled, whereas under AngularJS 1.7 an exception is raised if\n`$timeout` is used incorrectly:\nhttps://code.angularjs.org/snapshot/docs/guide/migration#-timeout-\n\nThe usage of `$timeout` has been removed in favour of this pattern:\nhttps://odetocode.com/blogs/scott/archive/2014/04/24/canceling-http-requests-in-angularjs.aspx\n\nCloses #3542.", "author": "treeherderbugbot@gmail.com", "id": 13300359, "time": "2018-05-23T19:02:38Z"}], "id": 1463079, "priority": "P2", "platform": "Unspecified", "comment_count": 5, "version": "---", "is_cc_accessible": true, "status": "RESOLVED", "product": "Tree Management", "blocks": [], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Treeherder: Frontend", "votes": 0, "groups": [], "target_milestone": "---", "cc": ["cdawson@mozilla.com", "emorley@mozilla.com", "igoldan@mozilla.com", "wlachance@mozilla.com"], "url": "", "creator_detail": {"email": "emorley@mozilla.com", "id": 373476, "name": "emorley@mozilla.com", "real_name": "Ed Morley [:emorley]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "cdawson@mozilla.com", "id": 392439, "name": "cdawson@mozilla.com", "real_name": "Cameron Dawson [:camd]"}, {"email": "emorley@mozilla.com", "id": 373476, "name": "emorley@mozilla.com", "real_name": "Ed Morley [:emorley]"}, {"email": "igoldan@mozilla.com", "id": 590618, "name": "igoldan@mozilla.com", "real_name": "Ionu\u021b Goldan [:igoldan], Performance Sheriffing"}, {"email": "wlachance@mozilla.com", "id": 420096, "name": "wlachance@mozilla.com", "real_name": "William Lachance (:wlach) (use needinfo!)"}], "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-23T19:03:54Z", "assigned_to": "emorley@mozilla.com", "cf_qa_whiteboard": "", "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "igoldan@mozilla.com, wlachance@mozilla.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8979207, "added": "review?(igoldan@mozilla.com), feedback?(wlachance@mozilla.com)"}], "who": "emorley@mozilla.com", "when": "2018-05-21T12:31:37Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "", "field_name": "cc", "added": "emorley@mozilla.com"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "emorley@mozilla.com"}], "who": "emorley@mozilla.com", "when": "2018-05-21T12:31:46Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(igoldan@mozilla.com)", "attachment_id": 8979207, "added": "review+"}], "who": "igoldan@mozilla.com", "when": "2018-05-22T11:17:20Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "feedback?(wlachance@mozilla.com)", "attachment_id": 8979207, "added": "feedback+"}], "who": "wlachance@mozilla.com", "when": "2018-05-22T18:11:59Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "cdawson@mozilla.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8979692, "added": "review?(cdawson@mozilla.com)"}], "who": "emorley@mozilla.com", "when": "2018-05-22T18:55:17Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(cdawson@mozilla.com)", "attachment_id": 8979692, "added": "review+"}], "who": "cdawson@mozilla.com", "when": "2018-05-23T18:55:50Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-23 19:03:54"}], "who": "emorley@mozilla.com", "when": "2018-05-23T19:03:54Z"}]}