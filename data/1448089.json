{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "lovecs0079@gmail.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "fixed", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86_64", "cf_status_firefox59": "wontfix", "keywords": ["crash"], "cc_detail": [{"email": "mozillamarcia.knous@gmail.com", "id": 8519, "name": "mozillamarcia.knous@gmail.com", "real_name": "Marcia Knous [:marcia - needinfo? me]"}, {"email": "nicolas.b.pierron@mozilla.com", "id": 422187, "name": "nicolas.b.pierron@mozilla.com", "real_name": "Nicolas B. Pierron [:nbp] {backlog: 36}"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "tcampbell@mozilla.com", "id": 586681, "name": "tcampbell@mozilla.com", "real_name": "Ted Campbell [:tcampbell]"}], "cf_last_resolved": "2018-04-21T09:39:31Z", "attachments": [{"creator": "nicolas.b.pierron@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-19T20:01:29Z", "type_id": 4, "creation_date": "2018-04-19T14:32:33Z", "id": 1746326, "setter": "tcampbell@mozilla.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-04-23T14:39:12Z", "type_id": 721, "creation_date": "2018-04-23T11:51:54Z", "id": 1747638, "setter": "lhenry@mozilla.com"}], "content_type": "text/plain", "id": 8969301}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 11, "comments": [{"text": "This bug was filed from the Socorro interface and is\nreport bp-41a47bd8-d567-4535-a6bc-65f841180322.\n=============================================================\n\nTop 10 frames of crashing thread:\n\n0 xul.dll js::AutoEnterOOMUnsafeRegion::crash js/src/jscntxt.cpp:1651\n1 xul.dll js::jit::MBasicBlock::addPredecessorSameInputsAs js/src/jit/MIRGraph.cpp:1169\n2 xul.dll UpdateTestSuccessors js/src/jit/IonAnalysis.cpp:773\n3 xul.dll MaybeFoldConditionBlock js/src/jit/IonAnalysis.cpp:893\n4 xul.dll js::jit::OptimizeMIR js/src/jit/Ion.cpp:1480\n5 xul.dll js::jit::CompileBackEnd js/src/jit/Ion.cpp:1980\n6 xul.dll js::HelperThread::handleIonWorkload js/src/vm/HelperThreads.cpp:1908\n7 xul.dll js::HelperThread::threadLoop js/src/vm/HelperThreads.cpp:2297\n8 xul.dll js::detail::ThreadTrampoline<void  js/src/threading/Thread.h:235\n9 ucrtbase.dll thread_start<unsigned int > \n\n=============================================================", "author": "lovecs0079@gmail.com", "id": 13149226, "time": "2018-03-22T18:03:52Z"}, {"text": "This bug sounds easily fixable by making addPredecessorSameInputAs fallible by using the Result type.", "author": "nicolas.b.pierron@mozilla.com", "id": 13217778, "time": "2018-04-19T08:47:51Z"}, {"text": "Created attachment 8969301\nMake MBasicBlock::addPredecessorSameInputsAs fallible.", "author": "nicolas.b.pierron@mozilla.com", "id": 13218640, "time": "2018-04-19T14:32:33Z"}, {"text": "Pushed by ryanvm@gmail.com:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/131166cff47d\nMake MBasicBlock::addPredecessorSameInputsAs fallible. r=tcampbell", "author": "pulsebot@bots.tld", "id": 13222433, "time": "2018-04-20T20:17:10Z"}, {"text": "Pushed by sfink@mozilla.com:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/d9f508d0e46e\nfollowup, remove now-unused variable to fix a CLOSED TREE.", "author": "pulsebot@bots.tld", "id": 13222467, "time": "2018-04-20T20:34:26Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/131166cff47d\nhttps://hg.mozilla.org/mozilla-central/rev/d9f508d0e46e", "author": "apavel@mozilla.com", "id": 13223249, "time": "2018-04-21T09:39:31Z"}, {"text": "Whether we ship this in Fx60 or not, I'd like to keep this on the radar for possible ESR60 uplift eventually since the crash volume looks non-trivial.", "author": "ryanvm@gmail.com", "id": 13226024, "time": "2018-04-23T09:10:44Z"}, {"text": "(In reply to Ryan VanderMeulen [:RyanVM] from comment #6)\n> Whether we ship this in Fx60 or not, I'd like to keep this on the radar for\n> possible ESR60 uplift eventually since the crash volume looks non-trivial.\n\nYes, these patches should be safe to uplift, and remove ~175 crashes/week when it moves to release.\n\n(In reply to Pulsebot from comment #4)\n> Pushed by sfink@mozilla.com:\n> https://hg.mozilla.org/integration/mozilla-inbound/rev/d9f508d0e46e\n> followup, remove now-unused variable to fix a CLOSED TREE.\n\nThanks.", "author": "nicolas.b.pierron@mozilla.com", "id": 13226142, "time": "2018-04-23T10:08:33Z"}, {"text": "Comment on attachment 8969301\nMake MBasicBlock::addPredecessorSameInputsAs fallible.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Bug 1028580\n[User impact if declined]: Unlikely crashes on OOM.\n[Is this code covered by automated tests?]: No, not easy to cover error handling code.\n[Has the fix been verified in Nightly?]: Yes\n[Needs manual test from QE? If yes, steps to reproduce]:  No\n[List of other uplifts needed for the feature/fix]: (both patches from this bug)\n[Is the change risky?]: No.\n[Why is the change risky/not risky?]: Usage of MOZ_MUST_USE and simple patch.\n[String changes made/needed]: None.", "author": "nicolas.b.pierron@mozilla.com", "id": 13226273, "time": "2018-04-23T11:51:54Z"}, {"text": "Comment on attachment 8969301\nMake MBasicBlock::addPredecessorSameInputsAs fallible.\n\nFix for OOM crash, let's uplift for beta 15.", "author": "lhenry@mozilla.com", "id": 13226605, "time": "2018-04-23T14:39:12Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/dc7d484e8d3d\nhttps://hg.mozilla.org/releases/mozilla-beta/rev/e378f069dee4", "author": "aryx.bugmail@gmx-topmail.de", "id": 13228697, "time": "2018-04-24T06:17:23Z"}], "id": 1448089, "priority": "P2", "cc": ["mozillamarcia.knous@gmail.com", "nicolas.b.pierron@mozilla.com", "ryanvm@gmail.com", "tcampbell@mozilla.com"], "cf_crash_signature": "[@ OOM | unknown | js::AutoEnterOOMUnsafeRegion::crash | js::jit::MBasicBlock::addPredecessorSameInputsAs]", "version": "59 Branch", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "", "creation_time": "2018-03-22T18:03:52Z", "cf_status_firefox_esr52": "wontfix", "component": "JavaScript Engine: JIT", "assigned_to_detail": {"email": "nicolas.b.pierron@mozilla.com", "id": 422187, "name": "nicolas.b.pierron@mozilla.com", "real_name": "Nicolas B. Pierron [:nbp] {backlog: 36}"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "fixed", "cf_status_firefox60": "fixed", "target_milestone": "mozilla61", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "lovecs0079@gmail.com", "id": 568355, "name": "lovecs0079@gmail.com", "real_name": "Mingzheng Ji"}, "whiteboard": "", "mentors": [], "summary": "Crash in OOM | unknown | js::AutoEnterOOMUnsafeRegion::crash | js::jit::MBasicBlock::addPredecessorSameInputsAs", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-07T19:37:15Z", "assigned_to": "nicolas.b.pierron@mozilla.com", "is_open": false, "history": [{"changes": [{"removed": "UNCONFIRMED", "field_name": "status", "added": "NEW"}, {"removed": "", "field_name": "cc", "added": "mozillamarcia.knous@gmail.com"}, {"removed": "General", "field_name": "component", "added": "JavaScript Engine: JIT"}, {"removed": "Firefox", "field_name": "product", "added": "Core"}, {"removed": "0", "field_name": "is_confirmed", "added": "1"}, {"removed": "---", "field_name": "cf_status_firefox59", "added": "affected"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "affected"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "affected"}], "who": "mozillamarcia.knous@gmail.com", "when": "2018-03-22T18:13:53Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}, {"removed": "", "field_name": "cc", "added": "nicolas.b.pierron@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(nicolas.b.pierron@mozilla.com)"}, {"removed": "affected", "field_name": "cf_status_firefox61", "added": "fix-optional"}], "who": "nicolas.b.pierron@mozilla.com", "when": "2018-04-19T08:47:51Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8969301, "added": "review?(tcampbell@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "tcampbell@mozilla.com"}], "who": "nicolas.b.pierron@mozilla.com", "when": "2018-04-19T14:32:33Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(tcampbell@mozilla.com)", "attachment_id": 8969301, "added": "review+"}], "who": "tcampbell@mozilla.com", "when": "2018-04-19T20:01:29Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}, {"removed": "needinfo?(nicolas.b.pierron@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "nicolas.b.pierron@mozilla.com", "when": "2018-04-20T13:34:52Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "crash"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "nicolas.b.pierron@mozilla.com"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "wontfix"}, {"removed": "affected", "field_name": "cf_status_firefox59", "added": "wontfix"}, {"removed": "affected", "field_name": "cf_status_firefox60", "added": "fix-optional"}], "who": "ryanvm@gmail.com", "when": "2018-04-20T19:33:42Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}], "who": "pulsebot@bots.tld", "when": "2018-04-20T20:17:10Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla61"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-04-21 09:39:31"}, {"removed": "fix-optional", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "apavel@mozilla.com", "when": "2018-04-21T09:39:31Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(nicolas.b.pierron@mozilla.com)"}, {"removed": "---", "field_name": "cf_tracking_firefox_esr60", "added": "?"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "affected"}], "who": "ryanvm@gmail.com", "when": "2018-04-23T09:10:44Z"}, {"changes": [{"removed": "needinfo?(nicolas.b.pierron@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "nicolas.b.pierron@mozilla.com", "when": "2018-04-23T10:08:33Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8969301, "added": "approval-mozilla-beta?"}], "who": "nicolas.b.pierron@mozilla.com", "when": "2018-04-23T11:51:54Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8969301, "added": "approval-mozilla-beta+"}], "who": "lhenry@mozilla.com", "when": "2018-04-23T14:39:12Z"}, {"changes": [{"removed": "fix-optional", "field_name": "cf_status_firefox60", "added": "fixed"}], "who": "aryx.bugmail@gmx-topmail.de", "when": "2018-04-24T06:17:23Z"}, {"changes": [{"removed": "?", "field_name": "cf_tracking_firefox_esr60", "added": "---"}, {"removed": "affected", "field_name": "cf_status_firefox_esr60", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-07T19:37:15Z"}], "resolution": "FIXED", "op_sys": "Windows 10", "cf_fx_points": "---", "cf_blocking_fennec": "---"}