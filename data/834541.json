{"cf_tracking_thunderbird_esr52": "---", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "mak77@bonardo.net", "mentors_detail": [], "depends_on": [1101478, 1103938], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "All", "keywords": [], "cc_detail": [{"email": "asmodeusme@yahoo.com", "id": 420570, "name": "asmodeusme@yahoo.com", "real_name": "Willy_ Foo_Foo"}, {"email": "jchaulk@mozilla.com", "id": 499318, "name": "jchaulk@mozilla.com", "real_name": "Jenn Chaulk (:jchaulk)"}, {"email": "mak77@bonardo.net", "id": 240353, "name": "mak77@bonardo.net", "real_name": "Marco Bonardo [::mak]"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "standard8@mozilla.com", "id": 112088, "name": "standard8@mozilla.com", "real_name": "Mark Banner (:standard8)"}, {"email": "taras.mozilla@glek.net", "id": 261603, "name": "taras.mozilla@glek.net", "real_name": "(dormant account)"}, {"email": "ttaubert@mozilla.com", "id": 402526, "name": "ttaubert@mozilla.com", "real_name": "Tim Taubert [:ttaubert] (inactive)"}], "cf_last_resolved": "2018-05-10T22:00:43Z", "attachments": [{"creator": "mak77@bonardo.net", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-09T10:04:42Z", "type_id": 4, "creation_date": "2018-05-08T08:29:29Z", "id": 1753909, "setter": "standard8@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8973949}], "votes": 1, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 12, "comments": [{"text": "hasHistoryEntries is cached most of the time, though sometimes we have to requery, and that query is synchronous.", "author": "mak77@bonardo.net", "id": 7037111, "time": "2013-01-25T01:28:54Z"}, {"text": "a couple instances in WindowsJumpLists.jsm could be easily converted to be async.\nThe one on shutdown could be converted using AsyncShutdown...\n\nbut actually, if we could completely remove the API, it would be even better.\nWindowsJumpLists.jsm is the only _external_ consumer in our code, the instances in queries are there just as micro optimizations (don't even query if we know there's no history), we could just ignore those optimizations since they only help someone that doesn't have any history (very small minority of users).\nThe check on shutdown is basically a \"did we run clear history on shutdown?\" question, and we can figure a better way to reply that question that doesn't involve disk access or even knowing if there's history (it could listen to a clear on shutdown topic or directly to history, unfortunately \"shutdown-cleanse\" has gone).", "author": "mak77@bonardo.net", "id": 9511542, "time": "2014-10-28T16:05:19Z"}, {"text": "*** Bug 806617 has been marked as a duplicate of this bug. ***", "author": "mak77@bonardo.net", "id": 12176159, "time": "2017-03-24T17:22:18Z"}, {"text": "Created attachment 8973949\nBug 834541 - Remove the public History.hasHistoryEntries synchronous API.\n\nReview commit: https://reviewboard.mozilla.org/r/242280/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/242280/", "author": "mak77@bonardo.net", "id": 13261746, "time": "2018-05-08T08:29:29Z"}, {"text": "Comment on attachment 8973949\nBug 834541 - Remove the public History.hasHistoryEntries synchronous API.\n\nhttps://reviewboard.mozilla.org/r/242280/#review248504", "author": "standard8@mozilla.com", "id": 13264890, "time": "2018-05-09T10:04:42Z"}, {"text": "We're sorry, Autoland could not rebase your commits for you automatically. Please manually rebase your commits and try again.\n\nhg error in cmd: hg rebase -s 8f16311fb00e415258833ff313a9982bf5e32c4b -d 2d5c99b70e34: rebasing 462825:8f16311fb00e \"Bug 834541 - Remove the public History.hasHistoryEntries synchronous API. r=standard8\" (tip)\nmerging toolkit/components/places/nsNavHistory.cpp\nmerging toolkit/components/places/nsNavHistory.h\nmerging toolkit/components/places/nsNavHistoryResult.cpp\nmerging toolkit/components/places/tests/unit/test_browserhistory.js\nwarning: conflicts while merging toolkit/components/places/nsNavHistory.h! (edit, then use 'hg resolve --mark')\nwarning: conflicts while merging toolkit/components/places/tests/unit/test_browserhistory.js! (edit, then use 'hg resolve --mark')\nunresolved conflicts (see hg resolve, then hg rebase --continue)", "author": "autoland@mozilla.bugs", "id": 13265043, "time": "2018-05-09T11:29:56Z"}, {"text": "Comment on attachment 8973949\nBug 834541 - Remove the public History.hasHistoryEntries synchronous API.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/242280/diff/1-2/", "author": "mak77@bonardo.net", "id": 13265058, "time": "2018-05-09T11:36:59Z"}, {"text": "Comment on attachment 8973949\nBug 834541 - Remove the public History.hasHistoryEntries synchronous API.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/242280/diff/2-3/", "author": "mak77@bonardo.net", "id": 13265521, "time": "2018-05-09T14:47:37Z"}, {"text": "Comment on attachment 8973949\nBug 834541 - Remove the public History.hasHistoryEntries synchronous API.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/242280/diff/3-4/", "author": "mak77@bonardo.net", "id": 13267592, "time": "2018-05-10T08:13:32Z"}, {"text": "Comment on attachment 8973949\nBug 834541 - Remove the public History.hasHistoryEntries synchronous API.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/242280/diff/4-5/", "author": "mak77@bonardo.net", "id": 13267601, "time": "2018-05-10T08:17:18Z"}, {"text": "Pushed by mak77@bonardo.net:\nhttps://hg.mozilla.org/integration/autoland/rev/80cabc246b5f\nRemove the public History.hasHistoryEntries synchronous API. r=standard8", "author": "pulsebot@bots.tld", "id": 13267607, "time": "2018-05-10T08:20:27Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/80cabc246b5f", "author": "dluca@mozilla.com", "id": 13269473, "time": "2018-05-10T22:00:43Z"}], "id": 834541, "priority": "P3", "cc": ["asmodeusme@yahoo.com", "jchaulk@mozilla.com", "mak77@bonardo.net", "mcastelluccio@mozilla.com", "standard8@mozilla.com", "taras.mozilla@glek.net", "ttaubert@mozilla.com"], "cf_crash_signature": "", "version": "Trunk", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "status": "RESOLVED", "product": "Toolkit", "cf_fx_iteration": "---", "blocks": [699850, 806617], "qa_contact": "", "creation_time": "2013-01-25T01:28:54Z", "cf_status_firefox_esr52": "---", "component": "Places", "assigned_to_detail": {"email": "mak77@bonardo.net", "id": 240353, "name": "mak77@bonardo.net", "real_name": "Marco Bonardo [::mak]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "fixed", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "mozilla62", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "mak77@bonardo.net", "id": 240353, "name": "mak77@bonardo.net", "real_name": "Marco Bonardo [::mak]"}, "whiteboard": "[fxsearch]", "mentors": [], "summary": "remove hasHistoryEntries", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [{"status": "+", "name": "firefox-backlog", "modification_date": "2014-06-03T18:39:47Z", "type_id": 846, "creation_date": "2014-06-03T18:39:47Z", "id": 890982, "setter": "mmucci@mozilla.com"}, {"status": "-", "name": "qe-verify", "modification_date": "2014-10-28T16:05:44Z", "type_id": 864, "creation_date": "2014-10-28T16:05:44Z", "id": 1017773, "setter": "mak77@bonardo.net"}], "last_change_time": "2018-05-10T22:00:43Z", "assigned_to": "mak77@bonardo.net", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "mar.castelluccio@studenti.unina.it"}], "who": "mcastelluccio@mozilla.com", "when": "2013-01-25T01:45:20Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bezaleel360@gmail.com"}], "who": "asmodeusme@yahoo.com", "when": "2013-04-05T02:54:35Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "806617"}], "who": "mak77@bonardo.net", "when": "2013-06-17T19:47:41Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mmucci@mozilla.com"}, {"removed": "", "field_name": "blocks", "added": "950073"}, {"removed": "", "field_name": "whiteboard", "added": "p=0"}], "who": "mmucci@mozilla.com", "when": "2014-02-05T22:58:50Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jchaulk@mozilla.com"}], "who": "mmucci@mozilla.com", "when": "2014-04-21T21:09:52Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ttaubert@mozilla.com"}], "who": "ttaubert@mozilla.com", "when": "2014-06-03T15:44:20Z"}, {"changes": [{"removed": "950073", "field_name": "blocks", "added": ""}, {"removed": "p=0", "field_name": "whiteboard", "added": "p=13 [qa?]"}, {"removed": "", "field_name": "flagtypes.name", "added": "firefox-backlog+"}], "who": "mmucci@mozilla.com", "when": "2014-06-03T18:39:47Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mak77@bonardo.net"}], "who": "mak77@bonardo.net", "when": "2014-10-28T16:05:19Z"}, {"changes": [{"removed": "---", "field_name": "cf_fx_points", "added": "5"}, {"removed": "p=13 [qa?]", "field_name": "whiteboard", "added": ""}, {"removed": "", "field_name": "flagtypes.name", "added": "qe-verify-"}], "who": "mak77@bonardo.net", "when": "2014-10-28T16:05:44Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1101478"}], "who": "mak77@bonardo.net", "when": "2014-11-19T11:25:11Z"}, {"changes": [{"removed": "make hasHistoryEntries asynchronous", "field_name": "summary", "added": "make hasHistoryEntries asynchronous and deprecate it"}], "who": "mak77@bonardo.net", "when": "2014-11-19T11:36:09Z"}, {"changes": [{"removed": "make hasHistoryEntries asynchronous and deprecate it", "field_name": "summary", "added": "remove hasHistoryEntries"}], "who": "mak77@bonardo.net", "when": "2014-11-24T11:12:05Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1103938"}], "who": "mak77@bonardo.net", "when": "2014-11-24T11:20:50Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}], "who": "mak77@bonardo.net", "when": "2015-09-25T16:17:28Z"}, {"changes": [{"removed": "mmucci@mozilla.com", "field_name": "cc", "added": ""}], "who": "mmucci@mozilla.com", "when": "2015-11-03T23:08:54Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "taras.mozilla@glek.net"}], "who": "mak77@bonardo.net", "when": "2017-03-24T17:22:18Z"}, {"changes": [{"removed": "P2", "field_name": "priority", "added": "P3"}], "who": "mak77@bonardo.net", "when": "2017-05-26T17:18:08Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "mak77@bonardo.net"}, {"removed": "", "field_name": "whiteboard", "added": "[fxsearch]"}], "who": "mak77@bonardo.net", "when": "2018-05-07T20:41:39Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8973949, "added": "review?(standard8@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "standard8@mozilla.com"}], "who": "mak77@bonardo.net", "when": "2018-05-08T08:29:29Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(standard8@mozilla.com)", "attachment_id": 8973949, "added": "review+"}], "who": "standard8@mozilla.com", "when": "2018-05-09T10:04:42Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-10 22:00:43"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "dluca@mozilla.com", "when": "2018-05-10T22:00:43Z"}], "resolution": "FIXED", "op_sys": "All", "cf_fx_points": "5", "cf_blocking_fennec": "---"}