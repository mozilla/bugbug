{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "gps@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2016-03-18T00:53:29Z", "type_id": 4, "creation_date": "2016-03-18T00:08:50Z", "id": 1362269, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8731782}, {"creator": "gps@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2016-03-18T09:31:30Z", "type_id": 4, "creation_date": "2016-03-18T01:12:57Z", "id": 1362297, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8731783}, {"creator": "gps@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2016-03-18T09:31:03Z", "type_id": 4, "creation_date": "2016-03-18T01:12:55Z", "id": 1362296, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/x-review-board-request", "id": 8731952}], "classification": "Components", "creator": "gps@mozilla.com", "cc": ["mh+mozilla@glandium.org", "ted@mielczarek.org"], "depends_on": [], "creation_time": "2016-03-17T07:02:20Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "JS JIT tests failing on VS2015 builds due to missing universal CRT DLLs", "cf_last_resolved": "2016-03-19T15:42:26Z", "assigned_to_detail": {"email": "gps@mozilla.com", "id": 420446, "name": "gps@mozilla.com", "real_name": "Gregory Szorc [:gps]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "comments": [{"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=726358a7617b (and presumably https://treeherder.mozilla.org/#/jobs?repo=try&revision=67fec88c4f61) has red JIT tests. Error code says we're missing a DLL. I have no clue which. Likely a C++ redistributable runtime or CRT DLL. I should be able to reproduce in a VM.", "author": "gps@mozilla.com", "id": 11254409, "time": "2016-03-17T07:02:20Z"}, {"text": "I couldn't reproduce this in the main VM I've been using for testing :/ Although it's possible I accidentally installed the C++ redistributable runtime on that VM. I'll try with a fresh VM tomorrow.", "author": "gps@mozilla.com", "id": 11254425, "time": "2016-03-17T07:17:36Z"}, {"text": "Launching js.exe is complaining on a fresh VM because some universal CRT DLLs aren't present (api-ms-win-crt-*.dll). The jsshell zip archive contains vcruntime140.dll but not the universal CRT files. We'll need to package those DLLs in the jsshell zip like we do in the Firefox zip.", "author": "gps@mozilla.com", "id": 11255995, "time": "2016-03-17T17:19:49Z"}, {"text": "And ucrtbase.dll of course.", "author": "gps@mozilla.com", "id": 11255999, "time": "2016-03-17T17:21:14Z"}, {"text": "Created attachment 8731782\nMozReview Request: Bug 1257435 - Reformat make syntax to make easier to read; r?glandium\n\nReview commit: https://reviewboard.mozilla.org/r/40827/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/40827/", "author": "gps@mozilla.com", "id": 11256065, "time": "2016-03-17T17:36:28Z"}, {"text": "Created attachment 8731783\nMozReview Request: Bug 1257435 - Package Universal CRT DLLs with jsshell; r?glandium\n\nBuilds with Visual Studio 2015 require the Universal CRT. While the\nuniversal CRT may be present on the target machine, there is no\nguarantee of this. So, we have to package these DLLs to ensure target\nmachines are able to run js.exe.\n\nSimilar code to what this commit adds exists in build/win32/Makefile.in.\n\nReview commit: https://reviewboard.mozilla.org/r/40829/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/40829/", "author": "gps@mozilla.com", "id": 11256066, "time": "2016-03-17T17:36:30Z"}, {"text": "Comment on attachment 8731782\nMozReview Request: Bug 1257435 - Reformat make syntax to make easier to read; r?glandium\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/40827/diff/1-2/", "author": "gps@mozilla.com", "id": 11256950, "time": "2016-03-17T22:22:17Z"}, {"text": "Comment on attachment 8731783\nMozReview Request: Bug 1257435 - Package Universal CRT DLLs with jsshell; r?glandium\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/40829/diff/1-2/", "author": "gps@mozilla.com", "id": 11256951, "time": "2016-03-17T22:22:18Z"}, {"text": "https://archive.mozilla.org/pub/firefox/try-builds/gszorc@mozilla.com-5d73b8a3fe6b54a21c545cfa1e712ca47213bc51/try-win32/jsshell-win32.zip is now packaging all the UCRT files:\n\nArchive:  jsshell-win32.zip\n  Length     Date   Time    Name\n --------    ----   ----    ----\n  4656128  01-01-10 00:00   js.exe\n   104448  01-01-10 00:00   mozglue.dll\n    85840  01-01-10 00:00   vcruntime140.dll\n   443192  01-01-10 00:00   msvcp140.dll\n  1597952  01-01-10 00:00   nss3.dll\n    19136  01-01-10 00:00   api-ms-win-core-processthreads-l1-1-1.dll\n    20672  01-01-10 00:00   api-ms-win-core-synch-l1-1-0.dll\n    19648  01-01-10 00:00   api-ms-win-crt-heap-l1-1-0.dll\n    18112  01-01-10 00:00   api-ms-win-core-rtlsupport-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-file-l2-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-crt-environment-l1-1-0.dll\n    24768  01-01-10 00:00   api-ms-win-crt-string-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-core-interlocked-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-handle-l1-1-0.dll\n    23232  01-01-10 00:00   api-ms-win-crt-runtime-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-timezone-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-core-synch-l1-2-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-string-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-datetime-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-core-console-l1-1-0.dll\n    73408  01-01-10 00:00   api-ms-win-crt-private-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-crt-utility-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-crt-locale-l1-1-0.dll\n    20672  01-01-10 00:00   api-ms-win-crt-filesystem-l1-1-0.dll\n    19648  01-01-10 00:00   api-ms-win-crt-conio-l1-1-0.dll\n    24768  01-01-10 00:00   api-ms-win-crt-stdio-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-core-libraryloader-l1-1-0.dll\n    19648  01-01-10 00:00   api-ms-win-core-sysinfo-l1-1-0.dll\n    22208  01-01-10 00:00   api-ms-win-core-file-l1-1-0.dll\n    26816  01-01-10 00:00   api-ms-win-crt-multibyte-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-util-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-core-heap-l1-1-0.dll\n    22720  01-01-10 00:00   api-ms-win-crt-convert-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-file-l1-2-0.dll\n    21184  01-01-10 00:00   api-ms-win-crt-time-l1-1-0.dll\n    18112  01-01-10 00:00   api-ms-win-core-profile-l1-1-0.dll\n    19136  01-01-10 00:00   api-ms-win-core-memory-l1-1-0.dll\n    19648  01-01-10 00:00   api-ms-win-core-processenvironment-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-errorhandling-l1-1-0.dll\n    20672  01-01-10 00:00   api-ms-win-core-processthreads-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-namedpipe-l1-1-0.dll\n    29376  01-01-10 00:00   api-ms-win-crt-math-l1-1-0.dll\n    21184  01-01-10 00:00   api-ms-win-core-localization-l1-2-0.dll\n    19648  01-01-10 00:00   api-ms-win-crt-process-l1-1-0.dll\n    18624  01-01-10 00:00   api-ms-win-core-debug-l1-1-0.dll\n   921280  01-01-10 00:00   ucrtbase.dll\n 10429952  01-01-10 00:00   icudt56.dll\n  1318400  01-01-10 00:00   icuin56.dll\n   914944  01-01-10 00:00   icuuc56.dll\n --------                   -------\n 21335880                   49 files\n\nrunning js.exe from a fresh Windows 7 VM without the UCRT installed globally is able to run js.exe just fine. (Before it was complaining about missing api-ms-win* DLLs.)", "author": "gps@mozilla.com", "id": 11257172, "time": "2016-03-18T00:08:04Z"}, {"text": "Comment on attachment 8731782\nMozReview Request: Bug 1257435 - Reformat make syntax to make easier to read; r?glandium\n\nhttps://reviewboard.mozilla.org/r/40827/#review37493\n\n::: toolkit/mozapps/installer/upload-files.mk:74\n(Diff revision 2)\n> -endif\n> +  endif\n> -ifdef MSVC_CXX_RUNTIME_DLL\n> +  ifdef MSVC_CXX_RUNTIME_DLL\n> -JSSHELL_BINS += $(MSVC_CXX_RUNTIME_DLL)\n> +    JSSHELL_BINS += $(MSVC_CXX_RUNTIME_DLL)\n> -endif\n> +  endif\n> -ifdef MOZ_FOLD_LIBS\n> +  ifdef MOZ_FOLD_LIBS\n> -JSSHELL_BINS += $(DLL_PREFIX)nss3$(DLL_SUFFIX)\n> +  JSSHELL_BINS += $(DLL_PREFIX)nss3$(DLL_SUFFIX)\n\nMissing indentation here", "author": "mh+mozilla@glandium.org", "id": 11257268, "time": "2016-03-18T00:53:29Z"}, {"text": "Comment on attachment 8731783\nMozReview Request: Bug 1257435 - Package Universal CRT DLLs with jsshell; r?glandium\n\nhttps://reviewboard.mozilla.org/r/40829/#review37495\n\n::: toolkit/mozapps/installer/upload-files.mk:67\n(Diff revision 2)\n>    ifdef MSVC_C_RUNTIME_DLL\n>      JSSHELL_BINS += $(MSVC_C_RUNTIME_DLL)\n>    endif\n>    ifdef MSVC_CXX_RUNTIME_DLL\n>      JSSHELL_BINS += $(MSVC_CXX_RUNTIME_DLL)\n>    endif\n\nPlease insert after those lines instead... which, btw, shouldn't be in the ifndef MOZ_SYSTEM_NSPR", "author": "mh+mozilla@glandium.org", "id": 11257273, "time": "2016-03-18T00:56:42Z"}, {"text": "Comment on attachment 8731782\nMozReview Request: Bug 1257435 - Reformat make syntax to make easier to read; r?glandium\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/40827/diff/2-3/", "author": "gps@mozilla.com", "id": 11257319, "time": "2016-03-18T01:12:53Z"}, {"text": "Created attachment 8731952\nMozReview Request: Bug 1257435 - Move MSVC runtime DLL code outside of MOZ_SYSTEM_NSPR block; r?glandium\n\nWhy it was the old way, I'm not sure.\n\nReview commit: https://reviewboard.mozilla.org/r/40959/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/40959/", "author": "gps@mozilla.com", "id": 11257320, "time": "2016-03-18T01:12:55Z"}, {"text": "Comment on attachment 8731783\nMozReview Request: Bug 1257435 - Package Universal CRT DLLs with jsshell; r?glandium\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/40829/diff/2-3/", "author": "gps@mozilla.com", "id": 11257321, "time": "2016-03-18T01:12:57Z"}, {"text": "Comment on attachment 8731952\nMozReview Request: Bug 1257435 - Move MSVC runtime DLL code outside of MOZ_SYSTEM_NSPR block; r?glandium\n\nhttps://reviewboard.mozilla.org/r/40959/#review37545", "author": "mh+mozilla@glandium.org", "id": 11257958, "time": "2016-03-18T09:31:03Z"}, {"text": "Comment on attachment 8731783\nMozReview Request: Bug 1257435 - Package Universal CRT DLLs with jsshell; r?glandium\n\nhttps://reviewboard.mozilla.org/r/40829/#review37547", "author": "mh+mozilla@glandium.org", "id": 11257960, "time": "2016-03-18T09:31:30Z"}, {"text": "https://reviewboard.mozilla.org/r/40959/#review37549\n\nYou know, I noticed this same thing while touching this file in my ICU patch stack the other day but forgot to do anything about it. It looks like it was just a mistake in this patch:\nhttps://hg.mozilla.org/mozilla-central/rev/bf88ac3f2316", "author": "ted@mielczarek.org", "id": 11257998, "time": "2016-03-18T09:59:25Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/69703aa2bad7\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/48cc9c0818d0\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/c1a7ef0126e5", "author": "pulsebot@bots.tld", "id": 11260703, "time": "2016-03-19T01:35:49Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/69703aa2bad7\nhttps://hg.mozilla.org/mozilla-central/rev/48cc9c0818d0\nhttps://hg.mozilla.org/mozilla-central/rev/c1a7ef0126e5", "author": "ryanvm@gmail.com", "id": 11261143, "time": "2016-03-19T15:42:26Z"}], "id": 1257435, "priority": "--", "mentors_detail": [], "comment_count": 19, "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2018-03-02T20:12:20Z", "cf_platform_rel": "---", "product": "Firefox Build System", "cf_fx_iteration": "---", "blocks": [1186060], "qa_contact": "", "see_also": [], "cf_status_firefox_esr52": "---", "component": "General", "votes": 0, "cf_status_firefox48": "fixed", "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla48", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "gps@mozilla.com", "id": 420446, "name": "gps@mozilla.com", "real_name": "Gregory Szorc [:gps]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "mh+mozilla@glandium.org", "id": 47192, "name": "mh+mozilla@glandium.org", "real_name": "Mike Hommey [:glandium]"}, {"email": "ted@mielczarek.org", "id": 39022, "name": "ted@mielczarek.org", "real_name": "Ted Mielczarek [:ted.mielczarek]"}], "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "assigned_to": "gps@mozilla.com", "is_open": false, "history": [{"changes": [{"removed": "JS JIT tests failing on VS2015 builds (presumably due to missing DLL)", "field_name": "summary", "added": "JS JIT tests failing on VS2015 builds (presumably due to missing universal CRT DLLs)"}], "who": "gps@mozilla.com", "when": "2016-03-17T17:19:49Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ted@mielczarek.org"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8731782, "added": "review?(ted@mielczarek.org)"}], "who": "gps@mozilla.com", "when": "2016-03-17T17:36:28Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8731783, "added": "review?(ted@mielczarek.org)"}], "who": "gps@mozilla.com", "when": "2016-03-17T17:36:30Z"}, {"changes": [{"removed": "JS JIT tests failing on VS2015 builds (presumably due to missing universal CRT DLLs)", "field_name": "summary", "added": "JS JIT tests failing on VS2015 builds due to missing universal CRT DLLs"}], "who": "gps@mozilla.com", "when": "2016-03-17T21:15:21Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(ted@mielczarek.org)", "attachment_id": 8731782, "added": "review?(mh+mozilla@glandium.org)"}, {"removed": "", "field_name": "cc", "added": "mh+mozilla@glandium.org"}], "who": "gps@mozilla.com", "when": "2016-03-18T00:08:50Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(ted@mielczarek.org)", "attachment_id": 8731783, "added": "review?(mh+mozilla@glandium.org)"}], "who": "gps@mozilla.com", "when": "2016-03-18T00:08:52Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8731782, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2016-03-18T00:53:29Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8731783, "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2016-03-18T00:56:42Z"}, {"changes": [{"field_name": "attachments.description", "removed": "MozReview Request: Bug 1257435 - Reformat make syntax to make easier to read; r?ted", "attachment_id": 8731782, "added": "MozReview Request: Bug 1257435 - Reformat make syntax to make easier to read; r?glandium"}], "who": "gps@mozilla.com", "when": "2016-03-18T01:12:53Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8731952, "added": "review?(mh+mozilla@glandium.org)"}], "who": "gps@mozilla.com", "when": "2016-03-18T01:12:55Z"}, {"changes": [{"field_name": "attachments.description", "removed": "MozReview Request: Bug 1257435 - Package Universal CRT DLLs with jsshell; r?ted", "attachment_id": 8731783, "added": "MozReview Request: Bug 1257435 - Package Universal CRT DLLs with jsshell; r?glandium"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8731783, "added": "review?(mh+mozilla@glandium.org)"}], "who": "gps@mozilla.com", "when": "2016-03-18T01:12:57Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8731952, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2016-03-18T09:31:03Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8731783, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2016-03-18T09:31:30Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla48"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2016-03-19 08:42:26"}, {"removed": "---", "field_name": "cf_status_firefox48", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2016-03-19T15:42:26Z"}, {"changes": [{"removed": "Core", "field_name": "product", "added": "Firefox Build System"}], "who": "automation@bmo.tld", "when": "2018-03-02T20:12:20Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}