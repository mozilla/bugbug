{"status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "poirot.alex@gmail.com", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8679139}, {"creator": "poirot.alex@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-10-28T15:39:29Z", "type_id": 748, "creation_date": "2015-10-27T20:11:29Z", "id": 1281052, "setter": "jryans@gmail.com"}], "content_type": "text/plain", "id": 8679632}, {"creator": "poirot.alex@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8679633}], "classification": "Client Software", "creator": "pbrosset@mozilla.com", "cc": ["jryans@gmail.com", "poirot.alex@gmail.com"], "depends_on": [1188413], "creation_time": "2015-10-22T19:56:36Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Can't reload the toolbox on windows 10", "cf_last_resolved": "2015-10-28T23:43:33Z", "assigned_to_detail": {"email": "poirot.alex@gmail.com", "id": 283262, "name": "poirot.alex@gmail.com", "real_name": "Alexandre Poirot [:ochameau]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "poirot.alex@gmail.com", "comment_count": 17, "comments": [{"text": "This might totally be me doing something wrong because I have never tried this before, but I encountered some weird things when trying to reload the toolbox on Windows and thought I'd file a bug.\n\nPlease let me know if some of these things are problems on my side, or if we want to have separate bugs for each:\n\n- `tools srcdir` only worked with this path for me: \"C:/Users/Patrick/dev/fx-team\"\nTrying to use this failed: \"C:\\Users\\Patrick\\dev\\fx-team\" although that's the path you'd actually see in a windows command prompt.\nIt fails with:\n\nC:\\Users\\Patrick\\dev\fx-team does not exist or is not a mozilla-central checkout.\n\n- Once I execute `tools srcdir \"C:/Users/Patrick/dev/fx-team\"`, the toolbox closes and doesn't re-opens. I would expect the toolbox to just stay there until I enter `tools reload`.\n\n- `tools reload` didn't seem to work. I made a simple change in markup-view.xhtml (adding some inline style so it would be easy to see if the changed worked), then entered `tools reload`: the toolbox closed and didn't re-open. And when I reopened it manually, my change wasn't there.\nUpdate: I just tried ith markup-view.js and reloading did work for this file (but as I said, it'd be nice if the toolbox would re-open on its own).\n\n- I then tried the keyboard shortcut, it's supposed to be accel+alt+r, but this didn't do anything for me. I made sure the toolbox had focus before.", "author": "pbrosset@mozilla.com", "id": 10864870, "time": "2015-10-22T19:56:36Z"}, {"text": "CTRL+MAJ+R should reload and reopen the toolbox automagically.\nI haven't tried modifying markup-view.xhtml, but toplevel tools xul/js files and it works fine on linux.\nBut it is very likely possible that something is wrong with windows file paths...\nAlso note that toolbox are often broken when reloading, I embedded some fixes in bug 1216979's patch.", "author": "poirot.alex@gmail.com", "id": 10864890, "time": "2015-10-22T20:04:31Z"}, {"text": "(In reply to Alexandre Poirot [:ochameau] from comment #1)\n> CTRL+MAJ+R should reload and reopen the toolbox automagically.\nHm, that seems to just reload the page for me on windows.", "author": "pbrosset@mozilla.com", "id": 10864923, "time": "2015-10-22T20:14:07Z"}, {"text": "Sorry, I mispelled the shortcut, it is CTRL+ALT+R.\nwhen using tools srcdir xxx, you can double check that it works correctly by looking at devtools.loader.srcdir pref. You have to reload the toolbox manually once to have the shortcut to work as it set the key listener on toolbox startup only, only if you have the pref set.", "author": "poirot.alex@gmail.com", "id": 10865162, "time": "2015-10-22T21:12:02Z"}, {"text": "I checked on linux and modifying the markup-view.xhtml works fine.\nI'll try to checkout a gecko clone on windows to figure this out,\nbut it takes soooo muuuch tiiiime. I wish we had a seperate devtools repo to avoid downloading 3GB of mozilla-central history :o", "author": "poirot.alex@gmail.com", "id": 10865187, "time": "2015-10-22T21:21:26Z"}, {"text": "Ok. So what I see here is a URL mismatch.\nWe are opening chrome://devtools/content/markupview/markup-view.xhtml\nwhereas the magic trick tries to override chrome://markupview/content/markup-view.xhtml\n(and correctly overrides it, I see the new content if I open this url)\n\nI can't explain why it works on linux and not on windows.\nIt looks like the chrome.manifest generated by Loader.jsm is the same on both platforms.\nBut I think we have to update Loader.jsm's _writeManifest function according to the new URLs (not about the brand new resource one but the new chrome one related to the first file move to /devtools/)", "author": "poirot.alex@gmail.com", "id": 10865352, "time": "2015-10-22T22:00:17Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=ba7863e577bc", "author": "poirot.alex@gmail.com", "id": 10872970, "time": "2015-10-26T15:21:00Z"}, {"text": "Created attachment 8679139\npatch v1\n\nLooks like it seems to work when working on a local build,\nwhere symlinks are doing the trick...\nOriginal jar content where still mapping to the jar.\nThe writeManifest method was generating new set of chrome URL\nthat wasn't overriding anything, but instead creating new URLs.\nHopefully the added test is going to cover this.\n\nI verified with try build, and I got it to work on windows as expected with this patch.\n\nI still need to ensure the test pass on all platforms.\nFinding the source directory during tests isn't that obvious.", "author": "poirot.alex@gmail.com", "id": 10875183, "time": "2015-10-26T22:50:25Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=c07e6deddac2", "author": "poirot.alex@gmail.com", "id": 10875194, "time": "2015-10-26T22:52:21Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=0ea2ac8f7431", "author": "poirot.alex@gmail.com", "id": 10876547, "time": "2015-10-27T09:52:32Z"}, {"text": "Last try attempt for writing a test for this.\nI think we don't have any m-c checkout when running mochitests :x\nInstead we just have a tarball with test files referenced in *.ini support-files section...\nIf that's the case, we can't test this for real, which is really unfortunate.", "author": "poirot.alex@gmail.com", "id": 10876552, "time": "2015-10-27T09:54:51Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=137dbfec8704", "author": "poirot.alex@gmail.com", "id": 10878783, "time": "2015-10-27T20:08:55Z"}, {"text": "Created attachment 8679632\npatch v2\n\nOk, so there is no way to test this feature on our test slaves\nas they don't checkout gecko while running tests :/", "author": "poirot.alex@gmail.com", "id": 10878796, "time": "2015-10-27T20:11:29Z"}, {"text": "Created attachment 8679633\ntest devtools.loader.srcdir pref\n\nFor posterity, in case we find a way to get access to a gecko checkout...", "author": "poirot.alex@gmail.com", "id": 10878801, "time": "2015-10-27T20:14:11Z"}, {"text": "Comment on attachment 8679632\npatch v2\n\nReview of attachment 8679632:\n-----------------------------------------------------------------\n\nThanks for fixing this!  The old version is definitely not right.", "author": "jryans@gmail.com", "id": 10881549, "time": "2015-10-28T15:39:29Z"}, {"text": "https://hg.mozilla.org/integration/fx-team/rev/961e078286dc3977319c2717ed4d0f6b94ed6f3d\nBug 1217559 - Fix chrome overrides after new devtools files layout. r=jryans", "author": "poirot.alex@gmail.com", "id": 10881886, "time": "2015-10-28T16:57:21Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/961e078286dc", "author": "kwierso@gmail.com", "id": 10883426, "time": "2015-10-28T23:43:33Z"}], "id": 1217559, "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-10-28T23:43:33Z", "cf_platform_rel": "---", "product": "Firefox", "cf_status_firefox_esr52": "---", "blocks": [1180760, 1182254], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Developer Tools", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "Firefox 44", "cf_status_firefox44": "fixed", "is_cc_accessible": true, "url": "", "creator_detail": {"email": "pbrosset@mozilla.com", "id": 478661, "name": "pbrosset@mozilla.com", "real_name": "Patrick Brosset <:pbro>"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "jryans@gmail.com", "id": 282978, "name": "jryans@gmail.com", "real_name": "J. Ryan Stinnett [:jryans] (use ni?)"}, {"email": "poirot.alex@gmail.com", "id": 283262, "name": "poirot.alex@gmail.com", "real_name": "Alexandre Poirot [:ochameau]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "blocks", "added": "1180760, 1182254"}], "who": "jryans@gmail.com", "when": "2015-10-22T20:12:43Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "poirot.alex@gmail.com"}], "who": "poirot.alex@gmail.com", "when": "2015-10-26T11:45:58Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8679632, "added": "review?(jryans@gmail.com)"}], "who": "poirot.alex@gmail.com", "when": "2015-10-27T20:11:29Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8679139, "added": "1"}], "who": "poirot.alex@gmail.com", "when": "2015-10-27T20:11:33Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jryans@gmail.com)", "attachment_id": 8679632, "added": "review+"}], "who": "jryans@gmail.com", "when": "2015-10-28T15:39:29Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "Firefox 44"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-10-28 16:43:33"}, {"removed": "---", "field_name": "cf_status_firefox44", "added": "fixed"}], "who": "kwierso@gmail.com", "when": "2015-10-28T23:43:33Z"}]}