{"cf_tracking_thunderbird_esr52": "---", "status": "VERIFIED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "blocking", "cf_tracking_firefox62": "+", "creator": "mozillamarcia.knous@gmail.com", "mentors_detail": [], "depends_on": [1459296, 1461407], "cf_status_firefox_esr60": "unaffected", "cf_user_story": "https://github.com/mozilla/activity-stream/compare/firefox-61b3...66b23ff4695a0edd97dda9db0efa62138b001d56", "cf_tracking_firefox_relnote": "---", "platform": "All", "cf_status_firefox59": "---", "keywords": ["crash", "regression"], "cc_detail": [{"email": "amarchesini@mozilla.com", "id": 446257, "name": "amarchesini@mozilla.com", "real_name": "Andrea Marchesini [:baku]"}, {"email": "bkelly@mozilla.com", "id": 465500, "name": "bkelly@mozilla.com", "real_name": "Ben Kelly [:bkelly]"}, {"email": "bugmail@asutherland.org", "id": 151407, "name": "bugmail@asutherland.org", "real_name": "Andrew Sutherland [:asuth]"}, {"email": "ckerschb@christophkerschbaumer.com", "id": 363267, "name": "ckerschb@christophkerschbaumer.com", "real_name": "Christoph Kerschbaumer [:ckerschb]"}, {"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, {"email": "edilee@mozilla.com", "id": 125983, "name": "edilee@mozilla.com", "real_name": "Ed Lee :Mardak"}, {"email": "gijskruitbosch+bugs@gmail.com", "id": 159069, "name": "gijskruitbosch+bugs@gmail.com", "real_name": ":Gijs (he/him)"}, {"email": "jcristau@mozilla.com", "id": 580382, "name": "jcristau@mozilla.com", "real_name": "Julien Cristau [:jcristau]"}, {"email": "josh@joshmatthews.net", "id": 241497, "name": "josh@joshmatthews.net", "real_name": "Josh Matthews [:jdm]"}, {"email": "khudson@mozilla.com", "id": 556482, "name": "khudson@mozilla.com", "real_name": "Kate Hudson :k88hudson"}, {"email": "madperson@gmx.at", "id": 209011, "name": "madperson@gmx.at", "real_name": "[:philipp]"}, {"email": "nfroyd@mozilla.com", "id": 417288, "name": "nfroyd@mozilla.com", "real_name": "Nathan Froyd [:froydnj]"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "ted@mielczarek.org", "id": 39022, "name": "ted@mielczarek.org", "real_name": "Ted Mielczarek [:ted.mielczarek]"}], "cf_last_resolved": "2018-05-12T09:59:49Z", "attachments": [{"creator": "bkelly@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-10T14:13:41Z", "type_id": 4, "creation_date": "2018-05-10T14:10:26Z", "id": 1755232, "setter": "amarchesini@mozilla.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-05-10T15:41:19Z", "type_id": 721, "creation_date": "2018-05-10T15:21:19Z", "id": 1755291, "setter": "ryanvm@gmail.com"}], "content_type": "text/plain", "id": 8974701}, {"creator": "edilee@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-11T21:38:24Z", "type_id": 4, "creation_date": "2018-05-11T19:13:45Z", "id": 1755883, "setter": "gijskruitbosch+bugs@gmail.com"}, {"status": "+", "name": "review", "modification_date": "2018-05-11T19:24:12Z", "type_id": 4, "creation_date": "2018-05-11T19:13:45Z", "id": 1755884, "setter": "khudson@mozilla.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-05-14T12:49:34Z", "type_id": 721, "creation_date": "2018-05-12T09:35:02Z", "id": 1756048, "setter": "ryanvm@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8975121}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 47, "comments": [{"text": "This bug was filed from the Socorro interface and is\nreport bp-0519cdd9-340c-41e4-8b54-f32000180506.\n=============================================================\n\nSeen while looking at nightly crash stats, crashes started on Windows and Mac using 20180504220115: https://bit.ly/2IhHmlz (Windows). Mac crashes: https://bit.ly/2jAoT5A. Moz Crash reason: MOZ_CRASH(Origin must be available when deserialized)\n\nPossible regression range based on Build ID: https://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=a2d1d4158bb4718d8bb31e1284e133aa99273600&tochange=5207b1392b11db534550a5eb801302e6dbb58f95\n\nTop 10 frames of crashing thread:\n\n0 xul.dll mozilla::ipc::PrincipalInfoToPrincipal ipc/glue/BackgroundUtils.cpp:106\n1 xul.dll mozilla::ipc::LoadInfoArgsToLoadInfo ipc/glue/BackgroundUtils.cpp:464\n2 xul.dll mozilla::net::HttpChannelParent::DoAsyncOpen netwerk/protocol/http/HttpChannelParent.cpp:521\n3 xul.dll mozilla::net::HttpChannelParent::Init netwerk/protocol/http/HttpChannelParent.cpp:131\n4 xul.dll mozilla::net::NeckoParent::RecvPHttpChannelConstructor netwerk/ipc/NeckoParent.cpp:323\n5 xul.dll mozilla::net::PNeckoParent::OnMessageReceived ipc/ipdl/PNeckoParent.cpp:920\n6 xul.dll mozilla::dom::PContentParent::OnMessageReceived ipc/ipdl/PContentParent.cpp:3497\n7 xul.dll mozilla::ipc::MessageChannel::DispatchAsyncMessage ipc/glue/MessageChannel.cpp:2141\n8 xul.dll mozilla::ipc::MessageChannel::DispatchMessageW ipc/glue/MessageChannel.cpp:2071\n9 xul.dll mozilla::ipc::MessageChannel::RunMessage ipc/glue/MessageChannel.cpp:1917\n\n=============================================================", "author": "mozillamarcia.knous@gmail.com", "id": 13259854, "time": "2018-05-07T16:08:20Z"}, {"text": "Christoph, any ideas? Nothing in the files in the top few stack frames seems to have changed on 5-4.", "author": "continuation@gmail.com", "id": 13260500, "time": "2018-05-07T19:50:45Z"}, {"text": "(In reply to Andrew McCreight [:mccr8] from comment #1)\n> Christoph, any ideas? Nothing in the files in the top few stack frames seems\n> to have changed on 5-4.\n\nI browsed through PrincipalInfoToPrincipal with particular focus around line 106, but nothing obvious seems wrong here to me. Would be curious to see what's going on. I suppose we don't have STR handy, right? Otherwise I would get right to it.", "author": "ckerschb@christophkerschbaumer.com", "id": 13262231, "time": "2018-05-08T12:55:29Z"}, {"text": "Not sure it explains this, but bug 1456986 is in the range and I just backed it out.  Maybe that will help here.", "author": "bkelly@mozilla.com", "id": 13262667, "time": "2018-05-08T15:06:16Z"}, {"text": "Looks like this is still crashing on Nightlies with that backout included.", "author": "ryanvm@gmail.com", "id": 13265565, "time": "2018-05-09T14:59:57Z"}, {"text": "I've look at the push list in comment 2 and I don't really see anything that explains this.  If the optional principal value was garbage on the sending side I would expect it to crash in the child process.\n\nMaybe we should add a similar MOZ_CRASH() on missing origin in the PrincipalToPrincipalInfo() serialization side of things so we can get crash reports closer to the place where the bad value is being produced.\n\nAndrea, what do you think?", "author": "bkelly@mozilla.com", "id": 13265634, "time": "2018-05-09T15:19:16Z"}, {"text": "(In reply to Ben Kelly [:bkelly] from comment #5)\n> Maybe we should add a similar MOZ_CRASH() on missing origin in the\n> PrincipalToPrincipalInfo() serialization side of things so we can get crash\n> reports closer to the place where the bad value is being produced.\n\nFWIW, that sounds like a good path forward to me - thanks.", "author": "ckerschb@christophkerschbaumer.com", "id": 13265640, "time": "2018-05-09T15:21:12Z"}, {"text": "> Andrea, what do you think?\n\nYes, this seems a excellent starting point. I would also convert MOZ_ASSERT to MOZ_DIAGNOSTIC_ASSERT(mInitialized) in BasePrincipal::GetOrigin and in BasePrincipal::GetOriginNoSuffix", "author": "amarchesini@mozilla.com", "id": 13265731, "time": "2018-05-09T15:47:20Z"}, {"text": "This is spiking big-time on 61.0b3. If we can get a diagnostic patch created quickly, we can uplift to Beta as well ASAP.", "author": "ryanvm@gmail.com", "id": 13267211, "time": "2018-05-10T01:49:08Z"}, {"text": "I'll work on creating a diagnostic patch this morning.  Not sure if I should do it in a dependent bug or here, though.", "author": "bkelly@mozilla.com", "id": 13268055, "time": "2018-05-10T13:27:38Z"}, {"text": "the crash signature is accounting for 70% of browser crashes in 61.0b3. \n\nthis would be a more narrow pushlog than in comment #0 from build 20180504100129 to build 20180504220115:\nhttps://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=8994f3&tochange=5207b1", "author": "madperson@gmx.at", "id": 13268155, "time": "2018-05-10T13:58:42Z"}, {"text": "Actually, I see an old bug that could explain why this is triggering a crash instead of failing further upstream.  I'll fix that.", "author": "bkelly@mozilla.com", "id": 13268180, "time": "2018-05-10T14:05:55Z"}, {"text": "The return value of the triggering principal PrincipalToPrincipalInfo() is not checked here:\n\nhttps://searchfox.org/mozilla-central/rev/eb6c5214a63e20a3fff455e92c876287a8d2e188/ipc/glue/BackgroundUtils.cpp#316", "author": "bkelly@mozilla.com", "id": 13268183, "time": "2018-05-10T14:06:22Z"}, {"text": "Created attachment 8974701\nCheck for error when serializing the LoadInfo triggering principal. r=baku\n\nWe should, like, check for error and stuff.", "author": "bkelly@mozilla.com", "id": 13268199, "time": "2018-05-10T14:10:26Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=e53470c570302793545c59707d6e62484034fd52", "author": "bkelly@mozilla.com", "id": 13268200, "time": "2018-05-10T14:11:16Z"}, {"text": "The missed error checking was introduced in bug 1179505.  Not sure what changed recently to make the principal fail to serialize, though.", "author": "bkelly@mozilla.com", "id": 13268203, "time": "2018-05-10T14:12:19Z"}, {"text": "I'm going to wait for try in case this causes the error condition to show as an orange somehow.  Although thats probably unlikely given we don't see the crash in automation.", "author": "bkelly@mozilla.com", "id": 13268216, "time": "2018-05-10T14:16:36Z"}, {"text": "Pushed by bkelly@mozilla.com:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/0e0e6097f282\nCheck for error when serializing the LoadInfo triggering principal. r=baku", "author": "pulsebot@bots.tld", "id": 13268380, "time": "2018-05-10T15:18:20Z"}, {"text": "Comment on attachment 8974701\nCheck for error when serializing the LoadInfo triggering principal. r=baku\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Partially bug 1179505 for removing some error checking, but also some newer regression which causes PrincipalToPrincipalInfo() return an error code.  (I think).\n[User impact if declined]: Not catching the error causes us to hit a MOZ_CRASH() on the parent side.  This is a top crasher in beta.\n[Is this code covered by automated tests?]: This problem does not trigger in automation.\n[Has the fix been verified in Nightly?]: Not yet.  I only pushed this to inbound just now.  Since this is a top crash, though, we want to get this potential fix in the next beta if possible.\n[Needs manual test from QE? If yes, steps to reproduce]: No\n[List of other uplifts needed for the feature/fix]: None\n[Is the change risky?]: Minimal\n[Why is the change risky/not risky?]: One line change to check for a failed error code.\n[String changes made/needed]: None", "author": "bkelly@mozilla.com", "id": 13268389, "time": "2018-05-10T15:21:19Z"}, {"text": "Comment on attachment 8974701\nCheck for error when serializing the LoadInfo triggering principal. r=baku\n\nGiven the frequency of this crash, let's take the speculative fix now for today's 61.0b4 build.", "author": "ryanvm@gmail.com", "id": 13268468, "time": "2018-05-10T15:41:19Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/d2b96fb1faa4", "author": "ryanvm@gmail.com", "id": 13268481, "time": "2018-05-10T15:46:22Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/0e0e6097f282", "author": "dluca@mozilla.com", "id": 13269494, "time": "2018-05-10T22:01:26Z"}, {"text": "We've still got crashes with the latest nightly including this change, e.g. https://crash-stats.mozilla.com/report/index/c3034268-869c-451f-a0c9-f3a770180511", "author": "jcristau@mozilla.com", "id": 13270096, "time": "2018-05-11T07:28:10Z"}, {"text": "So we're crashing in this code:\n\n      nsAutoCString originNoSuffix;\n      rv = principal->GetOriginNoSuffix(originNoSuffix);\n      if (NS_WARN_IF(NS_FAILED(rv)) ||\n          !info.originNoSuffix().Equals(originNoSuffix)) {\n        MOZ_CRASH(\"Origin must be available when deserialized\");\n      }\n\nIt seems the principal is serializing fine, but its failing this conditional:\n\n  info.originNoSuffix().Equals(originNoSuffix)\n\nSo maybe its not that the origin is missing, but that it does not match the origin contained in the spec string.", "author": "bkelly@mozilla.com", "id": 13270675, "time": "2018-05-11T13:18:51Z"}, {"text": "I'll make a diagnostic patch to assert that the origin and spec match.", "author": "bkelly@mozilla.com", "id": 13270679, "time": "2018-05-11T13:20:58Z"}, {"text": "I wonder if its something like the principal URL is \"about:blank\" and the origin string is something like \"http://example.com\".", "author": "bkelly@mozilla.com", "id": 13270685, "time": "2018-05-11T13:23:35Z"}, {"text": "Ted, is there any chance you have time to grab a mini dump from one of these crashes and look at the strings being compared just before the crash?  I don't have access to the dumps and I'm also not familiar with the tools to inspect them after the fact.", "author": "bkelly@mozilla.com", "id": 13270690, "time": "2018-05-11T13:26:00Z"}, {"text": "i can reproduce this crash with a particular profile in a portable firefox version & *think* this was introdcued by bug 1438367.", "author": "madperson@gmx.at", "id": 13271326, "time": "2018-05-11T17:37:50Z"}, {"text": "This might fallout from removing nsIAboutModule::MAKE_LINKABLE.  It seems that impact how the nsIURI is formed:\n\nhttps://searchfox.org/mozilla-central/rev/3f17a234769d25fca5144ebb8abc8e1cb3c56c16/netwerk/protocol/about/nsAboutProtocolHandler.cpp#44\nhttps://searchfox.org/mozilla-central/rev/3f17a234769d25fca5144ebb8abc8e1cb3c56c16/netwerk/protocol/about/nsAboutProtocolHandler.cpp#139-161\n\nAnd then the principal code is expecting certain behavior for the about:blank URI:\n\nhttps://searchfox.org/mozilla-central/rev/3f17a234769d25fca5144ebb8abc8e1cb3c56c16/caps/ContentPrincipal.cpp#107-113\n\nBut that is a DEBUG-only assert, so we might be blowing right past that and hitting the MOZ_CRASH instead.\n\nDropping NI on Ted since we have a reproducing profile.", "author": "bkelly@mozilla.com", "id": 13271403, "time": "2018-05-11T17:59:41Z"}, {"text": "(In reply to Ben Kelly [:bkelly] from comment #25)\n> I wonder if its something like the principal URL is \"about:blank\" and the\n> origin string is something like \"http://example.com\".\n\nRiffing on this given comment #27 and complete lack of STR and so on (so can't really see exactly what's going on), I wonder if this is about about:home vs. moz-safe-about:home or something?", "author": "gijskruitbosch+bugs@gmail.com", "id": 13271425, "time": "2018-05-11T18:10:49Z"}, {"text": "FWIW, if this is broken on about:home today I don't see why it wouldn't also be broken on about:newtab even if we back out the patch for bug 1438367, given that about:newtab essentially loads exactly the same stuff and was already using the same flags and thus type of nested (or not) URI.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13271433, "time": "2018-05-11T18:12:46Z"}, {"text": "I can confirm that this is fixed by backing out bug 1438367.  The following patch adding back MAKE_LINKABLE also fixes it.\n\nWe should probably backout for now and re-land with a test that would catch this, though.  We clearly don't have adequate test coverage for this case.  Not sure what the trigger is, but this profile has two blank \"highlight\" panels.\n\n--- a/browser/components/about/AboutRedirector.cpp\n+++ b/browser/components/about/AboutRedirector.cpp\n@@ -79,17 +79,17 @@ static const RedirEntry kRedirMap[] = {\n     nsIAboutModule::HIDE_FROM_ABOUTABOUT },\n   { \"sessionrestore\", \"chrome://browser/content/aboutSessionRestore.xhtml\",\n     nsIAboutModule::ALLOW_SCRIPT |\n     nsIAboutModule::HIDE_FROM_ABOUTABOUT },\n   { \"welcomeback\", \"chrome://browser/content/aboutWelcomeBack.xhtml\",\n     nsIAboutModule::ALLOW_SCRIPT |\n     nsIAboutModule::HIDE_FROM_ABOUTABOUT },\n   // Actual activity stream URL for home and newtab are set in channel creation\n-  { \"home\", \"about:blank\", ACTIVITY_STREAM_FLAGS },\n+  { \"home\", \"about:blank\", ACTIVITY_STREAM_FLAGS | nsIAboutModule::MAKE_LINKABLE },\n   { \"newtab\", \"about:blank\", ACTIVITY_STREAM_FLAGS },\n   { \"library\", \"chrome://browser/content/aboutLibrary.xhtml\",\n     nsIAboutModule::URI_MUST_LOAD_IN_CHILD |\n     nsIAboutModule::URI_SAFE_FOR_UNTRUSTED_CONTENT },\n   { \"preferences\", \"chrome://browser/content/preferences/in-content/preferences.xul\",\n     nsIAboutModule::ALLOW_SCRIPT },\n   { \"downloads\", \"chrome://browser/content/downloads/contentAreaDownloadsView.xul\",\n     nsIAboutModule::ALLOW_SCRIPT },", "author": "bkelly@mozilla.com", "id": 13271439, "time": "2018-05-11T18:14:22Z"}, {"text": "There were some changes that were dependent on MAKE_LINKABLE going away, so if we revert bug 1438367, I'll also need to revert some other things too at the same time. I'm pretty sure we haven't had any other changes to beta, so it should uplift cleanly although it will touch ~100 files.", "author": "edilee@mozilla.com", "id": 13271504, "time": "2018-05-11T18:37:49Z"}, {"text": "Created attachment 8975121\nBug 1459655 - Restore about flag for about:home.\n\nReview commit: https://reviewboard.mozilla.org/r/243490/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/243490/", "author": "edilee@mozilla.com", "id": 13271582, "time": "2018-05-11T19:13:45Z"}, {"text": "Comment on attachment 8975121\nBug 1459655 - Restore about flag for about:home.\n\nhttps://reviewboard.mozilla.org/r/243490/#review249348\n\nLooks good to me", "author": "khudson@mozilla.com", "id": 13271599, "time": "2018-05-11T19:24:12Z"}, {"text": "Comment on attachment 8975121\nBug 1459655 - Restore about flag for about:home.\n\nhttps://reviewboard.mozilla.org/r/243490/#review249386\n\ngrumbly rs=me - I'd still like to understand how this is causing crashes, and I still don't see STR in the bug... anyway, I guess that's something for a follow-up.\n\nAlso, I'm not sure why all the JS needs wrapping in an IIFE / self-executing function expression. But I mean, it'll work for the purposes of what we need it to do...", "author": "gijskruitbosch+bugs@gmail.com", "id": 13271861, "time": "2018-05-11T21:38:24Z"}, {"text": "The STR are to open a browser using Philip's profile.  Maybe he can send it to you.  (Or I can when I'm back to my computer.)", "author": "bkelly@mozilla.com", "id": 13271954, "time": "2018-05-11T22:23:10Z"}, {"text": "Pushed by edilee@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/ad8535a8e153\nRestore about flag for about:home. r=k88hudson", "author": "pulsebot@bots.tld", "id": 13272088, "time": "2018-05-11T23:39:10Z"}, {"text": "Comment on attachment 8975121\nBug 1459655 - Restore about flag for about:home.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Bug 1438367 regressed\n[User impact if declined]: Top crasher in beta\n[Is this code covered by automated tests?]: No\n[Has the fix been verified in Nightly?]: Still on autoland right now\n[Needs manual test from QE? If yes, steps to reproduce]: No\n[List of other uplifts needed for the feature/fix]: None\n[Is the change risky?]: Shouldn't be\n[Why is the change risky/not risky?]: This is reverting two changes (the regressing bug and a dependent bug) resulting in a state that was previously good on Nightly.\n[String changes made/needed]: None", "author": "edilee@mozilla.com", "id": 13272405, "time": "2018-05-12T09:35:02Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/ad8535a8e153", "author": "aryx.bugmail@gmx-topmail.de", "id": 13272437, "time": "2018-05-12T09:59:49Z"}, {"text": "Comment on attachment 8975121\nBug 1459655 - Restore about flag for about:home.\n\nIt would appear that we're still seeing crashes with this signature on Nightly builds containing the fix, but possibly at lower rates than before. It's really hard to say, though, given that it's the weekend and usage might just be lower.", "author": "ryanvm@gmail.com", "id": 13273151, "time": "2018-05-13T19:10:06Z"}, {"text": "Comment on attachment 8975121\nBug 1459655 - Restore about flag for about:home.\n\nI'm approving this for 61.0b5 because it does seem to have made a difference on Nightly, but I'm not entirely convinced we're out of the woods here yet.", "author": "ryanvm@gmail.com", "id": 13275527, "time": "2018-05-14T12:49:34Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/45cdba525a28", "author": "ryanvm@gmail.com", "id": 13275552, "time": "2018-05-14T12:54:07Z"}, {"text": "OK, so the reason this crashes is that we start an http request where the triggering principal is about:home, and the triggering principal info that HttpChannelParent gets has originNoSuffix of moz-safe-about:home , but uri of about:home, which means the codebase principal that gets constructed gets originNoSuffix of about:home, which mismatches and therefore blows up.\n\nDoing a JS stack dump in the content process for this load, it looks like it's triggered off a restoreTabContent call (see ContentRestore.jsm and content-sessionStore.js) . This makes me believe that what's happening is the following:\n\n0. set session to autorestore\n1. with Firefox version X, where about:home is non-nested, the user opens about:home and clicks a link that goes to foo.com\n2. get an update ready to version X+1 where about:home *is* nested.\n3. restart to update\n4. crash, because about:home and moz-safe-about:home are not the same.\n\nNotably, this means that now that we've switched back, people will still hit this crash but for the inverse process, where they opened a link from about:home and the meaning of the about:home origin changed again, so there's a mismatch again, so it's crashy again, which explains comment #40 (obviously there's fewer people with a session with the \"new\" version of about:home's principal than there are people with the \"old\" version of about:home's principal).", "author": "gijskruitbosch+bugs@gmail.com", "id": 13276130, "time": "2018-05-14T16:20:03Z"}, {"text": "Would it make sense to just special case that specific about:home case for some time?", "author": "ckerschb@christophkerschbaumer.com", "id": 13276312, "time": "2018-05-14T17:10:02Z"}, {"text": "(In reply to Christoph Kerschbaumer [:ckerschb] from comment #44)\n> Would it make sense to just special case that specific about:home case for\n> some time?\n\nMaybe, but it'd be nice not to get caught out like this again. Further discussion is in bug 1461407.", "author": "gijskruitbosch+bugs@gmail.com", "id": 13276625, "time": "2018-05-14T18:38:02Z"}, {"text": "I think we have enough crash data to call this verified at this point. Note that there's still an open question about uplifting bug 1461407 to Beta, but the crash rates are definitely tailing off now and we shouldn't see this on release at all after 61 ships.", "author": "ryanvm@gmail.com", "id": 13300206, "time": "2018-05-23T18:06:33Z"}], "id": 1459655, "priority": "P1", "cc": ["amarchesini@mozilla.com", "bkelly@mozilla.com", "bugmail@asutherland.org", "ckerschb@christophkerschbaumer.com", "continuation@gmail.com", "edilee@mozilla.com", "gijskruitbosch+bugs@gmail.com", "jcristau@mozilla.com", "josh@joshmatthews.net", "khudson@mozilla.com", "madperson@gmx.at", "nfroyd@mozilla.com", "ryanvm@gmail.com", "ted@mielczarek.org"], "cf_crash_signature": "[@ mozilla::ipc::PrincipalInfoToPrincipal]", "version": "Trunk", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1179505, 1438367, 1460119], "qa_contact": "", "creation_time": "2018-05-07T16:08:20Z", "cf_status_firefox_esr52": "unaffected", "component": "DOM", "assigned_to_detail": {"email": "edilee@mozilla.com", "id": 125983, "name": "edilee@mozilla.com", "real_name": "Ed Lee :Mardak"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "verified", "cf_status_firefox61": "verified", "cf_status_firefox60": "unaffected", "target_milestone": "mozilla62", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "blocker", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "mozillamarcia.knous@gmail.com", "id": 8519, "name": "mozillamarcia.knous@gmail.com", "real_name": "Marcia Knous [:marcia - needinfo? me]"}, "whiteboard": "", "mentors": [], "summary": "Crash in mozilla::ipc::PrincipalInfoToPrincipal", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-23T18:06:33Z", "assigned_to": "edilee@mozilla.com", "is_open": false, "history": [{"changes": [{"removed": "x86", "field_name": "platform", "added": "All"}, {"removed": "Windows 10", "field_name": "op_sys", "added": "All"}], "who": "mozillamarcia.knous@gmail.com", "when": "2018-05-07T16:08:39Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}, {"removed": "", "field_name": "cc", "added": "amarchesini@mozilla.com, ckerschb@christophkerschbaumer.com, continuation@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(ckerschb@christophkerschbaumer.com)"}], "who": "continuation@gmail.com", "when": "2018-05-07T19:50:45Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "affected"}], "who": "ryanvm@gmail.com", "when": "2018-05-08T01:31:16Z"}, {"changes": [{"removed": "needinfo?(ckerschb@christophkerschbaumer.com)", "field_name": "flagtypes.name", "added": ""}], "who": "ckerschb@christophkerschbaumer.com", "when": "2018-05-08T12:55:29Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bkelly@mozilla.com"}], "who": "bkelly@mozilla.com", "when": "2018-05-08T15:06:16Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(amarchesini@mozilla.com)"}], "who": "bkelly@mozilla.com", "when": "2018-05-09T15:19:16Z"}, {"changes": [{"removed": "needinfo?(amarchesini@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "amarchesini@mozilla.com", "when": "2018-05-09T15:47:20Z"}, {"changes": [{"removed": "critical", "field_name": "severity", "added": "blocker"}, {"removed": "---", "field_name": "cf_tracking_firefox61", "added": "blocking"}, {"removed": "---", "field_name": "cf_tracking_firefox62", "added": "+"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T01:49:08Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "madperson@gmx.at"}], "who": "madperson@gmx.at", "when": "2018-05-10T13:58:42Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "bkelly@mozilla.com"}], "who": "bkelly@mozilla.com", "when": "2018-05-10T14:08:10Z"}, {"changes": [{"removed": "P2", "field_name": "priority", "added": "P1"}], "who": "continuation@gmail.com", "when": "2018-05-10T14:10:04Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8974701, "added": "review?(amarchesini@mozilla.com)"}], "who": "bkelly@mozilla.com", "when": "2018-05-10T14:10:26Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1179505"}], "who": "bkelly@mozilla.com", "when": "2018-05-10T14:12:19Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(amarchesini@mozilla.com)", "attachment_id": 8974701, "added": "review+"}], "who": "amarchesini@mozilla.com", "when": "2018-05-10T14:13:41Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8974701, "added": "approval-mozilla-beta?"}], "who": "bkelly@mozilla.com", "when": "2018-05-10T15:21:19Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8974701, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T15:41:19Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T15:46:22Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-10 22:01:26"}, {"removed": "affected", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "dluca@mozilla.com", "when": "2018-05-10T22:01:26Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jcristau@mozilla.com"}], "who": "jcristau@mozilla.com", "when": "2018-05-11T07:28:10Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "REOPENED"}, {"removed": "FIXED", "field_name": "resolution", "added": ""}, {"removed": "mozilla62", "field_name": "target_milestone", "added": "---"}, {"removed": "fixed", "field_name": "cf_status_firefox61", "added": "affected"}, {"removed": "fixed", "field_name": "cf_status_firefox62", "added": "affected"}], "who": "ryanvm@gmail.com", "when": "2018-05-11T12:39:21Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ted@mielczarek.org"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(ted@mielczarek.org)"}], "who": "bkelly@mozilla.com", "when": "2018-05-11T13:26:00Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1460881"}], "who": "bkelly@mozilla.com", "when": "2018-05-11T14:32:53Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "edilee@mozilla.com"}, {"removed": "", "field_name": "blocks", "added": "1438367"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(edilee@mozilla.com)"}], "who": "madperson@gmx.at", "when": "2018-05-11T17:37:50Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "gijskruitbosch+bugs@gmail.com"}], "who": "ryanvm@gmail.com", "when": "2018-05-11T17:52:26Z"}, {"changes": [{"removed": "needinfo?(ted@mielczarek.org)", "field_name": "flagtypes.name", "added": ""}], "who": "bkelly@mozilla.com", "when": "2018-05-11T17:59:41Z"}, {"changes": [{"removed": "bkelly@mozilla.com", "field_name": "assigned_to", "added": "edilee@mozilla.com"}], "who": "bkelly@mozilla.com", "when": "2018-05-11T18:14:22Z"}, {"changes": [{"removed": "1460881", "field_name": "depends_on", "added": ""}], "who": "bkelly@mozilla.com", "when": "2018-05-11T18:17:48Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "khudson@mozilla.com"}, {"removed": "needinfo?(edilee@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "edilee@mozilla.com", "when": "2018-05-11T18:37:49Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "nfroyd@mozilla.com"}], "who": "nfroyd@mozilla.com", "when": "2018-05-11T18:51:07Z"}, {"changes": [{"removed": "", "field_name": "cf_user_story", "added": "@@ -0,0 +1 @@\n+https://github.com/mozilla/activity-stream/compare/firefox-61b3...66b23ff4695a0edd97dda9db0efa62138b001d56\n\\ No newline at end of file\n"}, {"removed": "", "field_name": "blocks", "added": "1460119"}, {"removed": "", "field_name": "depends_on", "added": "1459296"}], "who": "edilee@mozilla.com", "when": "2018-05-11T18:56:34Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8975121, "added": "review?(gijskruitbosch+bugs@gmail.com), review?(khudson@mozilla.com)"}], "who": "edilee@mozilla.com", "when": "2018-05-11T19:13:45Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(khudson@mozilla.com)", "attachment_id": 8975121, "added": "review+"}], "who": "khudson@mozilla.com", "when": "2018-05-11T19:24:12Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gijskruitbosch+bugs@gmail.com)", "attachment_id": 8975121, "added": "review+"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-05-11T21:38:24Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8975121, "added": "approval-mozilla-beta?"}], "who": "edilee@mozilla.com", "when": "2018-05-12T09:35:02Z"}, {"changes": [{"removed": "REOPENED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "2018-05-10 22:01:26", "field_name": "cf_last_resolved", "added": "2018-05-12 09:59:49"}, {"removed": "affected", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "aryx.bugmail@gmx-topmail.de", "when": "2018-05-12T09:59:49Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(edilee@mozilla.com)"}], "who": "ryanvm@gmail.com", "when": "2018-05-13T19:10:06Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8975121, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-05-14T12:49:34Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-14T12:54:07Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bugmail@asutherland.org"}], "who": "bugmail@asutherland.org", "when": "2018-05-14T16:22:26Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1461407"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-05-14T18:22:21Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "josh@joshmatthews.net"}], "who": "josh@joshmatthews.net", "when": "2018-05-15T02:16:40Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "VERIFIED"}, {"removed": "needinfo?(edilee@mozilla.com)", "field_name": "flagtypes.name", "added": ""}, {"removed": "fixed", "field_name": "cf_status_firefox61", "added": "verified"}, {"removed": "fixed", "field_name": "cf_status_firefox62", "added": "verified"}], "who": "ryanvm@gmail.com", "when": "2018-05-23T18:06:33Z"}], "resolution": "FIXED", "op_sys": "All", "cf_fx_points": "---", "cf_blocking_fennec": "---"}