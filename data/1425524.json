{"status": "NEW", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Client Software", "creator": "nfroyd@mozilla.com", "cc": ["agaynor@mozilla.com", "bkelly@mozilla.com", "bruant.d@gmail.com", "continuation@gmail.com", "erahm@mozilla.com", "florian@queze.net", "gijskruitbosch+bugs@gmail.com", "harshid@gmail.com", "jhofmann@mozilla.com", "josh@joshmatthews.net", "jryans@gmail.com", "mcastelluccio@mozilla.com", "yfdyh000@gmail.com"], "depends_on": [], "creation_time": "2017-12-15T20:00:22Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "All", "keywords": ["meta", "perf"], "summary": "[meta] move frontend content process JS code to C++ or Rust where feasible", "cf_last_resolved": null, "attachments": [], "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 3, "comments": [{"text": "Not sure if the bug title is super-accurate, but let's go with this for now.\n\nJS code for content processes is inefficient from the memory point of view: we're paying the cost for JS source, JS objects, bytecode, JIT code, etc. in every single content process.  In contrast, putting similar code in C++ can get shared between all processes, and the C++ objects are...probably smaller than their equivalent JS objects?  Depends on a bunch of factors, I guess.\n\nAnyway, this was an idea we came up talking about memory usage for content processes, and talking to Gijs indicated that it wasn't a completely off-base idea.  Filing a bug for people to comment and also for people to hang dependent work off of.\n\nSee bug 1425466 for similar, but related things.", "author": "nfroyd@mozilla.com", "id": 12920581, "time": "2017-12-15T20:00:22Z"}, {"text": "Is porting things to Rust, so we don't end up trading memory for vulnerabilities, an option? Or is that blocked on us having the infrastructure for Rust to directly implement/consume interfaces?", "author": "agaynor@mozilla.com", "id": 13108720, "time": "2018-03-06T17:55:21Z"}, {"text": "(In reply to Alex Gaynor [:Alex_Gaynor] from comment #1)\n> Is porting things to Rust, so we don't end up trading memory for\n> vulnerabilities, an option? Or is that blocked on us having the\n> infrastructure for Rust to directly implement/consume interfaces?\n\nThis is an option.  We have the ability to implement XPIDL interfaces in Rust nowadays, so it doesn't even have to involve writing C++ shims for things.\n\nBug 1356594 comment 6 contains a useful caution about doing all of this.", "author": "nfroyd@mozilla.com", "id": 13108732, "time": "2018-03-06T17:58:44Z"}], "id": 1425524, "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "---", "cf_platform_rel": "---", "product": "Firefox", "cf_status_firefox_esr52": "---", "blocks": [1436250], "qa_contact": "", "see_also": ["https://bugzilla.mozilla.org/show_bug.cgi?id=1350472"], "cf_fx_iteration": "---", "component": "General", "votes": 4, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "---", "is_cc_accessible": true, "cf_rank": null, "groups": [], "url": "", "creator_detail": {"email": "nfroyd@mozilla.com", "id": 417288, "name": "nfroyd@mozilla.com", "real_name": "Nathan Froyd [:froydnj]"}, "whiteboard": "[MemShrink:meta]", "mentors": [], "cc_detail": [{"email": "agaynor@mozilla.com", "id": 537703, "name": "agaynor@mozilla.com", "real_name": "Alex Gaynor [:Alex_Gaynor]"}, {"email": "bkelly@mozilla.com", "id": 465500, "name": "bkelly@mozilla.com", "real_name": "Ben Kelly [:bkelly]"}, {"email": "bruant.d@gmail.com", "id": 365126, "name": "bruant.d@gmail.com", "real_name": "David Bruant"}, {"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, {"email": "erahm@mozilla.com", "id": 496127, "name": "erahm@mozilla.com", "real_name": "Eric Rahm [:erahm] (please no mozreview requests)"}, {"email": "florian@queze.net", "id": 149052, "name": "florian@queze.net", "real_name": "Florian Qu\u00e8ze [:florian]"}, {"email": "gijskruitbosch+bugs@gmail.com", "id": 159069, "name": "gijskruitbosch+bugs@gmail.com", "real_name": ":Gijs (he/him)"}, {"email": "harshid@gmail.com", "id": 152647, "name": "harshid@gmail.com", "real_name": "Harsh86"}, {"email": "jhofmann@mozilla.com", "id": 522029, "name": "jhofmann@mozilla.com", "real_name": "Johann Hofmann [:johannh]"}, {"email": "josh@joshmatthews.net", "id": 241497, "name": "josh@joshmatthews.net", "real_name": "Josh Matthews [:jdm]"}, {"email": "jryans@gmail.com", "id": 282978, "name": "jryans@gmail.com", "real_name": "J. Ryan Stinnett [:jryans] (use ni?)"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "yfdyh000@gmail.com", "id": 398515, "name": "yfdyh000@gmail.com", "real_name": "YF (Yang)"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-04-09T22:03:34Z", "cf_status_firefox_esr60": "---", "assigned_to": "nobody@mozilla.org", "is_open": true, "resolution": "", "op_sys": "All", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "jhofmann@mozilla.com"}], "who": "jhofmann@mozilla.com", "when": "2017-12-15T23:37:49Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "perf"}, {"removed": "", "field_name": "cc", "added": "yfdyh000@gmail.com"}], "who": "yfdyh000@gmail.com", "when": "2017-12-31T21:06:04Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "florian@queze.net"}, {"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1350472"}], "who": "florian@queze.net", "when": "2018-01-09T16:26:05Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2018-01-09T17:09:12Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": " [MemShrink]"}], "who": "mcastelluccio@mozilla.com", "when": "2018-01-09T17:16:39Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "harshid@gmail.com"}], "who": "harshid@gmail.com", "when": "2018-01-10T10:41:26Z"}, {"changes": [{"removed": " [MemShrink]", "field_name": "whiteboard", "added": "[MemShrink:meta]"}], "who": "erahm@mozilla.com", "when": "2018-01-10T20:17:10Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1436250"}], "who": "continuation@gmail.com", "when": "2018-03-06T17:53:04Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "agaynor@mozilla.com"}], "who": "agaynor@mozilla.com", "when": "2018-03-06T17:53:52Z"}, {"changes": [{"removed": "[meta] move frontend content process JS code to C++ where feasible", "field_name": "summary", "added": "[meta] move frontend content process JS code to C++ or Rust where feasible"}], "who": "continuation@gmail.com", "when": "2018-03-06T17:56:49Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "josh@joshmatthews.net"}], "who": "josh@joshmatthews.net", "when": "2018-03-06T20:53:58Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bkelly@mozilla.com"}], "who": "bkelly@mozilla.com", "when": "2018-03-19T20:36:33Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bruant.d@gmail.com"}], "who": "bruant.d@gmail.com", "when": "2018-04-07T20:49:52Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jryans@gmail.com"}], "who": "jryans@gmail.com", "when": "2018-04-09T22:03:34Z"}]}