{"cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Components", "creator": "intermittent-bug-filer@mozilla.bugs", "mentors_detail": [], "depends_on": [], "creation_time": "2018-04-17T15:02:13Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "keywords": ["intermittent-failure"], "summary": "Intermittent Test-Verify devtools/client/inspector/markup/test/browser_markup_links_06.js | A promise chain failed to handle a rejection this.worker is null - stack flush@resource://devtools/shared/base-loader.js - devtools/client/debugger/new/debugger.js", "cf_last_resolved": "2018-05-14T06:11:44Z", "attachments": [], "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "comments": [{"text": "Filed by: csabou [at] mozilla.com\n\nhttps://treeherder.mozilla.org/logviewer.html#?job_id=174098382&repo=mozilla-inbound\n\nhttps://queue.taskcluster.net/v1/task/MmtaGi2DR9anLan0yx3gDg/runs/0/artifacts/public/logs/live_backing.log\n\n[task 2018-04-17T13:36:07.962Z] 13:36:07     INFO - TEST-UNEXPECTED-FAIL | devtools/client/inspector/markup/test/browser_markup_links_06.js | A promise chain failed to handle a rejection: this.worker is null - stack: flush@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3407:7\n[task 2018-04-17T13:36:07.963Z] 13:36:07     INFO - push/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3397:11\n[task 2018-04-17T13:36:07.966Z] 13:36:07     INFO - push@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3389:14\n[task 2018-04-17T13:36:07.966Z] 13:36:07     INFO - task/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3434:25\n[task 2018-04-17T13:36:07.967Z] 13:36:07     INFO - loadSourceText/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:9590:13\n[task 2018-04-17T13:36:07.968Z] 13:36:07     INFO - async*thunk/</</<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:28680:45\n[task 2018-04-17T13:36:07.968Z] 13:36:07     INFO - dispatch@resource://devtools/shared/base-loader.js -> resource://devtools/client/shared/vendor/redux.js:755:18\n[task 2018-04-17T13:36:07.970Z] 13:36:07     INFO - selectLocation/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:31845:11\n[task 2018-04-17T13:36:07.970Z] 13:36:07     INFO - async*thunk/</</<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:28680:45\n[task 2018-04-17T13:36:07.971Z] 13:36:07     INFO - dispatch@resource://devtools/shared/base-loader.js -> resource://devtools/client/shared/vendor/redux.js:755:18\n[task 2018-04-17T13:36:07.972Z] 13:36:07     INFO - checkSelectedSource/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:31609:13\n[task 2018-04-17T13:36:07.972Z] 13:36:07     INFO - async*thunk/</</<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:28680:45\n[task 2018-04-17T13:36:07.973Z] 13:36:07     INFO - dispatch@resource://devtools/shared/base-loader.js -> resource://devtools/client/shared/vendor/redux.js:755:18\n[task 2018-04-17T13:36:07.974Z] 13:36:07     INFO - newSources/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:31674:7\n[task 2018-04-17T13:36:07.974Z] 13:36:07     INFO - async*thunk/</</<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:28680:45\n[task 2018-04-17T13:36:07.976Z] 13:36:07     INFO - bindActionCreator/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/shared/vendor/redux.js:644:12\n[task 2018-04-17T13:36:07.977Z] 13:36:07     INFO - dispatchNewSources@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:30975:23\n[task 2018-04-17T13:36:07.978Z] 13:36:07     INFO - async*invokeFunc@resource://devtools/shared/base-loader.js -> resource://devtools/client/shared/vendor/lodash.js:10350:18\n[task 2018-04-17T13:36:07.980Z] 13:36:07     INFO - leadingEdge@resource://devtools/shared/base-loader.js -> resource://devtools/client/shared/vendor/lodash.js:10360:26\n[task 2018-04-17T13:36:07.981Z] 13:36:07     INFO - debounced@resource://devtools/shared/base-loader.js -> resource://devtools/client/shared/vendor/lodash.js:10425:20\n[task 2018-04-17T13:36:07.982Z] 13:36:07     INFO - queue@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:30989:5\n[task 2018-04-17T13:36:07.983Z] 13:36:07     INFO - newSource@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:13295:3\n[task 2018-04-17T13:36:07.984Z] 13:36:07     INFO - eventSource/proto.emit@resource://devtools/shared/base-loader.js -> resource://devtools/shared/client/event-source.js:124:9\n[task 2018-04-17T13:36:07.985Z] 13:36:07     INFO - onPacket@resource://devtools/shared/base-loader.js -> resource://devtools/shared/client/debugger-client.js:878:9\n[task 2018-04-17T13:36:07.987Z] 13:36:07     INFO - send/<@resource://devtools/shared/base-loader.js -> resource://devtools/shared/transport/transport.js:553:13\n[task 2018-04-17T13:36:07.988Z] 13:36:07     INFO - exports.makeInfallible/<@resource://devtools/shared/base-loader.js -> resource://devtools/shared/ThreadSafeDevToolsUtils.js:109:14\n[task 2018-04-17T13:36:07.989Z] 13:36:07     INFO - DevToolsUtils.executeSoon*exports.executeSoon@resource://devtools/shared/base-loader.js -> resource://devtools/shared/DevToolsUtils.js:57:19\n[task 2018-04-17T13:36:07.990Z] 13:36:07     INFO - send@resource://devtools/shared/base-loader.js -> resource://devtools/shared/transport/transport.js:547:9\n[task 2018-04-17T13:36:07.990Z] 13:36:07     INFO - send@resource://devtools/shared/base-loader.js -> resource://devtools/server/main.js:1473:5\n[task 2018-04-17T13:36:07.991Z] 13:36:07     INFO - receiveMessage@resource://devtools/shared/base-loader.js -> resource://devtools/shared/transport/transport.js:735:7\n[task 2018-04-17T13:36:07.992Z] 13:36:07     INFO - MessageListener.receiveMessage*_addListener@resource://devtools/shared/base-loader.js -> resource://devtools/shared/transport/transport.js:709:7\n[task 2018-04-17T13:36:07.993Z] 13:36:07     INFO - ready@resource://devtools/shared/base-loader.js -> resource://devtools/shared/transport/transport.js:726:7\n[task 2018-04-17T13:36:07.993Z] 13:36:07     INFO - connectToFrame/</onActorCreated<@resource://devtools/shared/base-loader.js -> resource://devtools/server/main.js:1056:9\n[task 2018-04-17T13:36:07.994Z] 13:36:07     INFO - exports.makeInfallible/<@resource://devtools/shared/base-loader.js -> resource://devtools/shared/ThreadSafeDevToolsUtils.js:109:14\n[task 2018-04-17T13:36:07.995Z] 13:36:07     INFO - Rejection date: Tue Apr 17 2018 13:36:06 GMT+0000 (UTC) - false == true - JS frame :: resource://testing-common/PromiseTestUtils.jsm :: assertNoUncaughtRejections :: line 257\n[task 2018-04-17T13:36:07.995Z] 13:36:07     INFO - Stack trace:\n[task 2018-04-17T13:36:07.996Z] 13:36:07     INFO -     resource://testing-common/PromiseTestUtils.jsm:assertNoUncaughtRejections:257\n[task 2018-04-17T13:36:07.997Z] 13:36:07     INFO -     chrome://mochikit/content/browser-test.js:Tester.prototype.nextTest<:714\n[task 2018-04-17T13:36:07.998Z] 13:36:07     INFO -     testScope/test_finish/<@chrome://mochikit/content/browser-test.js:1372:11\n[task 2018-04-17T13:36:07.999Z] 13:36:07     INFO -     run@chrome://mochikit/content/browser-test.js:1309:9\n[task 2018-04-17T13:36:08.000Z] 13:36:07     INFO - GECKO(1048) | MEMORY STAT | vsize 2502MB | residentFast 435MB | heapAllocated 168MB", "author": "intermittent-bug-filer@mozilla.bugs", "id": 13212657, "time": "2018-04-17T15:02:13Z"}, {"text": "34 failures in 148 pushes (0.23 failures/push) were associated with this bug yesterday.    \n\nRepository breakdown:\n* mozilla-inbound: 14\n* autoland: 11\n* mozilla-central: 9\n\nPlatform breakdown:\n* linux64: 10\n* windows7-32: 7\n* windows10-64: 7\n* windows10-64-qr: 4\n* osx-10-10: 4\n* linux64-qr: 2\n\nFor more details, see:\nhttps://treeherder.mozilla.org/intermittent-failures.html#/bugdetails?bug=1454674&startday=2018-04-17&endday=2018-04-17&tree=trunk", "author": "orangefactor@bots.tld", "id": 13214215, "time": "2018-04-18T01:01:38Z"}, {"text": "Over the last 7 days this bug has 34 failures. Most of these happen on Linux x64, linux64-qr, OS X 10.10, Windows 7, windows10-64, windows10-64-qr\n\nHere is the most recent log example: https://treeherder.mozilla.org/logviewer.html#?repo=autoland&job_id=174236950&lineNumber=5318\n\nHere is the relevant part from that log: \n\n00:23:37     INFO -  1226 INFO Got event: 'TabClose' on [object XULElement].\n00:23:37     INFO -  1227 INFO Tab removed and finished closing\n00:23:38     INFO -  TEST-INFO | started process screenshot\n00:23:38     INFO -  TEST-INFO | screenshot: exit 0\n00:23:38    ERROR -  1228 INFO TEST-UNEXPECTED-FAIL | devtools/client/inspector/markup/test/browser_markup_links_06.js | A promise chain failed to handle a rejection: this.worker is null - stack: flush@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3407:7\n00:23:38     INFO -  push/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3397:11\n00:23:38     INFO -  push@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3389:14\n00:23:38     INFO -  task/<@resource://devtools/shared/base-loader.js -> resource://devtools/client/debugger/new/debugger.js:3434:25", "author": "shindli@mozilla.com", "id": 13217632, "time": "2018-04-19T07:26:52Z"}, {"text": "Any thoughts?", "author": "gl@mozilla.com", "id": 13220412, "time": "2018-04-20T02:29:23Z"}, {"text": "Test-Verify failure, so hard to know if this is a recent intermittent or if the test had not run in TV in a while. The change that pushed the test in TV was https://hg.mozilla.org/integration/mozilla-inbound/rev/7674892ac2302b03c75cae1174bff06bffe280ea but the promise rejection we have here doesn't match the regexp that was removed so probably unrelated.\n\nFails on an uncaught promise rejection coming from the debugger, so could be linked to a debugger update? Again with TV tests it's going to be difficult to say anything without narrowing the regression window.\n\nRegardless we can probably guard the task in the debugger: https://github.com/devtools-html/debugger.html/issues/6031\nLocally this seems to fix the issue for me.", "author": "jdescottes@mozilla.com", "id": 13220835, "time": "2018-04-20T09:01:47Z"}, {"text": "36 failures in 782 pushes (0.046 failures/push) were associated with this bug in the last 7 days.   \n\n** This failure happened more than 30 times this week! Resolving this bug is a high priority. **\n\n** Try to resolve this bug as soon as possible. If unresolved for 2 weeks, the affected test(s) may be disabled. **  \n\nRepository breakdown:\n* mozilla-inbound: 14\n* autoland: 13\n* mozilla-central: 9\n\nPlatform breakdown:\n* linux64: 10\n* windows7-32: 8\n* windows10-64: 7\n* windows10-64-qr: 5\n* osx-10-10: 4\n* linux64-qr: 2\n\nFor more details, see:\nhttps://treeherder.mozilla.org/intermittent-failures.html#/bugdetails?bug=1454674&startday=2018-04-16&endday=2018-04-22&tree=trunk", "author": "orangefactor@bots.tld", "id": 13225709, "time": "2018-04-23T01:38:48Z"}, {"text": "https://wiki.mozilla.org/Bug_Triage#Intermittent_Test_Failure_Cleanup", "author": "bug-husbandry-bot@mozilla.bugs", "id": 13274837, "time": "2018-05-14T06:11:44Z"}], "id": 1454674, "priority": "P5", "platform": "Unspecified", "comment_count": 7, "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "---", "status": "RESOLVED", "product": "DevTools", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "", "see_also": [], "cf_status_firefox_esr52": "---", "component": "Inspector", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "---", "cc": ["gl@mozilla.com", "jdescottes@mozilla.com"], "groups": [], "url": "", "creator_detail": {"email": "intermittent-bug-filer@mozilla.bugs", "id": 573381, "name": "intermittent-bug-filer@mozilla.bugs", "real_name": "Treeherder Bug Filer"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "gl@mozilla.com", "id": 475223, "name": "gl@mozilla.com", "real_name": "Gabriel [:gl] (\u03a6\u03c9\u03a6)"}, {"email": "jdescottes@mozilla.com", "id": 559949, "name": "jdescottes@mozilla.com", "real_name": "Julian Descottes [:jdescottes][:julian]"}], "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-06-13T17:27:05Z", "cf_status_firefox_esr60": "---", "assigned_to": "nobody@mozilla.org", "is_open": false, "cf_qa_whiteboard": "", "resolution": "INCOMPLETE", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "gl@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(gl@mozilla.com)"}], "who": "shindli@mozilla.com", "when": "2018-04-19T07:26:52Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jdescottes@mozilla.com"}, {"removed": "needinfo?(gl@mozilla.com)", "field_name": "flagtypes.name", "added": "needinfo?(jdescottes@mozilla.com)"}], "who": "gl@mozilla.com", "when": "2018-04-20T02:29:23Z"}, {"changes": [{"removed": "needinfo?(jdescottes@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "jdescottes@mozilla.com", "when": "2018-04-20T09:01:47Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "INCOMPLETE"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-14 06:11:44"}], "who": "bug-husbandry-bot@mozilla.bugs", "when": "2018-05-14T06:11:44Z"}, {"changes": [{"removed": "Firefox", "field_name": "product", "added": "DevTools"}], "who": "automation@bmo.tld", "when": "2018-06-13T17:27:05Z"}]}