{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "emmeci@linuxmail.org", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86_64", "cf_status_firefox59": "wontfix", "keywords": [], "cc_detail": [{"email": "code@jmlevick.me", "id": 612070, "name": "code@jmlevick.me", "real_name": ""}, {"email": "craig@stroppykitten.com", "id": 605491, "name": "craig@stroppykitten.com", "real_name": "Craig Miskell"}, {"email": "cristian.comorasu@softvision.ro", "id": 572409, "name": "cristian.comorasu@softvision.ro", "real_name": "Cristian Comorasu [:ccomorasu], Release Desktop QA"}, {"email": "emmeci@linuxmail.org", "id": 611103, "name": "emmeci@linuxmail.org", "real_name": ""}, {"email": "gpascutto@mozilla.com", "id": 151147, "name": "gpascutto@mozilla.com", "real_name": "Gian-Carlo Pascutto [:gcp]"}, {"email": "gustavo.diaz@gdnet.com.ar", "id": 612162, "name": "gustavo.diaz@gdnet.com.ar", "real_name": "Gustavo A. D\u00edaz"}, {"email": "jeff.grasty@gmail.com", "id": 611642, "name": "jeff.grasty@gmail.com", "real_name": "jeffg"}, {"email": "jgilbert@mozilla.com", "id": 419431, "name": "jgilbert@mozilla.com", "real_name": "Jeff Gilbert [:jgilbert]"}, {"email": "jld@mozilla.com", "id": 462836, "name": "jld@mozilla.com", "real_name": "Jed Davis [:jld] (\u23f0UTC-6)"}, {"email": "marcodv@seznam.cz", "id": 522841, "name": "marcodv@seznam.cz", "real_name": "JonnyRobbie"}, {"email": "sledru@mozilla.com", "id": 495955, "name": "sledru@mozilla.com", "real_name": "Sylvestre Ledru [:sylvestre]"}, {"email": "sotaro.ikeda.g@gmail.com", "id": 434202, "name": "sotaro.ikeda.g@gmail.com", "real_name": "Sotaro Ikeda [:sotaro]"}], "cf_last_resolved": "2018-04-04T17:56:41Z", "attachments": [{"creator": "gpascutto@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-04-03T21:45:05Z", "type_id": 4, "creation_date": "2018-04-03T16:46:46Z", "id": 1738571, "setter": "jld@mozilla.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-04-09T16:53:34Z", "type_id": 721, "creation_date": "2018-04-09T14:45:38Z", "id": 1741181, "setter": "ryanvm@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8964009}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 55, "comments": [{"text": "User Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:58.0) Gecko/20100101 Firefox/58.0\nBuild ID: 20180131010234\n\nSteps to reproduce:\n\nOn some website (Facebook with the chat window popup opened, Google Maps and some minor website) tab crash during load, and this happened right after the update to Firefox 58. \n\nthe driver installed for the GPU is AMDGPU-PRO 17.50-511655\n\n\nActual results:\n\n\nThis issue have generated a crash report you can find here (https://crash-stats.mozilla.com/report/index/33dda5a8-8ea5-468c-a15a-052b80180127) and i tested with the browser in safe mode and with a new profile and even with Noscript enabled to be sure isn't a script on the webpage , and the crash still happen. \n\nOpening the browser trough Bash and trying to reproduce the crash give this stdout:\n\nivan@yang:~$ firefox\nMESA-LOADER: could not get parent device\n/opt/amdgpu/share/libdrm/amdgpu.ids: Permesso negato\n[Parent 6363, Gecko_IOThread] WARNING: pipe error (174): Connessione interrotta dal corrispondente: file /build/firefox-ox8TnP/firefox-58.0.1+build1/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Parent 6363, Gecko_IOThread] WARNING: pipe error (47): Connessione interrotta dal corrispondente: file /build/firefox-ox8TnP/firefox-58.0.1+build1/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n[Parent 6363, Gecko_IOThread] WARNING: pipe error (46): Connessione interrotta dal corrispondente: file /build/firefox-ox8TnP/firefox-58.0.1+build1/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 353\n\n###!!! [Parent][MessageChannel] Error: (msgtype=0x150084,name=PBrowser::Msg_Destroy) Channel error: cannot send/recv\n\n\n###!!! [Parent][MessageChannel] Error: (msgtype=0x150084,name=PBrowser::Msg_Destroy) Channel error: cannot send/recv", "author": "emmeci@linuxmail.org", "id": 13009459, "time": "2018-01-31T20:40:32Z"}, {"text": "Just an update to say that even http://www.poste.it, the website of Poste Italiane (postal service associated with Universal Postal Union for Italy) that have also bank service have the same problem. \n\nSo i think is good to promote this bug with a more high priority", "author": "emmeci@linuxmail.org", "id": 13016378, "time": "2018-02-04T09:46:19Z"}, {"text": "I am having the same problem going to various sites, specifically https://www.udemy.com/\nCrash signature: https://crash-stats.mozilla.com/report/index/58265950-7016-4d43-994b-6dd960180208", "author": "jeff.grasty@gmail.com", "id": 13026356, "time": "2018-02-08T00:08:45Z"}, {"text": "Seeing this a lot too (e.g. https://crash-stats.mozilla.com/report/index/e3da8434-47e7-45b1-b5a3-0d2570180210).  Trivially reproducible when accessing https://www.reddit.com/ in private mode (but not in normal mode).  Additionally, if I have reddit.com open in non-private mode and then open it in private mode, both tabs crash, as did a tab I had open to crash-stats.mozilla.org.  Many other tabs were unaffected (so yay for process isolation?)", "author": "craig@stroppykitten.com", "id": 13033083, "time": "2018-02-10T21:21:35Z"}, {"text": "Also, for the record, still happening in 58.0.2 despite the temptingly labelled fix of \"Blocklisted graphics drivers related to off main thread painting crashes\"", "author": "craig@stroppykitten.com", "id": 13033239, "time": "2018-02-11T04:34:12Z"}, {"text": "I can confirm this issue. crashing sites: www.bonprix.cz www.irozhlas.cz or www.reddit.com (in a private window).\n\ncrash report: https://crash-stats.mozilla.com/report/index/72fe20c8-4fb8-4564-9c71-8375c0180211\nabout:support https://hastebin.com/ojuwikidab.json\n\n$ uname -roms\nLinux 4.13.0-32-generic x86_64 GNU/Linux\n$ lsb_release -a\nNo LSB modules are available.\nDistributor ID:\tUbuntu\nDescription:\tUbuntu 17.10\nRelease:\t17.10\nCodename:\tartful\n$ lspci -v\n...\n01:05.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] RS690M [Radeon Xpress 1200/1250/1270] (prog-if 00 [VGA controller])\n\tSubsystem: Hewlett-Packard Company RS690M [Radeon Xpress 1200/1250/1270]\n\tFlags: bus master, fast devsel, latency 64, IRQ 16, NUMA node 0\n\tMemory at c0000000 (64-bit, prefetchable) [size=128M]\n\tMemory at d0100000 (64-bit, non-prefetchable) [size=64K]\n\tI/O ports at 4000 [size=256]\n\tMemory at d0200000 (32-bit, non-prefetchable) [size=1M]\n\t[virtual] Expansion ROM at 000c0000 [disabled] [size=128K]\n\tCapabilities: <access denied>\n\tKernel driver in use: radeon\n\tKernel modules: radeon\n...\n\nIs there at least some temporary workaround? It's honestly pretty major issue, since the problem happened not on my pc.", "author": "marcodv@seznam.cz", "id": 13033429, "time": "2018-02-11T14:17:26Z"}, {"text": "I confirm issue still persist on 58.0.2, probably the \"Blocklisted graphics drivers related to off main thread painting crashes\" and \"Tab crash during printing\" are not fix related to this bug", "author": "emmeci@linuxmail.org", "id": 13038602, "time": "2018-02-13T12:24:08Z"}, {"text": "Happens too on Ubuntu 16.04 x86_64 and firefox developer edition 59.0b9 (64-bits), page I'm getting this error in is:\n\nhttps://html5test.com\n\nLatest crash report I have is:\n\nhttps://crash-stats.mozilla.com/report/index/9134a977-a201-45d7-b1d4-9f8440180215", "author": "code@jmlevick.me", "id": 13043732, "time": "2018-02-15T05:01:52Z"}, {"text": "The followings are crash stats in this bug. When the crash stats had the valid gecko stack, the stack has gl::GLXLibrary::EnsureInitialized() and WebGLContext::CreateAndInitGLWith(). The crash seems to be related to WebGL initialization.\n\n--------------------------------\n\nhttps://crash-stats.mozilla.com/report/index/33dda5a8-8ea5-468c-a15a-052b80180127\nhttps://crash-stats.mozilla.com/report/index/58265950-7016-4d43-994b-6dd960180208\nhttps://crash-stats.mozilla.com/report/index/e3da8434-47e7-45b1-b5a3-0d2570180210\nhttps://crash-stats.mozilla.com/report/index/72fe20c8-4fb8-4564-9c71-8375c0180211\nhttps://crash-stats.mozilla.com/report/index/9134a977-a201-45d7-b1d4-9f8440180215", "author": "sotaro.ikeda.g@gmail.com", "id": 13043742, "time": "2018-02-15T05:13:16Z"}, {"text": ":jgilbert, can you comment to this bug?", "author": "sotaro.ikeda.g@gmail.com", "id": 13043746, "time": "2018-02-15T05:14:31Z"}, {"text": "(In reply to code from comment #7)\n> Happens too on Ubuntu 16.04 x86_64 and firefox developer edition 59.0b9\n> (64-bits), page I'm getting this error in is:\n> \n> https://html5test.com\n> \n> Latest crash report I have is:\n> \n> https://crash-stats.mozilla.com/report/index/9134a977-a201-45d7-b1d4-\n> 9f8440180215\n\nAdditional info I've gathered:\n\n1) On \"safe mode\" the bug does not happen, but on normal mode even with all the add-ons disabled it still happens.\n\n2) Was able to workaround it by following the advice on this thread: https://support.mozilla.org/eu/questions/1204598\n\nBasically I had to disable webGL in the advanced config and it worked again, BUT no webgl support tho.", "author": "code@jmlevick.me", "id": 13046780, "time": "2018-02-16T03:49:46Z"}, {"text": "Yes, disabling WebGL resolve the issue, but I don't think the problem is into the AMDGPU-PRO itself, but the implementation Firefox have with the driver and WebGL. On Chromium i don't experience any crash.", "author": "emmeci@linuxmail.org", "id": 13047400, "time": "2018-02-16T13:03:09Z"}, {"text": "Hi,\n\n    This is happening to me too, no matter if I install latest amdgpu-pro driver, still the problem persist.\n\nThis does not happen with Google Chrome at all.\n\nOS: Ubuntu 16.04\nFirefox: 58.0.1\n\nThanks.", "author": "gustavo.diaz@gdnet.com.ar", "id": 13047411, "time": "2018-02-16T13:14:42Z"}, {"text": "I could also reproduce this issue using Fx 59.0b11, on Ubuntu 16.04 LTS x64 having an AMD graphics card.( Radeon (TM) RX 480 Graphics). \nI can confirm it is a webGL related issue. Marking this bug accordingly!", "author": "cristian.comorasu@softvision.ro", "id": 13054586, "time": "2018-02-20T15:43:47Z"}, {"text": "Hi,\n\n    Any news about this bug? I've switched from Chrome to Firefox when this new Firefox arrived, but now is almost impossible to use it (as for example, firefox crash even with Facebook Chat and so many websites).\n\nThanks.", "author": "gustavo.diaz@gdnet.com.ar", "id": 13104492, "time": "2018-03-05T12:24:08Z"}, {"text": "Disable WebGL on about:config as workaround", "author": "emmeci@linuxmail.org", "id": 13105605, "time": "2018-03-05T18:26:22Z"}, {"text": "Yeah, I know... but no WebGL support then... Thanks anyways :)", "author": "gustavo.diaz@gdnet.com.ar", "id": 13105616, "time": "2018-03-05T18:28:23Z"}, {"text": "GLXLibrary.h:119 comes up at least twice, where we do have crash stacks, which is glxQueryVersion:\nhttps://dxr.mozilla.org/mozilla-central/rev/6ff60a083701d08c52702daf50f28e8f46ae3a1c/gfx/gl/GLXLibrary.h#119", "author": "jgilbert@mozilla.com", "id": 13126625, "time": "2018-03-13T22:01:28Z"}, {"text": "Bug glXQueryVersion has been around since v1.0, and GLLibraryLoader::LoadSymbols returns false if any symbol failed to load. This means we may be getting a non-null, but invalid glXQueryVersion pointer.", "author": "jgilbert@mozilla.com", "id": 13126667, "time": "2018-03-13T22:22:35Z"}, {"text": "(In reply to Cristian Comorasu [:CristiComo] from comment #13)\n> I could also reproduce this issue using Fx 59.0b11, on Ubuntu 16.04 LTS x64\n> having an AMD graphics card.( Radeon (TM) RX 480 Graphics). \n> I can confirm it is a webGL related issue. Marking this bug accordingly!\n\nCan you give me an about:support for that machine? I have a R9 390 on Arch that's working fine.", "author": "jgilbert@mozilla.com", "id": 13126820, "time": "2018-03-13T23:42:00Z"}, {"text": "I have also a RX480. about:support :\n\nNOTE: of course I've disabled \"uBlock origin\" (or any other extension) before reproducing the bug:\n\n\nApplication Basics\n------------------\n\nName: Firefox\nVersion: 58.0.1\nBuild ID: 20180205104257\nUser Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:58.0) Gecko/20100101 Firefox/58.0\nOS: Linux 4.13.0-36-generic\nMultiprocess Windows: 1/1 (Enabled by default)\nWeb Content Processes: 2/4\nStylo: content = true (enabled by default), chrome = false (disabled by default)\nGoogle Key: Found\nMozilla Location Service Key: Missing\nSafe Mode: false\n\nCrash Reports for the Last 3 Days\n---------------------------------\n\nAll Crash Reports\n\nFirefox Features\n----------------\n\nName: Activity Stream\nVersion: 2018.01.04.0062-4997c81d\nID: activity-stream@mozilla.org\n\nName: Application Update Service Helper\nVersion: 2.0\nID: aushelper@mozilla.org\n\nName: Firefox Screenshots\nVersion: 25.0.0\nID: screenshots@mozilla.org\n\nName: Follow-on Search Telemetry\nVersion: 0.9.6\nID: followonsearch@mozilla.com\n\nName: Form Autofill\nVersion: 1.0\nID: formautofill@mozilla.org\n\nName: Photon onboarding\nVersion: 1.0\nID: onboarding@mozilla.org\n\nName: Pocket\nVersion: 1.0.5\nID: firefox@getpocket.com\n\nName: Shield Recipe Client\nVersion: 76.1\nID: shield-recipe-client@mozilla.org\n\nName: Web Compat\nVersion: 1.1\nID: webcompat@mozilla.org\n\nExtensions\n----------\n\nName: uBlock Origin\nVersion: 1.15.10\nEnabled: true\nID: uBlock0@raymondhill.net\n\nGraphics\n--------\n\nFeatures\nCompositing: Basic\nAsynchronous Pan/Zoom: wheel input enabled; scrollbar drag enabled; keyboard enabled; autoscroll enabled\nWebGL 1 Driver WSI Info: -\nWebGL 1 Driver Renderer: WebGL is currently disabled.\nWebGL 1 Driver Version: -\nWebGL 1 Driver Extensions: -\nWebGL 1 Extensions: -\nWebGL 2 Driver WSI Info: -\nWebGL 2 Driver Renderer: WebGL is currently disabled.\nWebGL 2 Driver Version: -\nWebGL 2 Driver Extensions: -\nWebGL 2 Extensions: -\nGPU #1\nActive: Yes\nDescription: ATI Technologies Inc. -- AMD Radeon (TM) RX 480 Graphics\nVendor ID: ATI Technologies Inc.\nDevice ID: AMD Radeon (TM) RX 480 Graphics\nDriver Version: 4.5.13505 Compatibility Profile Context 17.50.2.13\n\nDiagnostics\nAzureCanvasAccelerated: 0\nAzureCanvasBackend: skia\nAzureContentBackend: skia\nAzureFallbackCanvasBackend: none\nCairoUseXRender: 0\nDecision Log\nHW_COMPOSITING:\nblocked by default: Acceleration blocked by platform\nOPENGL_COMPOSITING:\nunavailable by default: Hardware compositing is disabled\nWEBRENDER:\nopt-in by default: WebRender is an opt-in feature\nunavailable by runtime: Build doesn't include WebRender\nOMTP:\ndisabled by default: Disabled by default\n\n\n\n\nMedia\n-----\n\nAudio Backend: pulse\nMax Channels: 2\nPreferred Channel Layout: stereo\nPreferred Sample Rate: 44100\nOutput Devices\nName: Group\nHD-Audio Generic Est\u00e9reo anal\u00f3gico: /devices/pci0000:00/0000:00:08.1/0000:12:00.3/sound/card1\nHDA ATI HDMI Digital Stereo (HDMI 4): /devices/pci0000:00/0000:00:03.1/0000:09:00.1/sound/card0\nInput Devices\nName: Group\nMonitor of HD-Audio Generic Est\u00e9reo anal\u00f3gico: /devices/pci0000:00/0000:00:08.1/0000:12:00.3/sound/card1\nHD-Audio Generic Est\u00e9reo anal\u00f3gico: /devices/pci0000:00/0000:00:08.1/0000:12:00.3/sound/card1\nMonitor of HDA ATI HDMI Digital Stereo (HDMI 4): /devices/pci0000:00/0000:00:03.1/0000:09:00.1/sound/card0\n\nImportant Modified Preferences\n------------------------------\n\naccessibility.typeaheadfind.flashBar: 0\nbrowser.cache.disk.capacity: 358400\nbrowser.cache.disk.filesystem_reported: 1\nbrowser.cache.disk.smart_size.first_run: false\nbrowser.cache.frecency_experiment: 2\nbrowser.download.useDownloadDir: false\nbrowser.places.smartBookmarksVersion: 8\nbrowser.sessionstore.upgradeBackup.latestBuildID: 20180205104257\nbrowser.startup.homepage: www.google.com.ar\nbrowser.startup.homepage_override.buildID: 20180205104257\nbrowser.startup.homepage_override.mstone: 58.0.1\nbrowser.urlbar.timesBeforeHidingSuggestionsHint: 0\ndom.push.userAgentID: 68e0ba0d75d644a3bc8ed7caae1918a1\nextensions.lastAppVersion: 58.0.1\nfont.internaluseonly.changed: true\nmedia.gmp-gmpopenh264.abi: x86_64-gcc3\nmedia.gmp-gmpopenh264.lastUpdate: 1518532845\nmedia.gmp-gmpopenh264.version: 1.7.1\nmedia.gmp-manager.buildID: 20180205104257\nmedia.gmp-manager.lastCheck: 1520857613\nmedia.gmp.storage.version.observed: 1\nmedia.webrtc.debug.log_file: /tmp/WebRTC.log\nnetwork.cookie.prefsMigrated: true\nnetwork.dns.disablePrefetch: true\nnetwork.http.speculative-parallel-limit: 0\nnetwork.predictor.cleaned-up: true\nnetwork.predictor.enabled: false\nnetwork.prefetch-next: false\nplaces.database.lastMaintenance: 1520447837\nplaces.history.expiration.transient_current_max_pages: 123155\nplugin.disable_full_page_plugin_for_types: application/pdf\nprint.print_bgcolor: false\nprint.print_bgimages: false\nprint.print_duplex: 0\nprint.print_evenpages: true\nprint.print_in_color: true\nprint.print_margin_bottom: 0.5\nprint.print_margin_left: 0.5\nprint.print_margin_right: 0.5\nprint.print_margin_top: 0.5\nprint.print_oddpages: true\nprint.print_orientation: 0\nprint.print_page_delay: 50\nprint.print_paper_data: 0\nprint.print_paper_height: 11,69\nprint.print_paper_name: iso_a4\nprint.print_paper_size_unit: 0\nprint.print_paper_width: 8,27\nprint.print_scaling: 1,00\nprint.print_shrink_to_fit: true\nprint.print_to_file: false\nprint.print_unwriteable_margin_bottom: 56\nprint.print_unwriteable_margin_left: 25\nprint.print_unwriteable_margin_right: 25\nprint.print_unwriteable_margin_top: 25\nservices.sync.declinedEngines:\nservices.sync.engine.prefs.modified: false\nservices.sync.lastPing: 1520944956\nservices.sync.lastSync: Tue Mar 13 2018 20:45:11 GMT-0300 (-03)\nstorage.vacuum.last.index: 1\nstorage.vacuum.last.places.sqlite: 1518533567\nwebgl.disabled: true\n\nImportant Locked Preferences\n----------------------------\n\nPlaces Database\n---------------\n\nJavaScript\n----------\n\nIncremental GC: true\n\nAccessibility\n-------------\n\nActivated: false\nPrevent Accessibility: 0\n\nLibrary Versions\n----------------\n\nNSPR\nExpected minimum version: 4.17\nVersion in use: 4.17\n\nNSS\nExpected minimum version: 3.34.1\nVersion in use: 3.34.1\n\nNSSSMIME\nExpected minimum version: 3.34.1\nVersion in use: 3.34.1\n\nNSSSSL\nExpected minimum version: 3.34.1\nVersion in use: 3.34.1\n\nNSSUTIL\nExpected minimum version: 3.34.1\nVersion in use: 3.34.1\n\nExperimental Features\n---------------------\n\nSandbox\n-------\n\nSeccomp-BPF (System Call Filtering): true\nSeccomp Thread Synchronization: true\nUser Namespaces: true\nContent Process Sandboxing: true\nMedia Plugin Sandboxing: true\nContent Process Sandbox Level: 3\nEffective Content Process Sandbox Level: 3\n\nRejected System Calls\n---------------------\n\nInternationalization & Localization\n-----------------------------------\n\nApplication Settings\nRequested Locales: [\"en-US\"]\nAvailable Locales: [\"es-MX\",\"es-ES\",\"es-CL\",\"es-AR\",\"en-ZA\",\"en-GB\",\"en-US\"]\nApp Locales: [\"en-US\",\"en-ZA\",\"en-GB\"]\nRegional Preferences: [\"en-US\"]\nDefault Locale: \"en-US\"\nOperating System\nSystem Locales: [\"en-US\"]\nRegional Preferences: [\"en-US\"]", "author": "gustavo.diaz@gdnet.com.ar", "id": 13126833, "time": "2018-03-13T23:51:42Z"}, {"text": "Does WebGL also crash Nightly? Just try using about:support without disabling WebGL on Nightly.", "author": "jgilbert@mozilla.com", "id": 13126863, "time": "2018-03-14T00:03:03Z"}, {"text": "This might indicate a sandboxing issue?:\n> /opt/amdgpu/share/libdrm/amdgpu.ids: Permesso negato\n\nTry security.sandbox.content.level:0 and restart the browser.\nAlso it would be good to try about:support with WebGL not disabled, since that's not content process, and so shouldn't be sandboxed.", "author": "jgilbert@mozilla.com", "id": 13126871, "time": "2018-03-14T00:06:00Z"}, {"text": "Hello!\nMy about:support can be found accessing the following link: https://pastebin.com/ATRqR9Dh .", "author": "cristian.comorasu@softvision.ro", "id": 13127676, "time": "2018-03-14T12:43:42Z"}, {"text": "Ok, since about:support works fine, I definitely think this is sandboxing related.\nPlease try security.sandbox.content.level:0, restart the browser, and try WebGL again. (You can use http://jdashg.github.io/misc/webgl/ccw-point.html)", "author": "jgilbert@mozilla.com", "id": 13129205, "time": "2018-03-14T21:22:37Z"}, {"text": "Hi,\n\n   I can confirm that after changed security.sandbox.content.level:0 (and enabled again WebGL), I don't have any more crashes so far (tested as well the suggested URL).", "author": "gustavo.diaz@gdnet.com.ar", "id": 13131151, "time": "2018-03-15T16:28:13Z"}, {"text": "I tested with Fx 61.0a1 (build ID: 20180316100132), on Ubuntu 16.04 LTS with the security.sandbox.content.level:0 and I can confirm the issue is not reproducible.", "author": "cristian.comorasu@softvision.ro", "id": 13133624, "time": "2018-03-16T14:23:33Z"}, {"text": "This is indeed bug 1438215.\n\n*** This bug has been marked as a duplicate of bug 1438215 ***", "author": "jgilbert@mozilla.com", "id": 13135082, "time": "2018-03-16T22:44:59Z"}, {"text": "(In reply to Jeff Gilbert [:jgilbert] from comment #27)\n> This is indeed bug 1438215.\n\nI'm not so sure about that \u2014 as far as I know, the only crashes we found as part of bug 1438215 required editing the sandbox policy to allow opening files in /dev/ati; without such a change, WebGL initialization failed but didn't crash.\n\nAlso, the crash reports here are\u2026 not what I expected.  These have amdgpu_dri.so in the stack, but they have the same \"ATI Technologies Inc.\" vendor string as fglrx and the same version string formatting, which suggests they may be equivalent to fglrx in other ways as well and raises some other questions about bug 1438215:\n\nhttps://crash-stats.mozilla.com/report/index/33dda5a8-8ea5-468c-a15a-052b80180127\nhttps://crash-stats.mozilla.com/report/index/58265950-7016-4d43-994b-6dd960180208\nhttps://crash-stats.mozilla.com/report/index/e3da8434-47e7-45b1-b5a3-0d2570180210\nhttps://crash-stats.mozilla.com/report/index/9134a977-a201-45d7-b1d4-9f8440180215\n\nThis one, by contrast, is r300_dri.so and has a vendor of \"X.Org R300 Project\" so it may not be related to any fglrx/amdgpu-specific problems:\n\nhttps://crash-stats.mozilla.com/report/index/72fe20c8-4fb8-4564-9c71-8375c0180211\n\nSee also bug 1438394 \u2014 without that patch, fglrx/amdgpu might crash on Nightly (depending on distribution; Ubuntu wasn't affected).", "author": "jld@mozilla.com", "id": 13135162, "time": "2018-03-16T23:36:48Z"}, {"text": "Some of the MESA-GL warnings are also related to Bug 1416016.\n\nAs far as I understand, there's AMDGPU (open source) and AMDGPU-PRO (proprietary). It would not surprise me if AMDGPU-PRO is the fglrx stuff rebranded, and suffering from the same problems.", "author": "gpascutto@mozilla.com", "id": 13139189, "time": "2018-03-19T10:58:57Z"}, {"text": "I'll take this and investigate, seems sandbox related at this point.", "author": "gpascutto@mozilla.com", "id": 13139191, "time": "2018-03-19T11:00:16Z"}, {"text": "Unless I'm mistaken, most of the reporters in this bug indeed were using the AMDGPU-PRO driver, not the open source one (which is Mesa based?).", "author": "gpascutto@mozilla.com", "id": 13139194, "time": "2018-03-19T11:01:46Z"}, {"text": "I acquired a modern AMD card that is supported by AMDGPU and did some testing:\n\nThe open source AMDGPU driver appears to fully work, including WebGL at the highest sandboxing level.\n\nI didn't manage to get the AMDGPU-PRO driver working even in Ubuntu 16.04.3, the only release it claims to support. Installing the driver made me unable to log into the desktop, either by crashing it or making all input device inoperative.\n\nI managed to get it working in 17.10, at least by running the ./amdgpu-install package (there is also a \"pro\" version of that installer with \"legacy OpenGL\" and OpenCL drivers, which I'll try next).\n\nThe normal driver at least does not identify itself a being ATI Technologies:\nDescription\tX.Org -- Radeon RX 560 Series (AMD POLARIS11 / DRM 3.20.0 / 4.13.0-37-generic, LLVM 5.0.1)\nVendor ID\tX.Org\nDevice ID\tRadeon RX 560 Series (AMD POLARIS11 / DRM 3.20.0 / 4.13.0-37-generic, LLVM 5.0.1)\nDriver Version\t3.0 Mesa 17.2.4-AMD_17.50", "author": "gpascutto@mozilla.com", "id": 13144818, "time": "2018-03-21T09:10:49Z"}, {"text": "This driver appears to work correctly with sandboxing, which is perhaps not so surprising as it's Mesa based.\n\nI'll try the \"legacy OpenGL\" (--pro) driver next.", "author": "gpascutto@mozilla.com", "id": 13144820, "time": "2018-03-21T09:12:29Z"}, {"text": "I managed to get the \"Pro / legacy OpenGL\" driver installed via xubuntu 16.04 (which had a working desktop after installing it, probably not relying on working OpenGL like GNOME does?).\n\nGPU #1\nActive\tYes\nDescription\tATI Technologies Inc. -- Radeon RX 560 Series\nVendor ID\tATI Technologies Inc.\nDevice ID\tRadeon RX 560 Series\nDriver Version\t4.5.13505 Compatibility Profile Context 17.50.2.13\n\nReproduces:\n\nhttps://crash-stats.mozilla.com/report/index/984c6431-fed1-497d-b6e9-235380180321", "author": "gpascutto@mozilla.com", "id": 13145872, "time": "2018-03-21T16:12:35Z"}, {"text": "The first problem is getting the device via /sys:\n\nSandbox: Recording mapping /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 -> /sys/dev/char/226:0\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys for pid=17766\nSandbox: Failed errno -13 op 2 flags 0400000 path /sys\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 for pid=17766\nSandbox: Failed errno -13 op 2 flags 0400000 path /sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/devices/pci0000:00/0000:00:01.0 for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char/../../devices/pci0000:00/0000:00:01.0\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/devices/pci0000:00 for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char/../../devices/pci0000:00\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/devices for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char/../../devices\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char/../..\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/dev for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char/..\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/dev/char for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev/char\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/dev for pid=17766\nSandbox: Failed errno -13 op 10 flags 00 path /sys/dev\nMESA-LOADER: could not get parent device\n\nWhitelisting /sys bypasses this, so it's another case of making the Mesa loader being able to find it's device through ever changing locations between kernel/Mesa versions.\n\nFixing that leads to this crash:\n\n#01: ???[/home/morbo/hg/firefox/obj-x86_64-pc-linux-gnu/dist/bin/libxul.so +0x65f5e0d]\n#02: ???[/home/morbo/hg/firefox/obj-x86_64-pc-linux-gnu/dist/bin/libxul.so +0x65675ce]\n#03: ???[/lib/x86_64-linux-gnu/libpthread.so.0 +0x11390]\n#04: amdgpu_get_marketing_name[/opt/amdgpu/lib/x86_64-linux-gnu/libdrm_amdgpu.so.1 +0x7994]\n#05: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x25b181d]\n#06: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x25b1f61]\n#07: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x25b62a0]\n#08: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x192d698]\n#09: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x18d8af2]\n++DOCSHELL 0x7f260babe000 == 7 [pid = 18396] [id = {e41a681c-aa7f-4d3e-93fe-9c5f4bb4037a}]\n++DOMWINDOW == 17 (0x7f260badd000) [pid = 18396] [serial = 17] [outer = (nil)]\n#10: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x540a71]\n#11: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x1463a67]\n#12: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x1463d37]\n#13: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x1478a2c]\n#14: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x1478fa6]\n#15: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x2574340]\n#16: ???[/usr/lib/x86_64-linux-gnu/dri/amdgpu_dri.so +0x25744e4]\n#17: ???[/opt/amdgpu-pro/lib/x86_64-linux-gnu/libGL.so.1 +0x7975b]\n#18: ???[/opt/amdgpu-pro/lib/x86_64-linux-gnu/libGL.so.1 +0x4af35]\n#19: glXQueryVersion[/opt/amdgpu-pro/lib/x86_64-linux-gnu/libGL.so.1 +0x475fd]\n\nAlways nice to crash because \"get_marketing_name\" can't open its file, AMD. I suspect whitelisting \"/opt/amdgpu/share/libdrm/amdgpu.ids\" will fix this. As the driver installs to a fixed location, we might be able to hardcode that path if we detect an AMD GPU. (We're SOL if it's elsewhere, but then how does the driver find it?)\n\nSo as a temporary workaround, you can whitelist /sys/ and /opt/amdgpu/ i.e.:\nset security.sandbox.content.read_path_whitelist to \"/sys/,/opt/amdgpu/\" in about:config.\n\nNow the good news: with these fixes WebGL appears to work, even with full sandboxing. So that's a major improvement over fglrx at least.", "author": "gpascutto@mozilla.com", "id": 13152156, "time": "2018-03-23T18:02:50Z"}, {"text": "Sandbox: Recording mapping /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 -> /sys/dev/char/226:0\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 for pid=17766\n\nGiven that we see the mapping, the broker should be able to reverse the lookup to /sys/dev/char/226:0 and that should pass because \"/sys/dev/char/226:\" is a whitelisted prefix. So it's a bit strange this fails.", "author": "gpascutto@mozilla.com", "id": 13152203, "time": "2018-03-23T18:13:23Z"}, {"text": "The actual path that is requested is \"/sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0\"\n\nThis isn't resolved before doing symlink inversion.", "author": "gpascutto@mozilla.com", "id": 13156139, "time": "2018-03-26T16:08:25Z"}, {"text": "/sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0\n\nWe can realpath this to\n\n/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0\n\nInvert the symlink to\n\n/sys/dev/char/226:0\n\nAnd now try SymlinkPermissions on it.\n\nThis works and we accumulate the read permission on \"/sys/dev/char/226:0\". But at this point we resolve that link, and end up in /sys/dev/char/ and then notice we are trying to back out out of symlink target path, which causes SymlinkPermissions to give a permission denial.", "author": "gpascutto@mozilla.com", "id": 13156532, "time": "2018-03-26T18:03:07Z"}, {"text": "The Mesa <= 12 codepath in the sandbox policy already tries to handle this. Replacing the two directory entries it whitelists by the entire dir (which looks like it should b safe, given the perms on the 226: device for newer cards) does not work though.", "author": "gpascutto@mozilla.com", "id": 13156798, "time": "2018-03-26T19:34:46Z"}, {"text": "I'm having problems getting this to work when I whitelist anything more restrictive than all of /sys. If it's whitelisted, the loading sequence looks like this:\n\nSandbox: Lookup before convrel=/sys/dev/char/226:0\nSandbox: First lookup after convrel=/sys/dev/char/226:0 (perms 3)\nSandbox: Recording mapping /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 -> /sys/dev/char/226:0\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 3)\nSandbox: Lookup before convrel=/sys/dev\nSandbox: First lookup after convrel=/sys/dev (perms 3)\nSandbox: Lookup before convrel=/sys/dev/char\nSandbox: First lookup after convrel=/sys/dev/char (perms 3)\nSandbox: Lookup before convrel=/sys/devices\nSandbox: First lookup after convrel=/sys/devices (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00\nSandbox: First lookup after convrel=/sys/devices/pci0000:00 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0/uevent\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0/uevent (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm (perms 3)\nSandbox: Failed errno -22 op readlink flags 00 path /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 3)\nSandbox: Lookup before convrel=/sys/devices\nSandbox: First lookup after convrel=/sys/devices (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00\nSandbox: First lookup after convrel=/sys/devices/pci0000:00 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/uevent\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/uevent (perms 3)\nSandbox: Failed errno -2 op access flags 00 path /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/uevent\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 (perms 3)\nSandbox: Failed errno -22 op readlink flags 00 path /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 3)\nSandbox: Lookup before convrel=/sys/devices\nSandbox: First lookup after convrel=/sys/devices (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00\nSandbox: First lookup after convrel=/sys/devices/pci0000:00 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/uevent\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/uevent (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/uevent\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/uevent (perms 3)\nSandbox: Lookup before convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/subsystem\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/subsystem (perms 3)\nSandbox: Recording mapping /sys/bus/pci -> /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/subsystem", "author": "gpascutto@mozilla.com", "id": 13168958, "time": "2018-03-30T13:54:07Z"}, {"text": "Giving permission to almost (but not entirely) everything looks like this:\n\nSandbox: Lookup before convrel=/sys/dev/char/226:0\nSandbox: First lookup after convrel=/sys/dev/char/226:0 (perms 3)\nSandbox: Recording mapping /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 -> /sys/dev/char/226:0\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 0)\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys for pid=4991\nSandbox: Failed errno -13 op stat flags 0400000 path /sys\nSandbox: Lookup before convrel=/sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 (perms 3)\nSandbox: Lookup before convrel=/sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm (perms 3)\nSandbox: Failed errno -22 op readlink flags 00 path /sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 0)\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys for pid=4991\nSandbox: Failed errno -13 op stat flags 0400000 path /sys\nSandbox: Lookup before convrel=/sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 (perms 3)\nSandbox: Failed errno -22 op readlink flags 00 path /sys/dev/char/../../devices/pci0000:00/0000:00:01.0/0000:01:00.0\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 0)\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys for pid=4991\nSandbox: Failed errno -13 op stat flags 0400000 path /sys\nSandbox: Lookup before convrel=/sys/dev/char/../../devices/pci0000:00/0000:00:01.0\nSandbox: First lookup after convrel=/sys/devices/pci0000:00/0000:00:01.0 (perms 3)\nSandbox: Failed errno -22 op readlink flags 00 path /sys/dev/char/../../devices/pci0000:00/0000:00:01.0\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 0)\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys for pid=4991\nSandbox: Failed errno -13 op stat flags 0400000 path /sys\nSandbox: Lookup before convrel=/sys/dev/char/../../devices/pci0000:00\nSandbox: First lookup after convrel=/sys/devices/pci0000:00 (perms 3)\nSandbox: Failed errno -22 op readlink flags 00 path /sys/dev/char/../../devices/pci0000:00\nSandbox: Lookup before convrel=/sys\nSandbox: First lookup after convrel=/sys (perms 0)\nSandbox: SandboxBroker: denied op=stat rflags=400000 perms=0 path=/sys for pid=4991\nSandbox: Failed errno -13 op stat flags 0400000 path /sys\nSandbox: Lookup before convrel=/sys/dev/char/../../devices\nSandbox: First lookup after convrel=/sys/devices (perms 0)\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/devices for pid=4991\nSandbox: Failed errno -13 op readlink flags 00 path /sys/dev/char/../../devices\nSandbox: Lookup before convrel=/sys/dev/char/../..\nSandbox: First lookup after convrel=/sys (perms 0)\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys for pid=4991\nSandbox: Failed errno -13 op readlink flags 00 path /sys/dev/char/../..\nSandbox: Lookup before convrel=/sys/dev/char/..\nSandbox: First lookup after convrel=/sys/dev (perms 0)\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/dev for pid=4991\nSandbox: Failed errno -13 op readlink flags 00 path /sys/dev/char/..\nSandbox: Lookup before convrel=/sys/dev/char\nSandbox: First lookup after convrel=/sys/dev/char (perms 0)\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/dev/char for pid=4991\nSandbox: Failed errno -13 op readlink flags 00 path /sys/dev/char\nSandbox: Lookup before convrel=/sys/dev\nSandbox: First lookup after convrel=/sys/dev (perms 0)\nSandbox: SandboxBroker: denied op=readlink rflags=0 perms=0 path=/sys/dev for pid=4991\nSandbox: Failed errno -13 op readlink flags 00 path /sys/dev\nMESA-LOADER: could not get parent device\n\nNote how:\n1) It keeps trying to stat /sys\n2) It keeps trying to readlink things that aren't links\n\nMaybe it would work if it can stat things only to figure out what the links are? Let's see if we can add permission only for that...", "author": "gpascutto@mozilla.com", "id": 13169586, "time": "2018-03-30T18:42:15Z"}, {"text": "Created attachment 8964009\nBug 1434711 - WebGL causes a crash with the AMDGPU-PRO video driver.\n\nReview commit: https://reviewboard.mozilla.org/r/232830/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/232830/", "author": "gpascutto@mozilla.com", "id": 13169646, "time": "2018-03-30T19:17:05Z"}, {"text": "Comment on attachment 8964009\nBug 1434711 - WebGL causes a crash with the AMDGPU-PRO video driver.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/232830/diff/1-2/", "author": "gpascutto@mozilla.com", "id": 13177014, "time": "2018-04-03T16:44:25Z"}, {"text": "Comment on attachment 8964009\nBug 1434711 - WebGL causes a crash with the AMDGPU-PRO video driver.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/232830/diff/2-3/", "author": "gpascutto@mozilla.com", "id": 13177026, "time": "2018-04-03T16:46:46Z"}, {"text": "Comment on attachment 8964009\nBug 1434711 - WebGL causes a crash with the AMDGPU-PRO video driver.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/232830/diff/3-4/", "author": "gpascutto@mozilla.com", "id": 13177131, "time": "2018-04-03T17:05:47Z"}, {"text": "Comment on attachment 8964009\nBug 1434711 - WebGL causes a crash with the AMDGPU-PRO video driver.\n\nhttps://reviewboard.mozilla.org/r/232830/#review238992", "author": "jld@mozilla.com", "id": 13177959, "time": "2018-04-03T21:45:05Z"}, {"text": "Pushed by gpascutto@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/6b6efca52e56\nWebGL causes a crash with the AMDGPU-PRO video driver. r=jld", "author": "pulsebot@bots.tld", "id": 13178799, "time": "2018-04-04T08:55:37Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/6b6efca52e56", "author": "csabou@mozilla.com", "id": 13180525, "time": "2018-04-04T17:56:41Z"}, {"text": "Is that something that we want to uplift to 60?", "author": "sledru@mozilla.com", "id": 13191737, "time": "2018-04-09T12:52:09Z"}, {"text": "Comment on attachment 8964009\nBug 1434711 - WebGL causes a crash with the AMDGPU-PRO video driver.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Bug 1289718 or thereabouts\n[User impact if declined]: WebGL will crash tabs when using AMDGPU-PRO driver.\n[Is this code covered by automated tests?]: No\n[Has the fix been verified in Nightly?]: Landed a few days ago\n[Needs manual test from QE? If yes, steps to reproduce]: Not needed but possible: install AMDGPU-PRO, try any site with WebGL.\n[List of other uplifts needed for the feature/fix]: None\n[Is the change risky?]: Low risk. \n[Why is the change risky/not risky?]: Extra permissions if a certain driver is detected.\n[String changes made/needed]: N/A", "author": "gpascutto@mozilla.com", "id": 13192067, "time": "2018-04-09T14:45:38Z"}, {"text": "Comment on attachment 8964009\nBug 1434711 - WebGL causes a crash with the AMDGPU-PRO video driver.\n\nFix WebGL crashes with the AMDGPU-PRO driver. Approved for 60.0b11.", "author": "ryanvm@gmail.com", "id": 13192502, "time": "2018-04-09T16:53:34Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/7b34158d42f3", "author": "ryanvm@gmail.com", "id": 13192556, "time": "2018-04-09T17:12:57Z"}, {"text": "We can keep this on the radar for 59 but since there is a workaround, I think it is best to wait for this to be fixed in 60.", "author": "lhenry@mozilla.com", "id": 13193460, "time": "2018-04-09T21:52:13Z"}, {"text": "Fx60 will ship next week with this fix included.", "author": "ryanvm@gmail.com", "id": 13244707, "time": "2018-04-30T21:02:07Z"}], "id": 1434711, "priority": "P1", "cc": ["code@jmlevick.me", "craig@stroppykitten.com", "cristian.comorasu@softvision.ro", "emmeci@linuxmail.org", "gpascutto@mozilla.com", "gustavo.diaz@gdnet.com.ar", "jeff.grasty@gmail.com", "jgilbert@mozilla.com", "jld@mozilla.com", "marcodv@seznam.cz", "sledru@mozilla.com", "sotaro.ikeda.g@gmail.com"], "cf_crash_signature": "amdgpu_dri.so%400x192904d", "version": "58 Branch", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": ["https://bugzilla.mozilla.org/show_bug.cgi?id=1438215"], "cf_tracking_firefox59": "+", "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "", "creation_time": "2018-01-31T20:40:32Z", "cf_status_firefox_esr52": "---", "component": "Security: Process Sandboxing", "assigned_to_detail": {"email": "gpascutto@mozilla.com", "id": 151147, "name": "gpascutto@mozilla.com", "real_name": "Gian-Carlo Pascutto [:gcp]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "fixed", "cf_status_firefox60": "fixed", "target_milestone": "mozilla61", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "critical", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "emmeci@linuxmail.org", "id": 611103, "name": "emmeci@linuxmail.org", "real_name": ""}, "whiteboard": "gfx-noted", "mentors": [], "summary": "WebGL causes a crash with the AMDGPU-PRO video driver", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-04-30T21:02:07Z", "assigned_to": "gpascutto@mozilla.com", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "emmeci@linuxmail.org"}], "who": "emmeci@linuxmail.org", "when": "2018-01-31T20:41:50Z"}, {"changes": [{"removed": "Untriaged", "field_name": "component", "added": "Graphics"}, {"removed": "Firefox", "field_name": "product", "added": "Core"}], "who": "yfdyh000@gmail.com", "when": "2018-02-02T12:25:13Z"}, {"changes": [{"removed": "Unspecified", "field_name": "platform", "added": "x86_64"}, {"removed": "Unspecified", "field_name": "op_sys", "added": "Linux"}], "who": "emmeci@linuxmail.org", "when": "2018-02-02T21:10:08Z"}, {"changes": [{"removed": "normal", "field_name": "severity", "added": "major"}], "who": "emmeci@linuxmail.org", "when": "2018-02-04T09:47:41Z"}, {"changes": [{"removed": "", "field_name": "cf_crash_signature", "added": "https://crash-stats.mozilla.com/report/index/33dda5a8-8ea5-468c-a15a-052b80180127"}], "who": "emmeci@linuxmail.org", "when": "2018-02-04T10:02:05Z"}, {"changes": [{"removed": "https://crash-stats.mozilla.com/report/index/33dda5a8-8ea5-468c-a15a-052b80180127", "field_name": "cf_crash_signature", "added": "https://crash-stats.mozilla.com/signature/?product=Firefox&signature=amdgpu_dri.so%400x192904d"}], "who": "emmeci@linuxmail.org", "when": "2018-02-04T10:02:55Z"}, {"changes": [{"removed": "https://crash-stats.mozilla.com/signature/?product=Firefox&signature=amdgpu_dri.so%400x192904d", "field_name": "cf_crash_signature", "added": "amdgpu_dri.so%400x192904d"}], "who": "emmeci@linuxmail.org", "when": "2018-02-04T10:23:08Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jeff.grasty@gmail.com"}], "who": "jeff.grasty@gmail.com", "when": "2018-02-08T00:08:45Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "craig@stroppykitten.com"}], "who": "craig@stroppykitten.com", "when": "2018-02-10T21:21:35Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "marcodv@seznam.cz"}], "who": "marcodv@seznam.cz", "when": "2018-02-11T14:17:26Z"}, {"changes": [{"removed": "major", "field_name": "severity", "added": "critical"}], "who": "emmeci@linuxmail.org", "when": "2018-02-13T12:25:44Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "code@jmlevick.me"}], "who": "code@jmlevick.me", "when": "2018-02-15T05:01:52Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "sotaro.ikeda.g@gmail.com"}], "who": "sotaro.ikeda.g@gmail.com", "when": "2018-02-15T05:13:16Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jgilbert@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(jgilbert@mozilla.com)"}], "who": "sotaro.ikeda.g@gmail.com", "when": "2018-02-15T05:14:31Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "gustavo.diaz@gdnet.com.ar"}], "who": "gustavo.diaz@gdnet.com.ar", "when": "2018-02-16T13:14:42Z"}, {"changes": [{"removed": "UNCONFIRMED", "field_name": "status", "added": "NEW"}, {"removed": "", "field_name": "cc", "added": "cristian.comorasu@softvision.ro"}, {"removed": "0", "field_name": "is_confirmed", "added": "1"}, {"removed": "---", "field_name": "cf_status_firefox59", "added": "affected"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "affected"}], "who": "cristian.comorasu@softvision.ro", "when": "2018-02-20T15:43:47Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P1"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "jgilbert@mozilla.com"}, {"removed": "", "field_name": "whiteboard", "added": "gfx-noted"}, {"removed": "needinfo?(jgilbert@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "jgilbert@mozilla.com", "when": "2018-03-13T02:56:37Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(cristian.comorasu@softvision.ro)"}], "who": "jgilbert@mozilla.com", "when": "2018-03-13T23:42:00Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(gustavo.diaz@gdnet.com.ar)"}], "who": "jgilbert@mozilla.com", "when": "2018-03-14T00:03:03Z"}, {"changes": [{"removed": "needinfo?(cristian.comorasu@softvision.ro)", "field_name": "flagtypes.name", "added": ""}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "affected"}], "who": "cristian.comorasu@softvision.ro", "when": "2018-03-14T12:43:42Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(cristian.comorasu@softvision.ro)"}], "who": "jgilbert@mozilla.com", "when": "2018-03-14T21:22:37Z"}, {"changes": [{"removed": "needinfo?(gustavo.diaz@gdnet.com.ar)", "field_name": "flagtypes.name", "added": ""}], "who": "gustavo.diaz@gdnet.com.ar", "when": "2018-03-15T16:28:13Z"}, {"changes": [{"removed": "needinfo?(cristian.comorasu@softvision.ro)", "field_name": "flagtypes.name", "added": ""}], "who": "cristian.comorasu@softvision.ro", "when": "2018-03-16T14:23:33Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1438215"}], "who": "jgilbert@mozilla.com", "when": "2018-03-16T22:43:39Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "DUPLICATE"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-03-16 22:44:59"}], "who": "jgilbert@mozilla.com", "when": "2018-03-16T22:44:59Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jld@mozilla.com"}], "who": "jld@mozilla.com", "when": "2018-03-16T23:36:48Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "gpascutto@mozilla.com"}], "who": "gpascutto@mozilla.com", "when": "2018-03-19T10:58:57Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "REOPENED"}, {"removed": "DUPLICATE", "field_name": "resolution", "added": ""}], "who": "gpascutto@mozilla.com", "when": "2018-03-19T10:59:28Z"}, {"changes": [{"removed": "Graphics", "field_name": "component", "added": "Security: Process Sandboxing"}, {"removed": "jgilbert@mozilla.com", "field_name": "assigned_to", "added": "gpascutto@mozilla.com"}, {"removed": "Cerrtain webpage crash at loading probably related to AMDGPU VIDEO driver with a SIGSEGV", "field_name": "summary", "added": "Certain webpage crash at loading probably related to AMDGPU VIDEO driver with a SIGSEGV"}], "who": "gpascutto@mozilla.com", "when": "2018-03-19T11:00:16Z"}, {"changes": [{"removed": "Certain webpage crash at loading probably related to AMDGPU VIDEO driver with a SIGSEGV", "field_name": "summary", "added": "WebGL causes a crash with the AMDGPU-PRO video driver"}], "who": "gpascutto@mozilla.com", "when": "2018-03-19T11:02:18Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8964009, "added": "review?(jld@mozilla.com)"}], "who": "gpascutto@mozilla.com", "when": "2018-04-03T16:46:46Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jld@mozilla.com)", "attachment_id": 8964009, "added": "review+"}], "who": "jld@mozilla.com", "when": "2018-04-03T21:45:05Z"}, {"changes": [{"removed": "REOPENED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla61"}, {"removed": "2018-03-16 22:44:59", "field_name": "cf_last_resolved", "added": "2018-04-04 17:56:41"}, {"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "csabou@mozilla.com", "when": "2018-04-04T17:56:41Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "sledru@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(gpascutto@mozilla.com)"}], "who": "sledru@mozilla.com", "when": "2018-04-09T12:52:09Z"}, {"changes": [{"removed": "needinfo?(gpascutto@mozilla.com)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8964009, "added": "approval-mozilla-beta?"}], "who": "gpascutto@mozilla.com", "when": "2018-04-09T14:45:38Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8964009, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-04-09T16:53:34Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox60", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-04-09T17:12:57Z"}, {"changes": [{"removed": "---", "field_name": "cf_tracking_firefox59", "added": "+"}], "who": "lhenry@mozilla.com", "when": "2018-04-09T21:52:13Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox59", "added": "wontfix"}], "who": "ryanvm@gmail.com", "when": "2018-04-30T21:02:07Z"}], "resolution": "FIXED", "op_sys": "Linux", "cf_fx_points": "---", "cf_blocking_fennec": "---"}