{"cf_tracking_thunderbird_esr52": "---", "cf_status_firefox39": "affected", "cf_tracking_firefox60": "---", "attachments": [], "classification": "Components", "creator": "aaron.train@gmail.com", "mentors_detail": [], "depends_on": [1188590], "cf_has_str": "---", "cf_user_story": "", "cf_backlog": "webrtc/webaudio+", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": ["crash"], "summary": "crash in mozilla::MediaPipelineFactory::CreateMediaPipelineReceiving(mozilla::JsepTrackPair const&, mozilla::JsepTrack const&, unsigned int, mozilla::RefPtr<T>, mozilla::RefPtr<T>, nsAutoPtr<T>, mozilla::RefPtr<T> const&)", "cf_last_resolved": "2015-09-01T19:50:08Z", "votes": 0, "cf_status_firefox42": "affected", "severity": "critical", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 11, "comments": [{"text": "This bug was filed from the Socorro interface and is \nreport bp-fd8e2439-476d-4b90-8fbb-962fb2150705.\n=============================================================", "author": "aaron.train@gmail.com", "id": 10470396, "time": "2015-07-08T18:33:38Z"}, {"text": "Byron, Nils - This appears to be a null deref on Android.  (I'm not seeing this crash anywhere other than Android, but it doesn't mean it couldn't happen elsewhere.)  The volume of crashes on Android is the reason I made this a P1.  Can one of you take a deeper look, assess what's likely going on here (including how bad it likely is), and let me know (if you can) if this is a regression or if it's been in the code a while and just getting hit due to other changes?  Thanks.", "author": "mreavy@mozilla.com", "id": 10483223, "time": "2015-07-11T21:03:35Z"}, {"text": "Taking an initial look, the following pointers appear to be in play:\nmPCMedia:\nhttps://dxr.mozilla.org/mozilla-central/source/media/webrtc/signaling/src/peerconnection/MediaPipelineFactory.cpp#437\nThis is a raw pointer, but the factory seems to be created in the same call stack.\nAlso, we use it to call a member function.\n\nstream (returned from mPCMedia->GetRemoteStreamById())\nhttps://dxr.mozilla.org/mozilla-central/source/media/webrtc/signaling/src/peerconnection/MediaPipelineFactory.cpp#436\n\nmPC\nhttps://dxr.mozilla.org/mozilla-central/source/media/webrtc/signaling/src/peerconnection/MediaPipelineFactory.cpp#465\nAlso a raw pointer but should outlive the factory.\n\npipeline\nThe result of a new()", "author": "ekr@rtfm.com", "id": 10483437, "time": "2015-07-12T04:44:17Z"}, {"text": "This could definitely be caused by bug 1182289.", "author": "docfaraday@gmail.com", "id": 10483592, "time": "2015-07-12T12:32:13Z"}, {"text": "(In reply to Byron Campen [:bwc] from comment #3)\n> This could definitely be caused by bug 1182289.\n\nThat's good, because I don't see any likely candidates in this function.", "author": "ekr@rtfm.com", "id": 10483637, "time": "2015-07-12T13:48:33Z"}, {"text": "Not related to bug 1182289; this goes back to at least Firefox 37 in crash-stats.  Crashes started in ~April, which may imply a specific site came online that triggers it.", "author": "rjesup@jesup.org", "id": 10483795, "time": "2015-07-12T18:09:58Z"}, {"text": "Nils -- Byron is pretty swamped, and I need someone to take the lead on investigating this.  Can I give this one to you?", "author": "mreavy@mozilla.com", "id": 10488336, "time": "2015-07-13T21:38:51Z"}, {"text": "(In reply to Randell Jesup [:jesup] from comment #5)\n> Not related to bug 1182289; this goes back to at least Firefox 37 in\n> crash-stats.  Crashes started in ~April, which may imply a specific site\n> came online that triggers it.\n\nI'm not able to find anything crash-stats with 37 in it, but 38.0.5. So that make this problem older then bug 1182289. I'll keep digging around...", "author": "drno@ohlmeier.org", "id": 10504811, "time": "2015-07-16T20:01:43Z"}, {"text": "Currently I'm suspecting that this might be caused by either:\na) some strange re-negotiation\nb) or things are shutting down, while we are trying to a sLD() or sRD()\n\nIn some of the reports other threads show UpdateIceMediaStream_s() on the stack which is kind of scary, as it would mean two threads are at the same time in the SetSignalingState_m() function in different places. But these other thread dumps don't seem to make much sense.", "author": "drno@ohlmeier.org", "id": 10506188, "time": "2015-07-17T01:12:32Z"}, {"text": "Reminder to check crash stats some time in the future for >=40 as a sec bug fixed landed which looks like a plausible explanation for this crash.", "author": "drno@ohlmeier.org", "id": 10553636, "time": "2015-07-29T22:00:10Z"}, {"text": "So bug 1188590 landed in Beta on 07-29 and I don't see any crashes in 40.0b9 or 40.0 (which got build after that). So I think we can close this.", "author": "drno@ohlmeier.org", "id": 10683678, "time": "2015-09-01T19:50:08Z"}], "id": 1181694, "priority": "P1", "cc": ["brad@lassey.us", "docfaraday@gmail.com", "drno@ohlmeier.org", "ekr@rtfm.com", "kbrosnan@mozilla.com", "mreavy@mozilla.com", "rjesup@jesup.org"], "cf_crash_signature": "[@ mozilla::MediaPipelineFactory::CreateMediaPipelineReceiving(mozilla::JsepTrackPair const&, mozilla::JsepTrack const&, unsigned int, mozilla::RefPtr<T>, mozilla::RefPtr<T>, nsAutoPtr<T>, mozilla::RefPtr<T> const&)]", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_firefox59": "---", "last_change_time": "2015-09-01T19:50:08Z", "status": "RESOLVED", "product": "Core", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "", "creation_time": "2015-07-08T18:33:38Z", "cf_status_firefox_esr52": "---", "component": "WebRTC: Audio/Video", "assigned_to_detail": {"email": "drno@ohlmeier.org", "id": 489581, "name": "drno@ohlmeier.org", "real_name": "Nils Ohlmeier [:drno]"}, "groups": [], "cf_status_firefox60": "---", "cf_status_firefox41": "affected", "cf_status_firefox40": "affected", "cf_status_firefox_esr38": "affected", "target_milestone": "---", "is_cc_accessible": true, "cf_rank": "15", "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "aaron.train@gmail.com", "id": 299942, "name": "aaron.train@gmail.com", "real_name": "Aaron Train [:aaronmt]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "brad@lassey.us", "id": 181004, "name": "brad@lassey.us", "real_name": "Brad Lassey [:blassey] (use needinfo?)"}, {"email": "docfaraday@gmail.com", "id": 478411, "name": "docfaraday@gmail.com", "real_name": "Byron Campen [:bwc]"}, {"email": "drno@ohlmeier.org", "id": 489581, "name": "drno@ohlmeier.org", "real_name": "Nils Ohlmeier [:drno]"}, {"email": "ekr@rtfm.com", "id": 35667, "name": "ekr@rtfm.com", "real_name": "Eric Rescorla (:ekr)"}, {"email": "kbrosnan@mozilla.com", "id": 406670, "name": "kbrosnan@mozilla.com", "real_name": "Kevin Brosnan [:kbrosnan]"}, {"email": "mreavy@mozilla.com", "id": 74434, "name": "mreavy@mozilla.com", "real_name": "Maire Reavy [:mreavy] Plz needinfo?"}, {"email": "rjesup@jesup.org", "id": 11539, "name": "rjesup@jesup.org", "real_name": "Randell Jesup [:jesup]"}], "cf_platform_rel": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "assigned_to": "drno@ohlmeier.org", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "kbrosnan@mozilla.com"}, {"removed": "---", "field_name": "cf_status_firefox39", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox41", "added": "affected"}, {"removed": "---", "field_name": "cf_blocking_fennec", "added": "?"}], "who": "kbrosnan@mozilla.com", "when": "2015-07-09T17:59:43Z"}, {"changes": [{"removed": "unaffected", "field_name": "cf_status_firefox39", "added": "affected"}], "who": "kbrosnan@mozilla.com", "when": "2015-07-09T18:00:15Z"}, {"changes": [{"removed": "", "field_name": "cf_rank", "added": "15"}, {"removed": "--", "field_name": "priority", "added": "P1"}, {"removed": "", "field_name": "cc", "added": "docfaraday@gmail.com, drno@ohlmeier.org, mreavy@mozilla.com, rjesup@jesup.org"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(docfaraday@gmail.com), needinfo?(drno@ohlmeier.org)"}, {"removed": "---", "field_name": "cf_backlog", "added": "webRTC+"}], "who": "mreavy@mozilla.com", "when": "2015-07-11T21:03:35Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ekr@rtfm.com"}], "who": "ekr@rtfm.com", "when": "2015-07-12T04:44:17Z"}, {"changes": [{"removed": "needinfo?(docfaraday@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "docfaraday@gmail.com", "when": "2015-07-12T12:32:13Z"}, {"changes": [{"removed": "---", "field_name": "cf_status_firefox_esr38", "added": "affected"}], "who": "rjesup@jesup.org", "when": "2015-07-12T18:09:58Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "drno@ohlmeier.org"}], "who": "mreavy@mozilla.com", "when": "2015-07-13T21:38:51Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "blassey.bugs@lassey.us"}, {"removed": "?", "field_name": "cf_blocking_fennec", "added": "+"}], "who": "brad@lassey.us", "when": "2015-07-16T17:12:25Z"}, {"changes": [{"removed": "needinfo?(drno@ohlmeier.org)", "field_name": "flagtypes.name", "added": ""}], "who": "drno@ohlmeier.org", "when": "2015-07-16T20:01:43Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(drno@ohlmeier.org)"}], "who": "drno@ohlmeier.org", "when": "2015-07-29T22:00:10Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "depends_on", "added": "1188590"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "needinfo?(drno@ohlmeier.org)", "field_name": "flagtypes.name", "added": ""}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-09-01 12:50:08"}], "who": "drno@ohlmeier.org", "when": "2015-09-01T19:50:08Z"}], "resolution": "FIXED", "op_sys": "Android", "cf_fx_points": "---", "cf_blocking_fennec": "+"}