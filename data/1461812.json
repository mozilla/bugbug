{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "+", "cf_tracking_firefox62": "+", "creator": "twsmith@mozilla.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "unaffected", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": ["crash", "regression", "testcase"], "cc_detail": [{"email": "matt.woodrow@gmail.com", "id": 380838, "name": "matt.woodrow@gmail.com", "real_name": "Matt Woodrow (:mattwoodrow)"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "mikokm@gmail.com", "id": 547538, "name": "mikokm@gmail.com", "real_name": "Miko Mynttinen [:miko]"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}], "cf_last_resolved": "2018-05-16T18:34:28Z", "attachments": [{"creator": "twsmith@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/html", "id": 8975959}, {"creator": "matt.woodrow@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-16T11:45:44Z", "type_id": 4, "creation_date": "2018-05-16T00:55:57Z", "id": 1757255, "setter": "mikokm@gmail.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-05-17T01:26:18Z", "type_id": 721, "creation_date": "2018-05-17T00:54:29Z", "id": 1757917, "setter": "ryanvm@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8976019}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "yes", "comment_count": 10, "comments": [{"text": "Created attachment 8975959\ntestcase.html\n\nFound with m-c:\nBuildID=20180515095353\nSourceStamp=cf3ee14023483cbbb57129479537c713e22c1980\n\n==2108==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x00000055c658 bp 0x7fffb8b843b0 sp 0x7fffb8b84240 T0)\n==2108==The signal is caused by a WRITE memory access.\n==2108==Hint: address points to the zero page.\n    #0 0x55c657 in MOZ_CrashPrintf src/mfbt/Assertions.cpp:63:3\n    #1 0x7f7cee4390ab in InvalidArrayIndex_CRASH(unsigned long, unsigned long) src/xpcom/ds/nsTArray.cpp:26:3\n    #2 0x7f7cf6dc19b8 in ElementAt src/obj-firefox/dist/include/nsTArray.h:1031:7\n    #3 0x7f7cf6dc19b8 in operator[] src/obj-firefox/dist/include/nsTArray.h:1069\n    #4 0x7f7cf6dc19b8 in MergeState::ProcessPredecessorsOfOldNode(Index<OldListUnits>) src/layout/painting/RetainedDisplayListBuilder.cpp:424\n    #5 0x7f7cf6cb9f62 in MergeState::ProcessItemFromNewList(nsDisplayItem*, mozilla::Maybe<Index<MergedListUnits> > const&) src/layout/painting/RetainedDisplayListBuilder.cpp:291:61\n    #6 0x7f7cf6cb8db2 in RetainedDisplayListBuilder::MergeDisplayLists(nsDisplayList*, RetainedDisplayList*, RetainedDisplayList*, mozilla::Maybe<mozilla::ActiveScrolledRoot const*>&) src/layout/painting/RetainedDisplayListBuilder.cpp:488:36\n    #7 0x7f7cf6cc1ab1 in RetainedDisplayListBuilder::AttemptPartialUpdate(unsigned int, mozilla::DisplayListChecker*) src/layout/painting/RetainedDisplayListBuilder.cpp:1179:7\n    #8 0x7f7cf647e2cb in nsLayoutUtils::PaintFrame(gfxContext*, nsIFrame*, nsRegion const&, unsigned int, nsDisplayListBuilderMode, nsLayoutUtils::PaintFrameFlags) src/layout/base/nsLayoutUtils.cpp:3679:40\n    #9 0x7f7cf6371885 in mozilla::PresShell::Paint(nsView*, nsRegion const&, unsigned int) src/layout/base/PresShell.cpp:6350:5\n    #10 0x7f7cf5d0c16a in nsViewManager::ProcessPendingUpdatesPaint(nsIWidget*) src/view/nsViewManager.cpp:480:19\n    #11 0x7f7cf5d0af6c in nsViewManager::ProcessPendingUpdatesForView(nsView*, bool) src/view/nsViewManager.cpp:412:33\n    #12 0x7f7cf5d105c6 in nsViewManager::ProcessPendingUpdates() src/view/nsViewManager.cpp:1102:5\n    #13 0x7f7cf62e8f94 in nsRefreshDriver::Tick(long, mozilla::TimeStamp) src/layout/base/nsRefreshDriver.cpp:2067:11\n    #14 0x7f7cf62f6520 in TickDriver src/layout/base/nsRefreshDriver.cpp:337:13\n    #15 0x7f7cf62f6520 in mozilla::RefreshDriverTimer::TickRefreshDrivers(long, mozilla::TimeStamp, nsTArray<RefPtr<nsRefreshDriver> >&) src/layout/base/nsRefreshDriver.cpp:307\n    #16 0x7f7cf62f60e6 in mozilla::RefreshDriverTimer::Tick(long, mozilla::TimeStamp) src/layout/base/nsRefreshDriver.cpp:329:5\n    #17 0x7f7cf62f8e5e in RunRefreshDrivers src/layout/base/nsRefreshDriver.cpp:770:5\n    #18 0x7f7cf62f8e5e in mozilla::VsyncRefreshDriverTimer::RefreshDriverVsyncObserver::TickRefreshDriver(mozilla::TimeStamp) src/layout/base/nsRefreshDriver.cpp:683\n    #19 0x7f7cf62f8a5e in mozilla::VsyncRefreshDriverTimer::RefreshDriverVsyncObserver::NotifyVsync(mozilla::TimeStamp) src/layout/base/nsRefreshDriver.cpp:584:9\n    #20 0x7f7cf6b9ed9f in mozilla::layout::VsyncChild::RecvNotify(mozilla::TimeStamp const&) src/layout/ipc/VsyncChild.cpp:68:16\n    #21 0x7f7cef9cc854 in mozilla::layout::PVsyncChild::OnMessageReceived(IPC::Message const&) src/obj-firefox/ipc/ipdl/PVsyncChild.cpp:167:20\n    #22 0x7f7cef8a4763 in mozilla::ipc::PBackgroundChild::OnMessageReceived(IPC::Message const&) src/obj-firefox/ipc/ipdl/PBackgroundChild.cpp:1988:28\n    #23 0x7f7cef41478e in mozilla::ipc::MessageChannel::DispatchAsyncMessage(IPC::Message const&) src/ipc/glue/MessageChannel.cpp:2136:25\n    #24 0x7f7cef411756 in mozilla::ipc::MessageChannel::DispatchMessage(IPC::Message&&) src/ipc/glue/MessageChannel.cpp:2066:17\n    #25 0x7f7cef412f0c in mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::MessageChannel::MessageTask&) src/ipc/glue/MessageChannel.cpp:1912:5\n    #26 0x7f7cef413568 in mozilla::ipc::MessageChannel::MessageTask::Run() src/ipc/glue/MessageChannel.cpp:1945:15\n    #27 0x7f7cee523113 in nsThread::ProcessNextEvent(bool, bool*) src/xpcom/threads/nsThread.cpp:1090:14\n    #28 0x7f7cee53ece0 in NS_ProcessNextEvent(nsIThread*, bool) src/xpcom/threads/nsThreadUtils.cpp:519:10\n    #29 0x7f7cef41c416 in mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) src/ipc/glue/MessagePump.cpp:125:5\n    #30 0x7f7cef370ec9 in RunInternal src/ipc/chromium/src/base/message_loop.cc:326:10\n    #31 0x7f7cef370ec9 in RunHandler src/ipc/chromium/src/base/message_loop.cc:319\n    #32 0x7f7cef370ec9 in MessageLoop::Run() src/ipc/chromium/src/base/message_loop.cc:299\n    #33 0x7f7cf5d99efa in nsBaseAppShell::Run() src/widget/nsBaseAppShell.cpp:157:27\n    #34 0x7f7cfa001e4b in XRE_RunAppShell() src/toolkit/xre/nsEmbedFunctions.cpp:893:22\n    #35 0x7f7cef370ec9 in RunInternal src/ipc/chromium/src/base/message_loop.cc:326:10\n    #36 0x7f7cef370ec9 in RunHandler src/ipc/chromium/src/base/message_loop.cc:319\n    #37 0x7f7cef370ec9 in MessageLoop::Run() src/ipc/chromium/src/base/message_loop.cc:299\n    #38 0x7f7cfa001810 in XRE_InitChildProcess(int, char**, XREChildData const*) src/toolkit/xre/nsEmbedFunctions.cpp:719:34\n    #39 0x4f1875 in content_process_main src/browser/app/../../ipc/contentproc/plugin-container.cpp:50:30\n    #40 0x4f1875 in main src/browser/app/nsBrowserApp.cpp:282\n    #41 0x7f7d0dc2982f in __libc_start_main /build/glibc-Cl5G7W/glibc-2.23/csu/../csu/libc-start.c:291\n    #42 0x420f48 in _start (firefox+0x420f48)", "author": "twsmith@mozilla.com", "id": 13279891, "time": "2018-05-15T20:40:43Z"}, {"text": "INFO: Last good revision: bad54bae22fada00a6441796e2f9e181ccd3d2fd\nINFO: First bad revision: 9a2af4dad8113d6cfabb7308339e19a6c5dd2309\nINFO: Pushlog:\nhttps://hg.mozilla.org/integration/autoland/pushloghtml?fromchange=bad54bae22fada00a6441796e2f9e181ccd3d2fd&tochange=9a2af4dad8113d6cfabb7308339e19a6c5dd2309", "author": "ryanvm@gmail.com", "id": 13280355, "time": "2018-05-16T00:31:14Z"}, {"text": "Created attachment 8976019\nBug 1461812 - Make sure we fully cleanup any partially constructed display lists when returning a failure from AttemptPartialUpdate.\n\nReview commit: https://reviewboard.mozilla.org/r/244222/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/244222/", "author": "matt.woodrow@gmail.com", "id": 13280382, "time": "2018-05-16T00:55:57Z"}, {"text": "Comment on attachment 8976019\nBug 1461812 - Make sure we fully cleanup any partially constructed display lists when returning a failure from AttemptPartialUpdate.\n\nhttps://reviewboard.mozilla.org/r/244222/#review250236\n\nLGTM.", "author": "mikokm@gmail.com", "id": 13281087, "time": "2018-05-16T11:45:44Z"}, {"text": "Pushed by ryanvm@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/5543294befe9\nMake sure we fully cleanup any partially constructed display lists when returning a failure from AttemptPartialUpdate. r=miko", "author": "pulsebot@bots.tld", "id": 13281204, "time": "2018-05-16T12:35:22Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/5543294befe9", "author": "shindli@mozilla.com", "id": 13282280, "time": "2018-05-16T18:34:28Z"}, {"text": "Comment on attachment 8976019\nBug 1461812 - Make sure we fully cleanup any partially constructed display lists when returning a failure from AttemptPartialUpdate.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: retained-dl, bug 1459441\n[User impact if declined]: We need this to take bug 1459441 without crashing.\n[Is this code covered by automated tests?]: Yes, new crashtest added.\n[Has the fix been verified in Nightly?]: Crashtest passes on m-c.\n[Needs manual test from QE? If yes, steps to reproduce]: No.\n[List of other uplifts needed for the feature/fix]: None.\n[Is the change risky?]: No\n[Why is the change risky/not risky?]: Just adds more explicit cleanup to avoid reusing invalid state.\n[String changes made/needed]: None.", "author": "matt.woodrow@gmail.com", "id": 13283311, "time": "2018-05-17T00:54:29Z"}, {"text": "Comment on attachment 8976019\nBug 1461812 - Make sure we fully cleanup any partially constructed display lists when returning a failure from AttemptPartialUpdate.\n\nRetained display list fix needed for the feature to ship in Fx61. Approved for 61.0b6.", "author": "ryanvm@gmail.com", "id": 13283362, "time": "2018-05-17T01:26:18Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/909e56123552", "author": "ryanvm@gmail.com", "id": 13283370, "time": "2018-05-17T01:28:05Z"}, {"text": "*** Bug 1462029 has been marked as a duplicate of this bug. ***", "author": "dveditz@mozilla.com", "id": 13285096, "time": "2018-05-17T17:15:02Z"}], "id": 1461812, "priority": "P1", "cc": ["matt.woodrow@gmail.com", "mcastelluccio@mozilla.com", "mikokm@gmail.com", "ryanvm@gmail.com"], "cf_crash_signature": "", "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1289609, 1461470, 1459441, 1460526], "qa_contact": "", "creation_time": "2018-05-15T20:40:43Z", "cf_status_firefox_esr52": "unaffected", "component": "Layout: Web Painting", "assigned_to_detail": {"email": "matt.woodrow@gmail.com", "id": 380838, "name": "matt.woodrow@gmail.com", "real_name": "Matt Woodrow (:mattwoodrow)"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "fixed", "cf_status_firefox61": "fixed", "cf_status_firefox60": "unaffected", "target_milestone": "mozilla62", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "twsmith@mozilla.com", "id": 486634, "name": "twsmith@mozilla.com", "real_name": "Tyson Smith [:tsmith]"}, "whiteboard": "", "mentors": [], "summary": "crash in [@ MergeState::ProcessPredecessorsOfOldNode]", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [{"status": "+", "name": "in-testsuite", "modification_date": "2018-05-17T00:16:01Z", "type_id": 37, "creation_date": "2018-05-15T20:40:43Z", "id": 1757168, "setter": "ryanvm@gmail.com"}], "last_change_time": "2018-05-18T17:22:05Z", "assigned_to": "matt.woodrow@gmail.com", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "in-testsuite?"}], "who": "twsmith@mozilla.com", "when": "2018-05-15T20:40:43Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P1"}, {"removed": "", "field_name": "cc", "added": "matt.woodrow@gmail.com"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-15T23:33:03Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1461470"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-15T23:33:45Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "", "field_name": "blocks", "added": "1459441"}, {"removed": "---", "field_name": "cf_has_regression_range", "added": "yes"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "unaffected"}, {"removed": "---", "field_name": "cf_tracking_firefox61", "added": "+"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "affected"}, {"removed": "---", "field_name": "cf_tracking_firefox62", "added": "+"}], "who": "ryanvm@gmail.com", "when": "2018-05-16T00:31:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8976019, "added": "review?(mikokm@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "mikokm@gmail.com"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-16T00:55:57Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1460526"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-16T02:20:55Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mikokm@gmail.com)", "attachment_id": 8976019, "added": "review+"}], "who": "mikokm@gmail.com", "when": "2018-05-16T11:45:44Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-16 18:34:28"}, {"removed": "affected", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "shindli@mozilla.com", "when": "2018-05-16T18:34:28Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "matt.woodrow@gmail.com"}, {"removed": "in-testsuite?", "field_name": "flagtypes.name", "added": "in-testsuite+"}], "who": "ryanvm@gmail.com", "when": "2018-05-17T00:16:01Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8976019, "added": "approval-mozilla-beta?"}], "who": "matt.woodrow@gmail.com", "when": "2018-05-17T00:54:29Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8976019, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-05-17T01:26:18Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-17T01:28:05Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "regression"}, {"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2018-05-18T17:22:05Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}