{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "amarchesini@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-04-23T22:17:09Z", "type_id": 4, "creation_date": "2015-04-22T14:32:42Z", "id": 1152231, "setter": "nsm.nikhil@gmail.com"}], "content_type": "text/plain", "id": 8595982}], "classification": "Components", "creator": "amarchesini@mozilla.com", "cc": ["alberto.crespell@gmail.com", "angelesoteo@gmail.com", "bugs@pettay.fi", "crdlc@tid.es", "dcoloma@tid.es", "ehsan@mozilla.com", "jaoo@jaoo.es", "noemi.freiredecarlos@telefonica.com", "nsm.nikhil@gmail.com"], "depends_on": [], "creation_time": "2015-04-22T14:32:42Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "TabChild should initialize ServiceWorkerManager before starting the first loading", "id": 1157248, "assigned_to_detail": {"email": "amarchesini@mozilla.com", "id": 446257, "name": "amarchesini@mozilla.com", "real_name": "Andrea Marchesini [:baku]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "amarchesini@mozilla.com", "comment_count": 8, "comments": [{"text": "Created attachment 8595982\nfix.patch\n\n... otherwise the first httpChannel cannot be intercepted by ServiceWorkers.", "author": "amarchesini@mozilla.com", "id": 10185565, "time": "2015-04-22T14:32:42Z"}, {"text": "Just wondering (I know next to nothing about service worker impl), do we want the initialization to happen in ContentChild. In theory chrome might start some loads around the time when content child is created.", "author": "bugs@pettay.fi", "id": 10186529, "time": "2015-04-22T17:37:07Z"}, {"text": "Comment on attachment 8595982\nfix.patch\n\nReview of attachment 8595982:\n-----------------------------------------------------------------\n\nNikhil is a better reviewer here.  I don't really know how this setup is expected to work.", "author": "ehsan@mozilla.com", "id": 10192297, "time": "2015-04-23T19:23:25Z"}, {"text": "(In reply to Olli Pettay [:smaug] from comment #1)\n> Just wondering (I know next to nothing about service worker impl), do we\n> want the initialization to happen in ContentChild. In theory chrome might\n> start some loads around the time when content child is created.\n\nDo you mean some sort of preloading?", "author": "nsm.nikhil@gmail.com", "id": 10193223, "time": "2015-04-23T22:17:50Z"}, {"text": "(In reply to Olli Pettay [:smaug] from comment #1)\n> Just wondering (I know next to nothing about service worker impl), do we\n> want the initialization to happen in ContentChild. In theory chrome might\n> start some loads around the time when content child is created.\n\nCorrect. We do something like this. In LoadURI() we send the list con ServiceWorkerRegistrationInfo.\nThe reason why we have this bug is because such list is used wrongly.", "author": "amarchesini@mozilla.com", "id": 10193318, "time": "2015-04-23T22:43:45Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/6a1836d355c4", "author": "amarchesini@mozilla.com", "id": 10193326, "time": "2015-04-23T22:45:01Z"}, {"text": "(In reply to Nikhil Marathe [:nsm] (needinfo? please) from comment #3)\n \n> Do you mean some sort of preloading?\nWhatever some chrome script or even C++ code might initialize before the first TabChild is created.\nAddons for example might use process scripts to load something in the child process.", "author": "bugs@pettay.fi", "id": 10194227, "time": "2015-04-24T04:28:21Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/6a1836d355c4", "author": "cbook@mozilla.com", "id": 10195309, "time": "2015-04-24T12:41:59Z"}], "cf_last_resolved": "2015-04-24T12:41:59Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-04-24T12:41:59Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "DOM", "votes": 0, "groups": [], "cf_status_firefox60": "---", "cf_status_firefox40": "fixed", "target_milestone": "mozilla40", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "amarchesini@mozilla.com", "id": 446257, "name": "amarchesini@mozilla.com", "real_name": "Andrea Marchesini [:baku]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "alberto.crespell@gmail.com", "id": 442714, "name": "alberto.crespell@gmail.com", "real_name": "Albert [:albert]"}, {"email": "angelesoteo@gmail.com", "id": 434278, "name": "angelesoteo@gmail.com", "real_name": "Maria Angeles Oteo (:oteo)"}, {"email": "bugs@pettay.fi", "id": 39966, "name": "bugs@pettay.fi", "real_name": "Olli Pettay [:smaug]"}, {"email": "crdlc@tid.es", "id": 452640, "name": "crdlc@tid.es", "real_name": "Cristian Rodriguez (:crdlc)"}, {"email": "dcoloma@tid.es", "id": 422382, "name": "dcoloma@tid.es", "real_name": "Daniel Coloma:dcoloma"}, {"email": "ehsan@mozilla.com", "id": 251051, "name": "ehsan@mozilla.com", "real_name": ":Ehsan Akhgari"}, {"email": "jaoo@jaoo.es", "id": 428783, "name": "jaoo@jaoo.es", "real_name": "Jos\u00e9 Antonio Olivera Ortega [:jaoo]"}, {"email": "noemi.freiredecarlos@telefonica.com", "id": 469924, "name": "noemi.freiredecarlos@telefonica.com", "real_name": "Noem\u00ed Freire (:noemi)"}, {"email": "nsm.nikhil@gmail.com", "id": 415061, "name": "nsm.nikhil@gmail.com", "real_name": "Nikhil Marathe [:nsm] (No longer reading bugmail, please needinfo?)"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8595982, "added": "review?(ehsan@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "ehsan@mozilla.com"}], "who": "amarchesini@mozilla.com", "when": "2015-04-22T14:32:42Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "oteo@tid.es"}], "who": "angelesoteo@gmail.com", "when": "2015-04-22T14:37:50Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "crdlc@tid.es, dcoloma@tid.es"}], "who": "angelesoteo@gmail.com", "when": "2015-04-22T14:38:16Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "alberto.crespellperez@telefonica.com, jaoo@jaoo.es, noemi.freiredecarlos@telefonica.com"}], "who": "angelesoteo@gmail.com", "when": "2015-04-22T14:39:14Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bugs@pettay.fi"}], "who": "bugs@pettay.fi", "when": "2015-04-22T17:37:07Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "nsm.nikhil@gmail.com"}, {"field_name": "flagtypes.name", "removed": "review?(ehsan@mozilla.com)", "attachment_id": 8595982, "added": "review?(nsm.nikhil@gmail.com)"}], "who": "ehsan@mozilla.com", "when": "2015-04-23T19:23:25Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(nsm.nikhil@gmail.com)", "attachment_id": 8595982, "added": "review+"}], "who": "nsm.nikhil@gmail.com", "when": "2015-04-23T22:17:09Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(bugs@pettay.fi)"}], "who": "nsm.nikhil@gmail.com", "when": "2015-04-23T22:17:50Z"}, {"changes": [{"removed": "needinfo?(bugs@pettay.fi)", "field_name": "flagtypes.name", "added": ""}], "who": "bugs@pettay.fi", "when": "2015-04-24T04:28:21Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla40"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-04-24 05:41:59"}, {"removed": "affected", "field_name": "cf_status_firefox40", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2015-04-24T12:41:59Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}