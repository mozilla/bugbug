{"cf_tracking_thunderbird_esr52": "---", "status": "NEW", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "bzbarsky@mit.edu", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": ["regression"], "cc_detail": [{"email": "annevk@annevk.nl", "id": 102998, "name": "annevk@annevk.nl", "real_name": "Anne (:annevk)"}, {"email": "bobowencode@gmail.com", "id": 458623, "name": "bobowencode@gmail.com", "real_name": "Bob Owen (:bobowen)"}, {"email": "bugs@pettay.fi", "id": 39966, "name": "bugs@pettay.fi", "real_name": "Olli Pettay [:smaug]"}, {"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, {"email": "gijskruitbosch+bugs@gmail.com", "id": 159069, "name": "gijskruitbosch+bugs@gmail.com", "real_name": ":Gijs (he/him)"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "mconley@mozilla.com", "id": 403756, "name": "mconley@mozilla.com", "real_name": "Mike Conley (:mconley) (:\u2699\ufe0f) (Catching up on needinfos / reviews)"}], "cf_last_resolved": null, "attachments": [{"creator": "bzbarsky@mit.edu", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/html", "id": 8975099}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 9, "comments": [{"text": "Created attachment 8975099\nbaz.html\n\nSee attached testcase.  On tip, it reloads to a blank page, with this error in the console:\n\nJavaScript error: chrome://global/content/browser-child.js, line 352: NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIWebNavigation.loadURIWithOptions]\n\nIt used to reload to a page showing \"Test\".  This broke somewhere in the 55 cycle, and if I grab the 2017-02-01 nightly it's broken in e10s mode but works in non-e10s mode.  So it's possible this never worked in e10s mode...\n\nMike, do you know who would be the right person to look at this?\n\nOlli, do you think we should just give up on wyciwyg completely?", "author": "bzbarsky@mit.edu", "id": 13271431, "time": "2018-05-11T18:11:58Z"}, {"text": "Hey bz,\n\nI think I'm misunderstanding the STR here. Here's what I'm doing:\n\n1) Browse to https://bugzilla.mozilla.org/attachment.cgi?id=8975099\n2) Click on the <div>\n3) Reload the page\n\nOn today's Nightly on both macOS and Windows, as well as the May 11th Nightly (when you filed the bug), I still see \"Test\" after reloading. Are my STR off?", "author": "mconley@mozilla.com", "id": 13276037, "time": "2018-05-14T15:45:23Z"}, {"text": "Ah, looks like it works for http but not file://; I should have tested both.  Try downloading the testcase and running from a file:// URI.", "author": "bzbarsky@mit.edu", "id": 13276288, "time": "2018-05-14T16:58:16Z"}, {"text": "If it works for http, removing support sounds a bit risky.\nBut, it might be worth to do it anyhow. Just load the page from scratch and let it run its document.write stuff again.\nWould be good to have a pref for the removal first, and enable perhaps Nightly only.", "author": "bugs@pettay.fi", "id": 13276511, "time": "2018-05-14T18:05:19Z"}, {"text": "I did some bisection. Unfortunately, there are some busted or missing taskcluster builds around that time, so the smallest range I could get was:\n\nhttps://hg.mozilla.org/mozilla-central/pushloghtml?fromchange=bad312aefb42982f492ad2cf36f4c6c3d698f4f7&tochange=f8f4eaac1701107f794b48891bcca2c95d39d503\n\nbut I'm 98% certain this was caused by bug 1147911.\n\nI'm also not sure this is worth fixing, fwiw. wyciwyg support for file:/// documents that do document.write-y things sounds pretty niche.", "author": "mconley@mozilla.com", "id": 13276627, "time": "2018-05-14T18:38:13Z"}, {"text": "Wonder if this is related to bug 1402418 as well...", "author": "gijskruitbosch+bugs@gmail.com", "id": 13276635, "time": "2018-05-14T18:39:17Z"}, {"text": "Oh, hmm.  Are we not putting the wyciwyg://file:// load in the same process as file:// ?\n\nwyciwyg support for file:// might be less niche for the web, given WebKit's lack of support for it altogether....", "author": "bzbarsky@mit.edu", "id": 13276640, "time": "2018-05-14T18:40:15Z"}, {"text": "We don't have a special case for wyciwyg in E10SUtils.jsm getRemoteTypeForURIObject and I don't think we ever have, so they default to web/http remote type.\n\nI'm guessing that they aren't nsINestedURIs, because I think if they were it would handle this correctly.", "author": "bobowencode@gmail.com", "id": 13276675, "time": "2018-05-14T18:51:54Z"}, {"text": "> I'm guessing that they aren't nsINestedURIs\n\nThat's correct.  People who need to deal with them have to manually parse some bits out of them.  See nsContentUtils::RemoveWyciwygScheme.", "author": "bzbarsky@mit.edu", "id": 13276719, "time": "2018-05-14T19:04:57Z"}], "id": 1460939, "priority": "P3", "cc": ["annevk@annevk.nl", "bobowencode@gmail.com", "bugs@pettay.fi", "continuation@gmail.com", "gijskruitbosch+bugs@gmail.com", "mcastelluccio@mozilla.com", "mconley@mozilla.com"], "cf_crash_signature": "", "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1147911], "qa_contact": "", "creation_time": "2018-05-11T18:11:58Z", "cf_status_firefox_esr52": "---", "component": "Document Navigation", "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "---", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "bzbarsky@mit.edu", "id": 20209, "name": "bzbarsky@mit.edu", "real_name": "Boris Zbarsky [:bz] (Vacation Jun 16-24) (no decent commit message means r-)"}, "whiteboard": "", "mentors": [], "summary": "Reload of wyciwyg toplevel page coming from file:// is broken in e10s", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-16T13:01:14Z", "assigned_to": "nobody@mozilla.org", "is_open": true, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "bugs@pettay.fi, mconley@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(bugs@pettay.fi), needinfo?(mconley@mozilla.com)"}], "who": "bzbarsky@mit.edu", "when": "2018-05-11T18:11:58Z"}, {"changes": [{"removed": "needinfo?(mconley@mozilla.com)", "field_name": "flagtypes.name", "added": "needinfo?(bzbarsky@mit.edu)"}], "who": "mconley@mozilla.com", "when": "2018-05-14T15:45:23Z"}, {"changes": [{"removed": "Reload of wyciwyg toplevel page is broken in e10s", "field_name": "summary", "added": "Reload of wyciwyg toplevel page coming from file:// is broken in e10s"}, {"removed": "needinfo?(bzbarsky@mit.edu)", "field_name": "flagtypes.name", "added": "needinfo?(mconley@mozilla.com)"}], "who": "bzbarsky@mit.edu", "when": "2018-05-14T16:58:16Z"}, {"changes": [{"removed": "needinfo?(bugs@pettay.fi)", "field_name": "flagtypes.name", "added": ""}], "who": "bugs@pettay.fi", "when": "2018-05-14T18:05:19Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1147911"}, {"removed": "needinfo?(mconley@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "mconley@mozilla.com", "when": "2018-05-14T18:38:13Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "gijskruitbosch+bugs@gmail.com"}], "who": "gijskruitbosch+bugs@gmail.com", "when": "2018-05-14T18:39:17Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bobowencode@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(bobowencode@gmail.com)"}], "who": "bzbarsky@mit.edu", "when": "2018-05-14T18:40:15Z"}, {"changes": [{"removed": "needinfo?(bobowencode@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "bobowencode@gmail.com", "when": "2018-05-14T18:51:54Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P3"}, {"removed": "", "field_name": "cc", "added": "continuation@gmail.com"}], "who": "continuation@gmail.com", "when": "2018-05-14T23:49:59Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "regression"}, {"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2018-05-16T13:01:14Z"}], "resolution": "", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}