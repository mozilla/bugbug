{"status": "VERIFIED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Client Software", "creator": "sorina.florean@softvision.ro", "cc": ["bogdan.surd@softvision.ro", "fennec@softvision.ro", "levente.sacal@softvision.ro", "michael.l.comella@gmail.com", "petru.lingurar@softvision.ro", "ryanvm@gmail.com", "sdaswani@mozilla.com"], "depends_on": [1462594], "creation_time": "2018-01-31T14:12:04Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "ARM", "cf_status_firefox59": "wontfix", "keywords": [], "summary": "Settings Header not changed when visiting sub-menus", "id": 1434603, "attachments": [{"creator": "sorina.florean@softvision.ro", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "image/png", "id": 8947089}, {"creator": "petru.lingurar@softvision.ro", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-17T01:30:06Z", "type_id": 4, "creation_date": "2018-05-15T10:07:55Z", "id": 1756846, "setter": "michael.l.comella@gmail.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-05-31T19:36:59Z", "type_id": 721, "creation_date": "2018-05-30T07:28:33Z", "id": 1763377, "setter": "ryanvm@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8975770}], "assigned_to_detail": {"email": "petru.lingurar@softvision.ro", "id": 613831, "name": "petru.lingurar@softvision.ro", "real_name": "Petru-Mugurel Lingurar[:petru]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 12, "comments": [{"text": "Created attachment 8947089\nScreenshot_20180131-160855.png\n\nEnvironment: \nDevice: Google Pixel(Android 8.0), HTC 10 (Android 8.0.0);\nBuild: Nightly 60.0a1 (2018-01-31);\n\nSteps to reproduce:\n1. Launch Fennec;\n2. Open Settings, and tap on General, Search, Privacy, Advanced sub-menu.\n\nExpected result:\nThe header is changed accordingly with the menu visited; if we visit General the header name is General not Settings.\n\nActual result:\nThe header is changed only for Privacy, Search, Notification Menu.\nWhen General, Accessibility, Advanced menu is opened the header name is still Settings.\n\nNotes: reproducible on Android O", "author": "sorina.florean@softvision.ro", "id": 13008291, "time": "2018-01-31T14:12:04Z"}, {"text": "Created attachment 8975770\nBug 1434603 - Settings Header not changed when visiting sub-menus on Oreo;\n\nThe ActionBar's title will always be updated with the title of the visiting PreferenceScreen.\n\nReview commit: https://reviewboard.mozilla.org/r/243986/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/243986/", "author": "petru.lingurar@softvision.ro", "id": 13278196, "time": "2018-05-15T10:07:55Z"}, {"text": "Comment on attachment 8975770\nBug 1434603 - Settings Header not changed when visiting sub-menus on Oreo;\n\nhttps://reviewboard.mozilla.org/r/243986/#review250576\n\n::: mobile/android/base/java/org/mozilla/gecko/preferences/GeckoPreferenceFragment.java:97\n(Diff revision 1)\n> -     * We only return titles for the preference screens that are\n> +     * The result will be used to set the title that you see on non-multi-pane devices.\n> -     * launched directly, and thus might need to be redisplayed.\n> -     *\n> -     * This method sets the title that you see on non-multi-pane devices.\n>       */\n>      private String getTitle() {\n\nIt'd be great if we could get this value from the `PreferenceScreen` itself to avoid code duplication but it looks like the precedent is already set to map layout -> string resources so this seems fine.\n\n::: mobile/android/base/java/org/mozilla/gecko/preferences/GeckoPreferenceFragment.java:99\n(Diff revision 1)\n> -     *\n> -     * This method sets the title that you see on non-multi-pane devices.\n>       */\n>      private String getTitle() {\n>          final int res = getResource();\n>          if (res == R.xml.preferences) {\n\nnit: fwiw, for a set of cascading ifs like this, I'd probably create a hash map with all of these values: it separates the key -> value assignment, making it harder to mess up, and then the logic in this method becomes really simple:\n```java\nfinal int stringId = prefIdToTitle.get(res);\nreturn stringId == null ? null : getString(stringId);\n```\n\n::: mobile/android/base/java/org/mozilla/gecko/preferences/GeckoPreferenceFragment.java:186\n(Diff revision 1)\n>  \n>      @Override\n>      public void onResume() {\n>          // This is a little delicate. Ensure that you do nothing prior to\n>          // super.onResume that you wouldn't do in onCreate.\n> +        // This will also set the title in the parent activity's ActionBar to the title of the current PreferenceScreen\n\nHelpful comments, thanks!\n\n::: mobile/android/base/java/org/mozilla/gecko/preferences/GeckoPreferenceFragment.java:210\n(Diff revision 1)\n>              getPreferenceScreen().removeAll();\n>              addPreferencesFromResource(getResource());\n>          }\n>  \n>          // Fix the parent title regardless.\n> -        updateTitle();\n> +        updateParentTitle();\n\nThanks for cleaning up the code!", "author": "michael.l.comella@gmail.com", "id": 13283375, "time": "2018-05-17T01:30:06Z"}, {"text": "Comment on attachment 8975770\nBug 1434603 - Settings Header not changed when visiting sub-menus on Oreo;\n\nhttps://reviewboard.mozilla.org/r/243986/#review250576\n\n> nit: fwiw, for a set of cascading ifs like this, I'd probably create a hash map with all of these values: it separates the key -> value assignment, making it harder to mess up, and then the logic in this method becomes really simple:\n> ```java\n> final int stringId = prefIdToTitle.get(res);\n> return stringId == null ? null : getString(stringId);\n> ```\n\nDropping this issue: I didn't mean to open it as one, just a \"this is how I'd do it and maybe you'd think it's cool too!\" :)", "author": "michael.l.comella@gmail.com", "id": 13283378, "time": "2018-05-17T01:34:01Z"}, {"text": "Pushed by michael.l.comella@gmail.com:\nhttps://hg.mozilla.org/integration/autoland/rev/e5ecf6627dfd\nSettings Header not changed when visiting sub-menus on Oreo; r=mcomella", "author": "pulsebot@bots.tld", "id": 13283379, "time": "2018-05-17T01:35:30Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/e5ecf6627dfd", "author": "csabou@mozilla.com", "id": 13283935, "time": "2018-05-17T09:51:44Z"}, {"text": "Verified as fixed on latest Nightly build (62.0a1 - 2018-05-17).\nDevices: Google Pixel(Android 8.0), Nexus 6P(Android 8.1.0).", "author": "sorina.florean@softvision.ro", "id": 13286377, "time": "2018-05-18T06:19:56Z"}, {"text": "Please nominate this for Beta approval when you get a chance.", "author": "ryanvm@gmail.com", "id": 13373275, "time": "2018-05-30T03:10:18Z"}, {"text": "Comment on attachment 8975770\nBug 1434603 - Settings Header not changed when visiting sub-menus on Oreo;\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Settings Header not changed when visiting sub-menus\n[User impact if declined]: The Settings UX would be affected by the fact that accessing some settings would update title in toolbar and accessing others won't.\n[Is this code covered by automated tests?]: No\n[Has the fix been verified in Nightly?]: Yes\n[Needs manual test from QE? If yes, steps to reproduce]: Has been verified by QE\n[List of other uplifts needed for the feature/fix]: bug 1462594\n[Is the change risky?]: Low risk\n[Why is the change risky/not risky?]: Minor change, verified by QE\n[String changes made/needed]: None", "author": "petru.lingurar@softvision.ro", "id": 13373542, "time": "2018-05-30T07:28:33Z"}, {"text": "Comment on attachment 8975770\nBug 1434603 - Settings Header not changed when visiting sub-menus on Oreo;\n\nFixes the settings header not consistently changing when visiting sub-menus, causing confusion. Approved for 61.0b11.", "author": "ryanvm@gmail.com", "id": 13378521, "time": "2018-05-31T19:36:59Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/3607d8d3561b", "author": "ryanvm@gmail.com", "id": 13378608, "time": "2018-05-31T20:10:28Z"}, {"text": "Verified as fixed in Beta 61.0b11 on Samsung S8+ (Android 8.0.0)", "author": "levente.sacal@softvision.ro", "id": 13387353, "time": "2018-06-05T08:33:03Z"}], "cf_last_resolved": "2018-05-17T09:51:44Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "---", "cf_platform_rel": "---", "product": "Firefox for Android", "cf_status_firefox_esr52": "---", "blocks": [1349309], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Theme and Visual Design", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "verified", "cf_status_firefox61": "verified", "cf_status_firefox60": "wontfix", "target_milestone": "Firefox 62", "is_cc_accessible": true, "cf_rank": null, "groups": [], "url": "", "creator_detail": {"email": "sorina.florean@softvision.ro", "id": 565577, "name": "sorina.florean@softvision.ro", "real_name": "Sorina Florean [:sorina]"}, "whiteboard": "--do_not_change--[priority:high]", "mentors": [], "cc_detail": [{"email": "bogdan.surd@softvision.ro", "id": 563218, "name": "bogdan.surd@softvision.ro", "real_name": "Bogdan Surd, QA [:BogdanS, NI]"}, {"email": "fennec@softvision.ro", "id": 425476, "name": "fennec@softvision.ro", "real_name": "SoftVision Mobile"}, {"email": "levente.sacal@softvision.ro", "id": 613466, "name": "levente.sacal@softvision.ro", "real_name": "Levente Sacal"}, {"email": "michael.l.comella@gmail.com", "id": 441872, "name": "michael.l.comella@gmail.com", "real_name": "Michael Comella (:mcomella) [needinfo or I won't see it]"}, {"email": "petru.lingurar@softvision.ro", "id": 613831, "name": "petru.lingurar@softvision.ro", "real_name": "Petru-Mugurel Lingurar[:petru]"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "sdaswani@mozilla.com", "id": 590935, "name": "sdaswani@mozilla.com", "real_name": ":sdaswani only needinfo"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-06-05T12:48:28Z", "cf_status_firefox_esr60": "---", "assigned_to": "petru.lingurar@softvision.ro", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "petru.lingurar@softvision.ro"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "petru.lingurar@softvision.ro"}], "who": "petru.lingurar@softvision.ro", "when": "2018-05-11T07:33:00Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8975770, "added": "review?(sdaswani@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "sdaswani@mozilla.com"}], "who": "petru.lingurar@softvision.ro", "when": "2018-05-15T10:07:55Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": "--do_not_change--[priority:high]"}], "who": "cchiorean@mozilla.com", "when": "2018-05-15T14:59:51Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(sdaswani@mozilla.com)", "attachment_id": 8975770, "added": "review?(michael.l.comella@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "michael.l.comella@gmail.com"}], "who": "sdaswani@mozilla.com", "when": "2018-05-15T23:38:14Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(michael.l.comella@gmail.com)", "attachment_id": 8975770, "added": "review+"}], "who": "michael.l.comella@gmail.com", "when": "2018-05-17T01:30:06Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "Firefox 62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-17 09:51:44"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "csabou@mozilla.com", "when": "2018-05-17T09:51:44Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "affected", "field_name": "cf_status_firefox59", "added": "wontfix"}, {"removed": "affected", "field_name": "cf_status_firefox60", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "fix-optional"}], "who": "ryanvm@gmail.com", "when": "2018-05-17T13:24:38Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "qe-verify+"}], "who": "petru.lingurar@softvision.ro", "when": "2018-05-17T14:23:05Z"}, {"changes": [{"removed": "qe-verify+", "field_name": "flagtypes.name", "added": ""}, {"removed": "fixed", "field_name": "cf_status_firefox62", "added": "verified"}], "who": "sorina.florean@softvision.ro", "when": "2018-05-18T06:19:56Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1462594"}], "who": "jh+bugzilla@buttercookie.de", "when": "2018-05-23T17:51:04Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(petru.lingurar@softvision.ro)"}], "who": "ryanvm@gmail.com", "when": "2018-05-30T03:10:18Z"}, {"changes": [{"removed": "needinfo?(petru.lingurar@softvision.ro)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8975770, "added": "approval-mozilla-beta?"}], "who": "petru.lingurar@softvision.ro", "when": "2018-05-30T07:28:33Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8975770, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-05-31T19:36:59Z"}, {"changes": [{"removed": "fix-optional", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-31T20:10:28Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "VERIFIED"}, {"removed": "", "field_name": "cc", "added": "levente.sacal@softvision.ro"}, {"removed": "fixed", "field_name": "cf_status_firefox61", "added": "verified"}], "who": "levente.sacal@softvision.ro", "when": "2018-06-05T08:33:03Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bogdan.surd@softvision.ro"}, {"removed": "?", "field_name": "cf_blocking_fennec", "added": "---"}], "who": "bogdan.surd@softvision.ro", "when": "2018-06-05T12:48:28Z"}], "resolution": "FIXED", "op_sys": "Android", "cf_fx_points": "---", "cf_blocking_fennec": "---"}