{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "nth10sd@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8536145}, {"creator": "bhackett1024@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2014-12-15T18:01:06Z", "type_id": 4, "creation_date": "2014-12-15T12:15:31Z", "id": 1053905, "setter": "marty.rosenberg@gmail.com"}], "content_type": "text/plain", "id": 8536532}], "classification": "Components", "creator": "nth10sd@gmail.com", "cc": ["bhackett1024@gmail.com", "choller@mozilla.com", "jdemooij@mozilla.com", "jruderman@gmail.com", "marty.rosenberg@gmail.com", "nmatsakis@mozilla.com"], "depends_on": [], "creation_time": "2014-12-14T09:45:10Z", "cf_status_firefox37": "affected", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": ["assertion", "regression", "testcase"], "summary": "Assertion failure: addr.offset == 0, at jit/arm/MacroAssembler-arm.h", "id": 1111326, "assigned_to_detail": {"email": "bhackett1024@gmail.com", "id": 346231, "name": "bhackett1024@gmail.com", "real_name": "Brian Hackett (:bhackett)"}, "severity": "critical", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "bhackett1024@gmail.com", "comment_count": 5, "comments": [{"text": "// Randomly chosen test: js/src/tests/ecma_7/TypedObject/arraytype.js\nvar ArrayType = TypedObject.ArrayType;\nvar float32 = TypedObject.float32;\n(new new ArrayType(new ArrayType(float32, 3), 3))[1][1] = {}\nfor (var i = 0; i < 1; i++) {}\n\nasserts js debug 32-bit ARM-simulator shell on m-c changeset f14dcd1c8c0b with --fuzzing-safe --no-threads --ion-eager --ion-gvn=off at Assertion failure: addr.offset == 0, at jit/arm/MacroAssembler-arm.h.\n\nDebug configure options:\n\nLD=ld CROSS_COMPILE=1 CC=\"clang -Qunused-arguments -msse2 -mfpmath=sse -arch i386\" RANLIB=ranlib CXX=\"clang++ -Qunused-arguments -msse2 -mfpmath=sse -arch i386\" AS=$CC AR=ar STRIP=\"strip -x -S\" HOST_CC=\"clang -Qunused-arguments -msse2 -mfpmath=sse\" AUTOCONF=/usr/local/Cellar/autoconf213/2.13/bin/autoconf213 HOST_CXX=\"clang++ -Qunused-arguments -msse2 -mfpmath=sse\" sh /Users/skywalker/trees/mozilla-central/js/src/configure --target=i386-apple-darwin9.2.0 --enable-macos-target=10.5 --enable-arm-simulator --enable-debug --enable-optimize --enable-nspr-build --enable-more-deterministic --with-ccache --enable-gczeal --enable-debug-symbols --disable-tests\n\nThis was found by combining random js tests together with jsfunfuzz, the specific file(s) is/are:\n\nhttp://hg.mozilla.org/mozilla-central/file/f14dcd1c8c0b/js/src/tests/ecma_7/TypedObject/arraytype.js\n\nautoBisect shows this is probably related to the following changeset:\n\nThe first bad revision is:\nchangeset:   https://hg.mozilla.org/mozilla-central/rev/d696d5bfb8cf\nuser:        Brian Hackett\ndate:        Tue Nov 18 08:37:32 2014 -0700\nsummary:     Bug 1095952 - Optimize accesses to known inline or outline typed objects, r=nmatsakis,jandem.\n\nBrian, is bug 1095952 a likely regressor?", "author": "nth10sd@gmail.com", "id": 9691980, "time": "2014-12-14T09:45:10Z"}, {"text": "Created attachment 8536145\nstack\n\n(lldb) bt 5\n* thread #1: tid = 0x3102f4, 0x004569ab js-dbg-opt-32-dm-nsprBuild-armSim-darwin-f14dcd1c8c0b`js::jit::MacroAssemblerARMCompat::storeFloat32(this=<unavailable>, src=<unavailable>, addr=<unavailable>) + 251 at MacroAssembler-arm.h:1430, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\n  * frame #0: 0x004569ab js-dbg-opt-32-dm-nsprBuild-armSim-darwin-f14dcd1c8c0b`js::jit::MacroAssemblerARMCompat::storeFloat32(this=<unavailable>, src=<unavailable>, addr=<unavailable>) + 251 at MacroAssembler-arm.h:1430\n    frame #1: 0x0040afdb js-dbg-opt-32-dm-nsprBuild-armSim-darwin-f14dcd1c8c0b`js::jit::MacroAssembler::storeToTypedFloatArray(js::Scalar::Type, js::jit::VFPRegister, js::jit::BaseIndex const&) [inlined] void StoreToTypedFloatArray<js::jit::VFPRegister, js::jit::BaseIndex>(masm=<unavailable>, arrayType=<unavailable>, value=<unavailable>, dest=<unavailable>) + 139 at MacroAssembler.cpp:269\n    frame #2: 0x0040af6b js-dbg-opt-32-dm-nsprBuild-armSim-darwin-f14dcd1c8c0b`js::jit::MacroAssembler::storeToTypedFloatArray(this=<unavailable>, arrayType=<unavailable>, value=<unavailable>, dest=<unavailable>) + 27 at MacroAssembler.cpp:287\n    frame #3: 0x002b1195 js-dbg-opt-32-dm-nsprBuild-armSim-darwin-f14dcd1c8c0b`js::jit::CodeGenerator::visitStoreTypedArrayElement(js::jit::LStoreTypedArrayElement*) [inlined] void js::jit::StoreToTypedArray<js::jit::BaseIndex>(masm=<unavailable>, arrayType=<unavailable>, dest=0x00000000) + 60 at CodeGenerator.cpp:8871\n    frame #4: 0x002b1159 js-dbg-opt-32-dm-nsprBuild-armSim-darwin-f14dcd1c8c0b`js::jit::CodeGenerator::visitStoreTypedArrayElement(this=<unavailable>, lir=<unavailable>) + 553 at CodeGenerator.cpp:8895\n(lldb)", "author": "nth10sd@gmail.com", "id": 9691985, "time": "2014-12-14T09:51:38Z"}, {"text": "Created attachment 8536532\npatch\n\nThe macro assembler just asserts that base indexes have a zero offset, which is not an assumption it can make anymore after bug 1095952.  This patch fixes this instance of the assert, as well as all the other ones I could find in the ARM assembler.", "author": "bhackett1024@gmail.com", "id": 9694051, "time": "2014-12-15T12:15:31Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/157b8c310478", "author": "bhackett1024@gmail.com", "id": 9707014, "time": "2014-12-18T00:25:40Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/157b8c310478", "author": "cbook@mozilla.com", "id": 9709158, "time": "2014-12-18T13:31:00Z"}], "cf_last_resolved": "2014-12-18T13:31:00Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2014-12-18T13:31:00Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [349611, 1100132, 1095952], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "JavaScript Engine: JIT", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla37", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "nth10sd@gmail.com", "id": 132034, "name": "nth10sd@gmail.com", "real_name": "Gary Kwong [:gkw] [:nth10sd]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "bhackett1024@gmail.com", "id": 346231, "name": "bhackett1024@gmail.com", "real_name": "Brian Hackett (:bhackett)"}, {"email": "choller@mozilla.com", "id": 395101, "name": "choller@mozilla.com", "real_name": "Christian Holler (:decoder)"}, {"email": "jdemooij@mozilla.com", "id": 375297, "name": "jdemooij@mozilla.com", "real_name": "Jan de Mooij [:jandem] (PTO Mar 8)"}, {"email": "jruderman@gmail.com", "id": 11608, "name": "jruderman@gmail.com", "real_name": "Jesse Ruderman"}, {"email": "marty.rosenberg@gmail.com", "id": 419881, "name": "marty.rosenberg@gmail.com", "real_name": "Marty Rosenberg [:mjrosenb]"}, {"email": "nmatsakis@mozilla.com", "id": 427103, "name": "nmatsakis@mozilla.com", "real_name": "Niko Matsakis [:nmatsakis]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(bhackett1024@gmail.com)"}], "who": "nth10sd@gmail.com", "when": "2014-12-14T09:45:10Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mrosenberg@mozilla.com"}, {"removed": "needinfo?(bhackett1024@gmail.com)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8536532, "added": "review?(mrosenberg@mozilla.com)"}], "who": "bhackett1024@gmail.com", "when": "2014-12-15T12:15:31Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mrosenberg@mozilla.com)", "attachment_id": 8536532, "added": "review+"}], "who": "marty.rosenberg@gmail.com", "when": "2014-12-15T18:01:06Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "bhackett1024@gmail.com"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla37"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2014-12-18 05:31:00"}], "who": "cbook@mozilla.com", "when": "2014-12-18T13:31:00Z"}], "resolution": "FIXED", "op_sys": "Linux", "cf_fx_points": "---", "cf_blocking_fennec": "---"}