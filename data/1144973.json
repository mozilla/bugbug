{"cf_tracking_thunderbird_esr52": "---", "cf_status_firefox39": "fixed", "cf_tracking_firefox60": "---", "attachments": [{"creator": "nfitzgerald@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-03-19T03:47:15Z", "type_id": 4, "creation_date": "2015-03-19T00:35:15Z", "id": 1125953, "setter": "bzbarsky@mit.edu"}], "content_type": "text/plain", "id": 8579711}, {"creator": "nfitzgerald@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8579712}, {"creator": "nfitzgerald@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-03-19T17:29:48Z", "type_id": 4, "creation_date": "2015-03-19T17:29:48Z", "id": 1126625, "setter": "nfitzgerald@mozilla.com"}], "content_type": "text/plain", "id": 8580147}], "classification": "Components", "creator": "nfitzgerald@mozilla.com", "cc": ["bzbarsky@mit.edu", "nfitzgerald@mozilla.com"], "depends_on": [], "creation_time": "2015-03-19T00:26:31Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "js::StringifySavedFrameStack doesn't put the string in the cx's compartment like it promises", "id": 1144973, "assigned_to_detail": {"email": "nfitzgerald@mozilla.com", "id": 417695, "name": "nfitzgerald@mozilla.com", "real_name": "Nick Fitzgerald [:fitzgen] [\u23f0PST; UTC-8]"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "nfitzgerald@mozilla.com", "comment_count": 10, "comments": [{"text": "It's documentation says:\n\n> The stringified stack out parameter is placed in the cx's compartment.\n\n*Sigh*, but that just is not true.\n\nThe first thing it does is maybe enter the SavedFrame's compartment and then the string is built in that possibly different compartment.", "author": "nfitzgerald@mozilla.com", "id": 10048516, "time": "2015-03-19T00:26:31Z"}, {"text": "Created attachment 8579711\nEnsure that StringifySavedFrameStack puts its stack string in the cx's compartment", "author": "nfitzgerald@mozilla.com", "id": 10048545, "time": "2015-03-19T00:35:15Z"}, {"text": "Sorry, I know you aren't doing reviews right now, but you broke this in 04f34e86aee1 and this is a pretty small patch :P", "author": "nfitzgerald@mozilla.com", "id": 10048555, "time": "2015-03-19T00:36:20Z"}, {"text": "Created attachment 8579712\nSame patch but without whitespace changes", "author": "nfitzgerald@mozilla.com", "id": 10048563, "time": "2015-03-19T00:37:43Z"}, {"text": "Comment on attachment 8579711\nEnsure that StringifySavedFrameStack puts its stack string in the cx's compartment\n\nThis works, but couldn't we actually just let the AutoMaybeEnterFrameCompartment go out of scope before calling finishString()?  Seems to me like that would work fine (albeit with a bit more dependency on StringBuffer internals) and avoid the wrap() call.  Maybe I'm just allergic to wrap() calls: they show up in profiles too much.  :(\n\nEither way should document near the opening curly of the scope we're adding what the scope is there for.", "author": "bzbarsky@mit.edu", "id": 10049153, "time": "2015-03-19T03:47:15Z"}, {"text": "Created attachment 8580147\nEnsure that StringifySavedFrameStack puts its stack string in the cx's compartment", "author": "nfitzgerald@mozilla.com", "id": 10051989, "time": "2015-03-19T17:29:48Z"}, {"text": "Try push: https://treeherder.mozilla.org/#/jobs?repo=try&revision=17c29e1ad7d1", "author": "nfitzgerald@mozilla.com", "id": 10051993, "time": "2015-03-19T17:30:24Z"}, {"text": "(In reply to Nick Fitzgerald [:fitzgen] from comment #6)\n> Try push:\n> https://treeherder.mozilla.org/#/jobs?repo=try&revision=17c29e1ad7d1\n\nThose failures are fixed in bug 1144108.", "author": "nfitzgerald@mozilla.com", "id": 10052921, "time": "2015-03-19T20:36:27Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/f3988f82aefc", "author": "ryanvm@gmail.com", "id": 10056343, "time": "2015-03-20T14:56:52Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/f3988f82aefc", "author": "philringnalda@gmail.com", "id": 10060908, "time": "2015-03-21T19:35:36Z"}], "cf_last_resolved": "2015-03-21T19:35:36Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "unspecified", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-03-21T19:35:36Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [1038238], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "JavaScript Engine", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla39", "is_cc_accessible": true, "status": "RESOLVED", "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "nfitzgerald@mozilla.com", "id": 417695, "name": "nfitzgerald@mozilla.com", "real_name": "Nick Fitzgerald [:fitzgen] [\u23f0PST; UTC-8]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "bzbarsky@mit.edu", "id": 20209, "name": "bzbarsky@mit.edu", "real_name": "Boris Zbarsky [:bz] (no decent commit message means r-)"}, {"email": "nfitzgerald@mozilla.com", "id": 417695, "name": "nfitzgerald@mozilla.com", "real_name": "Nick Fitzgerald [:fitzgen] [\u23f0PST; UTC-8]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8579711, "added": "review?(bzbarsky@mit.edu)"}], "who": "nfitzgerald@mozilla.com", "when": "2015-03-19T00:35:15Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bzbarsky@mit.edu)", "attachment_id": 8579711, "added": "review+"}], "who": "bzbarsky@mit.edu", "when": "2015-03-19T03:47:15Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8579711, "added": "1"}, {"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8579712, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8580147, "added": "review+"}], "who": "nfitzgerald@mozilla.com", "when": "2015-03-19T17:29:48Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}], "who": "nfitzgerald@mozilla.com", "when": "2015-03-19T20:37:01Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}], "who": "ryanvm@gmail.com", "when": "2015-03-20T14:56:52Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla39"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-03-21 12:35:36"}, {"removed": "---", "field_name": "cf_status_firefox39", "added": "fixed"}], "who": "philringnalda@gmail.com", "when": "2015-03-21T19:35:36Z"}], "resolution": "FIXED", "op_sys": "Mac OS X", "cf_fx_points": "---", "cf_blocking_fennec": "---"}