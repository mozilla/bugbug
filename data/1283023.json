{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "jessi3py@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2016-08-03T21:42:09Z", "type_id": 4, "creation_date": "2016-08-03T09:54:01Z", "id": 1433092, "setter": "bugs@pettay.fi"}], "content_type": "text/plain", "id": 8777266}], "classification": "Components", "creator": "jessi3py@gmail.com", "cc": ["bugs@pettay.fi", "gandalf@aviary.pl", "soqu71@gmail.com"], "depends_on": [], "creation_time": "2016-06-29T08:09:41Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Implement the step attribute for <input type=month>", "id": 1283023, "cf_status_firefox50": "affected", "cf_status_firefox51": "fixed", "assigned_to_detail": {"email": "jessi3py@gmail.com", "id": 475045, "name": "jessi3py@gmail.com", "real_name": "Jessica Jong [:jessica] (inactive)"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "jessi3py@gmail.com", "comment_count": 10, "comments": [{"text": "", "author": "jessi3py@gmail.com", "id": 11510154, "time": "2016-06-29T08:09:41Z"}, {"text": "I find our implementation of input type=date's step attribute a little bit confusing when step is not an integer. In our current implementation, we 'round' the step to the LCM of step and the scale factor to avoid a step mismatch. So, for example, if step=0.9, the actual step used 9 days [1], but if step=1.5, the actual step used is 3 days. I think this is not very trivial for users.\n\nI tested Chrome and it seems that they just round the step value, if step=1.2, the actual step used is 1 day, if step=1.5, the actual step used is 2 days.\n\nThe spec just says: \"When the element is suffering from a step mismatch, the user agent may round the element's value to the nearest date for which the element would not suffer from a step mismatch.\" [2]\n\n\n[1] http://hg.mozilla.org/mozilla-central/file/711963e8daa3/dom/html/test/forms/test_step_attribute.html#l204\n[2] https://html.spec.whatwg.org/multipage/forms.html#date-state-(type=date)", "author": "jessi3py@gmail.com", "id": 11553910, "time": "2016-07-18T02:01:49Z"}, {"text": "Olli, may I know your comment about comment 1? Thanks.", "author": "jessi3py@gmail.com", "id": 11554486, "time": "2016-07-18T09:46:35Z"}, {"text": "(In reply to Jessica Jong [:jessica] from comment #1)\n> So, for example, if step=0.9, the actual step used 9 days [1], but\n> if step=1.5, the actual step used is 3 days. I think this is not very\n> trivial for users.\nI don't quite understand how we get these results, but if so, sounds really weird and changing it to be closer to what Chrome does is totally fine.\n\nBug 769359 doesn't explain why things have been implemented the way they have.", "author": "bugs@pettay.fi", "id": 11554648, "time": "2016-07-18T11:23:53Z"}, {"text": "(In reply to Olli Pettay [:smaug] from comment #3)\n> (In reply to Jessica Jong [:jessica] from comment #1)\n> > So, for example, if step=0.9, the actual step used 9 days [1], but\n> > if step=1.5, the actual step used is 3 days. I think this is not very\n> > trivial for users.\n> I don't quite understand how we get these results, but if so, sounds really\n> weird and changing it to be closer to what Chrome does is totally fine.\n> \n> Bug 769359 doesn't explain why things have been implemented the way they\n> have.\n\nFrom the comment [1], it says:\n      // In case this is a date and the step is not an integer, we don't want to\n      // display the dates corresponding to the truncated timestamps of valueLow\n      // and valueHigh because they might suffer from a step mismatch as well.\n      // Instead we want the timestamps to correspond to a rounded day. That is,\n      // we want a multiple of the step scale factor (1 day) as well as of step.\n\nIt's not wrong, it's just kind of confusing for users. What Chrome does is simpler, but it implies it does allow non-integer step, cause it's always rounded to an integer.\n\nI'll file a separate bug for type=date step attribute if we are going to change it, type=month scale factor is 1 (month), so I think we won't be having this problem.\n\n[1] http://hg.mozilla.org/mozilla-central/file/feaaf1af1065/dom/html/HTMLInputElement.cpp#l7507", "author": "jessi3py@gmail.com", "id": 11557296, "time": "2016-07-19T02:28:49Z"}, {"text": "Actually, type=month does suffer from the same problem when step is not an integer, so I filed Bug 1289272 and will work on it first.", "author": "jessi3py@gmail.com", "id": 11574358, "time": "2016-07-26T03:12:26Z"}, {"text": "Created attachment 8777266\npatch, v1.", "author": "jessi3py@gmail.com", "id": 11594770, "time": "2016-08-03T09:54:01Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=57d6acd3dbfc", "author": "jessi3py@gmail.com", "id": 11597561, "time": "2016-08-04T01:21:39Z"}, {"text": "Pushed by cbook@mozilla.com:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/4ec3149b367b\nImplement the step attribute for <input type=month>. r=smaug", "author": "pulsebot@bots.tld", "id": 11599020, "time": "2016-08-04T14:26:40Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/4ec3149b367b", "author": "cbook@mozilla.com", "id": 11601741, "time": "2016-08-05T10:33:09Z"}], "cf_last_resolved": "2016-08-05T10:33:09Z", "priority": "P2", "mentors_detail": [], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2016-10-04T09:35:19Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [888324], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "DOM: Core & HTML", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla51", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "jessi3py@gmail.com", "id": 475045, "name": "jessi3py@gmail.com", "real_name": "Jessica Jong [:jessica] (inactive)"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "bugs@pettay.fi", "id": 39966, "name": "bugs@pettay.fi", "real_name": "Olli Pettay [:smaug]"}, {"email": "gandalf@aviary.pl", "id": 41270, "name": "gandalf@aviary.pl", "real_name": "Zibi Braniecki [:gandalf][:zibi]"}, {"email": "soqu71@gmail.com", "id": 434964, "name": "soqu71@gmail.com", "real_name": "Hsin-Yi Tsai [:hsinyi]"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "gandalf@aviary.pl"}], "who": "gandalf@aviary.pl", "when": "2016-07-01T11:54:15Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}], "who": "soqu71@gmail.com", "when": "2016-07-13T07:35:48Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(bugs@pettay.fi)"}], "who": "jessi3py@gmail.com", "when": "2016-07-18T09:46:35Z"}, {"changes": [{"removed": "needinfo?(bugs@pettay.fi)", "field_name": "flagtypes.name", "added": ""}], "who": "bugs@pettay.fi", "when": "2016-07-18T11:23:53Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "jjong@mozilla.com"}], "who": "jessi3py@gmail.com", "when": "2016-07-19T03:16:15Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8777266, "added": "review?(bugs@pettay.fi)"}], "who": "jessi3py@gmail.com", "when": "2016-08-03T09:54:01Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(bugs@pettay.fi)", "attachment_id": 8777266, "added": "review+"}], "who": "bugs@pettay.fi", "when": "2016-08-03T21:42:09Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "checkin-needed"}], "who": "jessi3py@gmail.com", "when": "2016-08-04T01:21:39Z"}, {"changes": [{"removed": "checkin-needed", "field_name": "keywords", "added": ""}], "who": "pulsebot@bots.tld", "when": "2016-08-04T14:26:40Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla51"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2016-08-05 10:33:09"}, {"removed": "---", "field_name": "cf_status_firefox51", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2016-08-05T10:33:09Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1307384"}], "who": "whuang@mozilla.com", "when": "2016-10-04T09:31:16Z"}, {"changes": [{"removed": "1307384", "field_name": "blocks", "added": ""}], "who": "whuang@mozilla.com", "when": "2016-10-04T09:35:19Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}