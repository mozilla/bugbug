{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "xidorn+moz@upsuper.org", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-01-29T10:37:46Z", "type_id": 4, "creation_date": "2015-01-29T00:35:21Z", "id": 1086557, "setter": "jfkthame@gmail.com"}], "content_type": "text/plain", "id": 8556192}], "classification": "Components", "creator": "xidorn+moz@upsuper.org", "cc": ["jfkthame@gmail.com", "xidorn+moz@upsuper.org"], "depends_on": [], "creation_time": "2014-12-16T01:33:17Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "x86_64", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": [], "summary": "Reftest fails on tests for bug 1087872 on Windows", "id": 1111891, "assigned_to_detail": {"email": "xidorn+moz@upsuper.org", "id": 373403, "name": "xidorn+moz@upsuper.org", "real_name": "Xidorn Quan [:xidorn] UTC+10"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "assigned_to": "xidorn+moz@upsuper.org", "comment_count": 10, "comments": [{"text": "Bug 1087872 lands with fuzzy on Windows. Per bug 1087872 comment 35, it worth a followup bug for this problem, as it is not something expected. But the real reason is not known yet.", "author": "xidorn+moz@upsuper.org", "id": 9697560, "time": "2014-12-16T01:33:17Z"}, {"text": "I suspect it might be a problem with propagating visual overflow areas.", "author": "dbaron@dbaron.org", "id": 9697619, "time": "2014-12-16T02:02:16Z"}, {"text": "Actually it is not a problem with ruby at all.\n\nAccording to my test, even replace those lines with\n\n<span style=\"font-size: 50%\">x<span class=\"remove\"></span>y</span>\n\nand\n\n<span style=\"font-size: 50%\">xy</span>\n\nin test and ref file respectively, it fails with identical difference as well.", "author": "xidorn+moz@upsuper.org", "id": 9851571, "time": "2015-01-28T06:31:47Z"}, {"text": "jfkthame, maybe you have some idea about what happens here.\n\nSee the lines in comment 2, there is an onload listener which removes any element with class=\"remove\". This test fails on Windows only, with one pixel different. The pixel in question is a pixel connects both letters.", "author": "xidorn+moz@upsuper.org", "id": 9851583, "time": "2015-01-28T06:36:51Z"}, {"text": "This sounds like a D2D antialiasing/compositing issue, where painting the two glyphs in separate operations or painting them together in a single call is not guaranteed to give pixel-identical results where their antialiased edges coincide. As such, I don't think the one-pixel \"fuzz\" is something we need to be concerned about. We've seen issues like this before, where sometimes the presence of a particular glyph in the string passed to a D2D call will affect the precise antialiasing given to an apparently-unrelated glyph even when it's several positions away.\n\nStill, in this case you might be able to avoid the fuzz by minor changes to the testcase. E.g. setting the font to sans-serif instead of the default (serif) may help; or replacing the \"xy\" glyphs with something like \"o\" to avoid the virtually-touching serifs that are competing for the same pixel of antialiasing.", "author": "jfkthame@gmail.com", "id": 9852094, "time": "2015-01-28T10:15:10Z"}, {"text": "Created attachment 8556192\npatch", "author": "xidorn+moz@upsuper.org", "id": 9855779, "time": "2015-01-29T00:35:21Z"}, {"text": "Comment on attachment 8556192\npatch\n\nReview of attachment 8556192:\n-----------------------------------------------------------------\n\nYes, that seems fine provided it works; it doesn't affect the purpose of the test.", "author": "jfkthame@gmail.com", "id": 9857246, "time": "2015-01-29T10:37:46Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=try&revision=a815ec3abf3d", "author": "xidorn+moz@upsuper.org", "id": 9859761, "time": "2015-01-29T21:18:51Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/e8401f3dd2e1", "author": "xidorn+moz@upsuper.org", "id": 9861235, "time": "2015-01-30T04:02:12Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/e8401f3dd2e1", "author": "ryanvm@gmail.com", "id": 9863660, "time": "2015-01-30T17:40:25Z"}], "cf_last_resolved": "2015-01-30T17:40:25Z", "priority": "--", "mentors_detail": [], "cf_crash_signature": "", "version": "Trunk", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox59": "---", "last_change_time": "2015-01-30T17:40:25Z", "cf_platform_rel": "---", "product": "Core", "cf_status_firefox_esr52": "---", "blocks": [1087872], "qa_contact": "", "see_also": [], "cf_fx_iteration": "---", "component": "Layout", "votes": 0, "groups": [], "cf_status_firefox60": "---", "target_milestone": "mozilla38", "is_cc_accessible": true, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "xidorn+moz@upsuper.org", "id": 373403, "name": "xidorn+moz@upsuper.org", "real_name": "Xidorn Quan [:xidorn] UTC+10"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "jfkthame@gmail.com", "id": 329583, "name": "jfkthame@gmail.com", "real_name": "Jonathan Kew (:jfkthame) [PTO, 5-16 Mar]"}, {"email": "xidorn+moz@upsuper.org", "id": 373403, "name": "xidorn+moz@upsuper.org", "real_name": "Xidorn Quan [:xidorn] UTC+10"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [{"status": "+", "name": "in-testsuite", "modification_date": "2015-01-30T17:40:25Z", "type_id": 37, "creation_date": "2015-01-30T17:40:25Z", "id": 1088322, "setter": "ryanvm@gmail.com"}], "cf_tracking_firefox58": "---", "cf_rank": null, "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "cc", "added": "quanxunzhen@gmail.com"}], "who": "xidorn+moz@upsuper.org", "when": "2015-01-28T06:31:47Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jfkthame@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(jfkthame@gmail.com)"}], "who": "xidorn+moz@upsuper.org", "when": "2015-01-28T06:36:51Z"}, {"changes": [{"removed": "needinfo?(jfkthame@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "jfkthame@gmail.com", "when": "2015-01-28T10:15:10Z"}, {"changes": [{"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "quanxunzhen@gmail.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8556192, "added": "review?(jfkthame@gmail.com)"}], "who": "xidorn+moz@upsuper.org", "when": "2015-01-29T00:35:21Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jfkthame@gmail.com)", "attachment_id": 8556192, "added": "review+"}], "who": "jfkthame@gmail.com", "when": "2015-01-29T10:37:46Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla38"}, {"removed": "", "field_name": "flagtypes.name", "added": "in-testsuite+"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-01-30 09:40:25"}], "who": "ryanvm@gmail.com", "when": "2015-01-30T17:40:25Z"}], "resolution": "FIXED", "op_sys": "Windows 8.1", "cf_fx_points": "---", "cf_blocking_fennec": "---"}