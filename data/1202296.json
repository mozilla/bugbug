{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "attachments": [{"creator": "giopeppe@hotmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8657951}, {"creator": "matt.woodrow@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-09-09T22:28:23Z", "type_id": 4, "creation_date": "2015-09-09T21:59:57Z", "id": 1249217, "setter": "cpearce@mozilla.com"}], "content_type": "text/plain", "id": 8658943}, {"creator": "matt.woodrow@gmail.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2015-09-09T22:39:37Z", "type_id": 4, "creation_date": "2015-09-09T22:02:07Z", "id": 1249221, "setter": "cpearce@mozilla.com"}], "content_type": "text/plain", "id": 8658945}], "classification": "Components", "creator": "giopeppe@hotmail.com", "mentors_detail": [], "depends_on": [], "cf_has_str": "---", "cf_user_story": "", "cf_backlog": "---", "cf_tracking_firefox_relnote": "---", "platform": "x86", "cf_status_firefox58": "---", "cf_status_firefox59": "---", "keywords": ["regression"], "summary": "HTML5 Video on YouTube are not playing with FF 41 beta 7", "cf_last_resolved": "2015-09-11T14:42:20Z", "votes": 0, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 20, "comments": [{"text": "User Agent: Mozilla/5.0 (Windows NT 6.1; rv:41.0) Gecko/20100101 Firefox/41.0\nBuild ID: 20150831172306\n\nSteps to reproduce:\n\nUpdate from Firefox 41 beta 6 to Firefox beta 7 and go to Youtube to playsome videos.\n\n\nActual results:\n\nI can't play video with HTML5 player anymore, i get the message \"An error is occurred\". Using Adobe Flash works. \nRolling back to beta 6 they work again. \n\nWhile doing some backtracking (at first i tought it was due to an extension) i found that it's probably related to hardware video decoding. \n\nNoticing that all seems to works with a new profile i found that the culprit is \n\nmedia.hardware-video-decoding.failed : false\n\nIn Beta 7, If i set it to \"true\", all seem to work (but hw video decoding should be gone, right?). \n\n\nExpected results:\n\nVideos should just play normally.", "author": "giopeppe@hotmail.com", "id": 10701195, "time": "2015-09-06T22:42:59Z"}, {"text": "WFM, could you test with a fresh profile, please.\nhttps://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles", "author": "epinal99-bugzilla2@yahoo.fr", "id": 10702259, "time": "2015-09-07T12:07:31Z"}, {"text": "(In reply to Loic from comment #1)\n> WFM, could you test with a fresh profile, please.\n> https://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-\n> firefox-profiles\n\nSure, i already do, here the results:\n\nWith 41 beta 6: \n\nWhen i create a fresh profile \"media.hardware-video-decoding.failed\" is automatically set to \"false\" and html5 video playback is working.\n\nWith 41 beta 7, using the fresh profile created with beta 6:\nVideo playback is not working and \"media.hardware-video-decoding.failed : false\", if i reset the value in about:config, it's not recreated, if i add it manually and set to \"true\", videoplaback works again.\n\nWith 41 beta 7, creating a freshly profile:\nVideo playback works and \"media.hardware-video-decoding.failed : true\" is automatically set to \"true\".\n\n\nI have the about:support data of all three conditions, could they help?", "author": "giopeppe@hotmail.com", "id": 10702354, "time": "2015-09-07T12:49:27Z"}, {"text": "(In reply to giopeppe from comment #2)\n> I have the about:support data of all three conditions, could they help?\n\nThe graphics section of about:support would help to identify which GPU we're dealing with so we can try to repro it. You could use http://mozilla.github.io/mozregression/ to figure out which change broke it.\n\nMatt/Mason - are you aware of anything that changed in b7?", "author": "ajones@mozilla.com", "id": 10703407, "time": "2015-09-07T21:26:40Z"}, {"text": "Created attachment 8657951\nGraphic portion of about:support, on FF 41 beta 7\n\nThis is the about support of Beta 7 with a freshly created profile, it have h264 HW support: False and videoplayback of html5 videos works. \n\nWith beta 6, H264 HW support is: True and videoplayback works, updating to beta 7 form an older profile, HW support is setted to \"True\" but video playback don't work at all.", "author": "giopeppe@hotmail.com", "id": 10703458, "time": "2015-09-07T21:51:34Z"}, {"text": "(In reply to Anthony Jones (:kentuckyfriedtakahe, :k17e) from comment #3)\n> (In reply to giopeppe from comment #2)\n> > I have the about:support data of all three conditions, could they help?\n> \n> The graphics section of about:support would help to identify which GPU we're\n> dealing with so we can try to repro it. You could use\n> http://mozilla.github.io/mozregression/ to figure out which change broke it.\n> \n> Matt/Mason - are you aware of anything that changed in b7?\n\nI'm not aware of anything that changed in b7.", "author": "mchang@mozilla.com", "id": 10705967, "time": "2015-09-08T16:22:46Z"}, {"text": "Bug 1193547 landed for b7 I believe, that's my guess.\n\nWe should probably back that out for now.", "author": "matt.woodrow@gmail.com", "id": 10707188, "time": "2015-09-08T20:34:18Z"}, {"text": "I can reproduce this on a machine in the TO office.\n\nLooks like reconfiguring the MFTransform when we decide we can't use DXVA doesn't work sometime, it may be specific to the windows 7 version of the library (since it definitely works on other machines).", "author": "matt.woodrow@gmail.com", "id": 10707295, "time": "2015-09-08T20:56:13Z"}, {"text": "[Tracking Requested - why for this release]: we cannot tolerate any regressions on youtube.", "author": "benjamin@smedbergs.us", "id": 10707317, "time": "2015-09-08T21:01:14Z"}, {"text": "Tracked.", "author": "rkothari@mozilla.com", "id": 10711779, "time": "2015-09-09T18:51:50Z"}, {"text": "Created attachment 8658943\nHide MFTransform so we can recreate it opaquely", "author": "matt.woodrow@gmail.com", "id": 10712614, "time": "2015-09-09T21:59:57Z"}, {"text": "Created attachment 8658945\nRecreate MFT rather than re-configuring it\n\nThis works much better for windows 7, and seems simpler too.", "author": "matt.woodrow@gmail.com", "id": 10712625, "time": "2015-09-09T22:02:07Z"}, {"text": "Comment on attachment 8658945\nRecreate MFT rather than re-configuring it\n\nReview of attachment 8658945:\n-----------------------------------------------------------------\n\nr+ with explanations or fixes for my comments.\n\n::: dom/media/platforms/wmf/WMFVideoMFTManager.cpp\n@@ +330,2 @@\n>    // SupportsConfig only checks for valid h264 decoders currently.\n> +  if (mStreamType != H264) {\n\nWhy are you returning true that non-H264 supports DXVA? We haven't really tested non-H264 DXVA have we? Shouldn't this remain at \"return false\"?\n\n@@ +358,1 @@\n>  \n\nYou deleted the line:\n    HRESULT hr = mDecoder->GetOutputMediaType(mediaType);\n\nDo we need to keep that line? Can the output type change after we re-init? Wouldn't the YUV format need to change from NV12 to YV12 when we switch from DXVA to non-DXVA? Or are you getting a MF_E_TRANSFORM_STREAM_CHANGE on first output that is causing us to re-get the output types next cycle?", "author": "cpearce@mozilla.com", "id": 10712773, "time": "2015-09-09T22:39:37Z"}, {"text": "(In reply to Chris Pearce (:cpearce) from comment #12)\n> Comment on attachment 8658945\n> Recreate MFT rather than re-configuring it\n> \n> Review of attachment 8658945:\n> -----------------------------------------------------------------\n> \n> r+ with explanations or fixes for my comments.\n> \n> ::: dom/media/platforms/wmf/WMFVideoMFTManager.cpp\n> @@ +330,2 @@\n> >    // SupportsConfig only checks for valid h264 decoders currently.\n> > +  if (mStreamType != H264) {\n> \n> Why are you returning true that non-H264 supports DXVA? We haven't really\n> tested non-H264 DXVA have we? Shouldn't this remain at \"return false\"?\n\nWe're returning true to mean that we have no idea if it's supported (since the test below doesn't take it into account), and we shouldn't take any action.\n\n\n> \n> @@ +358,1 @@\n> >  \n> \n> You deleted the line:\n>     HRESULT hr = mDecoder->GetOutputMediaType(mediaType);\n> \n> Do we need to keep that line? Can the output type change after we re-init?\n> Wouldn't the YUV format need to change from NV12 to YV12 when we switch from\n> DXVA to non-DXVA? Or are you getting a MF_E_TRANSFORM_STREAM_CHANGE on first\n> output that is causing us to re-get the output types next cycle?\n\nYep, we're re-inputting on the brand new MFT and returning immediately, which should once again trigger the STREAM_CHANGE and we'll go through this function again.", "author": "matt.woodrow@gmail.com", "id": 10712822, "time": "2015-09-09T22:47:54Z"}, {"text": "OK, cool.", "author": "cpearce@mozilla.com", "id": 10712972, "time": "2015-09-09T23:11:23Z"}, {"text": "https://hg.mozilla.org/integration/mozilla-inbound/rev/8a7d924a0f34\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/e7e0427710e1", "author": "pulsebot@bots.tld", "id": 10716693, "time": "2015-09-10T18:21:38Z"}, {"text": "Would you be able to nominate a patch for this soon? We will gtb 41 RC on Monday morning PST.", "author": "rkothari@mozilla.com", "id": 10717477, "time": "2015-09-10T20:58:32Z"}, {"text": "I assume you meant to ask the other Matt. :-)", "author": "kinetik@flim.org", "id": 10717719, "time": "2015-09-10T21:35:15Z"}, {"text": "Bug 1193547 got backed out of beta/aurora, so would shouldn't need to uplift anything here.", "author": "matt.woodrow@gmail.com", "id": 10717804, "time": "2015-09-10T21:45:01Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/8a7d924a0f34\nhttps://hg.mozilla.org/mozilla-central/rev/e7e0427710e1", "author": "cbook@mozilla.com", "id": 10720788, "time": "2015-09-11T14:42:20Z"}], "id": 1202296, "priority": "P1", "cc": ["ajones@mozilla.com", "cpearce@mozilla.com", "cpeterson@mozilla.com", "dmajor@mozilla.com", "epinal99-bugzilla2@yahoo.fr", "giles@thaumas.net", "giopeppe@hotmail.com", "kinetik@flim.org", "matt.woodrow@gmail.com", "mchang@mozilla.com", "rkothari@mozilla.com", "Virtual@teknik.io"], "cf_crash_signature": "", "version": "41 Branch", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_firefox59": "---", "last_change_time": "2015-09-12T18:59:52Z", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1193547], "qa_contact": "", "creation_time": "2015-09-06T22:42:59Z", "cf_status_firefox_esr52": "---", "component": "Audio/Video: Playback", "assigned_to_detail": {"email": "matt.woodrow@gmail.com", "id": 380838, "name": "matt.woodrow@gmail.com", "real_name": "Matt Woodrow (:mattwoodrow)"}, "groups": [], "cf_status_firefox60": "---", "cf_status_firefox42": "unaffected", "target_milestone": "mozilla43", "is_cc_accessible": true, "cf_rank": null, "cf_status_thunderbird_esr52": "---", "url": "", "creator_detail": {"email": "giopeppe@hotmail.com", "id": 548984, "name": "giopeppe@hotmail.com", "real_name": ""}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "ajones@mozilla.com", "id": 443088, "name": "ajones@mozilla.com", "real_name": "Anthony Jones (:kentuckyfriedtakahe, :k17e)"}, {"email": "cpearce@mozilla.com", "id": 287422, "name": "cpearce@mozilla.com", "real_name": "Chris Pearce (:cpearce)"}, {"email": "cpeterson@mozilla.com", "id": 430528, "name": "cpeterson@mozilla.com", "real_name": "Chris Peterson [:cpeterson]"}, {"email": "dmajor@mozilla.com", "id": 477892, "name": "dmajor@mozilla.com", "real_name": "David Major [:dmajor]"}, {"email": "epinal99-bugzilla2@yahoo.fr", "id": 337567, "name": "epinal99-bugzilla2@yahoo.fr", "real_name": "Loic"}, {"email": "giles@thaumas.net", "id": 170965, "name": "giles@thaumas.net", "real_name": "Ralph Giles (:rillian) | needinfo me"}, {"email": "giopeppe@hotmail.com", "id": 548984, "name": "giopeppe@hotmail.com", "real_name": ""}, {"email": "kinetik@flim.org", "id": 274575, "name": "kinetik@flim.org", "real_name": "Matthew Gregan [:kinetik]"}, {"email": "matt.woodrow@gmail.com", "id": 380838, "name": "matt.woodrow@gmail.com", "real_name": "Matt Woodrow (:mattwoodrow)"}, {"email": "mchang@mozilla.com", "id": 482523, "name": "mchang@mozilla.com", "real_name": "Mason Chang [Inactive]  [:mchang]"}, {"email": "rkothari@mozilla.com", "id": 538805, "name": "rkothari@mozilla.com", "real_name": "Ritu Kothari (:ritu)"}, {"email": "Virtual@teknik.io", "id": 342842, "name": "Virtual@teknik.io", "real_name": "Virtual_ManPL [:Virtual] - (please needinfo? me - so I will see your comment/reply/question/etc.)"}], "alias": null, "dupe_of": null, "flags": [], "cf_tracking_firefox58": "---", "assigned_to": "matt.woodrow@gmail.com", "is_open": false, "history": [{"changes": [{"removed": "Unspecified", "field_name": "platform", "added": "x86"}, {"removed": "Unspecified", "field_name": "op_sys", "added": "Windows 7"}], "who": "giopeppe@hotmail.com", "when": "2015-09-06T22:45:00Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "epinal99-bugzilla2@yahoo.fr"}, {"removed": "Untriaged", "field_name": "component", "added": "Audio/Video: Playback"}, {"removed": "Firefox", "field_name": "product", "added": "Core"}], "who": "epinal99-bugzilla2@yahoo.fr", "when": "2015-09-07T12:05:13Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "giopeppe@hotmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(giopeppe@hotmail.com)"}], "who": "epinal99-bugzilla2@yahoo.fr", "when": "2015-09-07T12:07:31Z"}, {"changes": [{"removed": "needinfo?(giopeppe@hotmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "giopeppe@hotmail.com", "when": "2015-09-07T12:49:27Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ajones@mozilla.com, matt.woodrow@gmail.com, mchang@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(mchang@mozilla.com), needinfo?(matt.woodrow@gmail.com)"}], "who": "ajones@mozilla.com", "when": "2015-09-07T21:26:40Z"}, {"changes": [{"removed": "needinfo?(mchang@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "mchang@mozilla.com", "when": "2015-09-08T16:22:46Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "dmajor@bugmail.cc"}], "who": "dmajor@mozilla.com", "when": "2015-09-08T20:25:07Z"}, {"changes": [{"removed": "needinfo?(matt.woodrow@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "matt.woodrow@gmail.com", "when": "2015-09-08T20:34:18Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "regression"}, {"removed": "---", "field_name": "cf_tracking_firefox41", "added": "?"}, {"removed": "---", "field_name": "cf_status_firefox41", "added": "affected"}], "who": "benjamin@smedbergs.us", "when": "2015-09-08T21:01:14Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "cpeterson@mozilla.com"}, {"removed": "", "field_name": "blocks", "added": "1193547"}, {"removed": "HTML5 Video on Youtube are not playing with FF 41 beta 7", "field_name": "summary", "added": "HTML5 Video on YouTube are not playing with FF 41 beta 7"}], "who": "cpeterson@mozilla.com", "when": "2015-09-08T23:55:16Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "rkothari@mozilla.com"}, {"removed": "?", "field_name": "cf_tracking_firefox41", "added": "+"}], "who": "rkothari@mozilla.com", "when": "2015-09-09T18:51:50Z"}, {"changes": [{"removed": "UNCONFIRMED", "field_name": "status", "added": "NEW"}, {"removed": "", "field_name": "cc", "added": "cpearce@mozilla.com"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "matt.woodrow@gmail.com"}, {"removed": "0", "field_name": "is_confirmed", "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8658943, "added": "review?(cpearce@mozilla.com)"}], "who": "matt.woodrow@gmail.com", "when": "2015-09-09T21:59:57Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8658945, "added": "review?(cpearce@mozilla.com)"}], "who": "matt.woodrow@gmail.com", "when": "2015-09-09T22:02:07Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(cpearce@mozilla.com)", "attachment_id": 8658943, "added": "review+"}], "who": "cpearce@mozilla.com", "when": "2015-09-09T22:28:23Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(cpearce@mozilla.com)", "attachment_id": 8658945, "added": "review+"}], "who": "cpearce@mozilla.com", "when": "2015-09-09T22:39:37Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "kinetik@flim.org"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(kinetik@flim.org)"}], "who": "rkothari@mozilla.com", "when": "2015-09-10T20:58:32Z"}, {"changes": [{"removed": "needinfo?(kinetik@flim.org)", "field_name": "flagtypes.name", "added": "needinfo?(matt.woodrow@gmail.com)"}], "who": "kinetik@flim.org", "when": "2015-09-10T21:35:15Z"}, {"changes": [{"removed": "needinfo?(matt.woodrow@gmail.com)", "field_name": "flagtypes.name", "added": ""}, {"removed": "+", "field_name": "cf_tracking_firefox41", "added": "---"}, {"removed": "affected", "field_name": "cf_status_firefox41", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox42", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox43", "added": "affected"}], "who": "matt.woodrow@gmail.com", "when": "2015-09-10T21:45:01Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P1"}, {"removed": "", "field_name": "cc", "added": "giles@thaumas.net"}], "who": "giles@thaumas.net", "when": "2015-09-10T23:09:43Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla43"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2015-09-11 07:42:20"}, {"removed": "affected", "field_name": "cf_status_firefox43", "added": "fixed"}], "who": "cbook@mozilla.com", "when": "2015-09-11T14:42:20Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bernesb@gmail.com"}], "who": "Virtual@teknik.io", "when": "2015-09-12T18:59:52Z"}], "resolution": "FIXED", "op_sys": "Windows 7", "cf_fx_points": "---", "cf_blocking_fennec": "---"}