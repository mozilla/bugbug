{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "jteh@mozilla.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "All", "cf_status_firefox58": "wontfix", "cf_status_firefox59": "wontfix", "keywords": [], "summary": "Unblock newer versions of RealPlayer with accessibility performance fixes", "cf_last_resolved": "2018-03-09T14:25:00Z", "attachments": [{"creator": "jteh@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-02-13T08:03:28Z", "type_id": 4, "creation_date": "2018-02-13T06:55:53Z", "id": 1715890, "setter": "mzehe@mozilla.com"}, {"status": "-", "name": "approval-mozilla-release", "modification_date": "2018-04-30T14:23:28Z", "type_id": 737, "creation_date": "2018-03-23T19:57:49Z", "id": 1734161, "setter": "jcristau@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8950494}, {"creator": "jteh@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-02-13T08:07:38Z", "type_id": 4, "creation_date": "2018-02-13T06:55:53Z", "id": 1715891, "setter": "mzehe@mozilla.com"}, {"status": "-", "name": "approval-mozilla-release", "modification_date": "2018-04-30T14:23:42Z", "type_id": 737, "creation_date": "2018-03-23T19:59:48Z", "id": 1734162, "setter": "jcristau@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8950495}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 14, "comments": [{"text": "RealPlayer's use of accessibility was blocked in bug 1418535 due to severe performance problems caused by its use of accessibility. It was frequently using UIA to walk the entire tree to find the address bar. We've been working with the RealNetworks engineers and they've now switched to using NAVRELATION_EMBEDS and accValue to retrieve the address of the page. While it still uses accessibility, it should no longer cause performance problems. As per their request, we will unblock newer versions of RealPlayer with this change implemented.\n\nNote that while RealNetworks confirm the performance problems are gone with this change, we haven't yet confirmed this ourselves.\n\nThe version with the fix will be 18.1.11.xxxx. The last version without the fix was 18.1.10.xxxx.", "author": "jteh@mozilla.com", "id": 13035039, "time": "2018-02-12T01:43:40Z"}, {"text": "Jimm confirmed that the upcoming version of RealPlayer does not cause performance problems.", "author": "jteh@mozilla.com", "id": 13037550, "time": "2018-02-12T23:04:00Z"}, {"text": "Created attachment 8950494\nBug 1437417 part 1: a11y: Fix some issues in IsModuleVersionLessThan and make it reusable.\n\n1. Move IsModuleVersionLessThan into the Compatibility class and export it in the header file.\n\n2. The function previously referred to the third component of the version as the minor version; i.e. it was testing major.bbbb.minor.dddd.\nThis is incorrect and might confuse people using this in future code.\nThe minor version is the second component; i.e. major.minor.cccc.dddd.\ncccc and dddd are often named build and revision, but the naming here is less consistent.\n\n3. Rather than accepting separate version components, the function now accepts a single 64 bit value.\nThis makes comparison easier and also allows for comparison against magic values in other code; e.g. a value meaning \"all versions\".\nThis value can be created from separate components using the MAKE_FILE_VERSION macro.\n\n4. Previously, it was assumed that a dll path could not be longer than MAX_PATH, but it can actually be longer.\nThe function now handles this.\n\n5. The function previously didn't do any error checking, which could have led to null pointer dereferences and possibly other pain.\nThis was fine when it was only being used for JAWS, which we know always has version info, but this could be problematic for other callers.\nWe return true if there is a failure, assuming that no version info implies an earlier version.\n\n6. The code now uses smart pointers instead of raw pointers, making memory management simpler.\n\n7. Updated the JAWS version check accordingly.\n\nReview commit: https://reviewboard.mozilla.org/r/219774/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/219774/", "author": "jteh@mozilla.com", "id": 13038088, "time": "2018-02-13T06:55:53Z"}, {"text": "Created attachment 8950495\nBug 1437417 part 2: Don't block accessibility instantiation for newer RealPlayer builds with accessibility performance fixes.\n\nRealPlayer's use of accessibility was blocked in bug 1418535 due to severe performance problems caused by its use of accessibility.\nThis is fixed in newer builds, so we want to allow those while still blocking older builds.\n\nReview commit: https://reviewboard.mozilla.org/r/219776/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/219776/", "author": "jteh@mozilla.com", "id": 13038089, "time": "2018-02-13T06:55:53Z"}, {"text": "Try run: https://treeherder.mozilla.org/#/jobs?repo=try&revision=39a7c5be0863", "author": "jteh@mozilla.com", "id": 13038109, "time": "2018-02-13T07:09:59Z"}, {"text": "Comment on attachment 8950494\nBug 1437417 part 1: a11y: Fix some issues in IsModuleVersionLessThan and make it reusable.\n\nhttps://reviewboard.mozilla.org/r/219774/#review225474\n\nThis is cool, thanks!", "author": "mzehe@mozilla.com", "id": 13038177, "time": "2018-02-13T08:03:28Z"}, {"text": "Comment on attachment 8950495\nBug 1437417 part 2: Don't block accessibility instantiation for newer RealPlayer builds with accessibility performance fixes.\n\nhttps://reviewboard.mozilla.org/r/219776/#review225480", "author": "mzehe@mozilla.com", "id": 13038181, "time": "2018-02-13T08:07:38Z"}, {"text": "Pushed by jteh@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/799a9c8323fe\npart 1: a11y: Fix some issues in IsModuleVersionLessThan and make it reusable. r=MarcoZ\nhttps://hg.mozilla.org/integration/autoland/rev/ec4ad0ab47e9\npart 2: Don't block accessibility instantiation for newer RealPlayer builds with accessibility performance fixes. r=MarcoZ", "author": "pulsebot@bots.tld", "id": 13062606, "time": "2018-02-22T22:10:42Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/799a9c8323fe\nhttps://hg.mozilla.org/mozilla-central/rev/ec4ad0ab47e9", "author": "shindli@mozilla.com", "id": 13063533, "time": "2018-02-23T09:42:00Z"}, {"text": "Hey Jamie, lets get these two patches and any dependents marked for request for uplift to 59. We can try to get these into a point release within the next few weeks.", "author": "jmathies@mozilla.com", "id": 13116777, "time": "2018-03-09T14:26:19Z"}, {"text": "Testing with old 57 Firefox and the latest Firefox beta:\n\n1) old version of RealPlayer still experiencing perf problems in 57\n2) old version of RealPlayer perf improves with 58 and the block in place.\n3) Testing with latest beta and ther old RealPlayer, performance isn't great but it's on par with 58 and the blocking on.\n4) Testing with an updated RealPlayer and beta, performance of the browser is in much better shape.\n\nSo generally confirming fixes on both sides. If we have the opportunity to ship these in a point release lets do it. Otherwise we'll roll these changes out in 60 on 05-07.", "author": "jmathies@mozilla.com", "id": 13145474, "time": "2018-03-21T14:12:25Z"}, {"text": "Comment on attachment 8950494\nBug 1437417 part 1: a11y: Fix some issues in IsModuleVersionLessThan and make it reusable.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Bug 1418535.\n[User impact if declined]: Users cannot use newer versions of RealPlayer with performance fixes related to Firefox.\n[Is this code covered by automated tests?]: No.\n[Has the fix been verified in Nightly?]: Yes.\n[Needs manual test from QE? If yes, steps to reproduce]: No.\n[List of other uplifts needed for the feature/fix]: Other patch from this bug.\n[Is the change risky?]: No.\n[Why is the change risky/not risky?]: Only updates dll version check code used by accessibility. Has been on nightly for weeks and beta for a week without any issues.\n[String changes made/needed]: None.", "author": "jteh@mozilla.com", "id": 13152480, "time": "2018-03-23T19:57:49Z"}, {"text": "Comment on attachment 8950495\nBug 1437417 part 2: Don't block accessibility instantiation for newer RealPlayer builds with accessibility performance fixes.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Bug 1418535.\n[User impact if declined]: Users cannot use newer versions of RealPlayer with performance fixes related to Firefox.\n[Is this code covered by automated tests?]: No.\n[Has the fix been verified in Nightly?]: Yes.\n[Needs manual test from QE? If yes, steps to reproduce]: No.\n[List of other uplifts needed for the feature/fix]: Other patch from this bug.\n[Is the change risky?]: No.\n[Why is the change risky/not risky?]: Just updates dll block code to allow newer versions of RealPlayer. Has been on nightly for weeks and beta for a week without any issues.\n[String changes made/needed]: None.", "author": "jteh@mozilla.com", "id": 13152491, "time": "2018-03-23T19:59:48Z"}, {"text": "Comment on attachment 8950494\nBug 1437417 part 1: a11y: Fix some issues in IsModuleVersionLessThan and make it reusable.\n\n60 is on release now, too late for 59.", "author": "jcristau@mozilla.com", "id": 13243188, "time": "2018-04-30T14:23:28Z"}], "id": 1437417, "priority": "--", "cc": ["jcristau@mozilla.com", "jmathies@mozilla.com", "mzehe@mozilla.com"], "cf_crash_signature": "", "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": [], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "", "creation_time": "2018-02-12T01:43:40Z", "cf_status_firefox_esr52": "unaffected", "component": "Disability Access APIs", "assigned_to_detail": {"email": "jteh@mozilla.com", "id": 219126, "name": "jteh@mozilla.com", "real_name": "James Teh [:Jamie]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "fixed", "target_milestone": "mozilla60", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "jteh@mozilla.com", "id": 219126, "name": "jteh@mozilla.com", "real_name": "James Teh [:Jamie]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "jcristau@mozilla.com", "id": 580382, "name": "jcristau@mozilla.com", "real_name": "Julien Cristau [:jcristau]"}, {"email": "jmathies@mozilla.com", "id": 279663, "name": "jmathies@mozilla.com", "real_name": "Jim Mathies [:jimm]"}, {"email": "mzehe@mozilla.com", "id": 285656, "name": "mzehe@mozilla.com", "real_name": "Marco Zehe (:MarcoZ)"}], "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-04-30T14:23:42Z", "assigned_to": "jteh@mozilla.com", "is_open": false, "history": [{"changes": [{"removed": "---", "field_name": "cf_status_firefox59", "added": "affected"}], "who": "jteh@mozilla.com", "when": "2018-02-12T23:03:01Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8950494, "added": "review?(mzehe@mozilla.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8950495, "added": "review?(mzehe@mozilla.com)"}, {"removed": "", "field_name": "cc", "added": "mzehe@mozilla.com"}], "who": "jteh@mozilla.com", "when": "2018-02-13T06:55:53Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mzehe@mozilla.com)", "attachment_id": 8950494, "added": "review+"}], "who": "mzehe@mozilla.com", "when": "2018-02-13T08:03:28Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mzehe@mozilla.com)", "attachment_id": 8950495, "added": "review+"}], "who": "mzehe@mozilla.com", "when": "2018-02-13T08:07:38Z"}, {"changes": [{"removed": "", "field_name": "keywords", "added": "leave-open"}, {"removed": "", "field_name": "cc", "added": "jmathies@mozilla.com"}], "who": "jteh@mozilla.com", "when": "2018-02-22T22:14:17Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla60"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-03-09 14:25:00"}], "who": "jmathies@mozilla.com", "when": "2018-03-09T14:25:00Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(jteh@mozilla.com)"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "fixed"}], "who": "jmathies@mozilla.com", "when": "2018-03-09T14:26:19Z"}, {"changes": [{"removed": "leave-open", "field_name": "keywords", "added": ""}, {"removed": "", "field_name": "cc", "added": "jcristau@mozilla.com"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "unaffected"}, {"removed": "---", "field_name": "cf_status_firefox58", "added": "wontfix"}], "who": "jcristau@mozilla.com", "when": "2018-03-09T16:55:28Z"}, {"changes": [{"removed": "needinfo?(jteh@mozilla.com)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8950494, "added": "approval-mozilla-release?"}], "who": "jteh@mozilla.com", "when": "2018-03-23T19:57:49Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8950495, "added": "approval-mozilla-release?"}], "who": "jteh@mozilla.com", "when": "2018-03-23T19:59:48Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-release?", "attachment_id": 8950494, "added": "approval-mozilla-release-"}], "who": "jcristau@mozilla.com", "when": "2018-04-30T14:23:28Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox59", "added": "wontfix"}], "who": "jcristau@mozilla.com", "when": "2018-04-30T14:23:35Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-release?", "attachment_id": 8950495, "added": "approval-mozilla-release-"}], "who": "jcristau@mozilla.com", "when": "2018-04-30T14:23:42Z"}], "resolution": "FIXED", "op_sys": "Windows", "cf_fx_points": "---", "cf_blocking_fennec": "---"}