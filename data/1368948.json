{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "cf_tracking_firefox62": "---", "creator": "brsun@mozilla.com", "mentors_detail": [], "depends_on": [1416992, 1358023, 1376057, 1407027], "cf_status_firefox_esr60": "---", "cf_user_story": "", "cf_status_firefox56": "fixed", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "cc_detail": [{"email": "bmo@upshifts.org", "id": 549002, "name": "bmo@upshifts.org", "real_name": "Astley Chen (inactive)"}, {"email": "bugs@junglecode.net", "id": 384647, "name": "bugs@junglecode.net", "real_name": "Jet Villegas (:jet)"}, {"email": "ehsan@mozilla.com", "id": 251051, "name": "ehsan@mozilla.com", "real_name": ":Ehsan Akhgari"}, {"email": "ellee@mozilla.com", "id": 543861, "name": "ellee@mozilla.com", "real_name": "Elvin Lee [:ellee] (no longer with Mozilla)"}, {"email": "fatseng@mozilla.com", "id": 551538, "name": "fatseng@mozilla.com", "real_name": "Farmer Tseng[:fatseng](inactive)"}, {"email": "howareyou322@gmail.com", "id": 452554, "name": "howareyou322@gmail.com", "real_name": "Peter Chang[:pchang]"}, {"email": "jwatt@jwatt.org", "id": 32767, "name": "jwatt@jwatt.org", "real_name": "Jonathan Watt [:jwatt]"}, {"email": "mcastelluccio@mozilla.com", "id": 420453, "name": "mcastelluccio@mozilla.com", "real_name": "Marco Castelluccio [:marco]"}, {"email": "mh+mozilla@glandium.org", "id": 47192, "name": "mh+mozilla@glandium.org", "real_name": "Mike Hommey [:glandium]"}, {"email": "rtanglao@mozilla.com", "id": 352356, "name": "rtanglao@mozilla.com", "real_name": "Roland Tanglao needinfo please :rolandtanglao, :mohnkuchen, :adobo, :sinigang, :roland"}, {"email": "xidorn+moz@upsuper.org", "id": 373403, "name": "xidorn+moz@upsuper.org", "real_name": "Xidorn Quan [:xidorn] UTC+10"}], "cf_last_resolved": "2017-07-02T00:41:59Z", "attachments": [{"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "application/x-zip-compressed", "id": 8875201}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8875202}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8876969}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "text/x-review-board-request", "id": 8877046}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "text/x-review-board-request", "id": 8877047}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "text/x-review-board-request", "id": 8877048}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-14T08:25:54Z", "type_id": 4, "creation_date": "2017-06-14T06:33:22Z", "id": 1597132, "setter": "gerv@mozilla.org"}], "content_type": "text/x-review-board-request", "id": 8877049}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-20T22:40:18Z", "type_id": 4, "creation_date": "2017-06-14T06:33:40Z", "id": 1597133, "setter": "ehsan@mozilla.com"}], "content_type": "text/x-review-board-request", "id": 8877050}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "text/x-review-board-request", "id": 8877051}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "text/x-review-board-request", "id": 8877052}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "application/x-zip-compressed", "id": 8877089}, {"creator": "howareyou322@gmail.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "text/x-review-board-request", "id": 8877464}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "application/x-shellscript", "id": 8880689}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "feedback", "modification_date": "2017-06-28T17:12:00Z", "type_id": 607, "creation_date": "2017-06-28T17:12:00Z", "id": 1604209, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/plain", "id": 8881345}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "feedback", "modification_date": "2017-06-28T17:15:32Z", "type_id": 607, "creation_date": "2017-06-28T17:15:32Z", "id": 1604210, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/plain", "id": 8881346}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [], "content_type": "application/x-zip-compressed", "id": 8881347}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-27T13:36:33Z", "type_id": 4, "creation_date": "2017-06-27T06:54:27Z", "id": 1603477, "setter": "gerv@mozilla.org"}], "content_type": "text/plain", "id": 8881348}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-27T06:56:01Z", "type_id": 4, "creation_date": "2017-06-27T06:56:01Z", "id": 1603478, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8881349}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-28T17:17:51Z", "type_id": 4, "creation_date": "2017-06-27T06:57:28Z", "id": 1603480, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/plain", "id": 8881350}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-28T17:22:37Z", "type_id": 4, "creation_date": "2017-06-27T07:03:20Z", "id": 1603481, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/plain", "id": 8881351}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-28T17:59:28Z", "type_id": 4, "creation_date": "2017-06-28T17:55:07Z", "id": 1604249, "setter": "mh+mozilla@glandium.org"}], "content_type": "text/plain", "id": 8881840}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-28T22:56:40Z", "type_id": 4, "creation_date": "2017-06-28T17:56:37Z", "id": 1604251, "setter": "jwatt@jwatt.org"}, {"status": "+", "name": "feedback", "modification_date": "2017-06-28T17:56:37Z", "type_id": 607, "creation_date": "2017-06-28T17:56:37Z", "id": 1604252, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8881841}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-28T17:57:27Z", "type_id": 4, "creation_date": "2017-06-28T17:57:27Z", "id": 1604256, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8881843}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-28T23:01:17Z", "type_id": 4, "creation_date": "2017-06-28T22:42:42Z", "id": 1604520, "setter": "jwatt@jwatt.org"}], "content_type": "text/plain", "id": 8881989}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-29T01:21:54Z", "type_id": 4, "creation_date": "2017-06-29T01:21:54Z", "id": 1604635, "setter": "jwatt@jwatt.org"}], "content_type": "text/plain", "id": 8882057}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [], "content_type": "text/plain", "id": 8882133}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8882376}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-29T22:54:47Z", "type_id": 4, "creation_date": "2017-06-29T22:21:58Z", "id": 1605112, "setter": "jwatt@jwatt.org"}], "content_type": "application/x-zip-compressed", "id": 8882380}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-29T22:53:49Z", "type_id": 4, "creation_date": "2017-06-29T22:23:21Z", "id": 1605121, "setter": "jwatt@jwatt.org"}], "content_type": "text/plain", "id": 8882385}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [], "content_type": "text/plain", "id": 8882432}, {"creator": "brsun@mozilla.com", "is_obsolete": 1, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:04:53Z", "type_id": 4, "creation_date": "2017-06-29T23:53:34Z", "id": 1605192, "setter": "jwatt@jwatt.org"}], "content_type": "text/plain", "id": 8882433}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:28:56Z", "type_id": 4, "creation_date": "2017-06-30T00:28:56Z", "id": 1605215, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8882450}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:29:28Z", "type_id": 4, "creation_date": "2017-06-30T00:29:28Z", "id": 1605217, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8882451}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:30:21Z", "type_id": 4, "creation_date": "2017-06-30T00:30:21Z", "id": 1605218, "setter": "brsun@mozilla.com"}], "content_type": "application/x-zip-compressed", "id": 8882452}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:31:05Z", "type_id": 4, "creation_date": "2017-06-30T00:31:05Z", "id": 1605219, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8882453}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:31:36Z", "type_id": 4, "creation_date": "2017-06-30T00:31:36Z", "id": 1605222, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8882454}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:32:06Z", "type_id": 4, "creation_date": "2017-06-30T00:32:06Z", "id": 1605223, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8882455}, {"creator": "brsun@mozilla.com", "is_obsolete": 0, "is_patch": 1, "flags": [{"status": "+", "name": "review", "modification_date": "2017-06-30T00:32:40Z", "type_id": 4, "creation_date": "2017-06-30T00:32:40Z", "id": 1605225, "setter": "brsun@mozilla.com"}], "content_type": "text/plain", "id": 8882457}], "votes": 0, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 120, "comments": [{"text": "PDFium can convert PDF into EMF on Windows. This feature is required if we are going to use PDF as the intermediate format for printing.", "author": "brsun@mozilla.com", "id": 12360376, "time": "2017-05-31T08:24:05Z"}, {"text": "Created attachment 8875201\nbug1368948_pdfium_files_with_patches.wip.patch.zip\n\nWIP: add PDFium files", "author": "brsun@mozilla.com", "id": 12378477, "time": "2017-06-07T08:40:05Z"}, {"text": "Created attachment 8875202\nbug1368948_mozbulid_for_pdfium.wip.patch\n\nWIP: moz.build for PDFium", "author": "brsun@mozilla.com", "id": 12378478, "time": "2017-06-07T08:40:29Z"}, {"text": "Hi Jonathan,\n\nCurrently I put PDFium under /layout/pdfium in my patches. Could you suggest a better place for it?", "author": "brsun@mozilla.com", "id": 12381288, "time": "2017-06-08T02:29:47Z"}, {"text": "(In reply to Bruce Sun [:brsun] from comment #1)\n> Created attachment 8875201\n> bug1368948_pdfium_files_with_patches.wip.patch.zip\n> \n> WIP: add PDFium files\n\nBruce, please submit this patch by using mozreview.", "author": "howareyou322@gmail.com", "id": 12381803, "time": "2017-06-08T07:24:25Z"}, {"text": "Thanks Peter, this is just a WIP. I will submit patches with mozreview when requesting for reviewing.", "author": "brsun@mozilla.com", "id": 12381883, "time": "2017-06-08T07:53:57Z"}, {"text": "(In reply to Bruce Sun [:brsun] from comment #3)\n> Hi Jonathan,\n> \n> Currently I put PDFium under /layout/pdfium in my patches. Could you suggest\n> a better place for it?\n\nAs I discussed with Bruce, widget/windows might be one option to store PDFium because right now we only use it on windows.", "author": "howareyou322@gmail.com", "id": 12382632, "time": "2017-06-08T14:04:00Z"}, {"text": "> As I discussed with Bruce, widget/windows might be one option to store\n> PDFium because right now we only use it on windows.\n\nThanks Peter. As we discussed, widget/windows/moz.build might be a good trigger point to introduce DIR of pdfium. Just want to clarify, the original question on comment 3 is for pdfium library itself.", "author": "brsun@mozilla.com", "id": 12384824, "time": "2017-06-09T02:40:26Z"}, {"text": "The 'widget' directory would seem to make more sense than 'layout'. Since this is a third party library it would also be good to create a 'third_party' subdirectory to store it in, so I'd suggest widget/third_party/pdfium\n\nRegarding whether it should go under the 'windows' subdirectory, I don't think so; we may only use PDFium on Windows initially, but since it gives us advantages over PDF.js (such as forms filling) I expect we will end up using it on other platforms too.", "author": "jwatt@jwatt.org", "id": 12390449, "time": "2017-06-12T12:55:53Z"}, {"text": "Can you point out where build configurations are set? i.e., where are the defines located for \"Selecting build configuration\" in https://pdfium.googlesource.com/pdfium/ ?", "author": "bugs@junglecode.net", "id": 12392771, "time": "2017-06-13T02:19:18Z"}, {"text": "Upstream PDFium uses GN as its build system. After using the GN command to set build arguments (ex. \"gn args out/mybuild\"), \"args.gn\" will be created under the corresponding sub-directory to store the set arguments (ex. \"out/mybuild/args.gn\").\n\nRegarding to our build system, I will add necessary configuration into moz.build instead.", "author": "brsun@mozilla.com", "id": 12392797, "time": "2017-06-13T02:31:01Z"}, {"text": "Created attachment 8876969\nupdate.py\n\nHi Jet, just for your reference. This is the script to update PDFium from upstream. I will include (almost) the same script while committing PDFium into m-c.", "author": "brsun@mozilla.com", "id": 12392812, "time": "2017-06-13T02:37:04Z"}, {"text": "(In reply to Jet Villegas (:jet) from comment #9)\n> Can you point out where build configurations are set? i.e., where are the\n> defines located for \"Selecting build configuration\" in\n> https://pdfium.googlesource.com/pdfium/ ?\n\nWe have 2 patches here.\n1. PDFium code(including 3rd parties code it depends on).\nWe want to make sure the code we pull is from https://pdfium.googlesource.com/pdfium/ and also contain needed libraries that are not existing in m-c now. Given that we only need EMF conversion from PDFium, we suppose no need to have xfa, v8 support and code in the pull.\n2. moz.build (https://bugzilla.mozilla.org/attachment.cgi?id=8875202)\nAs comment 10 said, PDFium uses GN and Ninja as build system so that we create a moz.build to get it built in m-c.This is where the build configurations at. The PDFium will be built behind build flags MOZ_ENABLE_SKIA_PDF and OS_TARGET==WINNT as well as a part of libxul.", "author": "bmo@upshifts.org", "id": 12392830, "time": "2017-06-13T02:51:53Z"}, {"text": "> we suppose no need to have xfa, v8 support and code in the pull.\n\nJust want to clarify, XFA related codes are parts of PDFium. I don't tend to modify PDFium too much, so XFA and v8 wrapper codes will still be contained within PDFium on m-c. And for sure the v8 library will not be added through this integration.", "author": "brsun@mozilla.com", "id": 12392902, "time": "2017-06-13T03:32:55Z"}, {"text": "Thanks! I'm looking specifically for the lines in the patches where these 2 vars are set:\n\npdf_enable_xfa = false  # Set false to remove XFA support (implies JS support).\npdf_enable_v8 = false  # Set false to remove Javascript support.", "author": "bugs@junglecode.net", "id": 12393027, "time": "2017-06-13T05:23:37Z"}, {"text": "The argument \"pdf_enable_xfa\" in GN means \"PDF_ENABLE_XFA\" definition[1] in source level.\nThe argument \"pdf_enable_v8\" in GN means \"PDF_ENABLE_V8\" definition[2] in source level.\n\nAs long as we don't explicitly define these two values, we do disable both XFA and script features already.\n\n[1] https://cs.chromium.org/chromium/src/third_party/pdfium/BUILD.gn?l=36\n[2] https://cs.chromium.org/chromium/src/third_party/pdfium/BUILD.gn?l=40", "author": "brsun@mozilla.com", "id": 12393042, "time": "2017-06-13T05:43:48Z"}, {"text": "Created attachment 8877046\nBug 1368948: Add a script to update PDFium from upstream.\n\nReview commit: https://reviewboard.mozilla.org/r/148388/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148388/", "author": "brsun@mozilla.com", "id": 12393382, "time": "2017-06-13T08:34:10Z"}, {"text": "Created attachment 8877047\nBug 1368948: Add patch files for PDFium.\n\nReview commit: https://reviewboard.mozilla.org/r/148390/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148390/", "author": "brsun@mozilla.com", "id": 12393383, "time": "2017-06-13T08:34:10Z"}, {"text": "Created attachment 8877048\nBug 1368948: Add PDfium files (chromium/3029) with patches.\n\nCorresponding chromium version: 58.0.3029.110\nUpdate command: update.py --commit chromium/3029\n\nReview commit: https://reviewboard.mozilla.org/r/148392/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148392/", "author": "brsun@mozilla.com", "id": 12393384, "time": "2017-06-13T08:34:10Z"}, {"text": "Created attachment 8877049\nBug 1368948: Add license notices for PDFium and its dependent libraries.\n\nReview commit: https://reviewboard.mozilla.org/r/148394/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148394/", "author": "brsun@mozilla.com", "id": 12393385, "time": "2017-06-13T08:34:10Z"}, {"text": "Created attachment 8877050\nBug 1368948: Suppress clang-plugin errors.\n\nReview commit: https://reviewboard.mozilla.org/r/148396/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148396/", "author": "brsun@mozilla.com", "id": 12393386, "time": "2017-06-13T08:34:10Z"}, {"text": "Created attachment 8877051\nBug 1368948: Build freetype when enabling SkiaPDF on Windows.\n\nReview commit: https://reviewboard.mozilla.org/r/148398/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148398/", "author": "brsun@mozilla.com", "id": 12393387, "time": "2017-06-13T08:34:10Z"}, {"text": "Created attachment 8877052\nBug 1368948: Add moz.build for PDFium.\n\nReview commit: https://reviewboard.mozilla.org/r/148400/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148400/", "author": "brsun@mozilla.com", "id": 12393388, "time": "2017-06-13T08:34:10Z"}, {"text": "Comment on attachment 8877046\nBug 1368948: Add a script to update PDFium from upstream.\n\nThis script can be used to get PDFium sources from upstream to local directory by specifying a commit hash or a branch name. This script will do the following steps to update sources:\n - use the specified commit hash or the branch name to retrieve more specific version information from upstream; and\n - remove local pdfium folder if there is one; and\n - download pdfium sources with the specific commit hash as pdfium.tar.gz; and\n - extract pdfium.tar.gz to pdfium folder; and\n - delete the downloaded pdfium.tar.gz; and\n - apply necessary patches to pdfium; and\n - update README_MOZILLA with corresponding commit hash; and\n - remove unnecessary files and folders.", "author": "brsun@mozilla.com", "id": 12393424, "time": "2017-06-13T08:50:23Z"}, {"text": "Comment on attachment 8877047\nBug 1368948: Add patch files for PDFium.\n\nAdd patch files for update.py to automatically modify pdfium sources:\n - a patch to fix PDFium build errors due to lacking GDI+ prerequisite headers\n - a patch to let PDFium use freetype library within Gecko\n - a patch to let PDFium use libjpeg library within Gecko\n - a patch to let PDFium use zlib library within Gecko", "author": "brsun@mozilla.com", "id": 12393443, "time": "2017-06-13T08:58:31Z"}, {"text": "Comment on attachment 8877048\nBug 1368948: Add PDfium files (chromium/3029) with patches.\n\nAdd PDFium files with the latest chromium/3029 branch, which is currently used by stable chromium (58.0.3029.110)", "author": "brsun@mozilla.com", "id": 12393449, "time": "2017-06-13T09:01:04Z"}, {"text": "Comment on attachment 8877049\nBug 1368948: Add license notices for PDFium and its dependent libraries.\n\nUpdate license.html to include PDfium related license notices:\n - \"Anti-Grain Geometry Public License\" for \"pdfium/third_party/agg23/\"\n - \"Chromium License\" for \"pdfium/third_party/base/\"\n - \"lcms License\" for \"pdfium/third_party/lcms2-2.6/\"\n - \"OpenJPEG License\" for \"pdfium/third_party/libopenjpeg20/\"\n - \"PDFium License\" for \"pdfium/\"\n - acknowledgment of \"C++ Big Integer Library\" for \"pdfium/third_party/bigint/\"", "author": "brsun@mozilla.com", "id": 12393482, "time": "2017-06-13T09:10:41Z"}, {"text": "Comment on attachment 8877050\nBug 1368948: Suppress clang-plugin errors.\n\nAdd explicit rules to suppress static analysis warnings for PDFium sources.", "author": "brsun@mozilla.com", "id": 12393493, "time": "2017-06-13T09:16:46Z"}, {"text": "Comment on attachment 8877051\nBug 1368948: Build freetype when enabling SkiaPDF on Windows.\n\nAdd the dependency between \"MOZ_ENABLE_SKIA_PDF\" and \"MOZ_TREE_FREETYPE\" on Windows:\n - let |tree_freetype| returns true if |skia_pdf| returns true on Windows, and\n - avoid defining \"MOZ_ENABLE_CAIRO_FT\" on Windows (\"cairo-ft-font.c\" includes <dlfcn.h>, which only exists on posix platforms)", "author": "brsun@mozilla.com", "id": 12393529, "time": "2017-06-13T09:25:59Z"}, {"text": "Comment on attachment 8877052\nBug 1368948: Add moz.build for PDFium.\n\nAdd moz.build for PDfium library.", "author": "brsun@mozilla.com", "id": 12393531, "time": "2017-06-13T09:27:07Z"}, {"text": "Created attachment 8877089\nbug1368948_pdfium_files_with_patches.zip\n\nReviewBoard cannot display my patch (attachment 8877048) properly. This is the zip version of that patch.", "author": "brsun@mozilla.com", "id": 12393624, "time": "2017-06-13T09:57:45Z"}, {"text": "Build result on the try server with PDFium compiled[1] or without PDFium compiled[2] are all green.\n\n[1] https://treeherder.mozilla.org/#/jobs?repo=try&revision=deff4b2730861b0e5cd64145667e79b58cbf39d4\n[2] https://treeherder.mozilla.org/#/jobs?repo=try&revision=2eb22b9c9e3fe3c82915c481fcf11e9cb82a5b04", "author": "brsun@mozilla.com", "id": 12393685, "time": "2017-06-13T10:23:16Z"}, {"text": "Comment on attachment 8877046\nBug 1368948: Add a script to update PDFium from upstream.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/148388/diff/1-2/", "author": "brsun@mozilla.com", "id": 12396462, "time": "2017-06-14T06:26:07Z"}, {"text": "Comment on attachment 8877047\nBug 1368948: Add patch files for PDFium.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/148390/diff/1-2/", "author": "brsun@mozilla.com", "id": 12396463, "time": "2017-06-14T06:26:07Z"}, {"text": "Comment on attachment 8877048\nBug 1368948: Add PDfium files (chromium/3029) with patches.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/148392/diff/1-2/", "author": "brsun@mozilla.com", "id": 12396464, "time": "2017-06-14T06:26:07Z"}, {"text": "Comment on attachment 8877049\nBug 1368948: Add license notices for PDFium and its dependent libraries.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/148394/diff/1-2/", "author": "brsun@mozilla.com", "id": 12396465, "time": "2017-06-14T06:26:07Z"}, {"text": "Comment on attachment 8877050\nBug 1368948: Suppress clang-plugin errors.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/148396/diff/1-2/", "author": "brsun@mozilla.com", "id": 12396466, "time": "2017-06-14T06:26:07Z"}, {"text": "Comment on attachment 8877051\nBug 1368948: Build freetype when enabling SkiaPDF on Windows.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/148398/diff/1-2/", "author": "brsun@mozilla.com", "id": 12396467, "time": "2017-06-14T06:26:07Z"}, {"text": "Comment on attachment 8877052\nBug 1368948: Add moz.build for PDFium.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/148400/diff/1-2/", "author": "brsun@mozilla.com", "id": 12396468, "time": "2017-06-14T06:26:07Z"}, {"text": "Created attachment 8877464\nbug 1368948- test pdfium\n\nReview commit: https://reviewboard.mozilla.org/r/148896/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/148896/", "author": "howareyou322@gmail.com", "id": 12396672, "time": "2017-06-14T08:07:24Z"}, {"text": "Comment on attachment 8877049\nBug 1368948: Add license notices for PDFium and its dependent libraries.\n\nhttps://reviewboard.mozilla.org/r/148394/#review153372\n\nr=gerv. Are we shipping two JPEG libraries now? <sigh>\n\nGerv", "author": "gerv@mozilla.org", "id": 12396725, "time": "2017-06-14T08:25:54Z"}, {"text": "> r=gerv. Are we shipping two JPEG libraries now? <sigh>\n\nSince JPEG and JPEG 2000 are two different standards, and PDFium uses both of them, probably this is not negligible.", "author": "brsun@mozilla.com", "id": 12396830, "time": "2017-06-14T08:58:39Z"}, {"text": "Mike, would you be able to review the patches or suggest other reviewers if you are busy? Thanks.", "author": "bmo@upshifts.org", "id": 12409840, "time": "2017-06-19T07:38:02Z"}, {"text": "Hi Astley,\n\nPDFium has many third-party libraries on its repo[1], some of them will be included into m-c during this integration:\n - agg23\n - base\n - bigint\n - lcms2-2.6\n - libopenjpeg20\n\nWe remove rest libraries of the third-party folder intentionally:\n - freetype: reuse the existing one in Gecko\n - libjpeg: reuse the existing one in Gecko\n - libpng16: remove due to XFA feature disabled\n - libtiff: remove due to XFA feature disabled\n - pymock: remove due to no pymock tests currently\n - zlib_v128: reuse the existing one in Gecko\n\nOn the other hand, by further configuring GN arguments, some additional libraries could be downloaded from other repos[2] correspondingly. By contrast, we don't include any one of them currently.\n\n[1] https://pdfium.googlesource.com/pdfium/+/chromium/3029/third_party/\n[2] https://pdfium.googlesource.com/pdfium/+/chromium/3029/DEPS", "author": "brsun@mozilla.com", "id": 12410007, "time": "2017-06-19T08:39:07Z"}, {"text": "Comment on attachment 8877046\nBug 1368948: Add a script to update PDFium from upstream.\n\nhttps://reviewboard.mozilla.org/r/148388/#review155470\n\n::: widget/third_party/pdfium/update.py:18\n(Diff revision 2)\n> +def debug_print(message):\n> +    if DEBUG:\n> +        print(message)\n> +\n> +def parse_upstream(commit_selector):\n> +    upstream_url = 'https://pdfium.googlesource.com/pdfium/+/' + commit_selector\n\nUpstream is a git repository, you should pull through git instead of parsing a web representation of it that might change in the future.\n\nThat's what we do for many other third party sources.", "author": "mh+mozilla@glandium.org", "id": 12413364, "time": "2017-06-20T06:42:04Z"}, {"text": "Comment on attachment 8877046\nBug 1368948: Add a script to update PDFium from upstream.\n\nhttps://reviewboard.mozilla.org/r/148388/#review155474\n\n::: widget/third_party/pdfium/README_MOZILLA:1\n(Diff revision 2)\n> +PDFium is a PDF library to view, search, print, and form fill PDF files.\n\nAlso, some directory under widget doesn't seem appropriate. Widget/ code is mostly about interfacing with the native OS widget toolkits (Gtk, Cocoa, etc.). PDFium is not that.", "author": "mh+mozilla@glandium.org", "id": 12413380, "time": "2017-06-20T06:45:38Z"}, {"text": "Comment on attachment 8877047\nBug 1368948: Add patch files for PDFium.\n\nhttps://reviewboard.mozilla.org/r/148390/#review155482\n\n::: widget/third_party/pdfium/patches/bug1368948_use_gecko_libjpeg.patch:22\n(Diff revision 2)\n> + #include <jpeglib.h>\n> + #elif defined(USE_LIBJPEG_TURBO)\n> + #include \"third_party/libjpeg_turbo/jpeglib.h\"\n> + #else\n> +-#include \"third_party/libjpeg/jpeglib.h\"\n> ++#include \"jpeglib.h\"\n\nTechnically, the in-tree copy of libjpeg is libjpeg-turbo, you probably want to use the libjpeg-turbo code paths if there are other parts varying with LIBJPEG_TURBO.\n\n::: widget/third_party/pdfium/update.py:92\n(Diff revision 2)\n> +    os.system(\"patch -p4 < patches/bug1368948_gdiplus_prerequisite.patch\")\n> +    # Patch to use freetype library within Gecko\n> +    os.system(\"patch -p4 < patches/bug1368948_use_gecko_freetype.patch\")\n> +    # Patch to use libjpeg library within Gecko\n> +    os.system(\"patch -p4 < patches/bug1368948_use_gecko_libjpeg.patch\")\n> +    # Patch to use zlib library within Gecko\n> +    os.system(\"patch -p4 < patches/bug1368948_use_gecko_zlib.patch\")\n\nos.system kind of makes me cringe, but meh.", "author": "mh+mozilla@glandium.org", "id": 12413385, "time": "2017-06-20T06:48:47Z"}, {"text": "Comment on attachment 8877048\nBug 1368948: Add PDfium files (chromium/3029) with patches.\n\nhttps://reviewboard.mozilla.org/r/148392/#review155484\n\nSomeone else than me (someone that will be responsible for this code, I guess) will need to rubberstamp this. My only comment here, is there are two levels of pdfium directories; that seems redundant.", "author": "mh+mozilla@glandium.org", "id": 12413386, "time": "2017-06-20T06:51:44Z"}, {"text": "Comment on attachment 8877051\nBug 1368948: Build freetype when enabling SkiaPDF on Windows.\n\nhttps://reviewboard.mozilla.org/r/148398/#review155486\n\n::: old-configure.in:3507\n(Diff revision 2)\n>  \n>  if test -n \"$MOZ_USE_NATIVE_POPUP_WINDOWS\"; then\n>    AC_DEFINE(MOZ_USE_NATIVE_POPUP_WINDOWS)\n>  fi\n>  \n> -if test -n \"$MOZ_TREE_FREETYPE\"; then\n> +if test -n \"$MOZ_TREE_FREETYPE\" -a \"$OS_TARGET\" != WINNT; then\n\nwhy do you exclude this?\n\n::: toolkit/moz.configure:1028\n(Diff revision 2)\n>  \n>  set_config('SKIA_INCLUDES', skia_includes)\n>  \n> +# Build Freetype in the tree\n> +# ==============================================================\n> +@depends(target, skia_pdf)\n\nwhy is this tied to _skia_ pdf? And why windows only?", "author": "mh+mozilla@glandium.org", "id": 12413397, "time": "2017-06-20T06:59:37Z"}, {"text": "Comment on attachment 8877052\nBug 1368948: Add moz.build for PDFium.\n\nhttps://reviewboard.mozilla.org/r/148400/#review155490\n\n::: widget/third_party/pdfium/moz.build:8\n(Diff revision 2)\n> +# This Source Code Form is subject to the terms of the Mozilla Public\n> +# License, v. 2.0. If a copy of the MPL was not distributed with this\n> +# file, You can obtain one at http://mozilla.org/MPL/2.0/.\n> +\n> +with Files('**'):\n> +    BUG_COMPONENT = ('Core', 'Printing: Output')\n\nIf this is for printing... why is jpeg2000 needed?\n\n::: widget/third_party/pdfium/moz.build:537\n(Diff revision 2)\n> +# third_party:jpeg\n> +LOCAL_INCLUDES += [\n> +    '/media/libjpeg',\n> +]\n> +USE_LIBS += [\n> +    'media_libjpeg',\n\nYou're introducing the same problem as bug 1373988.\n\n::: widget/third_party/pdfium/moz.build:543\n(Diff revision 2)\n> +]\n> +\n> +# We allow warnings for third-party code that can be updated from upstream.\n> +ALLOW_COMPILER_WARNINGS = True\n> +\n> +DISABLE_STL_WRAPPING = True\n\nhuh, this is rather not desirable. What made you do this?", "author": "mh+mozilla@glandium.org", "id": 12413403, "time": "2017-06-20T07:03:32Z"}, {"text": "Comment on attachment 8877051\nBug 1368948: Build freetype when enabling SkiaPDF on Windows.\n\nhttps://reviewboard.mozilla.org/r/148398/#review155486\n\n> why do you exclude this?\n\nThe cairo library cannot be built with \"MOZ_ENABLE_CAIRO_FT\" defined on Windows (\"cairo-ft-font.c\" includes <dlfcn.h>, which only exists on posix platforms). I guess we can safely exclude this on Windows because this definition (probably) has never been defined on Windows before.\n\n> why is this tied to _skia_ pdf? And why windows only?\n\n\"--enable-skia-pdf\" is used for printing feature, which means we use PDF as the intermediate format for the printer. On Linux and Mac, the printer interface can accept PDF as the input format directly. However, the printer interface on Windows doesn't recognize PDF format. So we have to explicitly convert PDF into EMF format for the printer on Windows.\n\nIn short, currently PDFium will be used for PDF to EMF conversion on Windows only.", "author": "brsun@mozilla.com", "id": 12413431, "time": "2017-06-20T07:16:03Z"}, {"text": "Comment on attachment 8877046\nBug 1368948: Add a script to update PDFium from upstream.\n\nhttps://reviewboard.mozilla.org/r/148388/#review155470\n\n> Upstream is a git repository, you should pull through git instead of parsing a web representation of it that might change in the future.\n> \n> That's what we do for many other third party sources.\n\nThe update.py for PDFium follows the structure of other third party libraries[1][2].\n\n[1] http://searchfox.org/mozilla-central/source/media/libvpx/update.py\n[2] http://searchfox.org/mozilla-central/source/media/libyuv/update.py", "author": "brsun@mozilla.com", "id": 12413573, "time": "2017-06-20T08:12:10Z"}, {"text": "> Also, some directory under widget doesn't seem appropriate. Widget/ code is\n> mostly about interfacing with the native OS widget toolkits (Gtk, Cocoa,\n> etc.). PDFium is not that.\n\nHi Jonathan,\n\nDo you have any suggestion other than /widget folder for pdfium?", "author": "brsun@mozilla.com", "id": 12413592, "time": "2017-06-20T08:24:32Z"}, {"text": "(In reply to Bruce Sun [:brsun] from comment #50)\n> Comment on attachment 8877051\n> Bug 1368948: Build freetype when enabling SkiaPDF on Windows.\n> \n> https://reviewboard.mozilla.org/r/148398/#review155486\n> \n> > why do you exclude this?\n> \n> The cairo library cannot be built with \"MOZ_ENABLE_CAIRO_FT\" defined on\n> Windows (\"cairo-ft-font.c\" includes <dlfcn.h>, which only exists on posix\n> platforms). I guess we can safely exclude this on Windows because this\n> definition (probably) has never been defined on Windows before.\n\nPlease add a comment.\n\n(In reply to Bruce Sun [:brsun] from comment #51)\n> Comment on attachment 8877046\n> Bug 1368948: Add a script to update PDFium from upstream.\n> \n> https://reviewboard.mozilla.org/r/148388/#review155470\n> \n> > Upstream is a git repository, you should pull through git instead of parsing a web representation of it that might change in the future.\n> > \n> > That's what we do for many other third party sources.\n> \n> The update.py for PDFium follows the structure of other third party\n> libraries[1][2].\n> \n> [1] http://searchfox.org/mozilla-central/source/media/libvpx/update.py\n> [2] http://searchfox.org/mozilla-central/source/media/libyuv/update.py\n\nOh my... these scripts should be changed too. Or we should finally use a single script for all these things. I wonder what the status of the service to do that is. If only I could remember who was talking about it...\n\n(All in all, they could also just be (simpler) shell scripts... see e.g modules/brotli/update.sh)", "author": "mh+mozilla@glandium.org", "id": 12413593, "time": "2017-06-20T08:25:06Z"}, {"text": "Comment on attachment 8877052\nBug 1368948: Add moz.build for PDFium.\n\nhttps://reviewboard.mozilla.org/r/148400/#review155490\n\n> If this is for printing... why is jpeg2000 needed?\n\nPDFium is a library for parsing PDF files. Parsing JPEG 2000 image within PDF is just a feature of PDFium. Since OpenJPEG is tightly integrated with PDFium, it might not be an easy task to decouple them without breaking upgradability.\n\n> You're introducing the same problem as bug 1373988.\n\nThe solution of that bug might affect our moz.build, but our integration doesn't incur that problem because PDFium is built on Windows only.\n\n> huh, this is rather not desirable. What made you do this?\n\nBecause including <utility> without <xutility> causes build errors on Windows (ref. bug 1350261).", "author": "brsun@mozilla.com", "id": 12413728, "time": "2017-06-20T09:11:48Z"}, {"text": "(In reply to Bruce Sun [:brsun] from comment #54)\n> Comment on attachment 8877052\n> Bug 1368948: Add moz.build for PDFium.\n> \n> https://reviewboard.mozilla.org/r/148400/#review155490\n> \n> > If this is for printing... why is jpeg2000 needed?\n> \n> PDFium is a library for parsing PDF files. Parsing JPEG 2000 image within\n> PDF is just a feature of PDFium. Since OpenJPEG is tightly integrated with\n> PDFium, it might not be an easy task to decouple them without breaking\n> upgradability.\n\nBut you're only parsing pdfs produced by skia, and they won't include jpeg2000 images.\n\n> > huh, this is rather not desirable. What made you do this?\n> \n> Because including <utility> without <xutility> causes build errors on\n> Windows (ref. bug 1350261).\n\nThat bug says the errors are gone, and disabling STL wrapping is not something we want to do anyways.", "author": "mh+mozilla@glandium.org", "id": 12413740, "time": "2017-06-20T09:17:19Z"}, {"text": "Comment on attachment 8877052\nBug 1368948: Add moz.build for PDFium.\n\nhttps://reviewboard.mozilla.org/r/148400/#review155490\n\n> Because including <utility> without <xutility> causes build errors on Windows (ref. bug 1350261).\n\nDISABLE_STL_WRAPPING can be avoided after applying the patch on bug 1349064[1].\n\n[1] https://hg.mozilla.org/integration/mozilla-inbound/rev/8c35a43033bc", "author": "brsun@mozilla.com", "id": 12413964, "time": "2017-06-20T10:30:29Z"}, {"text": "Comment on attachment 8877050\nBug 1368948: Suppress clang-plugin errors.\n\nhttps://reviewboard.mozilla.org/r/148396/#review155936", "author": "ehsan@mozilla.com", "id": 12416129, "time": "2017-06-20T22:40:18Z"}, {"text": "Comment on attachment 8877046\nBug 1368948: Add a script to update PDFium from upstream.\n\nhttps://reviewboard.mozilla.org/r/148388/#review155998\n\n::: widget/third_party/pdfium/README_MOZILLA:1\n(Diff revision 2)\n> +PDFium is a PDF library to view, search, print, and form fill PDF files.\n\nThe thought here is basically about the PDF-to-EMF conversion function provided by PDFium is *currenly* only used by Windows widget code. That's also why the third_party folder was implemented for(as a dependency for use of widget code).\nIdeally, we should have a centralized placeholder to store all 3rd party libraries in m-c, however, it's not a case now...", "author": "bmo@upshifts.org", "id": 12416681, "time": "2017-06-21T02:41:33Z"}, {"text": "Comment on attachment 8877048\nBug 1368948: Add PDfium files (chromium/3029) with patches.\n\nhttps://reviewboard.mozilla.org/r/148392/#review155484\n\nAs the integration of PDFium library is part of layout printing work, it would be sustained by layout peers.\nIt would be still great to have your feedback. For review request, it's fine to redirect to layout peers.\nI also agree the comment from Mike about the redundant levels of dirs.", "author": "bmo@upshifts.org", "id": 12416922, "time": "2017-06-21T05:52:43Z"}, {"text": "> I also agree the comment from Mike about the redundant levels of dirs.\n\nThe redundant folder structure might be weird at the first glance, but it makes sense when you think about the upgrade process. By adding one additional folder to contain upstream codes, we can easily remove the old codes when upgrading to a new version.\n\nIf we don't use this kind of redundant level, we have to use a file list to differentiate files/folders between third-party ones (i.e. all folders of the library itself, readme, license notices, etc.) and non-third-party ones (i.e. update scripts, mozilla patches, readme, moz.build, etc.). Otherwise, there might be some old but unused files after executing the upgrade process.\n\nI would suggest we keep the redundant level for simplicity of the upgrade process if there are no strong opinions to disagree this approach.\n\np.s. I roughly take a glance on several third-party folders. For those libraries which don't have extra level of redundant folders, update scripts don't seem to remove old files/folders properly. They just can add files/folders during the upgrade process. Some libraries even don't have the capability to upgrade automatically.\n\n\nHi Mike, Astley,\n\nJust want to double check with you. Do you really dislike this redundant level of folders?", "author": "brsun@mozilla.com", "id": 12416977, "time": "2017-06-21T06:26:46Z"}, {"text": "(In reply to Bruce Sun [:brsun] from comment #60)\n> Hi Mike, Astley,\n> \n> Just want to double check with you. Do you really dislike this redundant\n> level of folders?\n\nI understood the advantage and necessary to put the upstream code into a separate folder to facilitate the code maintenance. When looking into gfx/skia, it seems taking a similar way to have our own files and upstream code been separated. That's fine to me now.", "author": "bmo@upshifts.org", "id": 12420595, "time": "2017-06-22T06:46:43Z"}, {"text": "By the way, as you are using reviewboard for review, it would be good to have all review comments for a particular open issue in a single thread, otehrwise, it's gonna be scattered on Bugzilla.", "author": "bmo@upshifts.org", "id": 12420601, "time": "2017-06-22T06:50:56Z"}, {"text": "(In reply to Bruce Sun [:brsun] from comment #52)\n> Do you have any suggestion other than /widget folder for pdfium?\n\nWell if we're eliminating layout/ and widget/ as suitable locations, I guess we have modules/ and third_party/ (or at a push  gfx/ or image/, but they don't seem appropriate). I'd say put it in modules/. Two of the existing libraries that live there (libjar and libpref) are also built into libxul.", "author": "jwatt@jwatt.org", "id": 12421313, "time": "2017-06-22T11:43:05Z"}, {"text": "(In reply to Jonathan Watt [:jwatt] from comment #63)\n> Well if we're eliminating layout/ and widget/ as suitable locations, I guess\n> we have modules/ and third_party/ (or at a push  gfx/ or image/, but they\n> don't seem appropriate). I'd say put it in modules/. Two of the existing\n> libraries that live there (libjar and libpref) are also built into libxul.\n\nI Agree to put PDFium library into modules/ folder. Thanks for your suggestion.", "author": "bmo@upshifts.org", "id": 12423804, "time": "2017-06-23T02:59:49Z"}, {"text": "Created attachment 8880689\nupdate.sh\n\nHi Mike,\n\nWould this update script make you cringe less?", "author": "brsun@mozilla.com", "id": 12423874, "time": "2017-06-23T03:58:42Z"}, {"text": "I've tried to remove OpenJPEG library from PDFium, the build results seem good.\n\n\nHi Farmer,\n\nWould your help to give it a try to see if everything still works well on SkiaPDF?\n\n[1] https://treeherder.mozilla.org/#/jobs?repo=try&revision=7053139ba7a0d38108d6302652b16c2882ee04b8", "author": "brsun@mozilla.com", "id": 12424169, "time": "2017-06-23T07:03:31Z"}, {"text": "(In reply to Bruce Sun [:brsun] from comment #66)\n> I've tried to remove OpenJPEG library from PDFium, the build results seem\n> good.\n> \n> \n> Hi Farmer,\n> \n> Would your help to give it a try to see if everything still works well on\n> SkiaPDF?\n> \n> [1]\n> https://treeherder.mozilla.org/#/\n> jobs?repo=try&revision=7053139ba7a0d38108d6302652b16c2882ee04b8\n\nI tested Yahoo and CNN. The printing via SkiaPDF works fine.", "author": "fatseng@mozilla.com", "id": 12424327, "time": "2017-06-23T08:31:01Z"}, {"text": "Since we encounter some problems on mozreview (ref. bug 1372842), I will using the old-fashion way to submit patches for this bug.", "author": "brsun@mozilla.com", "id": 12430795, "time": "2017-06-27T06:25:27Z"}, {"text": "Created attachment 8881345\nBug 1368948: [1/7] Add a script to update PDFium from upstream.\n\nI add update.sh in this patch to avoid using os.system(...) in the python script. Both update.py and update.sh can retrieve upstream sources automatically. I will remove one of them if the other one is more preferred from reviewer's point of view.\n\nThe idea to use two update scripts here is just for aiding the back-and-forth latency of the review process. Suppose there would be only one script on m-c.", "author": "brsun@mozilla.com", "id": 12430808, "time": "2017-06-27T06:41:23Z"}, {"text": "Created attachment 8881346\nBug 1368948: [2/7] Add patch files for PDFium.\n\nAdd patch files for update.sh to automatically modify pdfium sources:\n - a patch to fix PDFium build errors due to lacking GDI+ prerequisite headers\n - a patch to let PDFium use freetype library within Gecko\n - a patch to let PDFium use libjpeg library within Gecko\n - a patch to let PDFium use zlib library within Gecko\n - a patch to remove JPEG 2000 support from PDFium", "author": "brsun@mozilla.com", "id": 12430810, "time": "2017-06-27T06:46:13Z"}, {"text": "Created attachment 8881347\nBug 1368948: [3/7] Add PDfium files (chromium/3029) with patches.\n\nCorresponding chromium version: 58.0.3029.110\nUpdate command: ./update.sh --commit chromium/3029\n\nNote: Some libraries under third_party folder are removed intentionally:\n - freetype: reuse the existing one in Gecko\n - libjpeg: reuse the existing one in Gecko\n - libopenjpeg20: remove because SkiaPDF doesn't use OpenJPEG\n - libpng16: remove due to XFA feature disabled\n - libtiff: remove due to XFA feature disabled\n - pymock: remove due to no pymock tests currently\n - zlib_v128: reuse the existing one in Gecko", "author": "brsun@mozilla.com", "id": 12430813, "time": "2017-06-27T06:51:08Z"}, {"text": "Created attachment 8881348\nBug 1368948: [4/7] Add license notices for PDFium and its dependent libraries.\n\nUpdate license.html to include PDfium related license notices:\n - \"Anti-Grain Geometry Public License\" for \"pdfium/third_party/agg23/\"\n - \"Chromium License\" for \"pdfium/third_party/base/\"\n - \"lcms License\" for \"pdfium/third_party/lcms2-2.6/\"\n - \"PDFium License\" for \"pdfium/\"\n - acknowledgment of \"C++ Big Integer Library\" for \"pdfium/third_party/bigint/\"\n\nHi Gervase,\n\nOpenJPEG has been removed, and the folder for PDFium has been changed to /modules/pdfium. Would you like to check license.html again for me?", "author": "brsun@mozilla.com", "id": 12430815, "time": "2017-06-27T06:54:27Z"}, {"text": "Created attachment 8881349\nBug 1368948: [5/7] Suppress clang-plugin errors.\n\nCarry over r+ flag from comment 57.", "author": "brsun@mozilla.com", "id": 12430818, "time": "2017-06-27T06:56:01Z"}, {"text": "Created attachment 8881350\nBug 1368948: [6/7] Build freetype when enabling SkiaPDF on Windows.\n\nAdd the dependency between \"MOZ_ENABLE_SKIA_PDF\" and \"MOZ_TREE_FREETYPE\" on Windows:\n - let |tree_freetype| returns true if |skia_pdf| returns true on Windows, and\n - avoid defining \"MOZ_ENABLE_CAIRO_FT\" on Windows (\"cairo-ft-font.c\" includes <dlfcn.h>, which only exists on posix platforms)\n - add more comments in old-configure.in", "author": "brsun@mozilla.com", "id": 12430820, "time": "2017-06-27T06:57:28Z"}, {"text": "Created attachment 8881351\nBug 1368948: [7/7] Add moz.build for PDFium.\n\nmoz.build for /modules/pdfium:\n - reuse freetype for third_party:fx_freetype\n - reuse zlib for third_party:fx_zlib\n - reuse media_libjpeg for third_party:jpeg (with USE_LIBJPEG_TURBO defined)\n - avoid compiling fx_codec_jpx_opj.cpp to disable OpenJPEG support", "author": "brsun@mozilla.com", "id": 12430824, "time": "2017-06-27T07:03:20Z"}, {"text": "Comment on attachment 8881345\nBug 1368948: [1/7] Add a script to update PDFium from upstream.\n\nReview of attachment 8881345:\n-----------------------------------------------------------------\n\nJust keep the shell version.\n\n::: modules/pdfium/update.sh\n@@ +10,5 @@\n> +COMMIT_SELECTOR=\"\"\n> +COMMIT=\"\"\n> +COMMIT_DATE=\"\"\n> +\n> +function debug_print() {\n\nIIRC `function` is a bashism. In POSIX shell, you can just do `name() {` (without `function` at all)\n\n@@ +114,5 @@\n> +    print_help\n> +    exit 0\n> +fi\n> +\n> +checkout_commit \"$COMMIT_SELECTOR\"\n\nYou should change the current directory to the directory containing this script before doing anything, so that it can be run from anywhere without surprises. something like `cd $(dirname $0)`", "author": "mh+mozilla@glandium.org", "id": 12434202, "time": "2017-06-28T17:12:00Z"}, {"text": "Comment on attachment 8881345\nBug 1368948: [1/7] Add a script to update PDFium from upstream.\n\nReview of attachment 8881345:\n-----------------------------------------------------------------\n\nAll things considered, I think you shouldn't hide the \"debug\" messages by default. Just replace debug_print with echo.", "author": "mh+mozilla@glandium.org", "id": 12434214, "time": "2017-06-28T17:14:40Z"}, {"text": "Comment on attachment 8881346\nBug 1368948: [2/7] Add patch files for PDFium.\n\nReview of attachment 8881346:\n-----------------------------------------------------------------\n\nThe patches seem reasonable, but you may want a review from someone that actually looked at the pdfium code, whoever that is :)", "author": "mh+mozilla@glandium.org", "id": 12434219, "time": "2017-06-28T17:15:32Z"}, {"text": "Comment on attachment 8881351\nBug 1368948: [7/7] Add moz.build for PDFium.\n\nReview of attachment 8881351:\n-----------------------------------------------------------------\n\n::: modules/pdfium/moz.build\n@@ +517,5 @@\n> +\n> +# We allow warnings for third-party code that can be updated from upstream.\n> +ALLOW_COMPILER_WARNINGS = True\n> +\n> +Library('pdfium')\n\nTechnically, you don't need this line.", "author": "mh+mozilla@glandium.org", "id": 12434247, "time": "2017-06-28T17:22:37Z"}, {"text": "Created attachment 8881840\nBug 1368948: [1/7] Add a script to update PDFium from upstream. (v2)\n\naddress comment 76 and comment 77", "author": "brsun@mozilla.com", "id": 12434420, "time": "2017-06-28T17:55:07Z"}, {"text": "Created attachment 8881841\nBug 1368948: [2/7] Add patch files for PDFium. (v2)\n\naddress comment 77\n\nHi Jonathan,\n\nWould you like to share your comments as well?", "author": "brsun@mozilla.com", "id": 12434428, "time": "2017-06-28T17:56:37Z"}, {"text": "Created attachment 8881843\nBug 1368948: [7/7] Add moz.build for PDFium. (v2)\n\naddress comment 79", "author": "brsun@mozilla.com", "id": 12434433, "time": "2017-06-28T17:57:27Z"}, {"text": "Comment on attachment 8881840\nBug 1368948: [1/7] Add a script to update PDFium from upstream. (v2)\n\nReview of attachment 8881840:\n-----------------------------------------------------------------\n\n::: modules/pdfium/README_MOZILLA\n@@ +2,5 @@\n> +\n> +The source in this directory was copied from upstream by running the\n> +update.py script from layout/pdfium. Any changes made relative to upstream\n> +should be reflected in that script, e.g. by applying patch files after the\n> +copy step.\n\nI think this last sentence would be easier to read as: \"Any changes that we make to our copy of the upstream code should be made by that script (e.g. by applying patch files after the copy step).\"\n\n::: modules/pdfium/update.sh\n@@ +3,5 @@\n> +# License, v. 2.0. If a copy of the MPL was not distributed with this\n> +# file, You can obtain one at http://mozilla.org/MPL/2.0/.\n> +\n> +# Script to update the mozilla in-tree copy of the PDFium library.\n> +# Run this within the /modules/pdfium directory of the source tree.\n\nIt seems like this script should use:\n\n  set -e\n\n@@ +10,5 @@\n> +COMMIT=\"\"\n> +COMMIT_DATE=\"\"\n> +\n> +print_help() {\n> +    echo \"usage: ./update.sh [--commit COMMIT]\"\n\nThe square brackets here imply that the --commit argument is optional, but it seems that it is not.\n\n@@ +39,5 @@\n> +    git -C pdfium checkout \"$COMMIT\"\n> +}\n> +\n> +cleanup_files() {\n> +    # Remove irrelevant source control history\n\nPlease update the comments as we discussed in person.\n\n@@ +88,5 @@\n> +    PREFIX=\"The git commit ID last used to import was\"\n> +    perl -p -i -e \"s/${PREFIX} [0-9A-Fa-f]+ \\(.+\\)/${PREFIX} ${COMMIT} (${COMMIT_DATE})/\" README_MOZILLA\n> +}\n> +\n> +while [ \"$#\" -gt 0 ]\n\nThe way you handle this loop would allow things like:\n\n  update.sh --verbose --commit 123\n\nwithout notifying the user that --verbose is not recognized, which I guess is unlikely to be an issue in practice. But I don't think you need a loop here. You could just check \"if no args passed, use latest trunk, else if two args arp passed and the first is '--commit' use the second as the commit ID, else error with help message\".", "author": "jwatt@jwatt.org", "id": 12434837, "time": "2017-06-28T19:27:17Z"}, {"text": "Created attachment 8881989\nBug 1368948: [1/7] Add a script to update PDFium from upstream. (v3)\n\naddress comment 83.\n\nHi Jonathan, I've updated the script accordingly. Would you like to have a look at it again?", "author": "brsun@mozilla.com", "id": 12435531, "time": "2017-06-28T22:42:42Z"}, {"text": "Comment on attachment 8881841\nBug 1368948: [2/7] Add patch files for PDFium. (v2)\n\nReview of attachment 8881841:\n-----------------------------------------------------------------\n\n::: modules/pdfium/patches/bug1368948_gdiplus_prerequisite.patch\n@@ +3,5 @@\n> +# Date 1498202642 -28800\n> +#      Fri Jun 23 15:24:02 2017 +0800\n> +# Node ID 7a2bc86bcc197404cd30bd275a3b41162f838a00\n> +# Parent  7fdd58dbbf8e64a4bd072f2d7295723816890f4a\n> +Bug 1368948: Include objidl.h between windows.h and gdiplus.h.\n\nIt would be nice to have an explanation of *why* we do this. Not just \"because this causes a build error\", but an explanation of why it causes a build error for us but not for normal PDFium builds.\n\n::: modules/pdfium/patches/bug1368948_remove_openjpeg.patch\n@@ +3,5 @@\n> +# Date 1498202684 -28800\n> +#      Fri Jun 23 15:24:44 2017 +0800\n> +# Node ID f18f9827733dde6ab70ce9734633a5ba3567bc6b\n> +# Parent  666c13fbd6937fa69af7eb223120da1812f45d15\n> +Bug 1368948: Remove OpenJPEG due to SkiaPDF doesn't use JPEG 2000.\n\nThis patch isn't removing the OpenJPEG code (we do that in update.sh), it's rather preventing PDFium from using that removed code. I'd suggest making this message:\n\n  Prevent PDFium from trying to use the removed OpenJPEG code.\n\n  Our PDFium update script at modules/pdfium/update.sh removes the OpenJPEG code\n  from our copy of PDFium.  This patch makes sure that the remaining PDFium code\n  does not try to use OpenJPEG.\n\n::: modules/pdfium/patches/bug1368948_use_gecko_freetype.patch\n@@ +3,5 @@\n> +# Date 1498202651 -28800\n> +#      Fri Jun 23 15:24:11 2017 +0800\n> +# Node ID f61f35d07d1483866485f8126677ace6da0dc0d3\n> +# Parent  7a2bc86bcc197404cd30bd275a3b41162f838a00\n> +Bug 1368948: Use existing freetype library within Gecko.\n\nMake this:\n\n  Make PDFium use Mozilla's in-tree copy of FreeType instead of its own copy.\n\n::: modules/pdfium/patches/bug1368948_use_gecko_libjpeg.patch\n@@ +3,5 @@\n> +# Date 1498202662 -28800\n> +#      Fri Jun 23 15:24:22 2017 +0800\n> +# Node ID 38eedf401444bba32a749462ded4f9e93df2bf4c\n> +# Parent  f61f35d07d1483866485f8126677ace6da0dc0d3\n> +Bug 1368948: Use existing libjpeg library within Gecko.\n\nMake this:\n \n  Make PDFium use Mozilla's in-tree copy of libjpeg instead of its own copy.\n\n::: modules/pdfium/patches/bug1368948_use_gecko_zlib.patch\n@@ +3,5 @@\n> +# Date 1498202674 -28800\n> +#      Fri Jun 23 15:24:34 2017 +0800\n> +# Node ID 666c13fbd6937fa69af7eb223120da1812f45d15\n> +# Parent  38eedf401444bba32a749462ded4f9e93df2bf4c\n> +Bug 1368948: Use existing zlib library within Gecko.\n\nMake this:\n \n  Make PDFium use Mozilla's in-tree copy of zlip instead of its own copy.", "author": "jwatt@jwatt.org", "id": 12435584, "time": "2017-06-28T22:56:40Z"}, {"text": "Comment on attachment 8881989\nBug 1368948: [1/7] Add a script to update PDFium from upstream. (v3)\n\nReview of attachment 8881989:\n-----------------------------------------------------------------\n\nLooks good. Thank you.", "author": "jwatt@jwatt.org", "id": 12435610, "time": "2017-06-28T23:01:17Z"}, {"text": "Created attachment 8882057\nBug 1368948: [2/7] Add patch files for PDFium. (v3)\n\naddress comment 85 except for GDI+ one.", "author": "brsun@mozilla.com", "id": 12436002, "time": "2017-06-29T00:52:08Z"}, {"text": "Comment on attachment 8882057\nBug 1368948: [2/7] Add patch files for PDFium. (v3)\n\nThanks.", "author": "jwatt@jwatt.org", "id": 12436041, "time": "2017-06-29T01:21:54Z"}, {"text": "Comment on attachment 8881347\nBug 1368948: [3/7] Add PDfium files (chromium/3029) with patches.\n\nAs requested in person, please investigate removing the xfa, test and testing directories. This is quite a large amound of code and once it's in the mercurial history we have to pay the cost of having that forever. If we can avoid commiting those three directories to the repository that would be a good win.", "author": "jwatt@jwatt.org", "id": 12436042, "time": "2017-06-29T01:23:26Z"}, {"text": "By simply removing test, testing, and XFA folders locally, I still can build pdfium with the same moz.build. I will modify the script to remove these three folders programmatically.", "author": "brsun@mozilla.com", "id": 12436340, "time": "2017-06-29T08:07:33Z"}, {"text": "Created attachment 8882133\nLog of build errors in GDI header files when building with mozilla-config.h which defines WIN32_LEAN_AND_MEAN.\n\n> > +Bug 1368948: Include objidl.h between windows.h and gdiplus.h.\n> \n> It would be nice to have an explanation of *why* we do this. Not just\n> \"because this causes a build error\", but an explanation of why it causes a\n> build error for us but not for normal PDFium builds.\n> \n\nEven if <objidl.h> is not included explicitly, I can compile fx_win32_gdipext.cpp by using the following simple compiler command:\n$ cl.exe -Id:/Source/gecko/mozilla-central-working/modules/pdfium/pdfium -Id:/Source/gecko/mozilla-central-working/modules/freetype2/include -DNOMINMAX -EHsc -c d:/Source/gecko/mozilla-central-working/modules/pdfium/pdfium/core/fxge/win32/fx_win32_gdipext.cpp\n\nHowever, the command from our mach fails to compile the same file. Commands and errors are stored in this attached file.\n\nIt seems that this compile error is caused by our own build system. The most suspicious parts might be stl_wrappers (or system_wrappers?) and mozilla-config.h.", "author": "brsun@mozilla.com", "id": 12436504, "time": "2017-06-29T11:26:57Z"}, {"text": "Hi Mike,\n\nDo you have any quick idea about what might be wrong between <gdiplus.h> and <objidl.h> in our build system?", "author": "brsun@mozilla.com", "id": 12436512, "time": "2017-06-29T11:32:13Z"}, {"text": "I don't that exact version of the SDK at hand, so I can't tell what those errors are about. Did you try to start from the full command line and remove arguments until it compiles?", "author": "mh+mozilla@glandium.org", "id": 12436837, "time": "2017-06-29T14:39:53Z"}, {"text": "I can get the same error messages by using the following commands:\n$ cl.exe -c -Id:/Source/gecko/mozilla-central-working/obj-i686-pc-mingw32/modules/pdfium -Id:/Source/gecko/mozilla-central-working/modules/pdfium/pdfium -Id:/Source/gecko/mozilla-central-working/modules/freetype2/include -Id:/Source/gecko/mozilla-central-working/obj-i686-pc-mingw32/dist/include -FI d:/Source/gecko/mozilla-central-working/obj-i686-pc-mingw32/mozilla-config.h d:/Source/gecko/mozilla-central-working/modules/pdfium/pdfium/core/fxge/win32/fx_win32_gdipext.cpp\n\nNot sure about why, but it is related to mozilla-config.h.", "author": "brsun@mozilla.com", "id": 12437976, "time": "2017-06-29T20:33:24Z"}, {"text": "Can you pinpoint what part of mozilla-config.h causes that?", "author": "mh+mozilla@glandium.org", "id": 12437998, "time": "2017-06-29T20:37:35Z"}, {"text": "I think I found the point...\n\n#define WIN32_LEAN_AND_MEAN 1", "author": "brsun@mozilla.com", "id": 12438199, "time": "2017-06-29T21:20:05Z"}, {"text": "Makes sense. I don't think there's a better workaround than your patch, but at least, you can add a comment that it's because of WIN32_LEAN_AND_MEAN. The alternative would be to patch to #undef it, which I guess would be more self-explanatory.", "author": "mh+mozilla@glandium.org", "id": 12438228, "time": "2017-06-29T21:27:32Z"}, {"text": "I'll use #undef approach.", "author": "brsun@mozilla.com", "id": 12438275, "time": "2017-06-29T21:39:45Z"}, {"text": "Created attachment 8882376\nBug 1368948: [2/7] Add patch files for PDFium. (v4)\n\nHi Mike and Jonathan,\n\nI've update GDI+ part with #undef approach. Would you like to have a look on it?", "author": "brsun@mozilla.com", "id": 12438432, "time": "2017-06-29T22:19:10Z"}, {"text": "Created attachment 8882380\nBug 1368948: [3/7] Add PDfium files (chromium/3029) with patches. (v2)\n\naddress comment 89 to remove three folders (i.e. test, testing, xfa) from pdfium directory.", "author": "brsun@mozilla.com", "id": 12438445, "time": "2017-06-29T22:21:58Z"}, {"text": "Created attachment 8882385\nBug 1368948: [1/7] Add a script to update PDFium from upstream. (v4)\n\nlet the update script to remove more folders from pdfium (i.e. test, testing, xfa)", "author": "brsun@mozilla.com", "id": 12438455, "time": "2017-06-29T22:23:21Z"}, {"text": "Comment on attachment 8882385\nBug 1368948: [1/7] Add a script to update PDFium from upstream. (v4)\n\nReview of attachment 8882385:\n-----------------------------------------------------------------\n\nThanks!", "author": "jwatt@jwatt.org", "id": 12438576, "time": "2017-06-29T22:53:49Z"}, {"text": "Comment on attachment 8882133\nLog of build errors in GDI header files when building with mozilla-config.h which defines WIN32_LEAN_AND_MEAN.\n\nNo need to obsolete this file. It's useful to have this log visible in the attachments list.", "author": "jwatt@jwatt.org", "id": 12438660, "time": "2017-06-29T23:14:43Z"}, {"text": "Created attachment 8882432\nBug 1368948: [2/7] Add patch files for PDFium. (v5)\n\nHi Jonathan,\n\nComments for the patch of GDI+ build errors are added within this patch.", "author": "brsun@mozilla.com", "id": 12438807, "time": "2017-06-29T23:49:58Z"}, {"text": "Created attachment 8882433\nBug 1368948: [2/7] Add patch files for PDFium. (v5.1)\n\nThe real v5 version", "author": "brsun@mozilla.com", "id": 12438818, "time": "2017-06-29T23:53:34Z"}, {"text": "Comment on attachment 8882433\nBug 1368948: [2/7] Add patch files for PDFium. (v5.1)\n\nReview of attachment 8882433:\n-----------------------------------------------------------------\n\nLooks good. Land it! :)\n\n::: modules/pdfium/patches/bug1368948_gdiplus_prerequisite.patch\n@@ +3,5 @@\n> +# Date 1498779115 25200\n> +#      Thu Jun 29 16:31:55 2017 -0700\n> +# Node ID 3c3a40bcfaaaefe68be48d06782034f99cc99f33\n> +# Parent  003a1581ff72b5879af971aab6de87f69adb9145\n> +Bug 1368948: Undefining WIN32_LEAN_AND_MEAN when building PDFium to avoid build errors in GDI+ headers.\n\nMake that \"Undefine\" instead of \"Undefining\".", "author": "jwatt@jwatt.org", "id": 12438869, "time": "2017-06-30T00:04:53Z"}, {"text": "Created attachment 8882450\nBug 1368948: [1/7] Add a script to update PDFium from upstream; r=glandium, r=jwatt.", "author": "brsun@mozilla.com", "id": 12438934, "time": "2017-06-30T00:28:56Z"}, {"text": "Created attachment 8882451\nBug 1368948: [2/7] Add patch files for PDFium; f=glandium, r=jwatt.", "author": "brsun@mozilla.com", "id": 12438937, "time": "2017-06-30T00:29:28Z"}, {"text": "Created attachment 8882452\nBug 1368948: [3/7] Add PDfium files (chromium/3029) with patches; r=jwatt.", "author": "brsun@mozilla.com", "id": 12438938, "time": "2017-06-30T00:30:21Z"}, {"text": "Created attachment 8882453\nBug 1368948: [4/7] Add license notices for PDFium and its dependent libraries; r=gerv.", "author": "brsun@mozilla.com", "id": 12438942, "time": "2017-06-30T00:31:05Z"}, {"text": "Created attachment 8882454\nBug 1368948: [5/7] Suppress clang-plugin errors; r=Ehsan.", "author": "brsun@mozilla.com", "id": 12438945, "time": "2017-06-30T00:31:36Z"}, {"text": "Created attachment 8882455\nBug 1368948: [6/7] Build freetype when enabling SkiaPDF on Windows; r=glandium.", "author": "brsun@mozilla.com", "id": 12438946, "time": "2017-06-30T00:32:06Z"}, {"text": "Created attachment 8882457\nBug 1368948: [7/7] Add moz.build for PDFium; r=glandium.", "author": "brsun@mozilla.com", "id": 12438950, "time": "2017-06-30T00:32:40Z"}, {"text": "Build results on the try server: https://treeherder.mozilla.org/#/jobs?repo=try&revision=0b5f09dab20eb4fe53ec25eed051374aa8cca070", "author": "brsun@mozilla.com", "id": 12439328, "time": "2017-06-30T07:49:00Z"}, {"text": "Pushed by brsun@mozilla.com:\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/4ddf08e4cb5b\n[1/7] Add a script to update PDFium from upstream. r=glandium, r=jwatt\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/f4e545936d90\n[2/7] Add patch files for PDFium. f=glandium, r=jwatt\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/aed6e75d9b0d\n[3/7] Add PDfium files (chromium/3029) with patches. r=jwatt\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/9adc0e3d0d91\n[4/7] Add license notices for PDFium and its dependent libraries. r=gerv\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/95400bc93b90\n[5/7] Suppress clang-plugin errors. r=Ehsan\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/31e471d5b289\n[6/7] Build freetype when enabling SkiaPDF on Windows. r=glandium\nhttps://hg.mozilla.org/integration/mozilla-inbound/rev/cd4549c33575\n[7/7] Add moz.build for PDFium. r=glandium", "author": "pulsebot@bots.tld", "id": 12439334, "time": "2017-06-30T07:52:31Z"}, {"text": "https://treeherder.mozilla.org/#/jobs?repo=mozilla-inbound&revision=cd4549c335752aca80ac293015d0b85ada94c332", "author": "brsun@mozilla.com", "id": 12439339, "time": "2017-06-30T07:55:53Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/4ddf08e4cb5b\nhttps://hg.mozilla.org/mozilla-central/rev/f4e545936d90\nhttps://hg.mozilla.org/mozilla-central/rev/aed6e75d9b0d\nhttps://hg.mozilla.org/mozilla-central/rev/9adc0e3d0d91\nhttps://hg.mozilla.org/mozilla-central/rev/95400bc93b90\nhttps://hg.mozilla.org/mozilla-central/rev/31e471d5b289\nhttps://hg.mozilla.org/mozilla-central/rev/cd4549c33575", "author": "philringnalda@gmail.com", "id": 12441904, "time": "2017-07-02T00:41:59Z"}, {"text": "Could we make them use UNIFIED_SOURCES rather than SOURCES? Would that slightly mitigate the build time hit?", "author": "xidorn+moz@upsuper.org", "id": 12447565, "time": "2017-07-05T07:13:43Z"}, {"text": "I will try it to see how much we can earn by using UNIFIED_SOURCES.", "author": "brsun@mozilla.com", "id": 12447625, "time": "2017-07-05T08:00:08Z"}], "id": 1368948, "priority": "P1", "cc": ["bmo@upshifts.org", "bugs@junglecode.net", "ehsan@mozilla.com", "ellee@mozilla.com", "fatseng@mozilla.com", "howareyou322@gmail.com", "jwatt@jwatt.org", "mcastelluccio@mozilla.com", "mh+mozilla@glandium.org", "rtanglao@mozilla.com", "xidorn+moz@upsuper.org"], "cf_crash_signature": "", "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": ["https://bugzilla.mozilla.org/show_bug.cgi?id=1345330", "https://bugzilla.mozilla.org/show_bug.cgi?id=1372842"], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1347444, 1372113, 1378050, 1378608], "qa_contact": "", "creation_time": "2017-05-31T08:24:05Z", "cf_status_firefox_esr52": "---", "component": "Printing: Output", "assigned_to_detail": {"email": "brsun@mozilla.com", "id": 477932, "name": "brsun@mozilla.com", "real_name": "Bruce Sun [:brsun]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "mozilla56", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "brsun@mozilla.com", "id": 477932, "name": "brsun@mozilla.com", "real_name": "Bruce Sun [:brsun]"}, "whiteboard": "", "mentors": [], "summary": "Integrate PDFium for converting EMF on Windows", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-02-16T21:49:49Z", "assigned_to": "brsun@mozilla.com", "is_open": false, "history": [{"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1345330"}], "who": "brsun@mozilla.com", "when": "2017-05-31T08:27:16Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mh+mozilla@glandium.org"}], "who": "mh+mozilla@glandium.org", "when": "2017-05-31T08:38:45Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1347444"}], "who": "brsun@mozilla.com", "when": "2017-06-01T08:42:03Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1358023"}], "who": "brsun@mozilla.com", "when": "2017-06-02T02:48:36Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P1"}, {"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "", "field_name": "cc", "added": "aschen@mozilla.com"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "brsun@mozilla.com"}], "who": "bmo@upshifts.org", "when": "2017-06-03T14:53:14Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jwatt@jwatt.org"}], "who": "jwatt@jwatt.org", "when": "2017-06-07T15:34:52Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-08T02:29:47Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "howareyou322@gmail.com"}], "who": "howareyou322@gmail.com", "when": "2017-06-08T07:24:25Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1372113"}], "who": "fatseng@mozilla.com", "when": "2017-06-12T09:55:55Z"}, {"changes": [{"removed": "needinfo?(jwatt@jwatt.org)", "field_name": "flagtypes.name", "added": ""}], "who": "jwatt@jwatt.org", "when": "2017-06-12T12:55:53Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "bugs@junglecode.net"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(brsun@mozilla.com)"}], "who": "bugs@junglecode.net", "when": "2017-06-13T02:19:18Z"}, {"changes": [{"removed": "needinfo?(brsun@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "brsun@mozilla.com", "when": "2017-06-13T02:31:01Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8875201, "added": "1"}], "who": "brsun@mozilla.com", "when": "2017-06-13T08:35:10Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8875202, "added": "1"}], "who": "brsun@mozilla.com", "when": "2017-06-13T08:35:26Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8876969, "added": "1"}], "who": "brsun@mozilla.com", "when": "2017-06-13T08:35:43Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877046, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-13T08:50:23Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877047, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-13T08:58:31Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877048, "added": "review?(mh+mozilla@glandium.org), feedback?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-13T08:59:21Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ellee@mozilla.com"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877049, "added": "review?(ellee@mozilla.com)"}], "who": "brsun@mozilla.com", "when": "2017-06-13T09:10:41Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877050, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-13T09:16:46Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877051, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-13T09:25:59Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877052, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-13T09:27:07Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "gerv@mozilla.org"}, {"field_name": "flagtypes.name", "removed": "review?(ellee@mozilla.com)", "attachment_id": 8877049, "added": "review?(gerv@mozilla.org)"}], "who": "ellee@mozilla.com", "when": "2017-06-13T21:00:43Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877046, "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877047, "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org), feedback?(jwatt@jwatt.org)", "attachment_id": 8877048, "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(gerv@mozilla.org)", "attachment_id": 8877049, "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877050, "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877051, "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877052, "added": ""}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:26:07Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877046, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:32:05Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877047, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:32:22Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877048, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:32:59Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877049, "added": "review?(gerv@mozilla.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:33:22Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877050, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:33:40Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877051, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:34:17Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877052, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-14T06:34:34Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8877464, "added": "review?(brsun@mozilla.com)"}], "who": "howareyou322@gmail.com", "when": "2017-06-14T08:07:24Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gerv@mozilla.org)", "attachment_id": 8877049, "added": "review+"}], "who": "gerv@mozilla.org", "when": "2017-06-14T08:25:54Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877464, "added": "1"}, {"field_name": "flagtypes.name", "removed": "review?(brsun@mozilla.com)", "attachment_id": 8877464, "added": ""}], "who": "howareyou322@gmail.com", "when": "2017-06-14T08:40:50Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1372842"}], "who": "brsun@mozilla.com", "when": "2017-06-14T09:13:56Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(mh+mozilla@glandium.org)"}], "who": "bmo@upshifts.org", "when": "2017-06-19T07:38:02Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877046, "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2017-06-20T06:42:04Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877047, "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2017-06-20T06:48:47Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877048, "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2017-06-20T06:51:44Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ehsan@mozilla.com"}, {"removed": "needinfo?(mh+mozilla@glandium.org)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877050, "added": "review?(ehsan@mozilla.com)"}], "who": "mh+mozilla@glandium.org", "when": "2017-06-20T06:56:50Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877051, "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2017-06-20T06:59:37Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8877052, "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2017-06-20T07:03:32Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-20T08:24:32Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(ehsan@mozilla.com)", "attachment_id": 8877050, "added": "review+"}], "who": "ehsan@mozilla.com", "when": "2017-06-20T22:40:18Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(aschen@mozilla.com), needinfo?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-21T06:26:46Z"}, {"changes": [{"removed": "needinfo?(aschen@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "bmo@upshifts.org", "when": "2017-06-22T06:46:43Z"}, {"changes": [{"removed": "needinfo?(jwatt@jwatt.org)", "field_name": "flagtypes.name", "added": ""}], "who": "jwatt@jwatt.org", "when": "2017-06-22T11:43:05Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1349064"}], "who": "bmo@upshifts.org", "when": "2017-06-23T02:51:47Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8880689, "added": "feedback?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-23T03:58:42Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "fatseng@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(fatseng@mozilla.com)"}], "who": "brsun@mozilla.com", "when": "2017-06-23T07:03:31Z"}, {"changes": [{"removed": "needinfo?(fatseng@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "fatseng@mozilla.com", "when": "2017-06-23T08:31:01Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877046, "added": "1"}, {"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8880689, "added": "1"}, {"field_name": "flagtypes.name", "removed": "feedback?(mh+mozilla@glandium.org)", "attachment_id": 8880689, "added": ""}, {"removed": "needinfo?(mh+mozilla@glandium.org)", "field_name": "flagtypes.name", "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881345, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-27T06:41:23Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877047, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881346, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-27T06:46:13Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877048, "added": "1"}, {"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877089, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881347, "added": "review?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-27T06:51:08Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877049, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881348, "added": "review?(gerv@mozilla.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-27T06:54:27Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881349, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-27T06:56:01Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877051, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881350, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-27T06:57:28Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877052, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881351, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-27T07:03:20Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8877050, "added": "1"}], "who": "brsun@mozilla.com", "when": "2017-06-27T07:03:37Z"}, {"changes": [{"removed": "gerv@mozilla.org", "field_name": "cc", "added": ""}], "who": "gerv@mozilla.org", "when": "2017-06-27T13:33:38Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(gerv@mozilla.org)", "attachment_id": 8881348, "added": "review+"}], "who": "gerv@mozilla.org", "when": "2017-06-27T13:36:33Z"}, {"changes": [{"field_name": "attachments.ispatch", "removed": "0", "attachment_id": 8881347, "added": "1"}, {"field_name": "attachments.mimetype", "removed": "application/x-zip-compressed", "attachment_id": 8881347, "added": "text/plain"}], "who": "jwatt@jwatt.org", "when": "2017-06-27T14:32:59Z"}, {"changes": [{"field_name": "attachments.ispatch", "removed": "1", "attachment_id": 8881347, "added": "0"}], "who": "jwatt@jwatt.org", "when": "2017-06-27T14:33:34Z"}, {"changes": [{"field_name": "attachments.mimetype", "removed": "text/plain", "attachment_id": 8881347, "added": "application/x-zip-compressed"}], "who": "brsun@mozilla.com", "when": "2017-06-27T17:43:28Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1376057"}], "who": "brsun@mozilla.com", "when": "2017-06-27T18:42:24Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8881345, "added": "feedback+"}], "who": "mh+mozilla@glandium.org", "when": "2017-06-28T17:12:00Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8881346, "added": "feedback+"}], "who": "mh+mozilla@glandium.org", "when": "2017-06-28T17:15:32Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8881350, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-06-28T17:17:51Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8881351, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-06-28T17:22:37Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881345, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881840, "added": "review?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-28T17:55:07Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881346, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881841, "added": "review?(jwatt@jwatt.org), feedback+"}], "who": "brsun@mozilla.com", "when": "2017-06-28T17:56:37Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881351, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881843, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-28T17:57:27Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org)", "attachment_id": 8881840, "added": "review+"}], "who": "mh+mozilla@glandium.org", "when": "2017-06-28T17:59:28Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881840, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8881989, "added": "review?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-28T22:42:42Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jwatt@jwatt.org)", "attachment_id": 8881841, "added": "review+"}], "who": "jwatt@jwatt.org", "when": "2017-06-28T22:56:40Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jwatt@jwatt.org)", "attachment_id": 8881989, "added": "review+"}], "who": "jwatt@jwatt.org", "when": "2017-06-28T23:01:17Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881841, "added": "1"}], "who": "brsun@mozilla.com", "when": "2017-06-29T00:52:08Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882057, "added": "review+"}], "who": "jwatt@jwatt.org", "when": "2017-06-29T01:21:54Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jwatt@jwatt.org)", "attachment_id": 8881347, "added": ""}], "who": "jwatt@jwatt.org", "when": "2017-06-29T01:23:26Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(mh+mozilla@glandium.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-29T11:32:13Z"}, {"changes": [{"removed": "needinfo?(mh+mozilla@glandium.org)", "field_name": "flagtypes.name", "added": ""}], "who": "mh+mozilla@glandium.org", "when": "2017-06-29T14:39:53Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8882057, "added": "1"}, {"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8882133, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882376, "added": "review?(mh+mozilla@glandium.org), review?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-29T22:19:10Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881347, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882380, "added": "review?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-29T22:21:58Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881989, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882385, "added": "review?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-29T22:23:21Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jwatt@jwatt.org)", "attachment_id": 8882385, "added": "review+"}], "who": "jwatt@jwatt.org", "when": "2017-06-29T22:53:49Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jwatt@jwatt.org)", "attachment_id": 8882380, "added": "review+"}], "who": "jwatt@jwatt.org", "when": "2017-06-29T22:54:47Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "1", "attachment_id": 8882133, "added": "0"}, {"field_name": "attachments.description", "removed": "fx_win32_gdipext_cpp_compile_errors.txt", "attachment_id": 8882133, "added": "Log of build errors in GDI header files when building with mozilla-config.h which defines WIN32_LEAN_AND_MEAN."}], "who": "jwatt@jwatt.org", "when": "2017-06-29T23:14:43Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8882376, "added": "1"}, {"field_name": "flagtypes.name", "removed": "review?(mh+mozilla@glandium.org), review?(jwatt@jwatt.org)", "attachment_id": 8882376, "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882432, "added": "review?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-29T23:49:58Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8882432, "added": "1"}, {"field_name": "flagtypes.name", "removed": "review?(jwatt@jwatt.org)", "attachment_id": 8882432, "added": ""}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882433, "added": "review?(jwatt@jwatt.org)"}], "who": "brsun@mozilla.com", "when": "2017-06-29T23:53:34Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(jwatt@jwatt.org)", "attachment_id": 8882433, "added": "review+"}], "who": "jwatt@jwatt.org", "when": "2017-06-30T00:04:53Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8882385, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882450, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:28:56Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8882433, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882451, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:29:28Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8882380, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882452, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:30:21Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881348, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882453, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:31:05Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881349, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882454, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:31:36Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881350, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882455, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:32:06Z"}, {"changes": [{"field_name": "attachments.isobsolete", "removed": "0", "attachment_id": 8881843, "added": "1"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8882457, "added": "review+"}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:32:40Z"}, {"changes": [{"removed": "1349064", "field_name": "depends_on", "added": ""}], "who": "brsun@mozilla.com", "when": "2017-06-30T00:45:26Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla56"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2017-07-02 00:41:59"}, {"removed": "---", "field_name": "cf_status_firefox56", "added": "fixed"}], "who": "philringnalda@gmail.com", "when": "2017-07-02T00:41:59Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1378050"}], "who": "igoldan@mozilla.com", "when": "2017-07-04T05:58:55Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "xidorn+moz@upsuper.org"}], "who": "xidorn+moz@upsuper.org", "when": "2017-07-05T07:13:43Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1378608"}], "who": "brsun@mozilla.com", "when": "2017-07-06T02:31:47Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1407027"}], "who": "dveditz@mozilla.com", "when": "2017-10-09T20:30:44Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "mcastelluccio@mozilla.com"}], "who": "mcastelluccio@mozilla.com", "when": "2017-10-13T12:39:50Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1416992"}], "who": "mh+mozilla@glandium.org", "when": "2017-11-14T07:54:50Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "rtanglao@mozilla.com"}], "who": "rtanglao@mozilla.com", "when": "2018-02-16T21:49:49Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}