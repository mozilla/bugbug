{"cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Components", "creator": "smani@mozilla.com", "cc": ["april@mozilla.com", "atoll@mozilla.com", "chris.j.thompson@gmail.com", "dkeeler@mozilla.com", "hskupin@gmail.com", "jan@ikenmeyer.eu", "jbryner@mozilla.com", "jjones@mozilla.com", "mjzffr@gmail.com", "ncsoregi@mozilla.com"], "depends_on": [1312632, 1435733, 1459910], "creation_time": "2017-11-06T10:50:00Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "summary": "Migrate SSL related Firefox UI tests away from mozqa.com to badssl.com [except EV certificate tests]", "cf_last_resolved": "2018-05-08T12:57:44Z", "attachments": [{"creator": "hskupin@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-04T19:01:48Z", "type_id": 4, "creation_date": "2018-05-03T19:42:16Z", "id": 1752417, "setter": "mjzffr@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8943594}, {"creator": "hskupin@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-04T19:02:25Z", "type_id": 4, "creation_date": "2018-05-03T14:15:21Z", "id": 1752232, "setter": "mjzffr@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8972871}], "assigned_to_detail": {"email": "hskupin@gmail.com", "id": 76551, "name": "hskupin@gmail.com", "real_name": "Henrik Skupin (:whimboo)"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "qa_contact_detail": {"email": "hskupin@gmail.com", "id": 76551, "name": "hskupin@gmail.com", "real_name": "Henrik Skupin (:whimboo)"}, "comment_count": 67, "comments": [{"text": "Tracker bug to make sure by the end of Q1 2018, all of the following SSL tests for the Firefox UI have been moved away from the mozqa.com subdomain. \n\nDavid Keeler will be leading this effort. \n\nThe list of tests are : \n\nhttps://dxr.mozilla.org/mozilla-central/source/testing/firefox-ui/tests/functional/security \n\nThe list of domains from the tests above are :\n\nno-ssl.mozqa.com\nssl-dv.mozqa.com\nssl-ev.mozqa.com\nssl-expired.mozqa.com\nssl-ov.mozqa.com\nssl-unknownissuer.mozqa.com\ntlsv1-0.mozqa.com\n\n\nIn addition, Webops has the following configured on our loadbalancers as well :\n\ndv.ssl.mozqa.com.\nssl-md5.mozqa.com.\nssl-selfsigned.mozqa.com.\nsslv2.mozqa.com.\nsslv3.mozqa.com.\ntlsv1-1.mozqa.com.\ntlsv1-2.mozqa.com.", "author": "smani@mozilla.com", "id": 12820533, "time": "2017-11-06T10:50:00Z"}, {"text": "NI'ing :keeler for information and ack for Q1 2018 planning. Thanks!", "author": "smani@mozilla.com", "id": 12820536, "time": "2017-11-06T10:50:36Z"}, {"text": "I assume that we could split this work up into different sub bugs, which could be done as mentored bugs if all the information is present for contributors. Before that I would like to hear which direction we would like to go for these tests.", "author": "hskupin@gmail.com", "id": 12820605, "time": "2017-11-06T11:24:39Z"}, {"text": "Note that many of these tests already have browser-chrome analogues; the duplicates should just be deleted.", "author": "jjones@mozilla.com", "id": 12825008, "time": "2017-11-07T19:17:31Z"}, {"text": "(In reply to Shyam Mani [:fox2mike] from comment #0)\n> no-ssl.mozqa.com\n\nPretty easy - mochitests can already access some predefined http domains (e.g. http://example.com) - we just need to make sure this works in this test suite.\n\n> ssl-dv.mozqa.com\n\nSimilarly, mochitests can already access some example https \"hosts\" - we should see if something from https://dxr.mozilla.org/mozilla-central/rev/2535bad09d720e71a982f3f70dd6925f66ab8ec7/build/pgo/server-locations.txt will work\n\n> ssl-ev.mozqa.com\n\nA little more difficult. There is a framework in our xpcshell tests to enable an EV root in debug-only builds. We would have to import it into the mochitest server or something.\n\n> ssl-expired.mozqa.com\n\nIf the ssl-dv.mozqa.com test works, we can replace this with https://expired.example.com\n\n> ssl-ov.mozqa.com\n\nThis is unnecessary and can be removed.\n\n> ssl-unknownissuer.mozqa.com\n\nI don't think there's a corresponding testcase in server-locations.txt, but it would be fairly easy to make one.\n\n> tlsv1-0.mozqa.com\n\nhttps://tls1.example.com\n\nFWIW, some of this functionality is already covered in https://dxr.mozilla.org/mozilla-central/rev/2535bad09d720e71a982f3f70dd6925f66ab8ec7/browser/base/content/test/about/browser_aboutCertError.js", "author": "dkeeler@mozilla.com", "id": 12825375, "time": "2017-11-07T21:10:22Z"}, {"text": "Had a chat with April, she's ok with us switching tests to badssl.com\n\nHenrik,\n\nCan you please switch the ones we can to badssl.com and let us know in the bug and then I can disable those endpoints on the load balancers. \n\nThanks!", "author": "smani@mozilla.com", "id": 12972761, "time": "2018-01-16T19:02:49Z"}, {"text": "If there are tests that you need that aren't yet in badssl.com, let me know and I can try to make that happen. Alternatively, feel free to open up an issue:\n\nhttps://github.com/chromium/badssl.com/issues\n\n:jeff usually lets me work on it without too much issue. Last quarter I spent a bunch of time working on client certificates tests for platform security anyways.  :)", "author": "april@mozilla.com", "id": 12972934, "time": "2018-01-16T20:09:32Z"}, {"text": "(In reply to David Keeler [:keeler] (use needinfo) from comment #4)\n> > no-ssl.mozqa.com\n> \n> Pretty easy - mochitests can already access some predefined http domains\n> (e.g. http://example.com) - we just need to make sure this works in this\n> test suite.\n \nI will use http://http.badssl.com/\n\n> > ssl-dv.mozqa.com\n> > ssl-ev.mozqa.com\n\nFor both we would need an equivalent given that none exist yet on badssl.com. April, could you check if this is possible?\n\n> > ssl-expired.mozqa.com\n> \n> If the ssl-dv.mozqa.com test works, we can replace this with\n> https://expired.example.com\n\nI will use https://expired.badssl.com/\n\n> > ssl-ov.mozqa.com\n> \n> This is unnecessary and can be removed.\n\ndone\n\n> > ssl-unknownissuer.mozqa.com\n> \n> I don't think there's a corresponding testcase in server-locations.txt, but\n> it would be fairly easy to make one.\n\nI will use https://self-signed.badssl.com/ here.\n\n> > tlsv1-0.mozqa.com\n> \n> https://tls1.example.com\n\nI will use https://tls-v1-0.badssl.com:1010/\n\n\nAdditionally we have https://mozqa.com/data/firefox/security/mixed_content_blocked/index.html which covers a couple of unsecure inclusions of elements. I somewhat miss parts of that on badssl.com. April, can you please also have a look here?", "author": "hskupin@gmail.com", "id": 12979030, "time": "2018-01-18T13:32:05Z"}, {"text": "Created attachment 8943594\nBug 1414776 - [fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org.\n\nReview commit: https://reviewboard.mozilla.org/r/213966/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/213966/", "author": "hskupin@gmail.com", "id": 12979034, "time": "2018-01-18T13:36:10Z"}, {"text": "(In reply to Henrik Skupin (:whimboo) from comment #7)\n> (In reply to David Keeler [:keeler] (use needinfo) from comment #4)\n> > > ssl-dv.mozqa.com\n> > > ssl-ev.mozqa.com\n> \n> For both we would need an equivalent given that none exist yet on\n> badssl.com. April, could you check if this is possible?\n\nFor ssl-dv.mozqa.com, you should be able to use pretty much any badssl domain name that successfully connects. Maybe https://mozilla-modern.badssl.com/ would be appropriate?", "author": "dkeeler@mozilla.com", "id": 12979793, "time": "2018-01-18T18:04:25Z"}, {"text": "I would probably recommend https://mozilla-intermediate.badssl.com/\n\nIt seems unlikely that we'll ever recommend EV certs at any configuration level, but if we did it would probably start at the Modern level.", "author": "april@mozilla.com", "id": 12979809, "time": "2018-01-18T18:08:33Z"}, {"text": "Oh, as for EV certs, we would have to:\n\na) change up the badssl code to generate EV certs (medium effort)\nb) buy (or ask Comodo or someone if they would donate) a publicly trusted EV cert\n\nI'll check with my Google cohort to see if he has any opposition to the latter. I don't know why he would, but funding might be awkward. I have confidence that we'll figure it out somehow.", "author": "april@mozilla.com", "id": 12979815, "time": "2018-01-18T18:10:33Z"}, {"text": "So Lucas Garron (my cohort at Google) has transitioned support for BadSSL to a different engineer, since he's no longer working at Google. I just sent them an introductory email and so hopefully I can get them on this bug as well.", "author": "april@mozilla.com", "id": 12980576, "time": "2018-01-18T22:20:08Z"}, {"text": "I am CC'ing Chris Thompson, the Google engineer who will be assisting me with badssl.com.  :)", "author": "april@mozilla.com", "id": 12981973, "time": "2018-01-19T15:33:22Z"}, {"text": "Comment on attachment 8943594\nBug 1414776 - [fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/213966/diff/1-2/", "author": "hskupin@gmail.com", "id": 13030451, "time": "2018-02-09T14:12:08Z"}, {"text": "April, do you have any news regarding the EV certificate? Everything else is done now.", "author": "hskupin@gmail.com", "id": 13030453, "time": "2018-02-09T14:13:01Z"}, {"text": "I do! I contacted my friends over at Comodo, and it sounds as if they would be happy to issue a gratis EV certificate. They can't, however, relax the EV certification requirements. As such, Chris Thompson has reached out to Google's certificate management and legal departments to help gather up the necessary paperwork.\n\nIt's a bit awkward, because BadSSL is an open-source Apache licensed project, hosted by Google and kept under the Chromium GitHub repo, but it's also been jointly run by Mozilla and Google.\n\nI have confidence that all these things can be worked out (especially as Google owns the domain), but I can't give any strict ETAs because it's currently out of my hands.\n\nIf it's necessary to have a site to test against in the interim, I would recommend either mozilla.org (which has an EV cert until November of 2018) or BMO (which has an EV cert until November 2019).\n\nI'm shooting for getting EV support in this quarter, but again there's not much that I can do at this point. My goal is to get EV certs working on badssl.test (aka the docker site the codebase generates) sometime in the next couple weeks.", "author": "april@mozilla.com", "id": 13031175, "time": "2018-02-09T17:34:58Z"}, {"text": "\"ssl-ev.mozqa.com\" is not difficult to continue operating from a technical standpoint, as compared to things like \"ssl-md5\" and \"sslv3\", since the industry will continue to support EV for some time to come. So it should continue working until it's not needed anymore, without being a burden to IT.", "author": "atoll@mozilla.com", "id": 13031182, "time": "2018-02-09T17:37:28Z"}, {"text": "Oh, perfect then. That works too. I will still work on getting extended-validation.badssl.com working ASAP.  :)", "author": "april@mozilla.com", "id": 13031186, "time": "2018-02-09T17:38:41Z"}, {"text": "(In reply to Richard Soderberg  [:atoll] [:\ufffd] from comment #17)\n> industry will continue to support EV for some time to come. So it should\n> continue working until it's not needed anymore, without being a burden to IT.\n\nWell, you mean as long as the mozqa.com host has not been decommissioned. I would really like to make the change for the ev tests to switch to something else, and get it landed for Firefox 60 which will be the next ESR release. Then we can ride the trains and then on 2018-08-20 all branches will have the change, and the Firefox 52ESR branch is no longer supported. I think that should fit nicely in our time schedule, right?", "author": "hskupin@gmail.com", "id": 13038661, "time": "2018-02-13T12:58:47Z"}, {"text": "There\u2019s still no-ssl (bug 1336254), right?", "author": "atoll@mozilla.com", "id": 13038847, "time": "2018-02-13T14:20:50Z"}, {"text": "badssl.com has http.badssl.com, which might cover that use case?", "author": "april@mozilla.com", "id": 13039049, "time": "2018-02-13T15:48:01Z"}, {"text": "Just submitted a PR for the test version of the EV site:\n\nhttps://github.com/chromium/badssl.com/pull/335", "author": "april@mozilla.com", "id": 13042301, "time": "2018-02-14T18:37:08Z"}, {"text": "(In reply to April King [:April] from comment #21)\n> badssl.com has http.badssl.com, which might cover that use case?\n\nYes, thank you Richard for reminding us on that case. It is already fixed in the update I uploaded 2 weeks ago.\n\n(In reply to Henrik Skupin (:whimboo) from comment #7)\n> Additionally we have\n> https://mozqa.com/data/firefox/security/mixed_content_blocked/index.html\n> which covers a couple of unsecure inclusions of elements. I somewhat miss\n> parts of that on badssl.com. April, can you please also have a look here?\n\nApril, I think you missed this one.", "author": "hskupin@gmail.com", "id": 13063383, "time": "2018-02-23T08:18:32Z"}, {"text": "badssl.com does have some mixed content tests, but there are a *lot* of them. Most of Tanvi's tests (and others) were moved here:\n\nhttps://mixed-content-tests-mozilla.org/\n\nNobody mentioned those particular tests, so I didn't really have any idea they needed a new home. If they're needed given what is on badssl.com and the above site, please let me know and I can try to move them onto mixed-content-tests-mozilla.org.", "author": "april@mozilla.com", "id": 13064234, "time": "2018-02-23T15:28:33Z"}, {"text": "Shyam, could you work with Henrik to respond to comment 24 and also file a MOC decom bug for the DNS+monitoring for the endpoints no longer in use? I saw active work today on ensuring that monitoring of e.g. ssl-md5 continues to work, but if we don't need some of them monitored anymore, let's let them know.", "author": "atoll@mozilla.com", "id": 13121823, "time": "2018-03-12T12:22:06Z"}, {"text": "Current DXR list of mozqa domains in use, for those just seeing this bug today:\n\nhttps://dxr.mozilla.org/mozilla-central/search?q=mozqa.com&redirect=false\n\n\n### these are all https\n\nmozqa.com\n\nssl-dv.mozqa.com\nssl-ev.mozqa.com\nssl-ov.mozqa.com\n\ntlsv1-0.mozqa.com\n\nssl-expired.mozqa.com\nssl-unknownissuer.mozqa.com\nssl-selfsigned.mozqa.com\n\n\n### this is not https\n\nno-ssl.mozqa.com", "author": "atoll@mozilla.com", "id": 13121830, "time": "2018-03-12T12:29:10Z"}, {"text": "(In reply to April King [:April] from comment #24)\n> badssl.com does have some mixed content tests, but there are a *lot* of\n> them. Most of Tanvi's tests (and others) were moved here:\n> \n> https://mixed-content-tests-mozilla.org/\n\nI see. I quickly checked and we miss the plugin and stylesheet cases as far as I see. Can you please check that and if necessary add new test files to that site? I'm happy to use that one if necessary.\n\nAlso how does it go along with the EV certificate?\n\n(In reply to Richard Soderberg  [:atoll] [:\ufffd] from comment #25)\n> Shyam, could you work with Henrik to respond to comment 24 and also file a\n\nYou can also set ni? to me. :) \n\n(In reply to Richard Soderberg  [:atoll] [:\ufffd] from comment #26)\n> Current DXR list of mozqa domains in use, for those just seeing this bug\n> today:\n> \n> https://dxr.mozilla.org/mozilla-central/search?q=mozqa.com&redirect=false\n\nAlso note that I will push a combined patch, which is attached but not finalized yet.", "author": "hskupin@gmail.com", "id": 13121956, "time": "2018-03-12T13:41:10Z"}, {"text": "No decoms will be possible until the changes are uplifted into ESR (either 52 or 60), so nothing for Shyam to do here for now.\n\nThe mct site autodeploys from https://github.com/mozilla/mixed-content-tests.git (which accepts pull requests) in case that simplifies things for y'all.", "author": "atoll@mozilla.com", "id": 13122056, "time": "2018-03-12T14:18:28Z"}, {"text": ":whimboo, when I setup mixed-content-tests, I copied everything that had existed already. I may still have the old codebase, but all I did was update a zillion links and move things into GitHub. Are you sure it was there before?\n\nI do have a plugin mixed content test that I wrote:\nhttps://mixed-object-loader.badsite.io/\n\nFeel free to use and/or copy that. It has a flash object loaded over HTTPS that makes an HTTP request.", "author": "april@mozilla.com", "id": 13125634, "time": "2018-03-13T17:10:22Z"}, {"text": "(In reply to April King [:April] from comment #29)\n> :whimboo, when I setup mixed-content-tests, I copied everything that had\n> existed already. I may still have the old codebase, but all I did was update\n> a zillion links and move things into GitHub. Are you sure it was there\n> before?\n\nIf you refer to https://mozqa.com/data/firefox/security/mixed_content_blocked/index.html then yes this page is around forever.\n\nSomething I didn't asked yet is actually do we have some automated tests in tree already, which might make this test obsolete? If not https://mixed-content-tests-mozilla.org/ has a huge number of tests, and I don't think that our tests should cover all those cases.\n\n> I do have a plugin mixed content test that I wrote:\n> https://mixed-object-loader.badsite.io/\n> \n> Feel free to use and/or copy that. It has a flash object loaded over HTTPS\n> that makes an HTTP request.\n\nNo, we don't use Flash. We would simply need a basic object node, which has a HTTP resource set for the data attribute.", "author": "hskupin@gmail.com", "id": 13144984, "time": "2018-03-21T10:26:23Z"}, {"text": "I'm not entirely familiar with all of what Tanvi's tests do, but it seems that is available here:\n\nhttps://mixed-content-tests-mozilla.org/tvyas/mixedboth.html", "author": "april@mozilla.com", "id": 13146405, "time": "2018-03-21T18:41:15Z"}, {"text": "(In reply to April King [:April] from comment #31)\n> I'm not entirely familiar with all of what Tanvi's tests do, but it seems\n> that is available here:\n> \n> https://mixed-content-tests-mozilla.org/tvyas/mixedboth.html\n\nNo, that is using Flash. In our case we have just:\n\n        var o = document.createElement(\"object\");\n        o.type = \"text/html\";\n        o.data = baseURL + \"/scripts/object.html\";\n        document.getElementById(\"result3\").appendChild(o);\n\nSo again, do we have automated tests somewhere running regularly against Firefox builds which test those features? If yes, how do those tests report results, and where are those visible?", "author": "hskupin@gmail.com", "id": 13182812, "time": "2018-04-05T11:47:04Z"}, {"text": "I have no idea, I actually just run and work on the public sites that are used for manual testing. Someone from seceng would have to answer that question for you.\n\nSorry!", "author": "april@mozilla.com", "id": 13216246, "time": "2018-04-18T18:23:32Z"}, {"text": "I worked with Henrik for a few minutes this morning and submitted a pull request containing the new content:\n\nhttps://github.com/mozilla/mixed-content-tests/pull/9", "author": "atoll@mozilla.com", "id": 13218773, "time": "2018-04-19T15:11:34Z"}, {"text": "The mixed content HTML testcase is available now:\nhttp://mixed-content-tests-mozilla.org/mozqa/mixed_content_blocked/\n\nI'm going to update this patch during this week.", "author": "hskupin@gmail.com", "id": 13243410, "time": "2018-04-30T15:29:52Z"}, {"text": "Comment on attachment 8943594\nBug 1414776 - [fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/213966/diff/2-3/", "author": "hskupin@gmail.com", "id": 13251971, "time": "2018-05-03T13:35:10Z"}, {"text": "While working on an updated patch I noticed that bug 1435733 made some changes in how mixed content is handled since Firefox 60. The preference `security.mixed_content.upgrade_display_content` has been set but never gets removed. This causes following tests to accidentally fail when run on their own. I will fix that with an additional commit on this patch series.", "author": "hskupin@gmail.com", "id": 13251981, "time": "2018-05-03T13:37:22Z"}, {"text": "(In reply to Henrik Skupin (:whimboo) from comment #7)\n> > > ssl-unknownissuer.mozqa.com\n> > \n> > I don't think there's a corresponding testcase in server-locations.txt, but\n> > it would be fairly easy to make one.\n> \n> I will use https://self-signed.badssl.com/ here.\n\nThis actually doesn't work because of: AssertionError: u'MOZILLA_PKIX_ERROR_SELF_SIGNED_CERT' != 'SEC_ERROR_UNKNOWN_ISSUER'\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=7792bfeedd5ad0799561fed6f7d1108dee257c13&selectedJob=176759692\n\nApril, I cannot find anything on badssl.com which corresponds to that. Do you have a suggestion?", "author": "hskupin@gmail.com", "id": 13252028, "time": "2018-05-03T13:54:29Z"}, {"text": "Created attachment 8972871\nBug 1414776 - [fxui] Reset security.mixed_content.upgrade_display_content preference for mixed content test.\n\nThis regressed by bug 1435733 which didn't clear the pref in tearDown of the test, causing\nfollowing tests to still have this preference set.\n\nReview commit: https://reviewboard.mozilla.org/r/241424/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/241424/", "author": "hskupin@gmail.com", "id": 13252045, "time": "2018-05-03T14:01:24Z"}, {"text": "You're probably looking for this one:\n\nhttps://untrusted-root.badssl.com/\n\nLet me know if that's not what you're looking for.  :)\n\nThanks!", "author": "april@mozilla.com", "id": 13252050, "time": "2018-05-03T14:02:48Z"}, {"text": "Yes! That's it! I will update the patch and we should have a final one now, except for the EV tests, which we decided can be done later.", "author": "hskupin@gmail.com", "id": 13252088, "time": "2018-05-03T14:13:08Z"}, {"text": "Comment on attachment 8943594\nBug 1414776 - [fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/213966/diff/3-4/", "author": "hskupin@gmail.com", "id": 13252096, "time": "2018-05-03T14:15:02Z"}, {"text": "Comment on attachment 8972871\nBug 1414776 - [fxui] Reset security.mixed_content.upgrade_display_content preference for mixed content test.\n\nReview request updated; see interdiff: https://reviewboard.mozilla.org/r/241424/diff/1-2/", "author": "hskupin@gmail.com", "id": 13252097, "time": "2018-05-03T14:15:02Z"}, {"text": "There is a high-frequent intermittent failure for the mixed script content test:\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=03204a3568005a9dbe4e8bd39c7438ee373fe359&selectedJob=176787597\n\nNot sure yet what's causing this. It might be something broken with the https://mixed-content-tests-mozilla.org/mozqa/mixed_content_blocked/ testcase.", "author": "hskupin@gmail.com", "id": 13252858, "time": "2018-05-03T18:17:53Z"}, {"text": "\"Timed out after 5.1 seconds with message: Insecure script from iFrame has been blocked\"\n\nMaybe we're just failing to parse the successful blocking of insecure content as a success?", "author": "atoll@mozilla.com", "id": 13252909, "time": "2018-05-03T18:31:45Z"}, {"text": "When I open https://mixed-content-tests-mozilla.org/mozqa/mixed_content_blocked/ I can already see that the script 2 gets loaded. So it's clearly a fault in that page and that a failure slipped in.", "author": "hskupin@gmail.com", "id": 13253047, "time": "2018-05-03T19:30:48Z"}, {"text": "Who can diagnose this fault and help you solve it? I'm not a web developer and this is way outside of Infosec's scope, so you'll need to tap resources not currently tracking this bug.", "author": "atoll@mozilla.com", "id": 13253068, "time": "2018-05-03T19:36:16Z"}, {"text": "The problem actually lays here:\nhttps://github.com/mozilla/mixed-content-tests/pull/9/files#diff-648ebb9199229c92597563fc86035dadR5\n\nRichard, could you come up with a follow-up fix to move this line to use \"http://\" instead?", "author": "hskupin@gmail.com", "id": 13253082, "time": "2018-05-03T19:39:48Z"}, {"text": "Comment on attachment 8943594\nBug 1414776 - [fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org.\n\nhttps://reviewboard.mozilla.org/r/213966/#review247374\n\n::: testing/firefox-ui/tests/functional/security/test_mixed_script_content_blocking.py:15\n(Diff revision 4)\n>  class TestMixedScriptContentBlocking(PuppeteerMixin, MarionetteTestCase):\n>  \n>      def setUp(self):\n>          super(TestMixedScriptContentBlocking, self).setUp()\n>  \n> -        self.url = 'https://mozqa.com/data/firefox/security/mixed_content_blocked/index.html'\n> +        self.url = 'https://mixed-content-tests-mozilla.org/mozqa/mixed_content_blocked/'\n\nNote to myself that we first have to get the failure in that remote page fixed before we can push this patch to autoland.", "author": "hskupin@gmail.com", "id": 13253094, "time": "2018-05-03T19:42:04Z"}, {"text": "Comment on attachment 8943594\nBug 1414776 - [fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org.\n\nhttps://reviewboard.mozilla.org/r/213966/#review247642", "author": "mjzffr@gmail.com", "id": 13255499, "time": "2018-05-04T19:01:48Z"}, {"text": "Comment on attachment 8972871\nBug 1414776 - [fxui] Reset security.mixed_content.upgrade_display_content preference for mixed content test.\n\nhttps://reviewboard.mozilla.org/r/241424/#review247644", "author": "mjzffr@gmail.com", "id": 13255501, "time": "2018-05-04T19:02:25Z"}, {"text": "https://github.com/mozilla/mixed-content-tests/pull/10 will fix the http:// once it's merged.", "author": "atoll@mozilla.com", "id": 13257063, "time": "2018-05-06T17:17:59Z"}, {"text": "The PR on github got landed. I will trigger another try build and if everything passes I will go ahead and request the landing of the patch.", "author": "hskupin@gmail.com", "id": 13260162, "time": "2018-05-07T17:59:11Z"}, {"text": "Lets file a new bug for the EV certs, so that we can update the tests once the domain is ready.", "author": "hskupin@gmail.com", "id": 13260530, "time": "2018-05-07T20:07:30Z"}, {"text": "Pushed by hskupin@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/77045639ed6c\n[fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org. r=maja_zf\nhttps://hg.mozilla.org/integration/autoland/rev/ed3b0284c348\n[fxui] Reset security.mixed_content.upgrade_display_content preference for mixed content test. r=maja_zf", "author": "pulsebot@bots.tld", "id": 13260533, "time": "2018-05-07T20:08:07Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/77045639ed6c\nhttps://hg.mozilla.org/mozilla-central/rev/ed3b0284c348", "author": "aiakab@mozilla.com", "id": 13262242, "time": "2018-05-08T12:57:44Z"}, {"text": "All tests look fine so please uplift the test-only patch to esr60. Thanks.", "author": "hskupin@gmail.com", "id": 13262291, "time": "2018-05-08T13:08:12Z"}, {"text": "Lets actually wait. Looks like we have some new intermittent failures.", "author": "hskupin@gmail.com", "id": 13262309, "time": "2018-05-08T13:11:38Z"}, {"text": "Does this need to go to Beta as well? If not, please update the 61 status to wontfix.", "author": "ryanvm@gmail.com", "id": 13268189, "time": "2018-05-10T14:08:16Z"}, {"text": "(In reply to Ryan VanderMeulen [:RyanVM] from comment #59)\n> Does this need to go to Beta as well? If not, please update the 61 status to\n> wontfix.\n\nWe cannot land this yet due to a regression on bug 1459910. I would even suggest that we backout this patch for now until we can guarantee stable network access to tls-v1-0.badssl.com. The failure rate is actually pretty high.\n\n(In reply to Arthur Iakab [arthur_iakab] from comment #56)\n> https://hg.mozilla.org/mozilla-central/rev/77045639ed6c\n> https://hg.mozilla.org/mozilla-central/rev/ed3b0284c348\n\nSheriffs, please backout those two patches. Thanks!", "author": "hskupin@gmail.com", "id": 13268568, "time": "2018-05-10T16:11:01Z"}, {"text": "Backout by ncsoregi@mozilla.com:\nhttps://hg.mozilla.org/mozilla-central/rev/c35f6059fced\nBacked out 2 changesets due to a regression on bug 1459910. a=backout", "author": "pulsebot@bots.tld", "id": 13268662, "time": "2018-05-10T16:36:55Z"}, {"text": "Henrik - I've had a network monitor on tls-v1-0.badssl.com:1010 for over a week without a single reported outage, and I've setup a debug build of Firefox and not been able to cause a TLS-related error with Firefox and tls-v1-0.badssl.com on my side.\n\nThe macOS builds are significantly different from the Linux/Windows ones, aren't they? Do they take place in a different location?\n\nWould it be possible to get someone from the Firefox networking team to take a look at this? I've done nearly everything I can to replicate the error, but as near as I can tell it seems confined entirely to try.\n\nThanks!", "author": "april@mozilla.com", "id": 13297389, "time": "2018-05-22T18:10:20Z"}, {"text": "Thanks April. Maybe this is related to the test and triggers a misbehavior in Firefox. I submitted a new try build for testing:\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=56357770a78b8edc82a3d4309c06bc88cc101ef8\n\nWhen I can still reproduce the problem I will try with a one-click loaner to get more details.", "author": "hskupin@gmail.com", "id": 13365032, "time": "2018-05-25T20:22:09Z"}, {"text": "Thanks, :whimboo. Sorry it's so nondeterministic.\n\nI've been monitoring the TLS 1.0 site every few minutes for two weeks now and still haven't triggered a single outage alert.", "author": "april@mozilla.com", "id": 13365097, "time": "2018-05-25T20:47:21Z"}, {"text": "The try build showed one of those failures:\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=56357770a78b8edc82a3d4309c06bc88cc101ef8&selectedJob=180314323\n\nI will retrigger some more jobs to see how often the test fails. I still wonder why this is OS X only.\n\nAlso I was able to reproduce it once when I run the test locally on Friday. I will try again today with HTTP logs enabled. Maybe I'm lucky and can fetch some details.", "author": "hskupin@gmail.com", "id": 13368570, "time": "2018-05-28T07:28:07Z"}, {"text": "The failure rate on Linux64 debug is higher than on MacOS and fails slightly differently:\n\nhttps://treeherder.mozilla.org/#/jobs?repo=try&revision=56357770a78b8edc82a3d4309c06bc88cc101ef8&selectedJob=180523503\n\n> AssertionError: 'tls-v1-0' not found in u'Secure Connection Failed'\n\nMaybe using a one-click loaner will make it easier for me to reproduce.", "author": "hskupin@gmail.com", "id": 13368719, "time": "2018-05-28T09:06:15Z"}], "id": 1414776, "priority": "P2", "mentors_detail": [], "cf_crash_signature": "", "version": "Version 3", "cf_qa_whiteboard": "", "cf_tracking_firefox_esr52": "---", "cf_tracking_firefox62": "---", "status": "REOPENED", "product": "Testing", "cf_fx_iteration": "---", "blocks": [], "qa_contact": "hskupin@gmail.com", "see_also": [], "cf_status_firefox_esr52": "---", "component": "Firefox UI Tests", "votes": 1, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "fix-optional", "cf_status_firefox60": "wontfix", "target_milestone": "---", "is_cc_accessible": true, "groups": [], "url": "", "creator_detail": {"email": "smani@mozilla.com", "id": 344991, "name": "smani@mozilla.com", "real_name": "Shyam Mani [:fox2mike]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "april@mozilla.com", "id": 119354, "name": "april@mozilla.com", "real_name": "April King [:April]"}, {"email": "atoll@mozilla.com", "id": 392417, "name": "atoll@mozilla.com", "real_name": "Atoll R. Soderberg  [:atoll, :rsoderberg]"}, {"email": "chris.j.thompson@gmail.com", "id": 610182, "name": "chris.j.thompson@gmail.com", "real_name": "Chris Thompson"}, {"email": "dkeeler@mozilla.com", "id": 349244, "name": "dkeeler@mozilla.com", "real_name": "[:keeler] (use needinfo)"}, {"email": "hskupin@gmail.com", "id": 76551, "name": "hskupin@gmail.com", "real_name": "Henrik Skupin (:whimboo)"}, {"email": "jan@ikenmeyer.eu", "id": 580271, "name": "jan@ikenmeyer.eu", "real_name": "Jan Andre Ikenmeyer [:darkspirit]"}, {"email": "jbryner@mozilla.com", "id": 479538, "name": "jbryner@mozilla.com", "real_name": "Jeff Bryner [:jeff]  (use NEEDINFO)"}, {"email": "jjones@mozilla.com", "id": 520206, "name": "jjones@mozilla.com", "real_name": "J.C. Jones [:jcj] (Leave between 24 Jun - 17 Aug)"}, {"email": "mjzffr@gmail.com", "id": 501532, "name": "mjzffr@gmail.com", "real_name": "Maja Frydrychowicz (:maja_zf) (away)"}, {"email": "ncsoregi@mozilla.com", "id": 600555, "name": "ncsoregi@mozilla.com", "real_name": "Natalia Csoregi [:nataliaCs]"}], "alias": null, "dupe_of": null, "flags": [{"requestee": "hskupin@gmail.com", "status": "?", "name": "needinfo", "modification_date": "2018-05-25T20:22:09Z", "type_id": 800, "creation_date": "2018-05-25T20:22:09Z", "id": 1761945, "setter": "hskupin@gmail.com"}], "last_change_time": "2018-05-28T09:06:15Z", "cf_status_firefox_esr60": "affected", "assigned_to": "hskupin@gmail.com", "is_open": true, "resolution": "", "op_sys": "Unspecified", "cf_fx_points": "---", "history": [{"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(dkeeler@mozilla.com)"}], "who": "smani@mozilla.com", "when": "2017-11-06T10:50:36Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "hskupin@gmail.com"}], "who": "hskupin@gmail.com", "when": "2017-11-06T11:24:39Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jjones@mozilla.com"}], "who": "jjones@mozilla.com", "when": "2017-11-07T19:17:31Z"}, {"changes": [{"removed": "needinfo?(dkeeler@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "dkeeler@mozilla.com", "when": "2017-11-07T21:10:22Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "april@mozilla.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(hskupin@gmail.com)"}], "who": "smani@mozilla.com", "when": "2018-01-16T19:02:49Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jbryner@mozilla.com"}], "who": "april@mozilla.com", "when": "2018-01-16T20:09:32Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "ASSIGNED"}, {"removed": "nobody@mozilla.org", "field_name": "assigned_to", "added": "hskupin@gmail.com"}, {"removed": "needinfo?(hskupin@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "hskupin@gmail.com", "when": "2018-01-18T12:55:10Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(april@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-01-18T13:32:05Z"}, {"changes": [{"removed": "needinfo?(april@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "april@mozilla.com", "when": "2018-01-18T18:08:33Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "chris.j.thompson@gmail.com"}, {"removed": "Migrate SSL related Firefox UI tests away from mozqa.com", "field_name": "summary", "added": "Migrate SSL related Firefox UI tests away from mozqa.com to badssl.com"}], "who": "april@mozilla.com", "when": "2018-01-19T15:33:22Z"}, {"changes": [{"removed": "--", "field_name": "priority", "added": "P2"}], "who": "hskupin@gmail.com", "when": "2018-02-05T08:22:37Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(april@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-02-09T14:13:01Z"}, {"changes": [{"removed": "needinfo?(april@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "april@mozilla.com", "when": "2018-02-09T17:34:58Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(april@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-02-23T08:18:32Z"}, {"changes": [{"removed": "needinfo?(april@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "april@mozilla.com", "when": "2018-02-23T15:28:33Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(smani@mozilla.com)"}], "who": "atoll@mozilla.com", "when": "2018-03-12T12:22:06Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(april@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-03-12T13:41:10Z"}, {"changes": [{"removed": "needinfo?(smani@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "atoll@mozilla.com", "when": "2018-03-12T14:18:28Z"}, {"changes": [{"removed": "needinfo?(april@mozilla.com)", "field_name": "flagtypes.name", "added": "needinfo?(hskupin@gmail.com)"}], "who": "april@mozilla.com", "when": "2018-03-13T17:10:22Z"}, {"changes": [{"removed": "needinfo?(hskupin@gmail.com)", "field_name": "flagtypes.name", "added": "needinfo?(april@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-03-21T10:26:23Z"}, {"changes": [{"removed": "needinfo?(april@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "april@mozilla.com", "when": "2018-03-21T18:41:15Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(april@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-04-05T11:47:19Z"}, {"changes": [{"removed": "needinfo?(april@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "april@mozilla.com", "when": "2018-04-18T18:23:32Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(hskupin@gmail.com)"}], "who": "hskupin@gmail.com", "when": "2018-04-30T15:29:52Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1458071"}], "who": "april@mozilla.com", "when": "2018-04-30T22:07:20Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1414776 - Change testcases from mozqa.com to badssl.com.", "attachment_id": 8943594, "added": "Bug 1414776 - Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org."}], "who": "hskupin@gmail.com", "when": "2018-05-03T13:35:10Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jan@ikenmeyer.eu"}], "who": "jan@ikenmeyer.eu", "when": "2018-05-03T13:35:44Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1435733"}, {"removed": "needinfo?(hskupin@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "hskupin@gmail.com", "when": "2018-05-03T13:37:38Z"}, {"changes": [{"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "affected"}, {"removed": "---", "field_name": "cf_status_firefox60", "added": "fix-optional"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "affected"}], "who": "hskupin@gmail.com", "when": "2018-05-03T13:38:09Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(april@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-05-03T13:54:29Z"}, {"changes": [{"removed": "needinfo?(april@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "april@mozilla.com", "when": "2018-05-03T14:02:48Z"}, {"changes": [{"field_name": "attachments.description", "removed": "Bug 1414776 - Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org.", "attachment_id": 8943594, "added": "Bug 1414776 - [fxui] Change testcases from mozqa.com to badssl.com and mixed-content-tests-mozilla.org."}], "who": "hskupin@gmail.com", "when": "2018-05-03T14:15:02Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8943594, "added": "review?(mjzffr@gmail.com)"}, {"field_name": "flagtypes.name", "removed": "", "attachment_id": 8972871, "added": "review?(mjzffr@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "mjzffr@gmail.com"}], "who": "hskupin@gmail.com", "when": "2018-05-03T14:15:21Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mjzffr@gmail.com)", "attachment_id": 8943594, "added": ""}], "who": "hskupin@gmail.com", "when": "2018-05-03T16:45:21Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(atoll@mozilla.com)"}], "who": "hskupin@gmail.com", "when": "2018-05-03T19:39:48Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8943594, "added": "review?(mjzffr@gmail.com)"}], "who": "hskupin@gmail.com", "when": "2018-05-03T19:42:16Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mjzffr@gmail.com)", "attachment_id": 8943594, "added": "review+"}], "who": "mjzffr@gmail.com", "when": "2018-05-04T19:01:48Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(mjzffr@gmail.com)", "attachment_id": 8972871, "added": "review+"}], "who": "mjzffr@gmail.com", "when": "2018-05-04T19:02:25Z"}, {"changes": [{"removed": "needinfo?(atoll@mozilla.com)", "field_name": "flagtypes.name", "added": ""}], "who": "atoll@mozilla.com", "when": "2018-05-06T17:17:59Z"}, {"changes": [{"removed": "Migrate SSL related Firefox UI tests away from mozqa.com to badssl.com", "field_name": "summary", "added": "Migrate SSL related Firefox UI tests away from mozqa.com to badssl.com [except EV certificate tests]"}], "who": "hskupin@gmail.com", "when": "2018-05-07T20:07:30Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1459716"}], "who": "hskupin@gmail.com", "when": "2018-05-07T20:09:40Z"}, {"changes": [{"removed": "1459716", "field_name": "blocks", "added": ""}, {"removed": "1458071", "field_name": "depends_on", "added": ""}], "who": "hskupin@gmail.com", "when": "2018-05-07T20:10:00Z"}, {"changes": [{"removed": "ASSIGNED", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-08 12:57:44"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "aiakab@mozilla.com", "when": "2018-05-08T12:57:44Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": "[checkin-needed-esr60]"}], "who": "hskupin@gmail.com", "when": "2018-05-08T13:08:12Z"}, {"changes": [{"removed": "[checkin-needed-esr60]", "field_name": "whiteboard", "added": ""}], "who": "hskupin@gmail.com", "when": "2018-05-08T13:11:38Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1459910"}], "who": "hskupin@gmail.com", "when": "2018-05-08T13:13:21Z"}, {"changes": [{"removed": "fix-optional", "field_name": "cf_status_firefox60", "added": "wontfix"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T14:08:16Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "sheriffs@mozilla.bugs"}, {"removed": "affected", "field_name": "cf_status_firefox61", "added": "fix-optional"}], "who": "hskupin@gmail.com", "when": "2018-05-10T16:11:01Z"}, {"changes": [{"removed": "RESOLVED", "field_name": "status", "added": "REOPENED"}, {"removed": "", "field_name": "cc", "added": "ncsoregi@mozilla.com"}, {"removed": "FIXED", "field_name": "resolution", "added": ""}], "who": "ncsoregi@mozilla.com", "when": "2018-05-10T16:56:50Z"}, {"changes": [{"removed": "fixed", "field_name": "cf_status_firefox62", "added": "---"}], "who": "ncsoregi@mozilla.com", "when": "2018-05-10T16:57:02Z"}, {"changes": [{"removed": "mozilla62", "field_name": "target_milestone", "added": "---"}], "who": "ncsoregi@mozilla.com", "when": "2018-05-10T16:57:30Z"}, {"changes": [{"removed": "sheriffs@mozilla.bugs", "field_name": "cc", "added": ""}], "who": "aryx.bugmail@gmx-topmail.de", "when": "2018-05-11T08:08:28Z"}, {"changes": [{"removed": "", "field_name": "depends_on", "added": "1312632"}], "who": "hskupin@gmail.com", "when": "2018-05-11T14:49:38Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(hskupin@gmail.com)"}], "who": "hskupin@gmail.com", "when": "2018-05-25T20:22:09Z"}]}