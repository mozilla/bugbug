{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "---", "classification": "Components", "creator": "gps@mozilla.com", "cc": ["ted@mielczarek.org"], "depends_on": [], "creation_time": "2016-08-26T00:40:28Z", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "summary": "pip doesn't work in msys2 environment, artifact builds broken with \"ImportError: No module named taskcluster\"", "cf_last_resolved": "2018-04-18T22:54:49Z", "attachments": [], "assigned_to_detail": {"email": "nobody@mozilla.org", "id": 1, "name": "nobody@mozilla.org", "real_name": "Nobody; OK to take it and work on it"}, "severity": "normal", "is_confirmed": true, "is_creator_accessible": true, "comments": [{"text": "`pip install` isn't working in the msys2 environment. It appears to work but doesn't actually install .py files in the proper locations. Why, I don't know.\n\nVarious parts of the build and development environment are broken because of this, notably artifact builds.\n\nWe could workaround by vendoring Python dependencies. But we really need to figure out what's wrong and fix it.\n\nHere is a full example failure from an artifact build:\n\n 0:46.35 Collecting six (from configobj->mozregression==1.0.2)\n 0:46.43   Using cached six-1.10.0-py2.py3-none-any.whl\n 0:46.46 Installing collected packages: mozfile, mozinfo, requests, blessings, mozlog, mozprofile, mozprocess, moznetwork, mozdevice, mozrunner, six, configobj, mozversion, BeautifulSoup, mozinstall, mozregression\n 0:46.51   Found existing installation: requests 2.9.1\n 0:46.51     Not uninstalling requests at c:/dev/src/firefox/python/requests, outside environment C:/dev/src/firefox/obj-x86_64-pc-mingw64/_virtualenv\n 0:48.30 Successfully installed BeautifulSoup-3.2.1 blessings-1.6 configobj-5.0.6 mozdevice-0.48 mozfile-1.2 mozinfo-0.9 mozinstall-1.12 mozlog-3.3 moznetwork-0.27 mozprocess-0.23 mozprofile-0.28 mozregression-1.0.2 mozrunner-6.12 mozversion-1.4 requests-2.7.0 six-1.10.0\n 0:48.48 Error running mach:\n 0:48.48\n 0:48.49     ['--log-no-times', 'artifact', 'install']\n 0:48.49\n 0:48.49 The error occurred in code that was called by the mach command. This is either\n 0:48.49 a bug in the called code itself or in the way that mach is calling it.\n 0:48.49\n 0:48.49 You should consider filing a bug for this issue.\n 0:48.49\n 0:48.49 If filing a bug, please include the full output of mach, including this error\n 0:48.49 message.\n 0:48.49\n 0:48.49 The details of the failure are as follows:\n 0:48.49\n 0:48.49 ImportError: No module named taskcluster\n 0:48.49\n 0:48.49   File \"C:/dev/src/firefox/python/mozbuild/mozbuild/mach_commands.py\", line 1513, in artifact_install\n 0:48.49     artifacts = self._make_artifacts(tree=tree, job=job, skip_cache=skip_cache)\n 0:48.49   File \"C:/dev/src/firefox/python/mozbuild/mozbuild/mach_commands.py\", line 1494, in _make_artifacts\n 0:48.49     from mozbuild.artifacts import Artifacts\n 0:48.49   File \"C:/dev/src/firefox/build/mach_bootstrap.py\", line 371, in __call__\n 0:48.49     module = self._original_import(name, globals, locals, fromlist, level)\n 0:48.49   File \"C:/dev/src/firefox/python/mozbuild/mozbuild/artifacts.py\", line 64, in <module>\n 0:48.49     import taskcluster\n 0:48.49   File \"C:/dev/src/firefox/build/mach_bootstrap.py\", line 371, in __call__\n 0:48.49     module = self._original_import(name, globals, locals, fromlist, level)\n 0:48.51 Makefile:249: recipe for target 'recurse_artifact' failed\n 0:48.51 mingw32-make.EXE[4]: *** [recurse_artifact] Error 1\n 0:48.51 C:/dev/src/firefox/config/recurse.mk:32: recipe for target 'artifact' failed\n 0:48.51 mingw32-make.EXE[3]: *** [artifact] Error 2\n 0:48.51 C:/dev/src/firefox/config/rules.mk:539: recipe for target 'default' failed\n 0:48.51 mingw32-make.EXE[2]: *** [default] Error 2\n 0:48.51 C:/dev/src/firefox/client.mk:413: recipe for target 'realbuild' failed\n 0:48.51 mingw32-make.EXE[1]: *** [realbuild] Error 2\n 0:48.51 client.mk:168: recipe for target 'build' failed\n 0:48.51 mingw32-make.EXE: *** [build] Error 2\n 0:48.52 233 compiler warnings present.", "author": "gps@mozilla.com", "id": 11657006, "time": "2016-08-26T00:40:28Z"}, {"text": "We're not going to support msys2.", "author": "ted@mielczarek.org", "id": 13217058, "time": "2018-04-18T22:54:49Z"}], "id": 1298240, "priority": "--", "mentors_detail": [], "comment_count": 2, "cf_status_thunderbird_esr52": "---", "cf_qa_whiteboard": "", "version": "unspecified", "cf_tracking_firefox62": "---", "cf_platform_rel": "---", "product": "Firefox Build System", "cf_fx_iteration": "---", "blocks": [1298239], "qa_contact": "", "see_also": [], "cf_status_firefox_esr52": "---", "component": "General", "votes": 0, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "---", "cf_status_firefox61": "---", "cf_status_firefox60": "---", "target_milestone": "---", "is_cc_accessible": true, "cf_tracking_thunderbird_esr60": "---", "groups": [], "cf_tracking_firefox_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "gps@mozilla.com", "id": 420446, "name": "gps@mozilla.com", "real_name": "Gregory Szorc [:gps]"}, "whiteboard": "", "mentors": [], "cc_detail": [{"email": "ted@mielczarek.org", "id": 39022, "name": "ted@mielczarek.org", "real_name": "Ted Mielczarek [:ted.mielczarek]"}], "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-04-18T22:54:49Z", "cf_status_firefox_esr60": "---", "assigned_to": "nobody@mozilla.org", "is_open": false, "history": [{"changes": [{"removed": "Core", "field_name": "product", "added": "Firefox Build System"}], "who": "automation@bmo.tld", "when": "2018-03-02T20:12:20Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "cc", "added": "ted@mielczarek.org"}, {"removed": "", "field_name": "resolution", "added": "INVALID"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-04-18 22:54:49"}], "who": "ted@mielczarek.org", "when": "2018-04-18T22:54:49Z"}], "resolution": "INVALID", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}