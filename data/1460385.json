{"cf_tracking_thunderbird_esr52": "---", "status": "RESOLVED", "cf_tracking_firefox60": "---", "cf_tracking_firefox61": "+", "cf_tracking_firefox62": "+", "creator": "continuation@gmail.com", "mentors_detail": [], "depends_on": [], "cf_status_firefox_esr60": "wontfix", "cf_user_story": "", "cf_tracking_firefox_relnote": "---", "platform": "Unspecified", "keywords": [], "cc_detail": [{"email": "adrian.wielgosik@gmail.com", "id": 597303, "name": "adrian.wielgosik@gmail.com", "real_name": "Adrian Wielgosik [:adrian17]"}, {"email": "gandalf@aviary.pl", "id": 41270, "name": "gandalf@aviary.pl", "real_name": "Zibi Braniecki [:gandalf][:zibi]"}, {"email": "geo.mih93@gmail.com", "id": 490494, "name": "geo.mih93@gmail.com", "real_name": ""}, {"email": "jcoppeard@mozilla.com", "id": 443194, "name": "jcoppeard@mozilla.com", "real_name": "Jon Coppeard (:jonco)"}, {"email": "jcristau@mozilla.com", "id": 580382, "name": "jcristau@mozilla.com", "real_name": "Julien Cristau [:jcristau]"}, {"email": "jdemooij@mozilla.com", "id": 375297, "name": "jdemooij@mozilla.com", "real_name": "Jan de Mooij [:jandem]"}, {"email": "jiri.pospisil@live.com", "id": 566642, "name": "jiri.pospisil@live.com", "real_name": ""}, {"email": "josh@joshmatthews.net", "id": 241497, "name": "josh@joshmatthews.net", "real_name": "Josh Matthews [:jdm]"}, {"email": "madperson@gmx.at", "id": 209011, "name": "madperson@gmx.at", "real_name": "[:philipp]"}, {"email": "rtanglao@mozilla.com", "id": 352356, "name": "rtanglao@mozilla.com", "real_name": "Roland Tanglao needinfo please :rolandtanglao, :mohnkuchen, :adobo, :sinigang, :roland"}, {"email": "ryanvm@gmail.com", "id": 75935, "name": "ryanvm@gmail.com", "real_name": "Ryan VanderMeulen [:RyanVM]"}, {"email": "sledru@mozilla.com", "id": 495955, "name": "sledru@mozilla.com", "real_name": "Sylvestre Ledru [:sylvestre]"}, {"email": "sphink@gmail.com", "id": 359004, "name": "sphink@gmail.com", "real_name": "Steve Fink [:sfink] [:s:] (PTO June 31)"}, {"email": "Tobias.Marty@gmx.de", "id": 572549, "name": "Tobias.Marty@gmx.de", "real_name": "TMart"}, {"email": "yoasif@gmail.com", "id": 347239, "name": "yoasif@gmail.com", "real_name": "Asif Youssuff"}], "cf_last_resolved": "2018-05-10T09:55:05Z", "attachments": [{"creator": "continuation@gmail.com", "is_obsolete": 0, "is_patch": 0, "flags": [{"status": "+", "name": "review", "modification_date": "2018-05-09T21:10:07Z", "type_id": 4, "creation_date": "2018-05-09T19:44:50Z", "id": 1754849, "setter": "sphink@gmail.com"}, {"status": "+", "name": "approval-mozilla-beta", "modification_date": "2018-05-10T16:06:26Z", "type_id": 721, "creation_date": "2018-05-10T16:04:11Z", "id": 1755321, "setter": "ryanvm@gmail.com"}], "content_type": "text/x-review-board-request", "id": 8974510}], "votes": 2, "classification": "Components", "is_confirmed": true, "is_creator_accessible": true, "cf_has_regression_range": "---", "comment_count": 17, "comments": [{"text": "Jan noticed in bug 1460052 comment 4 that the profile in bug 1242861 comment 42 was spending most of its time tracing a propid which is a jsid... but the cycle collector never cares about jsids! They can only either be non-GC things, or strings or symbols. We should just delete this line.", "author": "continuation@gmail.com", "id": 13266253, "time": "2018-05-09T18:36:55Z"}, {"text": "Created attachment 8974510\nBug 1460385 - Don't trace propid in TraceCycleCollectorChildren.\n\nThe propid is a jsid, and a jsid can never be anything the CC cares\nabout, so there's no reason to trace it. In at least one profile of\nGoogle Inbox, tracing shape propids is taking the majority of time in\nthe CC and causing very long pauses.\n\nReview commit: https://reviewboard.mozilla.org/r/242846/diff/#index_header\nSee other reviews: https://reviewboard.mozilla.org/r/242846/", "author": "continuation@gmail.com", "id": 13266458, "time": "2018-05-09T19:44:50Z"}, {"text": "We're early in the cycle, and this patch is extremely simple, so we may want to backport it to beta if it really does fix 10 second hangs on Google Inbox.", "author": "continuation@gmail.com", "id": 13266475, "time": "2018-05-09T19:53:31Z"}, {"text": "Comment on attachment 8974510\nBug 1460385 - Don't trace propid in TraceCycleCollectorChildren.\n\nhttps://reviewboard.mozilla.org/r/242846/#review248726\n\nUh, yeah.", "author": "sphink@gmail.com", "id": 13266721, "time": "2018-05-09T21:10:07Z"}, {"text": "Pushed by amccreight@mozilla.com:\nhttps://hg.mozilla.org/integration/autoland/rev/b830e5f05a78\nDon't trace propid in TraceCycleCollectorChildren. r=sfink", "author": "pulsebot@bots.tld", "id": 13266754, "time": "2018-05-09T21:20:31Z"}, {"text": "https://hg.mozilla.org/mozilla-central/rev/b830e5f05a78", "author": "ncsoregi@mozilla.com", "id": 13267759, "time": "2018-05-10T09:55:05Z"}, {"text": "Sounds like this could possibly be a significant perf win? Should we consider backporting this given what a simple patch it is?", "author": "ryanvm@gmail.com", "id": 13268220, "time": "2018-05-10T14:17:16Z"}, {"text": "See comment 2.", "author": "continuation@gmail.com", "id": 13268228, "time": "2018-05-10T14:19:28Z"}, {"text": "Users on reddit are noticing and reporting this issue as they update to Fx60. We may want to keep this on the dot release radar.", "author": "ryanvm@gmail.com", "id": 13268451, "time": "2018-05-10T15:36:27Z"}, {"text": "evilpie just posted this profile from reddit in #jsapi:\n\nhttps://perf-html.io/public/8c71da2a0e685c8d4106216977006dff7b416fb7/calltree/?hiddenThreads=6-4-3-2&thread=8&threadOrder=0-2-3-4-5-6-8-1-7&v=3\n\nThis is tracing of ObjectGroup property ids here:\n\nhttps://searchfox.org/mozilla-central/rev/eb6c5214a63e20a3fff455e92c876287a8d2e188/js/src/gc/Marking.cpp#1462\n\nCalled here:\n\nhttps://searchfox.org/mozilla-central/rev/eb6c5214a63e20a3fff455e92c876287a8d2e188/js/src/gc/Tracer.cpp#279", "author": "jdemooij@mozilla.com", "id": 13268456, "time": "2018-05-10T15:37:39Z"}, {"text": "we're getting reports on sumo as well:\nhttps://support.mozilla.org/en-US/questions/1217102\nhttps://perfht.ml/2KdgP5V\nhttps://perfht.ml/2wAjWDo", "author": "madperson@gmx.at", "id": 13268460, "time": "2018-05-10T15:39:13Z"}, {"text": "(In reply to Ryan VanderMeulen [:RyanVM] from comment #8)\n> Users on reddit are noticing and reporting this issue as they update to\n> Fx60. We may want to keep this on the dot release radar.\n\nWhat are they noticing? Long pauses on Google Inbox?\n\n(In reply to Jan de Mooij [:jandem] from comment #9)\n> evilpie just posted this profile from reddit in #jsapi:\n\nYeah, that was also showing up in the Google Inbox profile from the other bug. I thought it was something that was calling back into the same code I patched here, but looking at it again, you are right, there's a separate place that is tracing these jsids.\n\n(In reply to [:philipp] from comment #10)\n> we're getting reports on sumo as well:\n> https://support.mozilla.org/en-US/questions/1217102\n\nI looked at the second profile posted there, and it is similar to evilpie's. In other words, it is happening on that |TraceEdge(trc, &prop->id, \"group_property\");| line, which will unfortunately not be fixed by this patch.", "author": "continuation@gmail.com", "id": 13268488, "time": "2018-05-10T15:48:50Z"}, {"text": "I filed bug 1460636 for the group property issue.", "author": "continuation@gmail.com", "id": 13268511, "time": "2018-05-10T15:53:27Z"}, {"text": "Comment on attachment 8974510\nBug 1460385 - Don't trace propid in TraceCycleCollectorChildren.\n\nApproval Request Comment\n[Feature/Bug causing the regression]: Unknown, but something seems to have made this code much slower in 60.\n[User impact if declined]: Multisecond pauses on some web pages.\n[Is this code covered by automated tests?]: Yes, we run this code all the time.\n[Has the fix been verified in Nightly?]: No. I don't think we have good steps to reproduce the issue, but the profiler results are clear.\n[Needs manual test from QE? If yes, steps to reproduce]: We still need STR, and if we had them, it seems like there are other similar issues that might still be causing problems.\n[List of other uplifts needed for the feature/fix]: None.\n[Is the change risky?]: No.\n[Why is the change risky/not risky?]: It just deletes a line of code that we don't need. If somehow my reasoning is wrong, it could cause leaks. Normally, I'd wait for a few Nightlys to make sure there's no problems, but this might need to get landed on Release, so I figure it is good to get testing on Beta quickly.\n[String changes made/needed]: None", "author": "continuation@gmail.com", "id": 13268547, "time": "2018-05-10T16:04:11Z"}, {"text": "Comment on attachment 8974510\nBug 1460385 - Don't trace propid in TraceCycleCollectorChildren.\n\nApproved for 61.0b4. Hopefully it'll help, even if there's more follow-up work needed still in the other bug.", "author": "ryanvm@gmail.com", "id": 13268553, "time": "2018-05-10T16:06:26Z"}, {"text": "https://hg.mozilla.org/releases/mozilla-beta/rev/1c40b4b4e812", "author": "ryanvm@gmail.com", "id": 13268571, "time": "2018-05-10T16:12:47Z"}, {"text": "This fixes an issue on Google Inbox that is similar to bug 1449033, but it isn't quite the same issue. This patch should be very low risk, but we shipped this perf fault at least as far back as 59, so it doesn't feel critical enough to land on release. It should be fixed in Firefox 61.", "author": "continuation@gmail.com", "id": 13276564, "time": "2018-05-14T18:22:16Z"}], "id": 1460385, "priority": "--", "cc": ["adrian.wielgosik@gmail.com", "gandalf@aviary.pl", "geo.mih93@gmail.com", "jcoppeard@mozilla.com", "jcristau@mozilla.com", "jdemooij@mozilla.com", "jiri.pospisil@live.com", "josh@joshmatthews.net", "madperson@gmx.at", "rtanglao@mozilla.com", "ryanvm@gmail.com", "sledru@mozilla.com", "sphink@gmail.com", "Tobias.Marty@gmx.de", "yoasif@gmail.com"], "cf_crash_signature": "", "version": "unspecified", "is_cc_accessible": true, "cf_tracking_firefox_esr52": "---", "see_also": ["https://bugzilla.mozilla.org/show_bug.cgi?id=1460636", "https://bugzilla.mozilla.org/show_bug.cgi?id=1447391"], "cf_tracking_thunderbird_esr60": "---", "cf_platform_rel": "---", "product": "Core", "cf_fx_iteration": "---", "blocks": [1242861, 1462054], "qa_contact": "", "creation_time": "2018-05-09T18:36:55Z", "cf_status_firefox_esr52": "wontfix", "component": "JavaScript: GC", "assigned_to_detail": {"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, "cf_tracking_firefox_esr60": "---", "cf_status_firefox62": "fixed", "cf_status_firefox61": "fixed", "cf_status_firefox60": "wontfix", "target_milestone": "mozilla62", "cf_rank": null, "cf_qa_whiteboard": "", "severity": "normal", "groups": [], "cf_status_thunderbird_esr52": "---", "url": "", "cf_status_thunderbird_esr60": "---", "creator_detail": {"email": "continuation@gmail.com", "id": 406194, "name": "continuation@gmail.com", "real_name": "Andrew McCreight [:mccr8]"}, "whiteboard": "[qf]", "mentors": [], "summary": "Don't trace propid in TraceCycleCollectorChildren", "cf_has_str": "---", "alias": null, "dupe_of": null, "flags": [], "last_change_time": "2018-05-16T17:32:50Z", "assigned_to": "continuation@gmail.com", "is_open": false, "history": [{"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8974510, "added": "review?(sphink@gmail.com)"}, {"removed": "", "field_name": "cc", "added": "sphink@gmail.com"}], "who": "continuation@gmail.com", "when": "2018-05-09T19:44:50Z"}, {"changes": [{"removed": "---", "field_name": "cf_status_firefox60", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox61", "added": "affected"}, {"removed": "---", "field_name": "cf_status_firefox62", "added": "affected"}], "who": "continuation@gmail.com", "when": "2018-05-09T19:53:31Z"}, {"changes": [{"removed": "", "field_name": "whiteboard", "added": "[qf]"}], "who": "continuation@gmail.com", "when": "2018-05-09T19:53:47Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "review?(sphink@gmail.com)", "attachment_id": 8974510, "added": "review+"}], "who": "sphink@gmail.com", "when": "2018-05-09T21:10:07Z"}, {"changes": [{"removed": "NEW", "field_name": "status", "added": "RESOLVED"}, {"removed": "", "field_name": "resolution", "added": "FIXED"}, {"removed": "---", "field_name": "target_milestone", "added": "mozilla62"}, {"removed": "", "field_name": "cf_last_resolved", "added": "2018-05-10 09:55:05"}, {"removed": "affected", "field_name": "cf_status_firefox62", "added": "fixed"}], "who": "ncsoregi@mozilla.com", "when": "2018-05-10T09:55:05Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "ryanvm@gmail.com"}, {"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(continuation@gmail.com)"}, {"removed": "---", "field_name": "cf_status_firefox_esr52", "added": "wontfix"}, {"removed": "---", "field_name": "cf_status_firefox_esr60", "added": "affected"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T14:17:16Z"}, {"changes": [{"removed": "needinfo?(continuation@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "continuation@gmail.com", "when": "2018-05-10T14:19:28Z"}, {"changes": [{"removed": "---", "field_name": "cf_tracking_firefox_esr60", "added": "?"}, {"removed": "---", "field_name": "cf_tracking_firefox60", "added": "?"}, {"removed": "wontfix", "field_name": "cf_status_firefox60", "added": "affected"}, {"removed": "---", "field_name": "cf_tracking_firefox61", "added": "+"}, {"removed": "---", "field_name": "cf_tracking_firefox62", "added": "+"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T15:36:27Z"}, {"changes": [{"removed": "", "field_name": "flagtypes.name", "added": "needinfo?(continuation@gmail.com)"}], "who": "jdemooij@mozilla.com", "when": "2018-05-10T15:37:49Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "madperson@gmx.at"}], "who": "madperson@gmx.at", "when": "2018-05-10T15:39:13Z"}, {"changes": [{"removed": "needinfo?(continuation@gmail.com)", "field_name": "flagtypes.name", "added": ""}], "who": "continuation@gmail.com", "when": "2018-05-10T15:48:50Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1460636"}], "who": "continuation@gmail.com", "when": "2018-05-10T15:51:54Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "gandalf@aviary.pl"}], "who": "gandalf@aviary.pl", "when": "2018-05-10T15:57:45Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "", "attachment_id": 8974510, "added": "approval-mozilla-beta?"}], "who": "continuation@gmail.com", "when": "2018-05-10T16:04:11Z"}, {"changes": [{"field_name": "flagtypes.name", "removed": "approval-mozilla-beta?", "attachment_id": 8974510, "added": "approval-mozilla-beta+"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T16:06:26Z"}, {"changes": [{"removed": "affected", "field_name": "cf_status_firefox61", "added": "fixed"}], "who": "ryanvm@gmail.com", "when": "2018-05-10T16:12:47Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1447391"}], "who": "continuation@gmail.com", "when": "2018-05-10T16:24:06Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "Tobias.Marty@gmx.de"}], "who": "Tobias.Marty@gmx.de", "when": "2018-05-10T16:40:12Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "yoasif@gmail.com"}], "who": "yoasif@gmail.com", "when": "2018-05-10T18:21:00Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "adrian.wielgosik@gmail.com"}], "who": "adrian.wielgosik@gmail.com", "when": "2018-05-10T18:40:18Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "geo.mih93@gmail.com"}], "who": "geo.mih93@gmail.com", "when": "2018-05-10T22:04:22Z"}, {"changes": [{"removed": "", "field_name": "see_also", "added": "https://bugzilla.mozilla.org/show_bug.cgi?id=1449033"}], "who": "continuation@gmail.com", "when": "2018-05-11T05:48:57Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jiri.pospisil@live.com"}], "who": "jiri.pospisil@live.com", "when": "2018-05-11T07:24:24Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "jcristau@mozilla.com"}], "who": "jcristau@mozilla.com", "when": "2018-05-11T08:19:32Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "sledru@mozilla.com"}], "who": "sledru@mozilla.com", "when": "2018-05-11T08:25:14Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "rtanglao@mozilla.com"}], "who": "rtanglao@mozilla.com", "when": "2018-05-11T17:53:46Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1449033"}, {"removed": "https://bugzilla.mozilla.org/show_bug.cgi?id=1449033", "field_name": "see_also", "added": ""}], "who": "continuation@gmail.com", "when": "2018-05-11T20:20:05Z"}, {"changes": [{"removed": "1449033", "field_name": "blocks", "added": ""}, {"removed": "?", "field_name": "cf_tracking_firefox_esr60", "added": "---"}, {"removed": "affected", "field_name": "cf_status_firefox_esr60", "added": "wontfix"}, {"removed": "?", "field_name": "cf_tracking_firefox60", "added": "---"}, {"removed": "affected", "field_name": "cf_status_firefox60", "added": "wontfix"}], "who": "continuation@gmail.com", "when": "2018-05-14T18:22:16Z"}, {"changes": [{"removed": "", "field_name": "cc", "added": "josh@joshmatthews.net"}], "who": "josh@joshmatthews.net", "when": "2018-05-16T13:59:23Z"}, {"changes": [{"removed": "", "field_name": "blocks", "added": "1462054"}], "who": "continuation@gmail.com", "when": "2018-05-16T17:32:50Z"}], "resolution": "FIXED", "op_sys": "Unspecified", "cf_fx_points": "---", "cf_blocking_fennec": "---"}